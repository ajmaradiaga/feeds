<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>https://raw.githubusercontent.com/ajmaradiaga/feeds/main/scmt/topics/SAP-Cloud-Application-Programming-Model-qa.xml</id>
  <title>SAP Community - SAP Cloud Application Programming Model</title>
  <updated>2025-10-17T02:00:49.328870+00:00</updated>
  <link href="https://community.sap.com/t5/c-khhcw49343/SAP Cloud Application Programming Model/pd-p/9f13aee1-834c-4105-8e43-ee442775e5ce" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator>
  <subtitle>SAP Cloud Application Programming Model Q&amp;A in SAP Community</subtitle>
  <entry>
    <id>https://community.sap.com/t5/enterprise-resource-planning-q-a/unable-to-select-structured-type-property-in-cds-entity/qaq-p/14218941</id>
    <title>Unable to Select Structured Type Property in CDS Entity</title>
    <updated>2025-09-16T17:07:29.327000+02:00</updated>
    <author>
      <name>marwa_l</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1392715</uri>
    </author>
    <content>&lt;P&gt;Hello&amp;nbsp;&lt;/P&gt;&lt;P&gt;I defined a new type in the CDS service as follows:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;type MyNewType {
    prop1 : String;
    prop2 : String;
    prop3 : String;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;I then used this type in a property within an entity like this:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;entity MyEntity {
    period     : String;
    resolution : String;
    properties : MyNewType;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;However, when I try to select this property using $select=properties, the framework returns an error.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;{
    "error": {
        "code": "400",
        "message": "The property 'properties', used in a query expression, is not defined in type 'MyEntity'."
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;I don't see any issue with my declaration. Could you please help me identify and resolve the problem?&lt;BR /&gt;&lt;BR /&gt;Thanks !&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-resource-planning-q-a/unable-to-select-structured-type-property-in-cds-entity/qaq-p/14218941"/>
    <published>2025-09-16T17:07:29.327000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/how-to-handle-cross-global-account-subscriptions-and-customer-managed-hana/qaq-p/14218979</id>
    <title>How to Handle Cross-Global Account Subscriptions and Customer-Managed HANA in CAP SaaS?</title>
    <updated>2025-09-16T17:54:13.141000+02:00</updated>
    <author>
      <name>MoudhafferAzizi</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2119453</uri>
    </author>
    <content>&lt;P&gt;A SaaS solution built using &lt;STRONG&gt;SAP CAP (Node.js)&lt;/STRONG&gt; with &lt;STRONG&gt;MTX-enabled multitenancy&lt;/STRONG&gt; is currently running in production with several subscribed tenants (subaccounts under the same global account).&lt;/P&gt;&lt;P&gt;The solution is deployed as an MTA in a &lt;STRONG&gt;provider subaccount&lt;/STRONG&gt;, while each customer has a &lt;STRONG&gt;dedicated subscriber subaccount&lt;/STRONG&gt; to consume the application.&lt;/P&gt;&lt;H3 id="toc-hId-1889237892"&gt;HANA setup&lt;/H3&gt;&lt;P&gt;At the moment, I use a &lt;STRONG&gt;shared HANA Cloud database&lt;/STRONG&gt;. The &lt;STRONG&gt;MTX sidecar&lt;/STRONG&gt; creates a Service Manager HDI container for each tenant, and together with the CDS framework, it handles multitenancy properly.&lt;/P&gt;&lt;H3 id="toc-hId-1692724387"&gt;Customer concern&lt;/H3&gt;&lt;P&gt;One customer raised &lt;STRONG&gt;data privacy concerns&lt;/STRONG&gt;, since the solution connects to their &lt;STRONG&gt;S/4HANA system&lt;/STRONG&gt; (via Cloud Connector) and stores data in &lt;STRONG&gt;our HANA Cloud&lt;/STRONG&gt;.&lt;/P&gt;&lt;H3 id="toc-hId-1496210882"&gt;My questions&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;Part 1:&lt;/STRONG&gt; Is it possible for a customer to subscribe to the SaaS application from a &lt;STRONG&gt;subaccount in a different global account&lt;/STRONG&gt; (not the same global account as the provider subaccount)? I am particularly thinking about potential &lt;STRONG&gt;XSUAA-related challenges&lt;/STRONG&gt; here.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Part 2:&lt;/STRONG&gt; Is it possible to support a &lt;STRONG&gt;‚Äúbring your own HANA‚Äù (BYO HANA)&lt;/STRONG&gt; model, where the CDS framework would connect to a &lt;STRONG&gt;customer-managed HANA instance&lt;/STRONG&gt; instead of the shared one?&lt;/P&gt;&lt;P&gt;I understand this may be a stretch given the current state of CAP applications, but I‚Äôd appreciate any insights into what &lt;STRONG&gt;SAP offers in terms of architectural possibilities and limitations&lt;/STRONG&gt; in this area.&lt;BR /&gt;&lt;BR /&gt;Thank you !&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/how-to-handle-cross-global-account-subscriptions-and-customer-managed-hana/qaq-p/14218979"/>
    <published>2025-09-16T17:54:13.141000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/how-to-consume-odata-service-in-fiori-app-using-approuter-and-destination/qaq-p/14223673</id>
    <title>How to consume OData service in Fiori app using approuter and destination in Cloud Foundry (404 Not</title>
    <updated>2025-09-22T08:16:44.467000+02:00</updated>
    <author>
      <name>Miriamlpa</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2078938</uri>
    </author>
    <content>&lt;P&gt;Hello Community,&lt;/P&gt;&lt;P&gt;I am developing a CAP project on SAP BTP, Cloud Foundry. I want to consume an OData V4 service from a Fiori (UI5) application using approuter and a destination.&lt;/P&gt;&lt;P&gt;- Backend (CAP, OData V4):&lt;BR /&gt;https://&amp;lt;subdomain&amp;gt;-back.cfapps.&amp;lt;region&amp;gt;.hana.ondemand.com/odata/v4/invitacion/ReadProveedor&lt;/P&gt;&lt;P&gt;- Frontend (Fiori + approuter):&lt;BR /&gt;https://&amp;lt;subdomain&amp;gt;-frontend.cfapps.&amp;lt;region&amp;gt;.hana.ondemand.com/frontfront/index.html&lt;/P&gt;&lt;P&gt;### Approuter (xs-app.json)&lt;BR /&gt;```json&lt;BR /&gt;{&lt;BR /&gt;"welcomeFile": "/frontfront/index.html",&lt;BR /&gt;"routes": [&lt;BR /&gt;{&lt;BR /&gt;"source": "^/backend/(.*)$",&lt;BR /&gt;"target": "/$1",&lt;BR /&gt;"destination": "SRV_BACKEND",&lt;BR /&gt;"authenticationType": "xsuaa"&lt;BR /&gt;}&lt;BR /&gt;]&lt;BR /&gt;}&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Destination in BTP cockpit&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Name: SRV_BACKEND&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;URL: https://-back.cfapps..hana.ondemand.com&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;ProxyType: Internet&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Authentication: OAuth2JWTBearer&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Frontend manifest.json&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;"dataSources": {&lt;BR /&gt;"backend_odata": {&lt;BR /&gt;"uri": "/backend/odata/v4/invitacion/",&lt;BR /&gt;"type": "OData",&lt;BR /&gt;"settings": { "odataVersion": "4.0" }&lt;BR /&gt;}&lt;BR /&gt;}&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Problem&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;When the app tries to load metadata (/backend/odata/v4/invitacion/$metadata), I receive 404 Not Found.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Accessing the backend service directly via its URL works fine.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;What I tried&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Verified that the destination exists in BTP cockpit and points to the backend URL.&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Checked the backend service directly (responds correctly).&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Reviewed approuter logs ‚Äî I see messages like ‚ÄúMissing internal url for request ‚Ä¶‚Äù.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;What configuration should I adjust in the approuter or the destination so that the frontend Fiori app can correctly consume the OData service via /backend/...?&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Any guidance or working examples would be greatly appreciated&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/how-to-consume-odata-service-in-fiori-app-using-approuter-and-destination/qaq-p/14223673"/>
    <published>2025-09-22T08:16:44.467000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/crm-and-cx-q-a/when-deploying-capm-app-in-trial-facing-error-insufficient-resources/qaq-p/14224177</id>
    <title>When deploying CAPM app in trial facing error; Insufficient resources.</title>
    <updated>2025-09-22T14:21:00.265000+02:00</updated>
    <author>
      <name>anmolbhatia003</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/681888</uri>
    </author>
    <content>&lt;P&gt;Hello All,&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;I have created a new CAPM application, when trying to deploy the same. I am getting insufficient resources error.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp; InsufficientResources - Insufficient resources&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Tried with different accounts getting same error.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/crm-and-cx-q-a/when-deploying-capm-app-in-trial-facing-error-insufficient-resources/qaq-p/14224177"/>
    <published>2025-09-22T14:21:00.265000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/crm-and-cx-q-a/unable-to-use-fiori-element-app-inside-an-iframe/qaq-p/14224183</id>
    <title>Unable to use fiori element app inside an iframe.</title>
    <updated>2025-09-22T14:30:02.572000+02:00</updated>
    <author>
      <name>anmolbhatia003</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/681888</uri>
    </author>
    <content>&lt;P&gt;Hello Experts,&lt;/P&gt;&lt;P&gt;I have built a Fiori Element app using local CAP project. I have not used App router (neither external nor managed). The app is deployed and is now available under BTP Cokcpit, HTMl5 Apps.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;However when I try to access it in an Iframe (embedding it in Sales and Service Cloud V2 as Mahsup). The app UI loads, but controls donot work.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Need help how to enable the app for the Control to work in Iframe.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Need Support:&lt;/P&gt;&lt;P&gt;&lt;A href="https://community.sap.com/t5/user/viewprofilepage/user-id/124164" target="_blank"&gt;@Kinsbrunner&lt;/A&gt;&amp;nbsp;,&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;SPAN class=""&gt;&lt;A class="" href="https://community.sap.com/t5/user/viewprofilepage/user-id/144369" target="_self"&gt;&lt;SPAN class=""&gt;@mike_zaschka&lt;/SPAN&gt;&lt;/A&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/crm-and-cx-q-a/unable-to-use-fiori-element-app-inside-an-iframe/qaq-p/14224183"/>
    <published>2025-09-22T14:30:02.572000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/cap-java-csv-data-in-the-test-data-folder-not-loaded-duirng-local-testing/qaq-p/14226259</id>
    <title>CAP Java: CSV data in the test/data folder not loaded duirng local testing</title>
    <updated>2025-09-24T06:45:17.869000+02:00</updated>
    <author>
      <name>MioYasutake</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/789</uri>
    </author>
    <content>&lt;P&gt;Hi community,&amp;nbsp;&lt;/P&gt;&lt;P&gt;According to the capire document, CSV data in test/data folder is loaded by default.&lt;/P&gt;&lt;P&gt;&lt;A href="https://cap.cloud.sap/docs/guides/databases?impl-variant=java#providing-initial-data" target="_blank" rel="noopener nofollow noreferrer"&gt;https://cap.cloud.sap/docs/guides/databases?impl-variant=java#providing-initial-data&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;EM&gt;... next to your CDS model files. When you use&amp;nbsp;cds watch&amp;nbsp;or&amp;nbsp;cds deploy, CSV files are loaded by default from&amp;nbsp;test/data.&amp;nbsp;&lt;/EM&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;However,&amp;nbsp;CSV data in the test/data folder is not loaded during local testing (when running the service with &lt;STRONG&gt;&lt;EM&gt;mvn spring-boot:run&lt;/EM&gt;&lt;/STRONG&gt;).&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MioYasutake_0-1758688967423.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319197i69840D96B5E11818/image-size/medium?v=v2&amp;amp;px=400" role="button" title="MioYasutake_0-1758688967423.png" alt="MioYasutake_0-1758688967423.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MioYasutake_1-1758689053125.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319198i128EDF28754287FC/image-size/medium?v=v2&amp;amp;px=400" role="button" title="MioYasutake_1-1758689053125.png" alt="MioYasutake_1-1758689053125.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;I have tried adding the folllowing setting to the application.yaml and run the application with `mvn spring-boot:run -Dspring-boot.run.profiles=test`, but it's not taking effect.&lt;/P&gt;&lt;pre class="lia-code-sample language-yaml"&gt;&lt;code&gt;---
spring:
  config.activate.on-profile: test
  sql.init.platform: h2
cds:
  data-source.auto-config.enabled: false
  dataSource.csv.paths:
  - test/data/**&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;I would like to confirm whether I am missing any steps.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/cap-java-csv-data-in-the-test-data-folder-not-loaded-duirng-local-testing/qaq-p/14226259"/>
    <published>2025-09-24T06:45:17.869000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-resource-planning-q-a/how-to-attach-a-file-in-a-purchase-requisition-in-sap-public-cloud/qaq-p/14226856</id>
    <title>How to attach a file in a purchase requisition in sap public cloud</title>
    <updated>2025-09-24T14:52:06.698000+02:00</updated>
    <author>
      <name>RaulM</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/41862</uri>
    </author>
    <content>&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Hello experts,&lt;/P&gt;&lt;P&gt;&amp;nbsp;this may be an easy question but,&lt;/P&gt;&lt;P&gt;i searched the Business Accelerator API but still have not found a way to do this.&lt;/P&gt;&lt;P&gt;I am looking to create a service in SAP CAP to upload pfd offers inside a created purchase requisition.&lt;/P&gt;&lt;P&gt;Can i use&amp;nbsp;API_CV_ATTACHMENT_SRV, if so how? An example would be very apreciated.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Thank you for your answers.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-resource-planning-q-a/how-to-attach-a-file-in-a-purchase-requisition-in-sap-public-cloud/qaq-p/14226856"/>
    <published>2025-09-24T14:52:06.698000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/sap-s-4-hana-multiple-api-call-in-one-transaction/qaq-p/14229748</id>
    <title>SAP S/4 Hana : Multiple API Call In One Transaction</title>
    <updated>2025-09-28T14:30:45.751000+02:00</updated>
    <author>
      <name>Dipto_Arafat</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2134306</uri>
    </author>
    <content>&lt;P&gt;Hi,&lt;/P&gt;&lt;P&gt;I‚Äôm developing a CAP application using Node.js. I‚Äôm consuming remote APIs from SAP S/4HANA Cloud (public edition)‚Äîfor example, reading Business Partners and creating Sales Orders. At one point, I need to call multiple APIs to perform updates and deletions in sequence. What happens if one of these calls fails midway? How can I roll back everything I‚Äôve done? Is there a good way to handle this?&lt;BR /&gt;&lt;BR /&gt;Thanks.&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/sap-s-4-hana-multiple-api-call-in-one-transaction/qaq-p/14229748"/>
    <published>2025-09-28T14:30:45.751000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/cap-java-odata-v2-aggregation-for-sapui5-smarttable-analyticaltable/qaq-p/14233530</id>
    <title>CAP Java: OData V2 Aggregation for SAPUI5 SmartTable (AnalyticalTable)</title>
    <updated>2025-10-02T16:08:47.643000+02:00</updated>
    <author>
      <name>hasanciftci</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/144895</uri>
    </author>
    <content>&lt;P&gt;Hello,&lt;/P&gt;&lt;P&gt;I have a freestyle SAPUI5 application which consumes an OData V2 service which I develop using &lt;STRONG&gt;CAP Java&lt;/STRONG&gt; with&amp;nbsp;&lt;/P&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;SPAN&gt;&lt;SPAN&gt;&lt;SPAN&gt;cds-adapter-odata-v2 adapter and my SAPUI5 app has a &lt;STRONG&gt;SmartTable&lt;/STRONG&gt; with &lt;STRONG&gt;AnalyticalTable&lt;/STRONG&gt; type to use the grouping and aggregation features. The AnalyticalBinding sends a request to the OData service to fetch grand total (aggregated results) of the properties annotated as "measure".&lt;BR /&gt;&lt;BR /&gt;I have a similar application which works fine with &lt;STRONG&gt;CAP Node.js&lt;/STRONG&gt; because the Node.js stack can return the aggregated result requested by the AnalyticalBinding.&lt;BR /&gt;&lt;BR /&gt;The request sent by the AnalyticalBinding looks like the following:&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;/odata/v2/my-service/MyEntitySet?$select=myMeasureProp1&amp;amp;$inlinecount=allpages&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;I believe CAP Node.js framework interprets this request by checking the &lt;STRONG&gt;"@sap.aggregation.role"&lt;/STRONG&gt; annotation and returns the aggregated result (sum in my case). However, CAP Java does not return the aggregated result, instead it returns all the entities individually containing the &lt;STRONG&gt;myMeasureProp1&lt;/STRONG&gt;.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;SPAN&gt;&lt;SPAN&gt;Here is an example response of CAP Node.js. It has only a single entity with the aggregated numbers.&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;pre class="lia-code-sample language-json"&gt;&lt;code&gt;{
   "d":{
      "results":[
         {
            "__metadata":{
               "type":"Reporting.VAnalytics",
               "uri":"https://myhost.com/odata/v2/reporting/VAnalytics(aggregation'{\"key\":{},\"value\":[\"bookingHour\",\"nonApprovedHour\"]}')"
            },
            "bookingHour":"516899.1",
            "nonApprovedHour":"5303",
            "ID__":"aggregation'{\"key\":{},\"value\":[\"bookingHour\",\"nonApprovedHour\"]}'"
         }
      ],
      "__count":"1"
   }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&lt;SPAN&gt;&lt;BR /&gt;I believe Java stack does not interpret the &lt;STRONG&gt;"@sap.aggregation.role"&lt;/STRONG&gt; annotation. I checked the documentations and could not find anything useful.&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;I'd appreciate any help on how to achieve using SmartTable with AnalyticalTable type consuming an OData V2 service provided by CAP Java.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Annotations:&lt;/STRONG&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-python"&gt;&lt;code&gt;annotate ReportingCenter.Analytics with @(sap.semantics: 'aggregate');

annotate ReportingCenter.Analytics with {
    employeeTeamID .aggregation.role: 'dimension';
    employeeID     .aggregation.role: 'dimension';
    projectID      .aggregation.role: 'dimension';
    projectTeamID  .aggregation.role: 'dimension';
    hours          .aggregation.role: 'measure';
};

annotate ReportingCenter.Analytics with @(UI: {PresentationVariant: {
    $Type         : 'UI.PresentationVariantType',
    Total         : [hours],
    GroupBy       : [
        employeeTeamID,
        employeeID,
        projectID
    ],
    Visualizations: ['@UI.LineItem']
}});&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&lt;BR /&gt;&lt;STRONG&gt;EDIT:&amp;nbsp;&lt;/STRONG&gt;I have also tried with the following annotations. They work fine with OData V4 using &lt;STRONG&gt;$apply&lt;/STRONG&gt; query but my service is V2 since SAPUI5 smart controls are only supported for OData V2.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;using ReportingCenter from '../../../../srv/cds-models/analytics';
using from './line-item';

annotate ReportingCenter.Analytics with @(sap.semantics: 'aggregate');

annotate ReportingCenter.Analytics with {
    employeeTeamID  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;.aggregation.role: 'dimension'  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/15206"&gt;@analytics&lt;/a&gt;.Dimension;
    employeeID      &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;.aggregation.role: 'dimension'  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/15206"&gt;@analytics&lt;/a&gt;.Dimension;
    projectID       &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;.aggregation.role: 'dimension'  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/15206"&gt;@analytics&lt;/a&gt;.Dimension;
    projectTeamID   &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;.aggregation.role: 'dimension'  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/15206"&gt;@analytics&lt;/a&gt;.Dimension;
    hours           &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;.aggregation.role: 'measure'    &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/15206"&gt;@analytics&lt;/a&gt;.Measure;
};

annotate ReportingCenter.Analytics with @(UI: {PresentationVariant: {
    $Type         : 'UI.PresentationVariantType',
    Total         : [hours],
    GroupBy       : [
        employeeTeamID,
        employeeID
    ],
    Visualizations: ['@UI.LineItem']
}});

annotate ReportingCenter.Analytics with @(Aggregation: {ApplySupported: {
    $Type                 : 'Aggregation.ApplySupportedType',
    Transformations       : [
        'aggregate',
        'identity',
        'groupby',
        'filter',
        'search'
    ],
    GroupableProperties   : [
        employeeTeamID,
        employeeID,
        projectID,
        projectTeamID
    ],
    AggregatableProperties: [{
        $Type   : 'Aggregation.AggregatablePropertyType',
        Property: hours
    }]
}});

annotate ReportingCenter.Analytics with @(Analytics.AggregatedProperty #sumHours: {
    $Type               : 'Analytics.AggregatedPropertyType',
    Name                : 'sumHours',
    AggregationMethod   : 'sum',
    AggregatableProperty: hours
});&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/cap-java-odata-v2-aggregation-for-sapui5-smarttable-analyticaltable/qaq-p/14233530"/>
    <published>2025-10-02T16:08:47.643000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/cap-use-i18n-for-error-messages/qaq-p/14234048</id>
    <title>CAP - Use i18n for Error Messages</title>
    <updated>2025-10-03T10:25:02.481000+02:00</updated>
    <author>
      <name>hoandreasm</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1864591</uri>
    </author>
    <content>&lt;P&gt;Hello,&lt;/P&gt;&lt;P&gt;So in my current project we want to support multiple languages.&lt;BR /&gt;I followed the implementation on this documentation:&amp;nbsp;&lt;A href="https://cap.cloud.sap/docs/node.js/cds-i18n" target="_blank" rel="nofollow noopener noreferrer"&gt;https://cap.cloud.sap/docs/node.js/cds-i18n&lt;/A&gt;&lt;BR /&gt;I have created the &lt;FONT face="ms pmincho,hiragino mincho pron"&gt;_i18n&lt;/FONT&gt; folder in the root folder and put the properties files there.&lt;BR /&gt;Then this is how I use the property:&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;   req.reject(500, 'SOME_ERROR', {
      error_message: 'this is testing error',
    });&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;The app is able to access the message_en.properties but could not access other languages. It always falls back to default which is English.&lt;BR /&gt;The way I tested it is using the URL like:&amp;nbsp;/webapp/index.html?sap-locale=id or&amp;nbsp;/webapp/index.html?sap-language=id for Bahasa Indonesia.&lt;BR /&gt;Currently I'm using&amp;nbsp;&lt;SPAN&gt;sap/cds&lt;/SPAN&gt;&lt;SPAN&gt;: &lt;/SPAN&gt;&lt;SPAN&gt;9.3.1.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;How do I access the other languages properties from the CAP service?&lt;BR /&gt;&lt;BR /&gt;Thanks!&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/cap-use-i18n-for-error-messages/qaq-p/14234048"/>
    <published>2025-10-03T10:25:02.481000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/cap-app-architecture/qaq-p/14235011</id>
    <title>CAP app architecture</title>
    <updated>2025-10-05T16:03:17.096000+02:00</updated>
    <author>
      <name>OliverGraetz37</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/170033</uri>
    </author>
    <content>&lt;P&gt;Hi community,&lt;/P&gt;&lt;P&gt;we are currently developing a CAP application and have encountered problems:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="initialarchitecture.png" style="width: 651px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/322917i66D114F2B1C26518/image-dimensions/651x293?v=v2" width="651" height="293" role="button" title="initialarchitecture.png" alt="initialarchitecture.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;‚ÄÉ&lt;/P&gt;&lt;H3 id="toc-hId-1890986718"&gt;Initial Architecture&lt;/H3&gt;&lt;P&gt;Data persistence on the &lt;STRONG&gt;S4HC&lt;/STRONG&gt;&amp;nbsp;system using &lt;STRONG&gt;Custom Business Objects (CBOs)&lt;/STRONG&gt;. Exposing the data as OData services via custom BOs.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;CAP&lt;/STRONG&gt;&amp;nbsp;consumes the data (3-4 different OData services + additional Custom CDS Views exposed as OData services), &lt;STRONG&gt;associates&lt;/STRONG&gt;&amp;nbsp;these CBOs with each other, and exposes them as a new OData service for consumption by a &lt;STRONG&gt;Fiori Elements app&lt;/STRONG&gt;. No data persistence within CAP.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Problem:&lt;/STRONG&gt;&amp;nbsp;We consistently encountered errors regarding the &lt;STRONG&gt;association of entities&lt;/STRONG&gt;&amp;nbsp;across the different OData services.&amp;nbsp;&lt;/P&gt;&lt;P&gt;‚Üí &lt;STRONG&gt;Rethink/Pivot&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="currentarchitecture.png" style="width: 651px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/322918i1F1BC4A8090A24FA/image-dimensions/651x370?v=v2" width="651" height="370" role="button" title="currentarchitecture.png" alt="currentarchitecture.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1694473213"&gt;Current Architecture&lt;/H3&gt;&lt;P&gt;Moving away from CBOs on the S4HC system. Persisting the Business Objects at the &lt;STRONG&gt;HANA DB level&lt;/STRONG&gt;. Association of entities is possible &lt;STRONG&gt;directly and seamlessly within CAP&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Additionally, retrieving &lt;STRONG&gt;FI documents&lt;/STRONG&gt;&amp;nbsp;(Financial Documents) from the S4HC system, which are associated with the main entity.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Problem:&lt;/STRONG&gt;&amp;nbsp;&lt;STRONG&gt;High cost&lt;/STRONG&gt;&amp;nbsp;of persistence on the HANA DB.&lt;/P&gt;&lt;P&gt;‚ÄÉ&lt;/P&gt;&lt;H3 id="toc-hId-1497959708"&gt;Summary&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;Initial:&lt;/STRONG&gt;&amp;nbsp;S4HC CBOs&amp;nbsp;‚Üí&amp;nbsp;CAP for Association&amp;nbsp;‚Üí&amp;nbsp;Fiori App. &lt;STRONG&gt;Problem:&lt;/STRONG&gt;&amp;nbsp;Association errors.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Current:&lt;/STRONG&gt;&amp;nbsp;HANA DB Persistence&amp;nbsp;‚Üí&amp;nbsp;CAP for seamless Association + FI Docs from S4HC. &lt;STRONG&gt;Problem:&lt;/STRONG&gt;&amp;nbsp;High HANA DB costs.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Could you please advise us on the best way to go forward from here regarding the architecture?IS CAP meant to do associations between entities just for projection purposes or do the entities have to be persisted by the framework in order to correctly resolve the associations?&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;KR,&lt;/P&gt;&lt;P&gt;Oliver&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/cap-app-architecture/qaq-p/14235011"/>
    <published>2025-10-05T16:03:17.096000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/question-when-will-my-blog-post-become-visible-on-sap-community/qaq-p/14236450</id>
    <title>Question: When will my blog post become visible on SAP Community?</title>
    <updated>2025-10-07T09:50:03.016000+02:00</updated>
    <author>
      <name>furkan5</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2115025</uri>
    </author>
    <content>&lt;P&gt;Hi everyone,&lt;BR /&gt;I submitted a blog post this past Sunday (&lt;STRONG&gt;October 5, 2025&lt;/STRONG&gt;). As far as I know, blog posts on SAP Community go through a moderation process before being published.&lt;/P&gt;&lt;P&gt;How long does this usually take? My post hasn't been published yet.&lt;BR /&gt;Did I possibly miss something, or should I just wait a bit longer?&lt;/P&gt;&lt;P&gt;Thanks in advance &lt;span class="lia-unicode-emoji" title=":folded_hands:"&gt;üôè&lt;/span&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/question-when-will-my-blog-post-become-visible-on-sap-community/qaq-p/14236450"/>
    <published>2025-10-07T09:50:03.016000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/error-500-in-cap-entityset-read/qaq-p/14243017</id>
    <title>Error 500 in CAP entitySet READ</title>
    <updated>2025-10-14T07:27:39.256000+02:00</updated>
    <author>
      <name>ZMoe</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1948480</uri>
    </author>
    <content>&lt;P&gt;Hi everyone, I'm new to CAP development. I ran into this problem when building a simple demo in the trial environment.&lt;/P&gt;&lt;P&gt;I have successfully deployed my CAP application to BTP and can access the service metadata.&lt;/P&gt;&lt;TABLE border="1" width="100%"&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="100%"&gt;&lt;A href="https://xxxtrial-dev-moe-cap-backend-srv.cfapps.us10-001.hana.ondemand.com/odata/v4/My_SRV/$metadata" target="_blank" rel="nofollow noopener noreferrer"&gt;https://xxxtrial-dev-moe-cap-backend-srv.cfapps.us10-001.hana.ondemand.com/odata/v4/My_SRV/$metadata&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-left" image-alt="1.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327023i38FE42EC0BDFE8BF/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="1.png" alt="1.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;But when I access the entitySet, I get the following error:&lt;/P&gt;&lt;TABLE border="1" width="100%"&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="100%"&gt;&lt;A href="https://xxxtrial-dev-moe-cap-backend-srv.cfapps.us10-001.hana.ondemand.com/odata/v4/My_SRV/" target="_blank" rel="nofollow noopener noreferrer"&gt;https://xxxtrial-dev-moe-cap-backend-srv.cfapps.us10-001.hana.ondemand.com/odata/v4/My_SRV/&lt;/A&gt;&lt;STRONG&gt;MoeSet&lt;/STRONG&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-left" image-alt="2.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327024i966894B398380191/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="2.png" alt="2.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;I generated the CAP framework using the following command:&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;mvn -B archetype:generate -DarchetypeArtifactId=cds-services-archetype -DarchetypeGroupId=com.sap.cds -DarchetypeVersion=RELEASE -DgroupId=com.moe.company -DartifactId=moe-cap-backend -Dpackage=com.moe.company.moecapbackend&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Then I created &lt;STRONG&gt;capservice.cds&lt;/STRONG&gt; under the srv directory with the following content:&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;service My_SRV {
    @requires: 'any'
    entity MoeSet as projection on TestSet;
}

entity TestSet {
    key testKey : String(64);
    inputData : String(100);
    memo: String(100);
    outputData: String(100);
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;And &lt;SPAN&gt;I also created a &lt;STRONG&gt;MyServiceHandler.java&lt;/STRONG&gt; file under the main directory with the following content:&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-java"&gt;&lt;code&gt;package com.moe.company.mycapbackend;

import java.util.HashMap;
import java.util.Map;
import com.sap.cds.services.cds.CdsReadEventContext;
import com.sap.cds.services.cds.CqnService;
import com.sap.cds.services.handler.EventHandler;
import com.sap.cds.services.handler.annotations.On;
import com.sap.cds.services.handler.annotations.ServiceName;
import com.sap.cds.services.request.UserInfo;
import cds.gen.my_srv.MoeSet;


@ServiceName("My_SRV")
public class MyServiceHandler implements EventHandler {

  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1399738"&gt;@On&lt;/a&gt;(event = CqnService.EVENT_READ, entity = "My_SRV.MoeSet")
  public void beforeReadProducts(CdsReadEventContext context) {
    UserInfo userInfo = context.getUserInfo();

    MoeSet datamodel = com.sap.cds.Struct.create(MoeSet.class);
    datamodel.put(MoeSet.MEMO, userInfo.getName());

    Map&amp;lt;Object, Map&amp;lt;String, Object&amp;gt;&amp;gt; result = new HashMap&amp;lt;&amp;gt;();
    String key ="test1";
    result.put(key, datamodel);

    context.setResult(result.values());

  }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;Since this is just a simple practice, I didn't add authentication. Here's my mta.yaml file:&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;_schema-version: 3.3.0
ID: moe-cap-backend
version: 1.0.0-SNAPSHOT
description: "A simple CAP project."
parameters:
  enable-parallel-deployments: true
modules:
  - name: moe-cap-backend-srv
    type: java
    path: srv
    parameters:
      instances: 1
      buildpack: sap_java_buildpack_jakarta
    properties:
      SPRING_PROFILES_ACTIVE: cloud,sandbox
      JBP_CONFIG_COMPONENTS: "jres: ['com.sap.xs.java.buildpack.jre.SAPMachineJRE']"
      JBP_CONFIG_SAP_MACHINE_JRE: '{ version: 17.+ }'
    build-parameters:
      builder: custom
      commands:
        - mvn clean package -DskipTests=true --batch-mode
      build-result: target/*-exec.jar
    provides:
      - name: srv-api # required by consumers of CAP services (e.g. approuter)
        properties:
          srv-url: ${default-url}

&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Are there any steps I might have missed?&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/error-500-in-cap-entityset-read/qaq-p/14243017"/>
    <published>2025-10-14T07:27:39.256000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/how-to-maintain-user-context-when-making-programmatic-draft-queries-in-sap/qaq-p/14243154</id>
    <title>How to Maintain User Context When Making Programmatic Draft Queries in SAP CAP?</title>
    <updated>2025-10-14T09:47:29.239000+02:00</updated>
    <author>
      <name>mlu2</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1379</uri>
    </author>
    <content>&lt;H1 id="how-to-maintain-user-context-when-making-programmatic-draft-queries-in-sap-cap" id="toc-hId-1633686307"&gt;How to Maintain User Context When Making Programmatic Draft Queries in SAP CAP?&lt;/H1&gt;&lt;H2 id="problem-summary" id="toc-hId-1566255521"&gt;Problem Summary&lt;/H2&gt;&lt;P&gt;When creating drafts via authenticated OData requests in SAP CAP, subsequent programmatic queries using&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;srv.run()&lt;/CODE&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;fail to find those drafts. The root cause is that&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;srv.run()&lt;/CODE&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;defaults to&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;'anonymous'&lt;/CODE&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;user context instead of preserving the authenticated user from the HTTP request.&lt;/P&gt;&lt;H2 id="detailed-description" id="toc-hId-1369742016"&gt;Detailed Description&lt;/H2&gt;&lt;P&gt;I have a draft-enabled entity in my CAP application. When I create a draft through an authenticated OData POST request (user: 'alice'), the draft is successfully created with&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;DraftAdministrativeData.InProcessByUser = 'alice'&lt;/CODE&gt;.&lt;/P&gt;&lt;P&gt;However, when I try to query for this draft programmatically using&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;srv.run(SELECT.from(Books.drafts))&lt;/CODE&gt;, CAP automatically adds the filter&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;InProcessByUser = 'anonymous'&lt;/CODE&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;instead of 'alice', causing the query to return no results.&lt;/P&gt;&lt;H2 id="reproduction" id="toc-hId-1173228511"&gt;Reproduction&lt;/H2&gt;&lt;P&gt;I've created a minimal CAP application that demonstrates this issue:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Repository:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;A href="https://github.com/urlmic/cap-draft-user-context-issue" target="_blank" rel="noopener nofollow noreferrer"&gt;https://github.com/urlmic/cap-draft-user-context-issue&lt;/A&gt;&lt;/P&gt;&lt;H3 id="schema-dbschemacds" id="toc-hId-1105797725"&gt;Schema (&lt;CODE&gt;db/schema.cds&lt;/CODE&gt;)&lt;/H3&gt;&lt;PRE&gt;&lt;CODE&gt;namespace my.bookshop;

entity Books {
  key ID     : UUID;
      title  : String(100);
      author : String(100);
}&lt;/CODE&gt;&lt;/PRE&gt;&lt;H3 id="service-srvcatalog-servicecds" id="toc-hId-909284220"&gt;Service (&lt;CODE&gt;srv/catalog-service.cds&lt;/CODE&gt;)&lt;/H3&gt;&lt;PRE&gt;&lt;CODE&gt;using my.bookshop from '../db/schema';

service CatalogService {
  @odata.draft.enabled
  entity Books as projection on bookshop.Books;
}&lt;/CODE&gt;&lt;/PRE&gt;&lt;H3 id="test-testdraft-contexttestjs" id="toc-hId-712770715"&gt;Test (&lt;CODE&gt;test/draft-context.test.js&lt;/CODE&gt;)&lt;/H3&gt;&lt;DIV class=""&gt;&lt;PRE&gt;&lt;CODE&gt;&lt;SPAN&gt;&lt;SPAN class=""&gt;const&lt;/SPAN&gt; cds &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;require&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'@sap/cds'&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;&lt;SPAN class=""&gt;describe&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'Draft User Context Issue'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt; () &lt;SPAN class=""&gt;=&amp;gt;&lt;/SPAN&gt; {&lt;/SPAN&gt;
&lt;SPAN&gt;  &lt;SPAN class=""&gt;const&lt;/SPAN&gt; { axios } &lt;SPAN class=""&gt;=&lt;/SPAN&gt; cds&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;test&lt;/SPAN&gt;(&lt;SPAN class=""&gt;__dirname&lt;/SPAN&gt; &lt;SPAN class=""&gt;+&lt;/SPAN&gt; &lt;SPAN class=""&gt;'/..'&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;  &lt;SPAN class=""&gt;let&lt;/SPAN&gt; draftID&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;  &lt;SPAN class=""&gt;// Authenticate as 'alice' user&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;  axios&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;defaults&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;auth&lt;/SPAN&gt; &lt;SPAN class=""&gt;=&lt;/SPAN&gt; { &lt;SPAN class=""&gt;username&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; &lt;SPAN class=""&gt;'alice'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt; &lt;SPAN class=""&gt;password&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; &lt;SPAN class=""&gt;'alice'&lt;/SPAN&gt; }&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;  &lt;SPAN class=""&gt;test&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'Create draft via OData (authenticated as alice)'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt; &lt;SPAN class=""&gt;async&lt;/SPAN&gt; () &lt;SPAN class=""&gt;=&amp;gt;&lt;/SPAN&gt; {&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;const&lt;/SPAN&gt; { data } &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; axios&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;post&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'/odata/v4/catalog/Books'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt; {&lt;/SPAN&gt;
&lt;SPAN&gt;      &lt;SPAN class=""&gt;title&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; &lt;SPAN class=""&gt;'Test Book'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;      &lt;SPAN class=""&gt;author&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; &lt;SPAN class=""&gt;'Test Author'&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    })&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;    &lt;SPAN class=""&gt;expect&lt;/SPAN&gt;(data&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;IsActiveEntity&lt;/SPAN&gt;)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;toBe&lt;/SPAN&gt;(&lt;SPAN class=""&gt;false&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;expect&lt;/SPAN&gt;(data&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;HasActiveEntity&lt;/SPAN&gt;)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;toBe&lt;/SPAN&gt;(&lt;SPAN class=""&gt;false&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    draftID &lt;SPAN class=""&gt;=&lt;/SPAN&gt; data&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;ID&lt;/SPAN&gt;&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;  })&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;  &lt;SPAN class=""&gt;test&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'Query draft programmatically (loses user context)'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt; &lt;SPAN class=""&gt;async&lt;/SPAN&gt; () &lt;SPAN class=""&gt;=&amp;gt;&lt;/SPAN&gt; {&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;const&lt;/SPAN&gt; srv &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; cds&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;connect&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;to&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'CatalogService'&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;const&lt;/SPAN&gt; { Books } &lt;SPAN class=""&gt;=&lt;/SPAN&gt; srv&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;entities&lt;/SPAN&gt;&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;    &lt;SPAN class=""&gt;// This query fails because it uses 'anonymous' user instead of 'alice'&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;const&lt;/SPAN&gt; draft &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; srv&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;run&lt;/SPAN&gt;(SELECT&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;from&lt;/SPAN&gt;(Books&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;drafts&lt;/SPAN&gt;)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;where&lt;/SPAN&gt;({ &lt;SPAN class=""&gt;ID&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; draftID }))&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;    &lt;SPAN class=""&gt;console&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;log&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'Draft found:'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt; draft)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;expect&lt;/SPAN&gt;(draft)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;toBeDefined&lt;/SPAN&gt;()&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;expect&lt;/SPAN&gt;(draft&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;length&lt;/SPAN&gt;)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;toBe&lt;/SPAN&gt;(&lt;SPAN class=""&gt;1&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt; &lt;SPAN class=""&gt;// FAILS: Returns empty array []&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;  })&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;  &lt;SPAN class=""&gt;test&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'Query draft via OData (keeps user context)'&lt;/SPAN&gt;&lt;SPAN class=""&gt;,&lt;/SPAN&gt; &lt;SPAN class=""&gt;async&lt;/SPAN&gt; () &lt;SPAN class=""&gt;=&amp;gt;&lt;/SPAN&gt; {&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;// This works fine because the HTTP request carries 'alice' user context&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;const&lt;/SPAN&gt; { data } &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; axios&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;get&lt;/SPAN&gt;(&lt;SPAN class=""&gt;`/odata/v4/catalog/Books(ID=&lt;/SPAN&gt;&lt;SPAN class=""&gt;${&lt;/SPAN&gt;draftID&lt;SPAN class=""&gt;}&lt;/SPAN&gt;&lt;SPAN class=""&gt;,IsActiveEntity=false)`&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;

&lt;SPAN&gt;    &lt;SPAN class=""&gt;expect&lt;/SPAN&gt;(data)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;toBeDefined&lt;/SPAN&gt;()&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;    &lt;SPAN class=""&gt;expect&lt;/SPAN&gt;(data&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;IsActiveEntity&lt;/SPAN&gt;)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;toBe&lt;/SPAN&gt;(&lt;SPAN class=""&gt;false&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt; &lt;SPAN class=""&gt;// PASSES&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;  })&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;})&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/CODE&gt;&lt;/PRE&gt;&lt;/DIV&gt;&lt;H2 id="test-results" id="toc-hId-387174491"&gt;Test Results&lt;/H2&gt;&lt;PRE&gt;&lt;CODE&gt;‚úÖ Test 1: Create draft via OData (passes)
‚ùå Test 2: Query draft programmatically (fails - returns [])
‚úÖ Test 3: Query draft via OData (passes)&lt;/CODE&gt;&lt;/PRE&gt;&lt;H2 id="sql-evidence" id="toc-hId-190660986"&gt;SQL Evidence&lt;/H2&gt;&lt;P&gt;With&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;cds.env.log.sql = true&lt;/CODE&gt;, I can observe the different user contexts:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Draft Creation (works):&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;PRE&gt;&lt;CODE&gt;&lt;SPAN&gt;&lt;SPAN class=""&gt;INSERT&lt;/SPAN&gt; &lt;SPAN class=""&gt;INTO&lt;/SPAN&gt; my_bookshop_Books_drafts (&lt;SPAN class=""&gt;..&lt;/SPAN&gt;.) &lt;SPAN class=""&gt;VALUES&lt;/SPAN&gt; (&lt;SPAN class=""&gt;..&lt;/SPAN&gt;.)&lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;INSERT&lt;/SPAN&gt; &lt;SPAN class=""&gt;INTO&lt;/SPAN&gt; my_bookshop_Books_drafts_DraftAdministrativeData &lt;/SPAN&gt;
&lt;SPAN&gt;  (InProcessByUser, &lt;SPAN class=""&gt;..&lt;/SPAN&gt;.) &lt;SPAN class=""&gt;VALUES&lt;/SPAN&gt; (&lt;SPAN class=""&gt;'alice'&lt;/SPAN&gt;, &lt;SPAN class=""&gt;..&lt;/SPAN&gt;.)&lt;/SPAN&gt;&lt;/CODE&gt;&lt;/PRE&gt;&lt;/DIV&gt;&lt;P&gt;&lt;STRONG&gt;OData Query (works):&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;PRE&gt;&lt;CODE&gt;&lt;SPAN&gt;&lt;SPAN class=""&gt;SELECT&lt;/SPAN&gt; &lt;SPAN class=""&gt;..&lt;/SPAN&gt;. &lt;SPAN class=""&gt;FROM&lt;/SPAN&gt; my_bookshop_Books_drafts &lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;WHERE&lt;/SPAN&gt; &lt;SPAN class=""&gt;ID&lt;/SPAN&gt; &lt;SPAN class=""&gt;=&lt;/SPAN&gt; ? &lt;SPAN class=""&gt;AND&lt;/SPAN&gt; DraftAdministrativeData.InProcessByUser &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;'alice'&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/CODE&gt;&lt;/PRE&gt;&lt;/DIV&gt;&lt;P&gt;&lt;STRONG&gt;Programmatic Query (fails):&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;PRE&gt;&lt;CODE&gt;&lt;SPAN&gt;&lt;SPAN class=""&gt;SELECT&lt;/SPAN&gt; &lt;SPAN class=""&gt;..&lt;/SPAN&gt;. &lt;SPAN class=""&gt;FROM&lt;/SPAN&gt; my_bookshop_Books_drafts &lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;WHERE&lt;/SPAN&gt; &lt;SPAN class=""&gt;ID&lt;/SPAN&gt; &lt;SPAN class=""&gt;=&lt;/SPAN&gt; ? &lt;SPAN class=""&gt;AND&lt;/SPAN&gt; DraftAdministrativeData.InProcessByUser &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;'anonymous'&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/CODE&gt;&lt;/PRE&gt;&lt;/DIV&gt;&lt;H2 id="what-ive-tried" id="toc-hId--5852519"&gt;What I've Tried&lt;/H2&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Using&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;srv.run()&lt;/CODE&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;directly:&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;PRE&gt;&lt;CODE&gt;&lt;SPAN&gt;&lt;SPAN class=""&gt;const&lt;/SPAN&gt; srv &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; cds&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;connect&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;to&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'CatalogService'&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;const&lt;/SPAN&gt; draft &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; srv&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;run&lt;/SPAN&gt;(SELECT&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;from&lt;/SPAN&gt;(Books&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;drafts&lt;/SPAN&gt;)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;where&lt;/SPAN&gt;({ &lt;SPAN class=""&gt;ID&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; draftID }))&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;// Result: Uses 'anonymous' user context&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/CODE&gt;&lt;/PRE&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Creating a transaction with&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;srv.tx()&lt;/CODE&gt;:&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;PRE&gt;&lt;CODE&gt;&lt;SPAN&gt;&lt;SPAN class=""&gt;const&lt;/SPAN&gt; srv &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; cds&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;connect&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;to&lt;/SPAN&gt;(&lt;SPAN class=""&gt;'CatalogService'&lt;/SPAN&gt;)&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;const&lt;/SPAN&gt; tx &lt;SPAN class=""&gt;=&lt;/SPAN&gt; srv&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;tx&lt;/SPAN&gt;()&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;const&lt;/SPAN&gt; draft &lt;SPAN class=""&gt;=&lt;/SPAN&gt; &lt;SPAN class=""&gt;await&lt;/SPAN&gt; tx&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;run&lt;/SPAN&gt;(SELECT&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;from&lt;/SPAN&gt;(Books&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;drafts&lt;/SPAN&gt;)&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;where&lt;/SPAN&gt;({ &lt;SPAN class=""&gt;ID&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; draftID }))&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;// Result: Still uses 'anonymous' user context&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/CODE&gt;&lt;/PRE&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Using&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;srv.tx({ user: new cds.User.Privileged() })&lt;/CODE&gt;:&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;PRE&gt;&lt;CODE&gt;&lt;SPAN&gt;&lt;SPAN class=""&gt;const&lt;/SPAN&gt; tx &lt;SPAN class=""&gt;=&lt;/SPAN&gt; srv&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;tx&lt;/SPAN&gt;({ &lt;SPAN class=""&gt;user&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&lt;/SPAN&gt; &lt;SPAN class=""&gt;new&lt;/SPAN&gt; cds&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;User&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;SPAN class=""&gt;Privileged&lt;/SPAN&gt;() })&lt;SPAN class=""&gt;;&lt;/SPAN&gt;&lt;/SPAN&gt;
&lt;SPAN&gt;&lt;SPAN class=""&gt;// Result: TypeError - cannot read properties of undefined&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/CODE&gt;&lt;/PRE&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;H2 id="expected-behavior" id="toc-hId-144888333"&gt;Expected Behavior&lt;/H2&gt;&lt;P&gt;When user 'alice' creates a draft via an authenticated OData request, programmatic queries within the same test context should use the same user context ('alice'), allowing me to query for drafts created by that user.&lt;/P&gt;&lt;H2 id="questions" id="toc-hId--51625172"&gt;Questions&lt;/H2&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;How do I properly maintain user context when making programmatic draft queries?&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Is there a way to pass the HTTP request's user context to&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;srv.run()&lt;/CODE&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;or&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;CODE&gt;tx.run()&lt;/CODE&gt;?&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;What is the recommended pattern for querying drafts in service handlers or custom logic?&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;H2 id="environment" id="toc-hId--248138677"&gt;Environment&lt;/H2&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;CAP Version:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/cds ^9&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Node.js:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;v18+&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Test Framework:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Jest with &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/163398"&gt;@cap&lt;/a&gt;-js/cds-test ^0.4.0&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Database:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;SQLite (in-memory)&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="additional-context" id="toc-hId--444652182"&gt;Additional Context&lt;/H2&gt;&lt;P&gt;This issue occurs in integration tests where I need to verify that business logic correctly handles draft entities. The draft queries work fine when called via OData (HTTP requests carry user context), but fail when called programmatically (no user context propagation).&lt;/P&gt;&lt;P&gt;I've reviewed the CAP documentation on draft handling, but couldn't find clear guidance on maintaining user context for programmatic queries.&lt;/P&gt;&lt;HR /&gt;&lt;P&gt;&lt;STRONG&gt;Any help or guidance would be greatly appreciated!&lt;/STRONG&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/how-to-maintain-user-context-when-making-programmatic-draft-queries-in-sap/qaq-p/14243154"/>
    <published>2025-10-14T09:47:29.239000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/entity-returns-duplicate-value-when-used-with-filters-top-and-skip/qaq-p/14243197</id>
    <title>Entity returns duplicate value when used with filters, $top and $skip</title>
    <updated>2025-10-14T10:30:43.572000+02:00</updated>
    <author>
      <name>Niranjan_J_Gowda</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1655521</uri>
    </author>
    <content>&lt;P&gt;We have a CAP Java backend (CAP Java SDK version 4.0.0) with Fiori elements frontend. We use the tree table component in our first list report page of our application.&amp;nbsp;‚ÄÉ&lt;/P&gt;&lt;P&gt;Tree table in our application :&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-10-14 at 11.11.36‚ÄØAM.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327044iBC202FCCFAA84CB4/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Screenshot 2025-10-14 at 11.11.36‚ÄØAM.png" alt="Screenshot 2025-10-14 at 11.11.36‚ÄØAM.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;So when loading the tree table frontend component, we do the following backend call :&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;NameOfOurEntity&lt;/STRONG&gt;$apply=orderby(numberOfMetrics%20desc)/com.sap.vocabularies.Hierarchy.v1.TopLevels(HierarchyNodes=$root/&lt;STRONG&gt;NameOfOurEntity&lt;/STRONG&gt;,HierarchyQualifier='SystemHierarchy',NodeProperty='id')&amp;amp;$select=DistanceFromRoot,DrillState,LimitedDescendantCount,dataCollectionStatus,dataCollectionStatusLabel,id,name,numberOfMetrics,parentID&amp;amp;$count=true&amp;amp;$&lt;STRONG&gt;skip=0&amp;amp;$top=225&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;When we apply a filter the following call happens to our backend :&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;NameOfOurEntity?&lt;/STRONG&gt;$apply=ancestors($root/NameOfOurEntity,SystemHierarchy,id,&lt;STRONG&gt;filter(dataCollectionStatusLabel%20eq%20'NOT_CONFIGURED')&lt;/STRONG&gt;,keep%20start)/orderby(numberOfMetrics%20desc)/com.sap.vocabularies.Hierarchy.v1.TopLevels(HierarchyNodes=$root/NameOfOurEntity,HierarchyQualifier='SystemHierarchy',NodeProperty='id')&amp;amp;$select=DistanceFromRoot,DrillState,LimitedDescendantCount,dataCollectionStatus,dataCollectionStatusLabel,id,name,numberOfMetrics,parentID&amp;amp;$count=true&amp;amp;&lt;STRONG&gt;$skip=0&amp;amp;$top=225&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;Our Backend Entity looks like this :&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;PRE&gt;&lt;SPAN&gt;entity &lt;/SPAN&gt;TreeEntityTable &lt;SPAN&gt;as select distinct key &lt;/SPAN&gt;id, name, parentID, numberOfMetrics, dataCollectionStatus,&lt;BR /&gt;  dataCollectionStatusLabel, serviceType&lt;BR /&gt;  &lt;SPAN&gt;from&lt;/SPAN&gt; (&lt;BR /&gt;    &lt;SPAN&gt;select &lt;/SPAN&gt;id, name, parentID, numberOfMetrics, dataCollectionStatus, dataCollectionStatusLabel, serviceType&lt;BR /&gt;    &lt;SPAN&gt;from &lt;/SPAN&gt;SystemTypes &lt;SPAN&gt;union&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;    select &lt;/SPAN&gt;id, name, parentID, numberOfMetrics, dataCollectionStatus, dataCollectionStatusLabel, serviceType&lt;BR /&gt;    &lt;SPAN&gt;from &lt;/SPAN&gt;Systems &lt;SPAN&gt;union&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;    select &lt;/SPAN&gt;id, name, parentID, numberOfMetrics, dataCollectionStatus, dataCollectionStatusLabel, serviceType&lt;BR /&gt;    &lt;SPAN&gt;from &lt;/SPAN&gt;Clients &lt;SPAN&gt;union&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;    select &lt;/SPAN&gt;id, name, parentID, numberOfMetrics, dataCollectionStatus, dataCollectionStatusLabel, serviceType&lt;BR /&gt;    &lt;SPAN&gt;from &lt;/SPAN&gt;LanscapeObjects&lt;BR /&gt;  );&lt;/PRE&gt;&lt;/DIV&gt;&lt;PRE&gt;&lt;SPAN&gt;@Capabilities.FilterRestrictions.NonFilterableProperties&lt;/SPAN&gt;: [&lt;BR /&gt;  '&lt;SPAN&gt;LimitedDescendantCount&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;DistanceFromRoot&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;DrillState&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;LimitedRank&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;dataCollectionStatus&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;id&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;numberOfMetrics&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;parentID&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;serviceType&lt;/SPAN&gt;'&lt;BR /&gt;]&lt;BR /&gt;&lt;SPAN&gt;@Capabilities.SortRestrictions.NonSortableProperties&lt;/SPAN&gt;: [&lt;BR /&gt;  '&lt;SPAN&gt;LimitedDescendantCount&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;DistanceFromRoot&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;DrillState&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;LimitedRank&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;dataCollectionStatus&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;id&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;parentID&lt;/SPAN&gt;',&lt;BR /&gt;  '&lt;SPAN&gt;serviceType&lt;/SPAN&gt;'&lt;BR /&gt;]&lt;BR /&gt;&lt;SPAN&gt;@cds.search&lt;/SPAN&gt;: {&lt;BR /&gt;&lt;SPAN&gt;  id&lt;/SPAN&gt;,&lt;BR /&gt;&lt;SPAN&gt;  name&lt;/SPAN&gt;,&lt;BR /&gt;&lt;SPAN&gt;  dataCollectionStatusLabel&lt;/SPAN&gt;,&lt;BR /&gt;&lt;SPAN&gt;  numberOfMetrics&lt;/SPAN&gt;,&lt;BR /&gt;&lt;SPAN&gt;  serviceType&lt;BR /&gt;&lt;/SPAN&gt;}&lt;BR /&gt;&lt;SPAN&gt;@readonly&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;entity &lt;/SPAN&gt;TreeEntity &lt;SPAN&gt;as projection on &lt;/SPAN&gt;TreeEntityTable {&lt;BR /&gt;&lt;SPAN&gt;  @title&lt;/SPAN&gt;:'&lt;SPAN&gt;{i18n&amp;gt;ID}&lt;/SPAN&gt;'&lt;BR /&gt;&lt;SPAN&gt;  key &lt;/SPAN&gt;id,&lt;BR /&gt;&lt;SPAN&gt;  @title&lt;/SPAN&gt;:'&lt;SPAN&gt;{i18n&amp;gt;SYSTEM_NAME}&lt;/SPAN&gt;'&lt;BR /&gt;  name,&lt;BR /&gt;&lt;SPAN&gt;  @titl&lt;/SPAN&gt;:'&lt;SPAN&gt;{i18n&amp;gt;NUMBER_OF_METRICS}&lt;/SPAN&gt;'&lt;BR /&gt;  numberOfMetrics,&lt;BR /&gt;&lt;SPAN&gt;  @title&lt;/SPAN&gt;:'&lt;SPAN&gt;{i18n&amp;gt;DATA_COLLECTION_STATUS}&lt;/SPAN&gt;'&lt;BR /&gt;  dataCollectionStatus,&lt;BR /&gt;&lt;SPAN&gt;  @title&lt;/SPAN&gt;:'&lt;SPAN&gt;{i18n&amp;gt;DATA_COLLECTION_STATUS_LABEL}&lt;/SPAN&gt;'&lt;BR /&gt;  dataCollectionStatusLabel,&lt;BR /&gt;  parentID,&lt;BR /&gt;  serviceType,&lt;BR /&gt;  parent : Association to TreeEntity &lt;SPAN&gt;on &lt;/SPAN&gt;parent.id = $self.parentID,&lt;BR /&gt;  children : Composition of many TreeEntity &lt;SPAN&gt;on &lt;/SPAN&gt;children.parentID = $self.id,&lt;BR /&gt;  statusLabelRelation : Association to one TreeEntityTableLabels &lt;SPAN&gt;on &lt;/SPAN&gt;statusLabelRelation.dataCollectionStatusLabel = $self.dataCollectionStatusLabel,&lt;BR /&gt;&lt;SPAN&gt;  virtual null as &lt;/SPAN&gt;LimitedDescendantCount : Integer64,&lt;BR /&gt;&lt;SPAN&gt;  virtual null as &lt;/SPAN&gt;DistanceFromRoot : Integer64,&lt;BR /&gt;&lt;SPAN&gt;  virtual null as &lt;/SPAN&gt;DrillState : String,&lt;BR /&gt;&lt;SPAN&gt;  virtual null as &lt;/SPAN&gt;LimitedRank : Integer64&lt;BR /&gt;};&lt;/PRE&gt;&lt;/DIV&gt;&lt;P&gt;We never expect our backend to return duplicate entries to our frontend but we have see that in few cases when a filter is applied which contains data with more than 1500 entries and when multiple calls to backend with different $top and $skip is fired our backend tends to return duplicate values.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-10-14 at 1.59.43‚ÄØPM.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327106i877FB03DDB00F804/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Screenshot 2025-10-14 at 1.59.43‚ÄØPM.png" alt="Screenshot 2025-10-14 at 1.59.43‚ÄØPM.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Please do let us know if you have faced the same issue or if you have already come across a fix for it.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/entity-returns-duplicate-value-when-used-with-filters-top-and-skip/qaq-p/14243197"/>
    <published>2025-10-14T10:30:43.572000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/generate-pdf-form-on-s-4hana-cloud-public-edition-from-btp-app/qaq-p/14243885</id>
    <title>Generate PDF form on S/4HANA Cloud, public edition from BTP app</title>
    <updated>2025-10-14T18:53:33.949000+02:00</updated>
    <author>
      <name>daa</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/16417</uri>
    </author>
    <content>&lt;P&gt;I‚Äôm building a BTP CAP application which should retrieve the PDF printout of an Outbound Delivery (FDP_V2_DELIVERY_NOTE_V1 template )out of an S/4HANA Cloud, public edition system.&lt;/P&gt;&lt;P&gt;Since no direct API exists (like for billing documents &lt;A href="https://api.sap.com/api/API_BILLING_DOCUMENT_SRV/overview" target="_blank" rel="noopener noreferrer"&gt;Overview | Billing Document - Read, Cancel, GetPDF | SAP Business Accelerator Hub&lt;/A&gt;), as per my understanding I‚Äôm left with three options:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Recreate the same form I have on S/4HANA on BTP with &lt;A href="https://www.sap.com/italy/products/technology-platform/forms-service-by-adobe.html" target="_blank" rel="noopener noreferrer"&gt;SAP Forms Service by Adobe&lt;/A&gt;&lt;/LI&gt;&lt;LI&gt;Get the PDF directly from CA_OC_OUTPUT_REQUEST_SRV Service&lt;/LI&gt;&lt;LI&gt;Create a small custom ABAP service to be called from BTP which, given a specific delivery number, could return a PDF&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;I tried all those routes, but couldn‚Äôt succeed for various reasons:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;A href="https://www.sap.com/italy/products/technology-platform/forms-service-by-adobe.html" target="_blank" rel="noopener noreferrer"&gt;SAP Forms Service by Adobe&lt;/A&gt;&lt;/LI&gt;&lt;OL class="lia-list-style-type-lower-alpha"&gt;&lt;LI&gt;it seems I can‚Äôt reuse the layout I made since the service only accept only one file, whereas mine is comprised of a master form and a content for&lt;/LI&gt;&lt;LI&gt;even if I could recreate it from scratch I don't know how I can get data out of the standard Data Provider (FDP_V2_DELIV_NOTE_LO_GLO_GEN_SRV) to pass it to the layout&lt;/LI&gt;&lt;/OL&gt;&lt;LI&gt;this does not seem to be a released API, therefore I think I could have a problem with Communication Arrangement technical user&lt;/LI&gt;&lt;LI&gt;on Premise FM like ‚ÄòFP_JOB_OPEN‚Äô etc.. are obviously forbidden, so I tried with proper classes like &lt;STRONG&gt;cl_fp_form_reader &lt;/STRONG&gt;like suggested in Note &lt;A href="https://me.sap.com/notes/3355397/E" target="_blank" rel="noopener noreferrer"&gt;3355397 - No support for custom form templates in S/4 HANA Cloud Developer Extensibility - SAP for Me&lt;/A&gt;, however, &amp;nbsp;since the form &lt;EM&gt;was &lt;/EM&gt;created using Maintain Form Template App, I tried to create in ADT, but no standard Data Provider can be chosen and I can‚Äôt even create my own copy with the proper annotations (as explained in note &lt;A href="https://me.sap.com/notes/3650179" target="_blank" rel="noopener noreferrer"&gt;3650179 - [2508] Cannot select data provider in ADT Form dialog - SAP for Me&lt;/A&gt;) because I can‚Äôt open SEGW on a Public Cloud environment.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;I‚Äôve hit a dead end. Can someone share a tip?&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/generate-pdf-form-on-s-4hana-cloud-public-edition-from-btp-app/qaq-p/14243885"/>
    <published>2025-10-14T18:53:33.949000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/cap-application-deployment-error/qaq-p/14244003</id>
    <title>cap application deployment error</title>
    <updated>2025-10-14T20:56:26.252000+02:00</updated>
    <author>
      <name>deepak_h3</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/214031</uri>
    </author>
    <content>&lt;P&gt;Mta file has both apps as below.&amp;nbsp;&lt;/P&gt;&lt;P&gt;On deploy the approuter gets deployed but when I click it shows cannot get /&lt;/P&gt;&lt;P&gt;Xsuaa is also present.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;I dont see my 2 apps under HTML applications.&amp;nbsp;&lt;/P&gt;&lt;P&gt;below is router content. what is the issue ?&amp;nbsp;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="deepak_h3_0-1760468084456.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327569i9A79F010ED210CD3/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="deepak_h3_0-1760468084456.png" alt="deepak_h3_0-1760468084456.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/cap-application-deployment-error/qaq-p/14244003"/>
    <published>2025-10-14T20:56:26.252000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/i-am-getting-a-blank-page-when-i-preview-my-rap-service-binding-in-the-btp/qaq-p/14244244</id>
    <title>I am getting a blank page when I preview my RAP service binding in the BTP trial account.</title>
    <updated>2025-10-15T06:59:51.945000+02:00</updated>
    <author>
      <name>Shyam4U</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1512208</uri>
    </author>
    <content>&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Shyam4U_0-1760502227809.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327675iF8EC7F165A0D60AC/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Shyam4U_0-1760502227809.png" alt="Shyam4U_0-1760502227809.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Shyam4U_1-1760502295672.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327676iD58C9EE2E8062FF3/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Shyam4U_1-1760502295672.png" alt="Shyam4U_1-1760502295672.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;TITLE:&lt;BR /&gt;UCON 403 Forbidden Error - "The request has been blocked by UCON" on OData Service&lt;/P&gt;&lt;P&gt;DESCRIPTION:&lt;BR /&gt;I am experiencing a 403 Forbidden error when trying to access an OData service through a Fiori application. The error message in the browser console states:&lt;/P&gt;&lt;P&gt;"The request has been blocked by UCON."&lt;/P&gt;&lt;P&gt;DETAILS:&lt;BR /&gt;- Error Code: 403 Forbidden&lt;BR /&gt;- Error Message: "The request has been blocked by UCON"&lt;BR /&gt;- Application URL: https://[your-system-url]/sap/bc/adt/businessservices/odatav2/feap/[service-details]/flp.html&lt;BR /&gt;- SAP Client: 100&lt;BR /&gt;- Language: EN&lt;BR /&gt;- Resource Endpoint: /sap/opu/odata/sap/Z[service-name]&lt;/P&gt;&lt;P&gt;ERROR DETAILS FROM BROWSER CONSOLE:&lt;BR /&gt;Failed to load resource: the server responded with a status of 403 (Forbidden)&lt;BR /&gt;/sap/opu/odata/sap/Z‚Ä¶e&amp;amp;sap-language=EN:1&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;I am trying to display a list view by creating an entity on this service definition, and I have also created a service binding for it.&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'demo'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define view entity Zsam_demo as select from /dmo/connection
{
@UI.lineItem: [{ position: 10 ,label: 'CarrierId' }]
    key carrier_id as CarrierId,
@UI.lineItem: [{ position: 20 ,label: 'ConnectionId' }]
    key connection_id as ConnectionId,
    &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 30 ,label: 'AirportFromId' }]
    airport_from_id as AirportFromId,
    &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 40 ,label: 'AirportToId' }]
    airport_to_id as AirportToId,
    &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 50 ,label: 'DepartureTime' }]
    departure_time as DepartureTime, 
    &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 60 ,label: 'ArrivalTime' }]
    arrival_time as ArrivalTime
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'demo'
define service Zssd_sam_demo {
  expose Zsam_demo;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Shyam4U_2-1760503736386.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/327686iB4F8335FEF6CAF36/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Shyam4U_2-1760503736386.png" alt="Shyam4U_2-1760503736386.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Please let me know anyone know to how resolve the issue&amp;nbsp;&lt;/P&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;P&gt;I tried everything ‚Äî I even deleted my BTP instance and created a new one, but I‚Äôm still facing the same issue.&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/i-am-getting-a-blank-page-when-i-preview-my-rap-service-binding-in-the-btp/qaq-p/14244244"/>
    <published>2025-10-15T06:59:51.945000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/sap-cap-deployment-error-cannot-read-properties-of-undefined-reading/qaq-p/14245812</id>
    <title>SAP CAP deployment - error Cannot read properties of undefined (reading 'decodeCache') at jwt_auth</title>
    <updated>2025-10-16T13:41:21.416000+02:00</updated>
    <author>
      <name>nguyenhoangthaihuy</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/852727</uri>
    </author>
    <content>&lt;P&gt;Hi,&lt;/P&gt;&lt;P&gt;I'm trying to deploy a NodeJS SAP CAP application to CF subaccount. However, it fails and returns the error message.&lt;/P&gt;&lt;pre class="lia-code-sample language-json"&gt;&lt;code&gt;{
   "date":"Thu Oct 16 2025 11:27:13 GMT+0000 (Coordinated Universal Time)",
   "error":{
      
   },
   "exception":true,
   "level":"error",
   "logger":"sap-cloud-sdk-logger",
   "message":"uncaughtException: Cannot read properties of undefined (reading 'decodeCache')\nTypeError: Cannot read properties of undefined (reading 'decodeCache')\n at jwt_auth (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/jwt-auth.js:25:13)\n at auth_factory (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/index.js:47:61)\n at _instantiate (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:49:12)\n at /home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:13:13\n at Array.map (&amp;lt;anonymous&amp;gt;)\n at Object.&amp;lt;anonymous&amp;gt; (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:13:3)\n at Module._compile (node:internal/modules/cjs/loader:1692:14)\n at Object..js (node:internal/modules/cjs/loader:1824:10)\n at Module.load (node:internal/modules/cjs/loader:1427:32)\n at Module._load (node:internal/modules/cjs/loader:1250:12)",
   "msg":"TypeError: Cannot read properties of undefined (reading 'decodeCache')\n at jwt_auth (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/jwt-auth.js:25:13)\n at auth_factory (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/index.js:47:61)\n at _instantiate (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:49:12)\n at /home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:13:13\n at Array.map (&amp;lt;anonymous&amp;gt;)\n at Object.&amp;lt;anonymous&amp;gt; (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:13:3)\n at Module._compile (node:internal/modules/cjs/loader:1692:14)\n at Object..js (node:internal/modules/cjs/loader:1824:10)\n at Module.load (node:internal/modules/cjs/loader:1427:32)\n at Module._load (node:internal/modules/cjs/loader:1250:12)",
   "os":{
      "loadavg":[
         3.7,
         4.19,
         3.62
      ],
      "uptime":3078.95
   },
   "process":{
      "argv":[
         "/home/vcap/deps/0/node/bin/node",
         "/home/vcap/app/node_modules/.bin/cds-serve"
      ],
      "cwd":"/home/vcap/app",
      "execPath":"/home/vcap/deps/0/node/bin/node",
      "gid":2000,
      "memoryUsage":{
         "arrayBuffers":120645,
         "external":3422153,
         "heapTotal":73289728,
         "heapUsed":44204360,
         "rss":134422528
      },
      "pid":228,
      "uid":2000,
      "version":"v24.3.0"
   },
   "stack":"TypeError: Cannot read properties of undefined (reading 'decodeCache')\n at jwt_auth (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/jwt-auth.js:25:13)\n at auth_factory (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/index.js:47:61)\n at _instantiate (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:49:12)\n at /home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:13:13\n at Array.map (&amp;lt;anonymous&amp;gt;)\n at Object.&amp;lt;anonymous&amp;gt; (/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js:13:3)\n at Module._compile (node:internal/modules/cjs/loader:1692:14)\n at Object..js (node:internal/modules/cjs/loader:1824:10)\n at Module.load (node:internal/modules/cjs/loader:1427:32)\n at Module._load (node:internal/modules/cjs/loader:1250:12)",
   "test":"exception",
   "timestamp":"2025-10-16T11:27:13.582Z",
   "trace":[
      {
         "column":13,
         "file":"/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/jwt-auth.js",
         "function":"jwt_auth",
         "line":25,
         "method":null,
         "native":false
      },
      {
         "column":61,
         "file":"/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/auth/index.js",
         "function":"auth_factory",
         "line":47,
         "method":null,
         "native":false
      },
      {
         "column":12,
         "file":"/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js",
         "function":"_instantiate",
         "line":49,
         "method":null,
         "native":false
      },
      {
         "column":13,
         "file":"/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js",
         "function":null,
         "line":13,
         "method":null,
         "native":false
      },
      {
         "column":null,
         "file":null,
         "function":"Array.map",
         "line":null,
         "method":"map",
         "native":false
      },
      {
         "column":3,
         "file":"/home/vcap/deps/0/node_modules/@sap/cds/lib/srv/middlewares/index.js",
         "function":null,
         "line":13,
         "method":null,
         "native":false
      },
      {
         "column":14,
         "file":"node:internal/modules/cjs/loader",
         "function":"Module._compile",
         "line":1692,
         "method":"_compile",
         "native":false
      },
      {
         "column":10,
         "file":"node:internal/modules/cjs/loader",
         "function":"Object..js",
         "line":1824,
         "method":".js",
         "native":false
      },
      {
         "column":32,
         "file":"node:internal/modules/cjs/loader",
         "function":"Module.load",
         "line":1427,
         "method":"load",
         "native":false
      },
      {
         "column":12,
         "file":"node:internal/modules/cjs/loader",
         "function":"Module._load",
         "line":1250,
         "method":"_load",
         "native":false
      }
   ],
   "written_at":"2025-10-16T11:27:13.582Z",
   "written_ts":1760614033582
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;NPM packages I'm using&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/163398"&gt;@cap&lt;/a&gt;-js/cds-types@0.11.0
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/163398"&gt;@cap&lt;/a&gt;-js/hana@2.1.1
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/163398"&gt;@cap&lt;/a&gt;-js/sqlite@2.0.1
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;-cloud-sdk/connectivity@3.26.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;-cloud-sdk/core@1.54.2
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;-cloud-sdk/generator@3.26.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;-cloud-sdk/http-client@3.26.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;-cloud-sdk/odata-v2@3.26.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;-cloud-sdk/odata-v4@3.26.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;-cloud-sdk/util@3.26.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/audit-logging@5.8.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/cds-dk@9.0.6
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/cds-odata-v2-adapter-proxy@1.9.21
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/cds@9.0.4
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/hana-client@2.26.18
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/hdi-deploy@4.9.1
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/ux-specification@1.136.8
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/xb-msg-amqp-v100@0.9.58
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/xb-msg-env@0.9.8
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/xb-msg@0.9.12
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/xsenv@4.2.0
‚îú‚îÄ‚îÄ &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1862993"&gt;@SAP&lt;/a&gt;/xssec@3.6.2
‚îú‚îÄ‚îÄ axios@1.12.2
‚îú‚îÄ‚îÄ cds-plugin-ui5@0.13.6
‚îú‚îÄ‚îÄ express@4.21.2
‚îú‚îÄ‚îÄ hdb@0.19.12
‚îú‚îÄ‚îÄ mbt@1.2.34
‚îú‚îÄ‚îÄ moment@2.30.1
‚îú‚îÄ‚îÄ nodemon@3.1.10
‚îú‚îÄ‚îÄ passport@0.7.0
‚îú‚îÄ‚îÄ pm2@5.4.3
‚îú‚îÄ‚îÄ request-promise@4.2.6
‚îú‚îÄ‚îÄ request@2.88.2
‚îú‚îÄ‚îÄ rimraf@5.0.10
‚îú‚îÄ‚îÄ sap-cf-axios@1.0.2
‚îî‚îÄ‚îÄ sqlite3@5.1.7&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Has anyone seen this error before?&lt;/P&gt;&lt;P&gt;Regards,&lt;/P&gt;&lt;P&gt;Huy&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/sap-cap-deployment-error-cannot-read-properties-of-undefined-reading/qaq-p/14245812"/>
    <published>2025-10-16T13:41:21.416000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-q-a/sap-cap-app-template-generator-crashing-with-env-on-error/qaq-p/14246298</id>
    <title>sap cap app template generator crashing with env.on error</title>
    <updated>2025-10-16T19:11:56.995000+02:00</updated>
    <author>
      <name>deepak_h3</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/214031</uri>
    </author>
    <content>&lt;P&gt;sap cap app template generator crashing with env.on error&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="deepak_h3_0-1760634623914.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328614i308F64DBF09B8776/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="deepak_h3_0-1760634623914.png" alt="deepak_h3_0-1760634623914.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="deepak_h3_1-1760634646691.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328615i1413AFDFBB3A8CE7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="deepak_h3_1-1760634646691.png" alt="deepak_h3_1-1760634646691.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-q-a/sap-cap-app-template-generator-crashing-with-env-on-error/qaq-p/14246298"/>
    <published>2025-10-16T19:11:56.995000+02:00</published>
  </entry>
</feed>
