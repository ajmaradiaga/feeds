<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>https://raw.githubusercontent.com/ajmaradiaga/feeds/main/scmt/topics/SAP-Integration-Suite-blog-posts.xml</id>
  <title>SAP Community - SAP Integration Suite</title>
  <updated>2026-01-07T18:01:17.747928+00:00</updated>
  <link href="https://community.sap.com/t5/c-khhcw49343/SAP Integration Suite/pd-p/73554900100800003241" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator>
  <subtitle>SAP Integration Suite blog posts in SAP Community</subtitle>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/santa-learns-lessons-from-the-past-successful-agentic-ai-needs-an-event/ba-p/14293212</id>
    <title>Santa learns lessons from the past: Successful Agentic AI needs an Event Driven Architecture</title>
    <updated>2025-12-18T11:56:50.616000+01:00</updated>
    <author>
      <name>robert_pickering</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/222583</uri>
    </author>
    <content>&lt;P&gt;Most organisations realise that Agentic AI will become critical to their business. But there is still hesitation about giving up more control to these new agents. What if they make bad decisions, what if they do the wrong thing ?&lt;/P&gt;&lt;P&gt;I’ve been in the technology industry for more decades than I may care to admit. Before joining SAP, I spent 14 years working within Financial Services and Capital Markets. It is interesting to reflect on those times. Many of the challenges back then remain the same today.&lt;/P&gt;&lt;P&gt;In Financial Services, the major players did not hesitate to innovate with new technology – for them it was opportunity. Very early on they realised that trading in “simpler” financial instruments ( e.g. foreign exchange ) did not really need humans shouting excitedly at one another on the (tele)phone. That trading was quickly handed over to computers – and whilst it was perhaps not AI by today’s definition, it was certainly &lt;STRONG&gt;algorithmic&lt;/STRONG&gt; and it was most definitely &lt;STRONG&gt;autonomous&lt;/STRONG&gt;. Billions still gets traded by these Agentic AI predecessors, all based on the lightning-fast decisions they make ( but operating within parameters and thresholds defined by humans that quantify the risk ).&lt;/P&gt;&lt;P&gt;Decisions are made as a result of an event that arises. &lt;U&gt;Better&lt;/U&gt; decisions are made knowing the wider context of that event. Yes, context comes from data. Wider context ( surprise ! ) comes from more and different data. But all that data needs to be super up-to-date, and accurate.&lt;/P&gt;&lt;P&gt;Financial Services firms understood and solved this also. In a 24x7 global market, there is no window for a batch run to load data. Trading systems, market data providers, stock exchanges, market and credit risk systems and more, all needed to be wired together for simultaneous update of data. Plus, it needed to be robust and flexible to add-in other market participants and their systems also.&lt;/P&gt;&lt;P&gt;Most firms adopted architectures built around messaging-oriented middleware, with technologies like Enterprise Service Bus, Message Queue, and Event Bus amongst others, all being variations on a theme that today we call an &lt;STRONG&gt;Event Driven Architecture&lt;/STRONG&gt; (EDA). Their appetite for speed pushed the technology to milli-second response times and super high-availability. Equally valuable was that the decoupled publisher-subscriber model allowed much faster and easier recovery if any of the participants in their expanded trading ecosystem did experience a failure.&lt;/P&gt;&lt;P&gt;Perhaps such requirements seem a bit extreme for many companies operating in other industry segments. But the world is increasingly real time for the majority of businesses, and as Agentic AI plays a bigger part in your daily operations, it may be time to reflect on these lessons.&lt;/P&gt;&lt;P&gt;To highlight this more tangibly, I thought about a festive ( but fictional ? ) example where the capabilities of an Event Driven Architecture could really make a difference. So grab a coffee, something sweet to eat ( save the gym for the New Year ) and read on …&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Santa Inc refactors gift delivery on an Event Driven Architecture&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;After decades relying on delivery to every home in sequence, Santa has realised this will no longer scale and he risks missing targets and some serious reputational damage. His operations used to be ok, but the customer base expands every year and getting to all of those in one day is now stretching the imagination.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="291356_GettyImages-1283733014_medium_jpg.jpg" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353517i5E415B5FBE57E34C/image-size/medium?v=v2&amp;amp;px=400" role="button" title="291356_GettyImages-1283733014_medium_jpg.jpg" alt="291356_GettyImages-1283733014_medium_jpg.jpg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Production used to be straightforward when it was just teddy bears, dolls, drums and toy trains, but now with games consoles, smartphones and other sophisticated presents it has become necessary to outsource to specialised manufacturing facilities in many countries. The elves have switched roles from sewing and carpentry to now managing supply chains, delivery bottlenecks and stock-outs – they’re stressed and threatening to go on strike ! Managing stock and purchasing was much easier when children used to write letters, but now they post their wish lists on social media – and keep changing their minds based on what is trending ! Logistics was never a problem – Rudolph and the other reindeer managed through even the harshest weather. But now they are obliged to adhere to air-traffic control diversions and compulsory rest stops. Finally, when delivering a present, it was disappointing to find out &amp;nbsp;( too late ) that the child had been naughty rather than nice. It meant carrying extra payload on the sleigh and unnecessary manufacturing and purchase costs.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;Santa has an extensive IT landscape and ecosystem. But he realised even his magical powers were no longer the answer – &lt;STRONG&gt;it was time to transform his operations&lt;/STRONG&gt;. But not rip and replace … even with 364 quieter days, that would still be too much work. Besides, most of the individual systems did what they needed to do – it was just they didn’t really react to each other that well. There was a lot of point-to-point connection between the production, inventory, CRM and other systems, with each repeatedly polling the other for updates – a real spaghetti architecture. Adding new suppliers’ systems into this landscape was slow. Recovering from any one system failure, having to replay lost transactions and regain overall confidence in stock quantities and delivery shipments an even bigger nightmare.&lt;/P&gt;&lt;P&gt;All of this was putting huge pressure on the elves. Santa has always been committed to his workforce, and he wanted the team to be happy and motivated. He looked to Agentic AI to help them, to manage the scale and complexity of supply chains. But like his elves, those AI agents would need to be super-smart, reactive, and always up to date with reliable data.&lt;/P&gt;&lt;P&gt;And then the lightbulb went on for Santa. He was reading this &lt;A href="https://www.technologyreview.com/2025/10/06/1124323/enabling-real-time-responsiveness-with-event-driven-architecture/" target="_blank" rel="noopener nofollow noreferrer"&gt;article&lt;/A&gt; about Event Driven Architecture and realised that would answer so many of these problems. The synchronous and repeated point-to-point communication is taken away. Instead, events are published asynchronously, with brokers distributing and guaranteeing them, to be consumed by any system that is interested – instantly ( super-fast ) and simultaneously ( not each system in turn ). The spaghetti is now replaced by something more like a giant distributed smorgasbord in which everyone ( elves, agents and ecosystem partners ) can share all at once. &lt;EM&gt;NOTE: Santa was never a fan of spaghetti but does quite enjoy a good smorgasbord.&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;With an Event Driven Architecture, Santa could be much more responsive in his production runs and purchasing. Plus, new suppliers could be on-boarded quickly and easily to cater for peaks in toy popularity, as well as getting up-to-date pricing and costs across his ecosystem. On the big night itself, so many of those delivery headaches could now be mitigated. Travel and weather alerts would be provided immediately for dynamic routing updates ( and for Santa, every milli-second matters ). Add to this a real-time feed of naughty-or-nice monitoring data being gathered by event brokers across the globe ( some in very remote locations ) and made available to the dynamic routing algorithm as well as stock logistics teams ( Santa has an increasing network of warehouses that he needs to stop at – he cannot carry everything on his sleigh ).&lt;/P&gt;&lt;P&gt;Santa and his Enterprise Architect ( another Elf ) looked at options and decided on SAP Integration Suite, Advanced Event Mesh. Given that 84% of the world’s global commerce runs on SAP systems, and these already have high-value business events out-of-the-box, it was likely that much of Santa’s ecosystem could be easily included. Even for those using other vendors’ applications, the solution was open to those via industry-standard protocols, plus it was possible to include custom-built events. It did not need rip and replace, and the system could scale by adding more brokers over time to create an&amp;nbsp;&lt;STRONG&gt;event mesh&lt;/STRONG&gt;. Even better, that same infrastructure could be used for other event use cases ( Santa wondered about moving into Travel &amp;amp; Entertainment for the rest of the year – perhaps offering trips on the sleigh into low earth orbit – he thought that might become popular ).&lt;/P&gt;&lt;P&gt;Whilst looking at SAP, his Enterprise Architect saw SAP Build &lt;A href="https://www.sap.com/products/artificial-intelligence/joule-studio.html" target="_blank" rel="noopener noreferrer"&gt;Joule Studio&lt;/A&gt;, to create the AI agents. That seemed an obvious choice also – many processes would run on SAP, the most relevant and up-to-date operational data resides there, plus it offered a large choice of LLMs across the major providers. Quick to get into production also – because they rapidly needed to regain morale amongst the elves.&lt;/P&gt;&lt;P&gt;So that’s the story of how one globally recognised brand came to explore the benefits of an Event Driven Architecture. If you recognise any similarities to challenges within your own business operation, then I would invite you learn more &lt;A href="https://www.sap.com/products/technology-platform/integration-suite/advanced-event-mesh.html" target="_blank" rel="noopener noreferrer"&gt;here&lt;/A&gt;. Or, if you would like to see an example that the elves built earlier, then please do look at this &lt;A href="https://www.sap.com/assetdetail/2025/11/f0033bb9-297f-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;short demo&lt;/A&gt;.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/santa-learns-lessons-from-the-past-successful-agentic-ai-needs-an-event/ba-p/14293212"/>
    <published>2025-12-18T11:56:50.616000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/try-out-api-and-the-http-error-message-500-rise/ba-p/14293905</id>
    <title>Try out API and the http error message 500 rise</title>
    <updated>2025-12-18T21:53:54.819000+01:00</updated>
    <author>
      <name>otavio_soares</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/442475</uri>
    </author>
    <content>&lt;P&gt;Hi experts,&lt;/P&gt;&lt;P&gt;I've done the mission "&lt;SPAN&gt;Get Started with Integration Suite" and I've had in troble with the error 500. I tried some trobleshootings but they don't work.&amp;nbsp;&lt;/SPAN&gt;Could somebody help me with this error and have a tip? Debug image following as attachment.&lt;/P&gt;&lt;DIV class=""&gt;&amp;nbsp;&lt;/DIV&gt;&lt;DIV class=""&gt;Properties&lt;/DIV&gt;&lt;UL class=""&gt;&lt;LI&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;SPAN class=""&gt;error&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Execution of ServiceCallout getoauthtoken failed. Reason: ResponseCode 400 is treated as error&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;LI&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;SPAN class=""&gt;type&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ErrorPoint&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;LI&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;SPAN class=""&gt;state&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;TARGET_REQ_FLOW&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;LI&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;SPAN class=""&gt;error.class&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;com.apigee.kernel.exceptions.spi.UncheckedException&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;LI&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;SPAN class=""&gt;error.cause&lt;/SPAN&gt;&lt;SPAN class=""&gt;:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ResponseCode 400 is treated as error&lt;/SPAN&gt;&lt;/DIV&gt;&lt;DIV class=""&gt;&amp;nbsp;&lt;/DIV&gt;&lt;DIV class=""&gt;&lt;SPAN&gt;BR, Otavio.&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/LI&gt;&lt;/UL&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/try-out-api-and-the-http-error-message-500-rise/ba-p/14293905"/>
    <published>2025-12-18T21:53:54.819000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/stop-building-from-scratch-unlocking-sap-cloud-integration-s-standard/ba-p/14294108</id>
    <title>Stop Building From Scratch: Unlocking SAP Cloud Integration’s Standard Content</title>
    <updated>2025-12-19T07:44:01.562000+01:00</updated>
    <author>
      <name>Punith_Oswal</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/148179</uri>
    </author>
    <content>&lt;P&gt;A few months ago, I joined a project where the integration team was spending weeks designing mappings, data models, and error-handling frameworks for processes that were all quite common in business environments.&lt;/P&gt;&lt;P&gt;Sales Orders, Customers, Accounts and other Business Objects&lt;/P&gt;&lt;P&gt;The system landscape was straightforward:&lt;BR /&gt;SAP S/4HANA on the backend, Salesforce as the CRM, and the business just wanted data to flow seamlessly between the two.&lt;/P&gt;&lt;P&gt;The team had already started building everything manually:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Canonical models for Business Partners&lt;/LI&gt;&lt;LI&gt;Transformations to Salesforce Accounts&lt;/LI&gt;&lt;LI&gt;Retry frameworks and error handling&lt;/LI&gt;&lt;/UL&gt;&lt;DIV&gt;After Six weeks of design workshops, not a single iFlow was built yet.&lt;/DIV&gt;&lt;DIV&gt;At one point, I asked: &lt;I&gt;“Have we checked the Discover space in SAP CI for pre-built Salesforce content?”&lt;/I&gt;&lt;/DIV&gt;&lt;DIV&gt;The answer was a confident:&amp;nbsp; &lt;I&gt;"No. We always build our own.”&lt;/I&gt;&lt;/DIV&gt;&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;DIV&gt;Fast forward a few hours later, we sat together and opened Discover.&lt;/DIV&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Punith_Oswal_0-1766077520461.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353855i0943D920229E4A09/image-size/large?v=v2&amp;amp;px=999" role="button" title="Punith_Oswal_0-1766077520461.png" alt="Punith_Oswal_0-1766077520461.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Most of what they were planning to design had already been &lt;SPAN&gt;developed &lt;/SPAN&gt;by SAP, ready to use, specifically for S/4HANA to Salesforce integration, &lt;SPAN&gt;available &lt;/SPAN&gt;in the Discover space of SAP Cloud Integration.&lt;/P&gt;&lt;P&gt;There &lt;SPAN&gt;are &lt;/SPAN&gt;pre-built integration flows for:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Business Partner ↔ Account&lt;/LI&gt;&lt;LI&gt;Order ↔ Opportunity status&lt;/LI&gt;&lt;LI&gt;Customer master synchronization&lt;/LI&gt;&lt;LI&gt;Error handling and notifications&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Instead of designing everything from scratch, all they needed to do was deploy, configure, and extend where necessary.&lt;/P&gt;&lt;P&gt;And this experience has repeated itself across multiple customers, industries, and systems, teams spending months designing integrations that SAP had already delivered as out-of-the-box content.&lt;/P&gt;&lt;P&gt;Not because the team enjoy reinventing the wheel,&lt;BR /&gt;but because they simply didn’t know the wheel already existed.&lt;/P&gt;&lt;P&gt;So, this blog is for everyone who is still building everything from scratch, not because they want to, but because they don’t know that SAP already provides out-of-the-box integration content.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1896498990"&gt;&lt;STRONG&gt;What Is Standard Integration Content?&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;In simple terms, it’s SAP’s way of saying: “Here are prebuilt integration flows, mappings, APIs, and business objects. You don’t need to start from zero.”&lt;/DIV&gt;&lt;P&gt;This content is:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Built by SAP&lt;/LI&gt;&lt;LI&gt;Delivered as part of your Integration Suite license&lt;/LI&gt;&lt;LI&gt;Designed for common business processes&lt;/LI&gt;&lt;LI&gt;Packaged with best practices and enterprise patterns&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Think of it as &lt;STRONG&gt;Lego blocks&lt;/STRONG&gt;.&lt;BR /&gt;SAP gives you the pieces, and you assemble what fits your scenario.&lt;/P&gt;&lt;H3 id="toc-hId-1699985485"&gt;&amp;nbsp;&lt;/H3&gt;&lt;H3 id="toc-hId-1503471980"&gt;&lt;STRONG&gt;But How Much Content Are We Talking About?&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;Here’s the scale people don’t realize:&lt;/DIV&gt;&lt;P&gt;&lt;STRONG&gt;700+ Integration Packages and nearly 4000 iFlows&lt;/STRONG&gt; delivered out-of-the-box by SAP.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Punith_Oswal_1-1766077577995.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353857iA0DF6975DBF642D2/image-size/large?v=v2&amp;amp;px=999" role="button" title="Punith_Oswal_1-1766077577995.png" alt="Punith_Oswal_1-1766077577995.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Punith_Oswal_2-1766077578000.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353856iC55113997A77402E/image-size/large?v=v2&amp;amp;px=999" role="button" title="Punith_Oswal_2-1766077578000.png" alt="Punith_Oswal_2-1766077578000.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;This isn’t just “some content”.&lt;BR /&gt;It’s an entire ecosystem of reusable assets built to accelerate enterprise integration.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1306958475"&gt;&lt;STRONG&gt;Reality Check: Actual time needed to build integrations&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;In many organizations, a typical integration project goes like this:&lt;/DIV&gt;&lt;H4 id="toc-hId-1239527689"&gt;&lt;STRONG&gt;Classic approach (manual build)&lt;/STRONG&gt;&lt;/H4&gt;&lt;UL&gt;&lt;LI&gt;6–8 weeks of design&lt;/LI&gt;&lt;LI&gt;6–10 weeks of development&lt;/LI&gt;&lt;LI&gt;Testing + refinements&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;EM&gt;Total: 12–20 weeks&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Punith_Oswal_3-1766077641857.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353862iF93B0039DB62B50E/image-size/large?v=v2&amp;amp;px=999" role="button" title="Punith_Oswal_3-1766077641857.png" alt="Punith_Oswal_3-1766077641857.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H4 id="toc-hId-1043014184"&gt;&lt;STRONG&gt;With Standard Integration Content&lt;/STRONG&gt;&lt;/H4&gt;&lt;UL&gt;&lt;LI&gt;Deploy existing flows&lt;/LI&gt;&lt;LI&gt;Configure mappings&lt;/LI&gt;&lt;LI&gt;Tailor business-specific logic&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;EM&gt;Total: 2–6 weeks&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Punith_Oswal_4-1766077641861.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353863iBC180AB9B3BDD1A3/image-size/large?v=v2&amp;amp;px=999" role="button" title="Punith_Oswal_4-1766077641861.png" alt="Punith_Oswal_4-1766077641861.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-717417960"&gt;&lt;STRONG&gt;What’s in the Box?&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;Standard content includes:&lt;/DIV&gt;&lt;UL&gt;&lt;LI&gt;Pre-built iFlows&lt;/LI&gt;&lt;LI&gt;Value mappings&lt;/LI&gt;&lt;LI&gt;Event-based integrations&lt;/LI&gt;&lt;LI&gt;Error handling logic&lt;/LI&gt;&lt;LI&gt;Industry-specific templates&lt;/LI&gt;&lt;LI&gt;Configuration Guide&lt;/LI&gt;&lt;/UL&gt;&lt;DIV&gt;Some packages even include complete integration scenarios.&amp;nbsp;You don’t just get sample content, You get deployment-ready accelerators.&lt;/DIV&gt;&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;H3 id="toc-hId-520904455"&gt;&lt;STRONG&gt;Out-of-the-Box” Means Out-of-the-Budget&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;Here’s the part that surprises most people:&amp;nbsp;There is no additional cost for this. As long as you have a valid license for SAP Integration Suite, you already have access to the standard integration content.&lt;/DIV&gt;&lt;P&gt;There’s no marketplace fee.&lt;BR /&gt;There’s no premium tier.&lt;BR /&gt;There’s no “enterprise unlock”.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-324390950"&gt;&lt;STRONG&gt;Where Do You Find It?&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;If you’ve never explored it, here’s how to get started:&lt;/DIV&gt;&lt;OL&gt;&lt;LI&gt;Open SAP Integration Suite&lt;/LI&gt;&lt;LI&gt;Go to Discover&lt;/LI&gt;&lt;LI&gt;Search for apps or domains (e.g., SuccessFactors, Salesforce, Ariba)&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Punith_Oswal_5-1766077704699.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353866i7F46D34BAEDCA491/image-size/large?v=v2&amp;amp;px=999" role="button" title="Punith_Oswal_5-1766077704699.png" alt="Punith_Oswal_5-1766077704699.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Review package&lt;/LI&gt;&lt;LI&gt;Copy and adapt&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Punith_Oswal_6-1766077704701.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353867iC0EAD53232987395/image-size/large?v=v2&amp;amp;px=999" role="button" title="Punith_Oswal_6-1766077704701.png" alt="Punith_Oswal_6-1766077704701.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;As soon as you copy the package, it gets visible in the design tab of your tenant, Now the package is ready to be used. You can configure, modify and make it ready to use.&lt;/P&gt;&lt;P&gt;If you’re new to SAP CI, take 30 minutes and browse, it will change how you approach integration forever.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-127877445"&gt;&lt;STRONG&gt;Why Use Standard Content?&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;Here’s the business value:&lt;/DIV&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Faster delivery&lt;/STRONG&gt;&lt;BR /&gt;Skip the blueprinting for obvious processes.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Lower risk&lt;/STRONG&gt;&lt;BR /&gt;SAP delivers content that is tested, versioned, and updated.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;SAP Support and Maintenance&lt;/STRONG&gt;&lt;BR /&gt;Support is provided by SAP and updates are released if any.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Best practices by default&lt;/STRONG&gt;&lt;BR /&gt;You don’t have to reinvent canonical models or data mappings.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;More time for innovation&lt;/STRONG&gt;&lt;BR /&gt;Deliver outcomes, not just interfaces.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;My favorite way to summarize it: SAP builds 70-80% of the technical plumbing. You only customize what makes your business unique.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId--143867429"&gt;&lt;STRONG&gt;Customize, Don’t Copy-Paste&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;A common misconception is: “&lt;I&gt;Standard content means I have to use it the way it comes.&lt;/I&gt;”&lt;/DIV&gt;&lt;DIV&gt;The answer is: "&lt;EM&gt;No&lt;/EM&gt;"&lt;/DIV&gt;&lt;P&gt;You can:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Extend mappings&lt;/LI&gt;&lt;LI&gt;Add enrichment logic&lt;/LI&gt;&lt;LI&gt;Build wrapper services&lt;/LI&gt;&lt;LI&gt;Add error or retry mechanisms&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;SAP expects you to tailor it.&lt;/P&gt;&lt;DIV&gt;The goal is not reuse OR&amp;nbsp;customize.&lt;BR /&gt;The goal is reuse AND&amp;nbsp;customize smartly.&lt;/DIV&gt;&lt;P&gt;But here’s a very important nuance that many teams overlook:&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;When you directly modify a standard integration flow, SAP continues to support the standard baseline, but not the customized version. From that point on, you own the lifecycle of the changes.&amp;nbsp;&lt;/SPAN&gt; And honestly, it makes complete sense. Because once you’ve edited it, SAP has no visibility into:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;What you changed&lt;/LI&gt;&lt;LI&gt;Why you changed it&lt;/LI&gt;&lt;LI&gt;Whether your changes break functional assumptions&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;So they can’t be accountable for something they didn’t design or test.&lt;/P&gt;&lt;P&gt;This doesn’t mean “don’t customize”.&lt;/P&gt;&lt;P&gt;There are smarter patterns teams follow to balance reuse + support:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Overlay mappings instead of rewriting&lt;/LI&gt;&lt;LI&gt;Wrap standard content in a parent orchestrator&lt;/LI&gt;&lt;LI&gt;Avoid editing the original package unless absolutely necessary&lt;/LI&gt;&lt;LI&gt;Clone only when you fully “own” the lifecycle&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;In other words:&lt;/P&gt;&lt;DIV&gt;Standard content should be reused wherever feasible and extended cautiously when required. Customization should be undertaken only when full ownership and support responsibility can be assumed, ensuring faster delivery and long-term stability.&lt;/DIV&gt;&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;H3 id="toc-hId--340380934"&gt;&lt;STRONG&gt;But Let’s Be Honest&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;Standard content is not perfect.&lt;/DIV&gt;&lt;P&gt;Sometimes:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The business process doesn’t match your reality&lt;/LI&gt;&lt;LI&gt;Documentation is light&lt;/LI&gt;&lt;LI&gt;Customization becomes unavoidable&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;That’s okay. Think of standard content as a foundation, not a finished building.&lt;/P&gt;&lt;P&gt;It saves you weeks of work.Not &lt;STRONG&gt;all&lt;/STRONG&gt; the work.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId--536894439"&gt;&lt;STRONG&gt;The Mindset Shift&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;The biggest barrier to adoption is not technology, its culture. Many Integration Teams have this default behavior:&lt;/DIV&gt;&lt;DIV&gt;“Open Integration Suite → Create iFlow → Start designing”&lt;/DIV&gt;&lt;DIV&gt;But the better question is: “Has SAP already solved this problem for me?”&lt;/DIV&gt;&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;DIV&gt;We don’t get awards for reinventing wheels, We get value from delivering outcomes faster.&lt;/DIV&gt;&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;H3 id="toc-hId--733407944"&gt;&lt;STRONG&gt;Real-World Examples&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;Here are real scenarios where standard content gave teams a head start:&lt;/DIV&gt;&lt;UL&gt;&lt;LI&gt;Salesforce Integration with SAP Signavio Process Intelligence&lt;/LI&gt;&lt;LI&gt;SAP S/4HANA Integration with Coupa&lt;/LI&gt;&lt;LI&gt;SAP S/4HANA Integration with Zycus&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;What would normally take 6-8 weeks of design + development&lt;BR /&gt;sometimes went live in 2-3 weeks with tailoring.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId--929921449"&gt;&lt;STRONG&gt;Wrapping Up&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;SAP Cloud Integration doesn’t just give you a platform. It gives you content, knowledge, and patterns out-of-the-box.&lt;/DIV&gt;&lt;DIV&gt;And yet, so many organizations overlook it spending time, budget, and energy on things that are already there.&lt;/DIV&gt;&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;DIV&gt;So the next time someone says: &lt;I&gt;“We’ll build the integration from scratch.”&lt;/I&gt;&lt;/DIV&gt;&lt;DIV&gt;Ask them: &lt;I&gt;“Or should we check what SAP already provides?”&lt;/I&gt;&lt;/DIV&gt;&lt;DIV&gt;It’s a small question with massive impact.&lt;/DIV&gt;&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;H3 id="toc-hId--1126434954"&gt;&lt;STRONG&gt;Join the Conversation&lt;/STRONG&gt;&lt;/H3&gt;&lt;DIV&gt;Standard Integration Content in SAP CI continues to grow because practitioners share real-world experiences, gaps, and ideas. If you come across a business scenario or integration use case where standard content is missing or doesn’t fully meet your needs, don’t keep it to yourself, share it in the comments or reach out. Your feedback truly matters.&lt;/DIV&gt;&lt;P&gt;Have you already used Standard Integration Content in SAP Cloud Integration? What worked well, what didn’t, and what surprised you along the way? Share your experiences, lessons, and tips, because the SAP community learns fastest when we learn together and every insight helps make the standard content more relevant for everyone.&lt;/P&gt;&lt;P&gt;Hope this helps!&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;DIV&gt;Cheers,&lt;/DIV&gt;&lt;DIV&gt;Punith&lt;/DIV&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/stop-building-from-scratch-unlocking-sap-cloud-integration-s-standard/ba-p/14294108"/>
    <published>2025-12-19T07:44:01.562000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/new-fixes-and-features-in-the-pipeline-for-cloud-integration-package-with/ba-p/14294379</id>
    <title>New fixes and features in the Pipeline for Cloud Integration package with the Dec 2025 shipment</title>
    <updated>2025-12-19T14:37:39.036000+01:00</updated>
    <author>
      <name>alex_bundschuh</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/45178</uri>
    </author>
    <content>&lt;P&gt;We have just shipped new versions of the following Pipeline for Cloud Integration packages, this time rather smaller changes and also reacting on a customer ticket which is fixed now:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://hub.sap.com/package/CloudIntegrationPipelineGenericInbound" target="_blank" rel="noopener noreferrer"&gt;Cloud Integration Pipeline - Generic Inbound&lt;/A&gt; version 1.0.5&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://hub.sap.com/package/CloudIntegrationPipelineGenericPipelines" target="_blank" rel="noopener noreferrer"&gt;Cloud Integration Pipeline - Generic Pipelines&lt;/A&gt; version 1.0.3&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://hub.sap.com/package/CloudIntegrationPipelineTemplates" target="_blank" rel="noopener noreferrer"&gt;Cloud Integration Pipeline - Templates&lt;/A&gt; version 1.1.0&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Please &lt;STRONG&gt;update the packages&lt;/STRONG&gt; in your Design area to benefit from the changes.&lt;/P&gt;&lt;P&gt;For the generic outbound package, we haven't done any changes this time. Here, we have just recently shipped major changes with the two new generic integration flows for XI and IDoc outbound. See&amp;nbsp;&lt;A class="" href="https://community.sap.com/t5/integration-blog-posts/generic-xi-outbound-flow-in-cloud-integration-pipeline/ba-p/14269061" target="_blank"&gt;Generic XI Outbound flow in Cloud Integration Pipeline&lt;/A&gt; and &lt;A class="" href="https://community.sap.com/t5/integration-blog-posts/generic-idoc-outbound-flow-in-cloud-integration-pipeline/ba-p/14269062" target="_blank"&gt;Generic IDoc Outbound flow in Cloud Integration Pipeline&lt;/A&gt;.&lt;/P&gt;&lt;P&gt;The following new features have been shipped at a glance:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;We have changed the duplicate handling for the generic XI and IDoc inbound processing flows as follows: In case of duplicates, the message processing logs end with &lt;EM&gt;Completed&lt;/EM&gt; instead of &lt;EM&gt;Escalated&lt;/EM&gt; to avoid that an http error code 500 is returned to the sending system.&lt;/LI&gt;&lt;LI&gt;For testing purposes, you can now switch off the duplicate check for the generic IDoc inbound processing flow. By default, the duplicate handling is enabled.&lt;/LI&gt;&lt;LI&gt;The XI inbound processing flow now supports dynamic adapter-specific headers. A feature which has just recently be shipped with an enhancement of the XI adapter. See &lt;A href="https://help.sap.com/docs/cloud-integration/sap-cloud-integration/configure-xi-receiver-adapter#dynamic-headers" target="_blank" rel="noopener noreferrer"&gt;Dynamic Headers&lt;/A&gt;.&lt;/LI&gt;&lt;LI&gt;An Exactly Once In Order (EOIO) check has been added to the IDoc inbound processing flow. Since we do not support EOIO in the Pipeline yet, the message goes into an error.&lt;/LI&gt;&lt;LI&gt;The definition of alternative partners has been extended to be able to determine partner ID based on sender component name, sender interface name, and sender interface namespace. This was supported before for XI and IDoc inbound scenarios, now you can do this for any scenario if required. If not, you can stick to the option to&amp;nbsp;determine partner ID based on sender component name and sender interface name only.&lt;/LI&gt;&lt;LI&gt;We fixed an issue with a wrong reference to a script in the &lt;A href="https://hub.sap.com/integrationflow/com.sap.integration.cloud.pipeline.v2.generic.step02.integrated.messaging.sync" target="_blank" rel="noopener noreferrer"&gt;Pipeline v2 Generic Step02 - Integrated Messaging Runtime Sync&lt;/A&gt; flow.&lt;/LI&gt;&lt;LI&gt;The allowed headers list of the template flow &lt;A href="https://hub.sap.com/integrationflow/com.sap.integration.cloud.pipeline.v2.template.custom.exit" target="_blank" rel="noopener noreferrer"&gt;Pipeline v2 Template - Custom Exit&lt;/A&gt; has been extended to support the header &lt;EM&gt;SapQualityOfService&lt;/EM&gt;. This way, you have the option to use or change the&amp;nbsp;&lt;EM&gt;SapQualityOfService&lt;/EM&gt; header in a custom pre-processing flow. For instance, you do not like to change the EOIO setup of an XI interface in the sender system but still like to process the messages in the Pipeline accepting EO delivery as long as the Pipeline doesn't support EOIO. So you can call the custom exit flow right at the beginning of the generic XI inbound flow and switch from &lt;EM&gt;ExactlyOnceInOrder&lt;/EM&gt; to &lt;EM&gt;ExactlyOnce&lt;/EM&gt;.&lt;/LI&gt;&lt;LI&gt;A new template &lt;A href="https://hub.sap.com/integrationflow/com.sap.integration.cloud.pipeline.v2.template.step07.outbound.processing.p2p.to.xi" target="_blank" rel="noopener noreferrer"&gt;Pipeline v2 Template Step07 - Outbound Processing Point-to-Point to Generic XI Outbound&lt;/A&gt; has been added that allows you to create a scenario-specific outbound processing flow that calls the generic XI outbound processing flow. The template can be used for both synchronous and asynchronous communication.&lt;/LI&gt;&lt;LI&gt;A new template &lt;A href="https://hub.sap.com/integrationflow/com.sap.integration.cloud.pipeline.v2.template.step07.outbound.processing.p2p.to.idoc" target="_blank" rel="noopener noreferrer"&gt;Pipeline v2 Template Step07 - Outbound Processing Point-to-Point to Generic IDoc Outbound&lt;/A&gt; has been added that allows you to create a scenario-specific outbound processing flow that calls the generic IDoc outbound processing flow.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Here some of the new features in more detail.&lt;/P&gt;&lt;H2 id="toc-hId-1767418411"&gt;Duplicate handling&lt;/H2&gt;&lt;P&gt;As said, we have changed the duplicate handling for the generic XI and IDoc inbound processing flows. Before, if a duplicate message was sent to the flows, the duplicate message ended with status &lt;EM&gt;Escalated&lt;/EM&gt; and hence an http error code 500 was returned to the sender system. The issue was that then the sender kept restarting and resending the duplicate message. To overcome this issue, the duplicate message now ends with &lt;EM&gt;Completed&lt;/EM&gt;. In addition, the custom status shows that the duplicate has been discarded.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Duplicate Discarded - Moni.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354218iBA33C2F123BAB50C/image-size/large?v=v2&amp;amp;px=999" role="button" title="Duplicate Discarded - Moni.png" alt="Duplicate Discarded - Moni.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Furthermore, for testing purposes in your test environment, you can now send duplicate IDoc messages by switching off the duplicate check. This can be done by configuring the generic IDoc inbound flow. In this case, you need to change the configuration parameter &lt;EM&gt;CustomXTest_SkipDuplicateCheck&lt;/EM&gt; to true. By default, the value is false.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Duplicate Skipped - Config.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354219i77EDE9BDA1620F00/image-size/large?v=v2&amp;amp;px=999" role="button" title="Duplicate Skipped - Config.png" alt="Duplicate Skipped - Config.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;If you now resend the very same IDoc, it will be processed. In addition, the custom status shows that the duplicate check has been skipped.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Duplicate Skipped - Moni.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354220i95453F39B801C13A/image-size/large?v=v2&amp;amp;px=999" role="button" title="Duplicate Skipped - Moni.png" alt="Duplicate Skipped - Moni.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1570904906"&gt;New templates&lt;/H2&gt;&lt;P&gt;In order to call the generic XI and IDoc outbound processing flows, you need to create a scenario-specific outbound flow. You can now create such flows as copy of the new templates&amp;nbsp;&lt;A href="https://hub.sap.com/integrationflow/com.sap.integration.cloud.pipeline.v2.template.step07.outbound.processing.p2p.to.xi" target="_blank" rel="noopener noreferrer"&gt;Pipeline v2 Template Step07 - Outbound Processing Point-to-Point to Generic XI Outbound&lt;/A&gt;&amp;nbsp;and&amp;nbsp;&lt;A href="https://hub.sap.com/integrationflow/com.sap.integration.cloud.pipeline.v2.template.step07.outbound.processing.p2p.to.idoc" target="_blank" rel="noopener noreferrer"&gt;Pipeline v2 Template Step07 - Outbound Processing Point-to-Point to Generic IDoc Outbound&lt;/A&gt;, respectively. By using the templates instead of creating the flows from scratch or using the other templates for outbound processing, you ensure that all settings such as the allowed headers or the ProcessDirect connection to the generic outbound flows have been properly set.&lt;/P&gt;&lt;P&gt;The template for the XI outbound can be used for both synchronous and asynchronous communication. Especially for synchronous calls, it is important to use this dedicated template and not the&amp;nbsp;&lt;SPAN&gt;&lt;A href="https://hub.sap.com/integrationflow/com.sap.integration.cloud.pipeline.v2.template.step07.outbound.processing.sync" target="_blank" rel="noopener noreferrer"&gt;Pipeline v2 Template Step07 - Outbound Processing Synchronous&lt;/A&gt;&amp;nbsp;template. Latter removes some internally used headers before calling the request reply step because here we would call an external service. For calling the generix XI outbound flow however, we need to keep the headers because they should be passed to the&amp;nbsp;generic XI outbound flow. In addition, the XI headers of the response like&amp;nbsp;&lt;EM&gt;SapRefToMessageId&lt;/EM&gt; are fetched and added to the custom header properties so that they are displayed in the message processing logs.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Template for XI outbound.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354221i211BA580B621F196/image-size/large?v=v2&amp;amp;px=999" role="button" title="Template for XI outbound.png" alt="Template for XI outbound.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1374391401"&gt;Dynamic headers&lt;/H2&gt;&lt;P&gt;The XI adapter supports&amp;nbsp;dynamic adapter-specific headers, see&amp;nbsp;&lt;A href="https://help.sap.com/docs/cloud-integration/sap-cloud-integration/configure-xi-receiver-adapter#dynamic-headers" target="_blank" rel="noopener noreferrer"&gt;Dynamic Headers&lt;/A&gt;. This feature is now leveraged in the generic XI inbound processing flow. If the sender sends dynamic configurations in the XI header, the XI sender adapter converts them into a pair of exchange properties with prefix &lt;SPAN&gt;&lt;EM&gt;SapDynamicConfiguration&lt;/EM&gt;:&lt;/SPAN&gt;&amp;nbsp;one exchange property for the parameter name and value and one for its namespace. In order to pass the dynamic configurations to the pipeline steps,&amp;nbsp;the generic XI inbound processing flow creates corresponding headers with prefix &lt;EM&gt;dc_&lt;/EM&gt;&lt;SPAN&gt;&lt;EM&gt;SapDynamicConfiguration&lt;/EM&gt;. For this, there was no need to change the generic pipeline steps or the templates, all headers starting with the prefix&amp;nbsp;&lt;EM&gt;dc&lt;/EM&gt; were already in the allowed headers list. You can then use the configurations in the pipeline steps or the scenario-specific flows, e.g, you can use them in an Xpath in the XSLT to determine your receivers in a content-based-router pattern. In the screenshot below, I have switched on the trace for the integrated messaging runtime flow from where you can see the dynamic configurations.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Dynamic Configuration - Trace.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354263i43B2BE6F2A8B5D71/image-size/large?v=v2&amp;amp;px=999" role="button" title="Dynamic Configuration - Trace.png" alt="Dynamic Configuration - Trace.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;For the generic XI outbound flow, those dynamic headers are not supported yet. In our next increment of the pipeline packages, we plan to enhance the&amp;nbsp;generic XI outbound flow so that those headers are automatically converted into corresponding properties. The XI&amp;nbsp;&lt;SPAN&gt;receiver adapter checks for those properties and adds them to the outgoing XI message.&amp;nbsp;&lt;/SPAN&gt;Furthermore, we look into enhancing the pipeline to better support IDocs with partner type other than LS such as LI or KU. We plan to ship this in the next increment. So stay tuned.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/new-fixes-and-features-in-the-pipeline-for-cloud-integration-package-with/ba-p/14294379"/>
    <published>2025-12-19T14:37:39.036000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/streaming-in-sap-api-management-extended-guide/ba-p/14294841</id>
    <title>Streaming in SAP API Management: Extended Guide</title>
    <updated>2025-12-21T13:24:57.654000+01:00</updated>
    <author>
      <name>Bhavani_Baisani</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/177497</uri>
    </author>
    <content>&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId-1896505834"&gt;&lt;SPAN&gt;&amp;nbsp;Why Streaming Matters&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;By default, APIM buffers request/response payloads so policies can operate on the full message. Non-streamed payloads are limited to ~10 MB. When payloads exceed the buffer, APIM returns a fault. Streaming lifts this buffer by passing data through without payload modifications, allowing up to ~500 MB per direction (subject to connection stability).&lt;/SPAN&gt;&lt;/P&gt;&lt;H4 id="toc-hId-1829075048"&gt;&lt;SPAN&gt;Key Limits&lt;/SPAN&gt;&lt;/H4&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Non-streamed request/response: up to 10 MB&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&amp;nbsp;Streamed request/response: up to ~500 MB&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&amp;nbsp;Header limits: Request headers ~18 KB; Response headers ~25 KB&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&amp;nbsp;Resource files (XSL/JS/Python) ~15 MB (design-time)&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;Note: When streaming is enabled, policies that read or transform the payload are bypassed and may fail on large payloads.&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId-1503478824"&gt;&lt;SPAN&gt;&amp;nbsp;Properties Explained&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;request.streaming.enabled (ProxyEndpoint &amp;amp; TargetEndpoint):&lt;BR /&gt;false: buffer requests; payload policies operate.&lt;BR /&gt;true: stream request payload to target; payload-reading policies in ProxyEndpoint request flow are bypassed.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;response.streaming.enabled (ProxyEndpoint &amp;amp; TargetEndpoint):&lt;BR /&gt;false: buffer responses; payload policies operate.&lt;BR /&gt;true: stream response payload back to client; payload-reading policies in ProxyEndpoint response flow are bypassed.&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId-1306965319"&gt;&lt;SPAN&gt;&amp;nbsp;Configure via UI (APIM Portal)&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;Steps:&lt;BR /&gt;1. Go to Develop → APIs → select your proxy.&lt;BR /&gt;2. Open Proxy Endpoint tab → Properties → Add:&lt;BR /&gt;&amp;nbsp;&amp;nbsp; • Name: request.streaming.enabled, Value: true&lt;BR /&gt;&amp;nbsp;&amp;nbsp; • Name: response.streaming.enabled, Value: true&lt;BR /&gt;3. Open Target Endpoint tab → Properties → Add same properties.&lt;BR /&gt;4. Save and redeploy the proxy.&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId-1110451814"&gt;&lt;SPAN&gt;Configure via XML (Proxy &amp;amp; Target Definitions)&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H4 id="toc-hId-1043021028"&gt;&lt;SPAN&gt;Proxy Endpoint sample:&lt;/SPAN&gt;&lt;/H4&gt;&lt;P&gt;&lt;SPAN&gt;&amp;lt;?xml version='1.0' encoding='UTF-8' standalone='yes'?&amp;gt;&lt;BR /&gt;&amp;lt;ProxyEndPoint default='true'&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;name&amp;gt;default&amp;lt;/name&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;base_path&amp;gt;/my/api&amp;lt;/base_path&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;properties&amp;gt;&lt;BR /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;property&amp;gt;&amp;lt;name&amp;gt;request.streaming.enabled&amp;lt;/name&amp;gt;&amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;BR /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;property&amp;gt;&amp;lt;name&amp;gt;response.streaming.enabled&amp;lt;/name&amp;gt;&amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;/properties&amp;gt;&lt;BR /&gt;&amp;lt;/ProxyEndPoint&amp;gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;H4 id="toc-hId-846507523"&gt;&lt;SPAN&gt;Target Endpoint sample:&lt;/SPAN&gt;&lt;/H4&gt;&lt;P&gt;&lt;SPAN&gt;&amp;lt;?xml version='1.0' encoding='UTF-8' standalone='yes'?&amp;gt;&lt;BR /&gt;&amp;lt;TargetEndPoint&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;name&amp;gt;default&amp;lt;/name&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;url&amp;gt;&lt;A href="https://backend.example.com/v1" target="_blank" rel="noopener nofollow noreferrer"&gt;https://backend.example.com/v1&lt;/A&gt;&amp;lt;/url&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;properties&amp;gt;&lt;BR /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;property&amp;gt;&amp;lt;name&amp;gt;request.streaming.enabled&amp;lt;/name&amp;gt;&amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;BR /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;property&amp;gt;&amp;lt;name&amp;gt;response.streaming.enabled&amp;lt;/name&amp;gt;&amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;BR /&gt;&amp;nbsp; &amp;lt;/properties&amp;gt;&lt;BR /&gt;&amp;lt;/TargetEndPoint&amp;gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId-520911299"&gt;&lt;SPAN&gt;&amp;nbsp;Error 'Screenshots' (Fault Payloads)&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H4 id="toc-hId-453480513"&gt;&lt;SPAN&gt;Non-streamed payload exceeds 10 MB:&lt;/SPAN&gt;&lt;/H4&gt;&lt;P&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Non streamed.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354437i47501201C1CFE68C/image-size/large?v=v2&amp;amp;px=999" role="button" title="Non streamed.png" alt="Non streamed.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;H4 id="toc-hId-256967008"&gt;&lt;SPAN&gt;Streaming enabled but payload-transform policy attached:&lt;/SPAN&gt;&lt;/H4&gt;&lt;P&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Streaming.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354438iDB90C14D99F886B1/image-size/large?v=v2&amp;amp;px=999" role="button" title="Streaming.png" alt="Streaming.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId--143860585"&gt;&lt;SPAN&gt;&amp;nbsp;Policies: What Works / What to Avoid&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;Works with streaming: Verify API Key, OAuth verification, Access Control, basic header logging (no body read).&lt;BR /&gt;Avoid with streaming: JSON↔XML transforms, schema validations, masking/redaction, payload enrichment — these force buffering or fail.&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId--340374090"&gt;&lt;SPAN&gt;&amp;nbsp;Patterns with SAP Cloud Integration (CPI)&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;Use APIM for pass-through streaming of large payloads. Perform transformations/validations in CPI or backend. For very large datasets, consider paging, split-and-collect, or batch processing.&lt;/SPAN&gt;&lt;/P&gt;&lt;H5 id="toc-hId--1123693609"&gt;&lt;SPAN&gt;Optional: Streaming + gzip + chunked&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;&lt;SPAN&gt;Compress the entire payload first, then stream using chunked transfer (Content-Encoding: gzip; Transfer-Encoding: chunked; no Content-Length).&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId--733401100"&gt;&lt;SPAN&gt;&amp;nbsp;Troubleshooting&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;TooBigBody: Enable streaming for the affected direction; remove payload-transform policies.&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Policies inconsistent &amp;gt;10 MB: Redesign to avoid body access in streamed flows.&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Timeouts: Adjust TargetEndpoint transport properties (connect.timeout.millis, io.timeout.millis) per backend latency.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId--929914605"&gt;&lt;SPAN&gt;&amp;nbsp;FAQs&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;Q: Can I enable streaming on all proxies?&lt;BR /&gt;A: Technically yes, but only enable when required; payload policies will be bypassed.&lt;BR /&gt;Q: Maximum streamed size?&lt;BR /&gt;A: ~500 MB per request/response direction; ensure stable connections.&lt;BR /&gt;Q: Can I transform payload while streaming?&lt;BR /&gt;A: Not recommended in APIM; move transforms to CPI/backend.&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;H3 id="toc-hId--1126428110"&gt;&lt;SPAN&gt;&amp;nbsp;Pre-deployment Checklist&lt;/SPAN&gt;&lt;/H3&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;☐ Identify direction (request/response) needing streaming.&lt;BR /&gt;☐ Remove payload-inspecting policies from streamed flows.&lt;BR /&gt;☐ Tune timeouts for long streams.&lt;BR /&gt;☐ Communicate design impacts to teams (no in-proxy transforms).&lt;BR /&gt;☐ Validate with large test payloads.&lt;/SPAN&gt;&lt;/P&gt;&lt;H5 id="toc-hId--1909747629"&gt;&lt;SPAN&gt;Disclaimer&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;&lt;SPAN&gt;This content reflects implementation experience and references official SAP Help pages. Always consult SAP Help for the latest guidance and product limits.&lt;/SPAN&gt;&lt;/P&gt;&lt;H5 id="toc-hId--2106261134"&gt;&lt;SPAN&gt;References&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;&lt;SPAN&gt;SAP Help: Enable Streaming of Requests and Responses in an API Proxy – &lt;A href="https://help.sap.com/docs/integration-suite/sap-integration-suite/enable-streaming-of-requests-and-responses-in-api-proxy" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/integration-suite/sap-integration-suite/enable-streaming-of-requests-and-responses-in-api-proxy&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;SAP Help: Proxy Endpoint Properties – &lt;A href="https://help.sap.com/docs/sap-api-management/sap-api-management/proxy-endpoint-properties" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/sap-api-management/sap-api-management/proxy-endpoint-properties&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;SAP Help: Limits in API Management – &lt;A href="https://help.sap.com/docs/sap-api-management/sap-api-management/limits" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/sap-api-management/sap-api-management/limits&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;SAP Help (Neo) – Sample streaming configuration – &lt;A href="https://help.sap.com/docs/sap-api-management/sap-api-management-for-neo-environment/enable-streaming-of-requests-and-responses-in-api-proxy" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/sap-api-management/sap-api-management-for-neo-environment/enable-streaming-of-requests-and-responses-in-api-proxy&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/streaming-in-sap-api-management-extended-guide/ba-p/14294841"/>
    <published>2025-12-21T13:24:57.654000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/end-to-end-message-tracking-and-retry-control-in-sap-cloud-integration/ba-p/14294840</id>
    <title>End-to-End Message Tracking and Retry Control in SAP Cloud integration</title>
    <updated>2025-12-22T09:04:33.600000+01:00</updated>
    <author>
      <name>SushantShinde26</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1448484</uri>
    </author>
    <content>&lt;P&gt;In this post, we’ll explore an &lt;STRONG&gt;end-to-end asynchronous scenario&lt;/STRONG&gt; where the &lt;STRONG&gt;sender is XI (Proxy)&lt;/STRONG&gt; and the &lt;STRONG&gt;receiver is an API&lt;/STRONG&gt;. The goal is to &lt;STRONG&gt;avoid infinite JMS retries&lt;/STRONG&gt;, &lt;STRONG&gt;persist messages in JMS queues&lt;/STRONG&gt;, and &lt;STRONG&gt;track them effectively in SAP Cloud Integration (CI) monitoring&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Scenario Overview&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;For message processing from the &lt;STRONG&gt;S/4HANA sender system&lt;/STRONG&gt;, we use a &lt;STRONG&gt;common artifact&lt;/STRONG&gt; that:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Determines whether the message is &lt;STRONG&gt;sync or async&lt;/STRONG&gt; (via a Sync Call Router).&lt;/LI&gt;&lt;LI&gt;For &lt;STRONG&gt;async messages&lt;/STRONG&gt;, routes them into a &lt;STRONG&gt;common JMS queue&lt;/STRONG&gt;.&lt;/LI&gt;&lt;LI&gt;For &lt;STRONG&gt;sync messages&lt;/STRONG&gt;, dynamically identifies the preceding iFlow based on &lt;STRONG&gt;sender interface and namespace&lt;/STRONG&gt;.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_0-1766316209447.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354413iC67E9EC0184B9659/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_0-1766316209447.png" alt="SushantShinde26_0-1766316209447.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;The next iFlow:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Reads messages from the common JMS queue.&lt;/LI&gt;&lt;LI&gt;Dynamically determines the preceding iFlow using &lt;STRONG&gt;Sender Interface Name&lt;/STRONG&gt; and &lt;STRONG&gt;Namespace&lt;/STRONG&gt;.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Retry Configuration&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In my case, &lt;STRONG&gt;maximum retries are set to 6&lt;/STRONG&gt;. Here’s how it works:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_1-1766316209448.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354412i0B8A3A65FF5A1560/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_1-1766316209448.png" alt="SushantShinde26_1-1766316209448.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Message delivered on first attempt&lt;/STRONG&gt;&lt;BR /&gt;→ No retry triggered; message reaches the end system successfully.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Message fails but succeeds within retry limit (e.g., 4th attempt)&lt;/STRONG&gt;&lt;BR /&gt;→ Each retry invokes the &lt;STRONG&gt;exception subprocess&lt;/STRONG&gt;, which calls the &lt;STRONG&gt;local integration process&lt;/STRONG&gt; (max retry condition) until the threshold is reached.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_2-1766316209452.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354414i87EA8726E9E4C26C/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_2-1766316209452.png" alt="SushantShinde26_2-1766316209452.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Maximum retry condition reached&lt;/STRONG&gt;&lt;BR /&gt;→ Message is routed to the &lt;STRONG&gt;exception subprocess&lt;/STRONG&gt;, then moved to a &lt;STRONG&gt;quarantine queue&lt;/STRONG&gt;.&lt;BR /&gt;→ An &lt;STRONG&gt;email notification&lt;/STRONG&gt; is sent to stakeholders for further action.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_3-1766316209457.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354415iB94F9682F0388431/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_3-1766316209457.png" alt="SushantShinde26_3-1766316209457.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;The Catch: Tracking and Reprocessing Messages&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;While many posts cover retries and exception handling, the key challenge is &lt;STRONG&gt;tracking a specific message&lt;/STRONG&gt; and &lt;STRONG&gt;moving it back to the original queue for reprocessing&lt;/STRONG&gt; (a feature introduced in &lt;STRONG&gt;Q3 2025&lt;/STRONG&gt;).&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;For XI messages:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Retrieve &lt;STRONG&gt;SAP Message ID&lt;/STRONG&gt; from SXMB_MONI.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_4-1766316209459.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354417i98C84EB848847809/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_4-1766316209459.png" alt="SushantShinde26_4-1766316209459.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Add it to CI Camel header values (SAP_ApplicationID).&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_5-1766316209462.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354416i2AB21E0FB61425DF/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_5-1766316209462.png" alt="SushantShinde26_5-1766316209462.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Useful Identifiers&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;${SapMessageId} → XI Adapter Message ID (uppercase, no dashes)&lt;/LI&gt;&lt;LI&gt;${SapMessageIdEx} → XI Adapter Message ID (lowercase, with dashes)&lt;/LI&gt;&lt;LI&gt;${header.SAP_DataStoreRetries} → Retry count for DataStore&lt;/LI&gt;&lt;LI&gt;${header.SAPJMSRetries} → Retry count for JMS&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Steps to Reprocess&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Identify the &lt;STRONG&gt;last retried message&lt;/STRONG&gt; using &lt;STRONG&gt;Correlation ID&lt;/STRONG&gt; in CI Monitoring.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_6-1766316209466.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354418iBA3EC189819CEEAA/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_6-1766316209466.png" alt="SushantShinde26_6-1766316209466.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Locate the message in the &lt;STRONG&gt;quarantine queue&lt;/STRONG&gt; using the&lt;STRONG&gt; Message ID&lt;/STRONG&gt; from the message and search the same in your quarantine queue&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_7-1766316209481.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354420i6FB7CF02B34F02C5/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_7-1766316209481.png" alt="SushantShinde26_7-1766316209481.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;The message identified in quarantine queue.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SushantShinde26_8-1766316209487.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354419iAE2989DEBB212A6B/image-size/medium?v=v2&amp;amp;px=400" role="button" title="SushantShinde26_8-1766316209487.png" alt="SushantShinde26_8-1766316209487.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;After stakeholder deliberation:&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Move&lt;/STRONG&gt; the message back to the original queue for reprocessing.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Delete&lt;/STRONG&gt; if no longer needed.&lt;/LI&gt;&lt;LI&gt;Or &lt;STRONG&gt;retain&lt;/STRONG&gt; in quarantine (monitor JMS resources to avoid exhaustion).&lt;/LI&gt;&lt;/UL&gt;&lt;/OL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Summary&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;We explained how to &lt;STRONG&gt;restrict retries&lt;/STRONG&gt; in CI to prevent endless JMS loops and also avoid storage exhaustion.&lt;/LI&gt;&lt;LI&gt;We also covered &lt;STRONG&gt;tracking messages that hit retry limits&lt;/STRONG&gt; and &lt;STRONG&gt;taking subsequent actions&lt;/STRONG&gt; (move, delete, or retain).&lt;/LI&gt;&lt;/UL&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/end-to-end-message-tracking-and-retry-control-in-sap-cloud-integration/ba-p/14294840"/>
    <published>2025-12-22T09:04:33.600000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/sap-integration-suite-connecting-to-s-4hana-private-cloud-odata-with-oauth/ba-p/14295261</id>
    <title>SAP Integration Suite - Connecting to S/4HANA Private Cloud OData with OAuth (Client Credentials)</title>
    <updated>2025-12-22T13:35:16.296000+01:00</updated>
    <author>
      <name>FrederickDimmer</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/155880</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1638364483"&gt;Introduction&lt;/H1&gt;&lt;P&gt;Modern integration scenarios increasingly rely on secure, token-based connectivity. In SAP Integration Suite, Cloud Integration, the OData receiver adapters (V2 and V4) support a range of authentication mechanisms—such as Basic Authentication, Client Certificate, and OAuth 2.0. Out of the box, OAuth-based connectivity is common for public cloud services, where provider endpoints and identity flows are standardized and well-documented.&lt;/P&gt;&lt;P&gt;But what if your OData endpoint sits in a private cloud or behind corporate network boundaries, and it’s protected by OAuth 2.0? This introduction sets the scene for a practical, step-by-step walkthrough that shows how to connect SAP Integration Suite, Cloud Integration to private cloud OData services using OAuth 2.0 with the client credentials grant type. You’ll learn how to enable OAuth for OData services, define the OAuth client in SAP S/4HANA, and wire everything up in SAP Integration Suite, Cloud Integration so your flows can obtain and use access tokens seamlessly.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1441850978"&gt;Prepare the SAP S/4HANA&lt;/H1&gt;&lt;H3 id="toc-hId-1503502911"&gt;&lt;STRONG&gt;Enable OAuth authentication for Odata services&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;V2&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Access transaction &lt;/SPAN&gt;&lt;SPAN&gt;/IWFND/MAINT_SERVICE&lt;/SPAN&gt;&lt;SPAN&gt; for OData service administration&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Locate your target OData V2 service in the Service Catalog view&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Verify the service is properly activated and running&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Click the &lt;/SPAN&gt;&lt;SPAN&gt;OAuth&lt;/SPAN&gt;&lt;SPAN&gt; button from the available menu option&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="657zuiop.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354648i07029346766917AC/image-size/large?v=v2&amp;amp;px=999" role="button" title="657zuiop.png" alt="657zuiop.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Select a package to store the to be created OAuth scope &lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Check the status for successful activation&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-left" image-alt="ouuzh.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354647i8746D28FE6254802/image-size/large?v=v2&amp;amp;px=999" role="button" title="ouuzh.png" alt="ouuzh.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;All created objects are available via the assigned package (SE80)&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="olkuhoipj.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354649i8E20F2307B8D16BC/image-size/large?v=v2&amp;amp;px=999" role="button" title="olkuhoipj.png" alt="olkuhoipj.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H4 id="toc-hId-1436072125"&gt;V4&lt;/H4&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Access transaction &lt;/SPAN&gt;&lt;SPAN&gt;/IWFND/V4_ADMIN&lt;/SPAN&gt;&lt;SPAN&gt; for OData service administration&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Locate your target OData V4 service in the Service Groups view&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Verify the service is properly activated and running&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Click the &lt;/SPAN&gt;&lt;SPAN&gt;OAuth&lt;/SPAN&gt;&lt;SPAN&gt; button from the available menu option&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="hgjizoul.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354650i85C3C8BC05059276/image-size/large?v=v2&amp;amp;px=999" role="button" title="hgjizoul.png" alt="hgjizoul.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Enable Oauth&lt;/SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="00998.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354651i248EC80655AE11EB/image-size/medium?v=v2&amp;amp;px=400" role="button" title="00998.png" alt="00998.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Validate activation status and scope&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="klkiklji.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354652i9C59EB3FF7EDC37C/image-size/medium?v=v2&amp;amp;px=400" role="button" title="klkiklji.png" alt="klkiklji.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H3 id="toc-hId-1110475901"&gt;&lt;SPAN&gt;Create integration user&lt;/SPAN&gt;&lt;/H3&gt;&lt;P&gt;&lt;SPAN&gt;Perform this step only if no technical integration user exists or if the scenario requires a dedicated user. If a suitable user is already available, reuse it and adjust its authorizations as needed.&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Navigate to SAP transaction SU01&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="jhgcfvbjhkl.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354675i4A0FF67831292925/image-size/medium?v=v2&amp;amp;px=400" role="button" title="jhgcfvbjhkl.png" alt="jhgcfvbjhkl.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Enter a user name and select the create user button&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="ölhkugzjfthc.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354676i9EB05B7FACCD8E29/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ölhkugzjfthc.png" alt="ölhkugzjfthc.png" /&gt;&lt;/span&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Define a last name for the user in the address section&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="äöolgikzfjgvmnbn.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354677iF0019280050EF913/image-size/large?v=v2&amp;amp;px=999" role="button" title="äöolgikzfjgvmnbn.png" alt="äöolgikzfjgvmnbn.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Navigate to the “Logon Data” section&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Set the user type to “System", define a password and save the changes&lt;/SPAN&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="iohukhigzuj.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354678iBA6BB1F294C3AB44/image-size/large?v=v2&amp;amp;px=999" role="button" title="iohukhigzuj.png" alt="iohukhigzuj.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H4 id="toc-hId-1043045115"&gt;&lt;SPAN&gt;Create an OAuth client&lt;/SPAN&gt;&lt;/H4&gt;&lt;P&gt;&lt;SPAN&gt;Proceed with this step only if an OAuth client has not yet been created for the designated system user. If a client already exists, reuse it and update its configuration details as needed.&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Navigate to SAP transaction /nSOAUTH2&lt;/LI&gt;&lt;LI&gt;Select “Edit” and then select “Create..."&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="uoilk,klji.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354689iE5D6457DE1416389/image-size/medium?v=v2&amp;amp;px=400" role="button" title="uoilk,klji.png" alt="uoilk,klji.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;LI&gt;Set the Client Type to “Confidential” or “Public” based upon the general IT security governance rules, define the OAuth 2.0 Client ID. Keep in mind that this has to be equivalent to the previously created or existing user. Provide a description and set the token lifetime according to the internal governance rules. Select “Next"&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="jvjkhlhukbj.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354691i9081201CC028C641/image-size/large?v=v2&amp;amp;px=999" role="button" title="jvjkhlhukbj.png" alt="jvjkhlhukbj.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="juiuiohkjb.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355076iF9630D4D8ECD2E11/image-size/large?v=v2&amp;amp;px=999" role="button" title="juiuiohkjb.png" alt="juiuiohkjb.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;LI&gt;The goal for this client is to authenticate itself using client id and secret therefore deselect option “SSL Client Certificate” then select “Next"&lt;/LI&gt;&lt;LI&gt;Deselect “Grant Type SAML 2.0 Bearer Active” and select “Grant Type Client Credentials Active” hence the goal is to activate the client for grant type client credentials. Select “Next”.&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="zutiz7ukjh.png" style="width: 830px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354692iB5AB2D20174B76CC/image-size/large?v=v2&amp;amp;px=999" role="button" title="zutiz7ukjh.png" alt="zutiz7ukjh.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;LI&gt;Add the OAuth 2.0 Scope ID of the OData service to be called and select “Next”&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vzkuhb.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354693i21329018F43C6420/image-size/large?v=v2&amp;amp;px=999" role="button" title="vzkuhb.png" alt="vzkuhb.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;LI&gt;Finally review the settings and select “Finish”. The result should look like this.&lt;/LI&gt;&lt;/UL&gt;&lt;H4 id="toc-hId-846531610"&gt;Create authorization role&lt;/H4&gt;&lt;P&gt;This step is only necessary if either no role exists or if it’s required to have a dedicated role per integration. If there is an existing role you should use it and in case necessary adjust its details.&amp;nbsp;&amp;nbsp;&lt;BR /&gt;&amp;nbsp;&lt;BR /&gt;The instructions focus on the integration aspects. Therefore role definitions and the assignments of service related authorisations are not covered. To fine-grain authorisations for OAuth clients to scopes use of authorisation object S_SCOPE.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="lhuigzkjhhupö.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354694iF753DE7D383A8DA8/image-size/large?v=v2&amp;amp;px=999" role="button" title="lhuigzkjhhupö.png" alt="lhuigzkjhhupö.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H1 id="toc-hId-262769948"&gt;Configure SAP Integration Suite, Cloud Integration&lt;/H1&gt;&lt;P&gt;In SAP Integration Suite, Cloud Integration, the configuration provided with this blog includes a downloadable iFlow that mirrors the setup described below and can be used as a reference template, then adapted to your needs. The iFlow consists of one main flow and two local subprocesses. &lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="hjuziuhkmhjkl.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354695iE74BDDB2F2F04DFB/image-size/large?v=v2&amp;amp;px=999" role="button" title="hjuziuhkmhjkl.png" alt="hjuziuhkmhjkl.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;For demonstration purposes, the main flow is triggered by a timer and first checks whether a valid access token is already available. If a token exists, the main flow delegates processing to the subprocess responsible for invoking the target OData service. If no token is found, the flow requests a new OAuth token and, once obtained, proceeds to call the OData service via the same subprocess. This structure isolates token handling from service invocation, making the solution easier to reuse, maintain, and extend for different scenarios.&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="jhukjbhuoio.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354696iFF2EA6CE2568F077/image-size/large?v=v2&amp;amp;px=999" role="button" title="jhukjbhuoio.png" alt="jhukjbhuoio.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;To optimize performance and reduce load on the S/4HANA backend, the access token is cached in a local variable within the iFlow, avoiding unnecessary token requests on each run. In the rare event the backend invalidates or terminates the token, the iFlow supports an on-demand refresh via a dedicated header parameter. While a production-ready setup could automate this with an exception subprocess that detects token-related errors and triggers a controlled refresh, note that—for demo purposes—forced token refresh as part of error handling is not covered in this blog. Alternatively, you can manually re-trigger the interface using the same header parameter to force a token refresh when needed.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="i7u6tzfghj.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354697iD31689D9E59C4B58/image-size/large?v=v2&amp;amp;px=999" role="button" title="i7u6tzfghj.png" alt="i7u6tzfghj.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Finally, the iFlow issues a request to the target OData service. To fully leverage the OData receiver adapter’s capabilities, ensure you upload the service’s EDMX metadata file. With the EDMX in place, the adapter can discover and configure resources (entity sets, operations) correctly and orchestrate backend calls automatically. Without it, resources cannot be resolved properly, you are forced to maintain endpoints and authorization details manually, and the adapter cannot automatically invoke the backend service as intended.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="khjghuoijlnk.png" style="width: 644px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354698iAA1AA8840FE2088E/image-size/large?v=v2&amp;amp;px=999" role="button" title="khjghuoijlnk.png" alt="khjghuoijlnk.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H1 id="toc-hId-66256443"&gt;IFlow template&lt;/H1&gt;&lt;P&gt;The iFlow template can be downloaded from the &lt;A href="https://github.com/peakMeissner/SISCI-community-samples" target="_self" rel="nofollow noopener noreferrer"&gt;following&lt;/A&gt; GitHub repository.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/sap-integration-suite-connecting-to-s-4hana-private-cloud-odata-with-oauth/ba-p/14295261"/>
    <published>2025-12-22T13:35:16.296000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/elevate-from-odata-provisioning-neo-serverless-runtime-cf-to-integration/ba-p/14295358</id>
    <title>Elevate from OData Provisioning Neo/Serverless Runtime(CF) to Integration Suite OData Provisioning</title>
    <updated>2025-12-23T04:34:52.359000+01:00</updated>
    <author>
      <name>annu_kumari</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/317753</uri>
    </author>
    <content>&lt;P&gt;OData Provisioning exposes business data and business logic as OData services on SAP Business Technology Platform (SAP BTP), thereby enabling customers to run user-centric applications on SAP Cloud.&lt;/P&gt;&lt;P&gt;In the Neo environment, OData Provisioning is available as a service of SAP BTP, which combines SAP Gateway capabilities in a Cloud context.&lt;/P&gt;&lt;P&gt;OData Provisioning, on Neo as a service, will no longer be accessible post December 31, 2028.&lt;BR /&gt;For more information, see SAP Note&amp;nbsp;&lt;A href="http://me.sap.com/notes/3351844" target="_self" rel="noopener noreferrer"&gt;3351844&lt;/A&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1896530858"&gt;OData Provisioning, a new capability in Integration Suite&lt;/H3&gt;&lt;P&gt;OData Provisioning functionality is now being provided as a capability on SAP Integration Suite. This facilitates exposing business data and logic from SAP Business Suite systems as OData services on SAP BTP. This in turn, allows customers to create and run user-centric applications seamlessly on SAP Cloud.&lt;/P&gt;&lt;P&gt;Refer &lt;A href="https://community.sap.com/t5/integration-blog-posts/odata-provisioning-a-new-capability-of-sap-integration-suite/ba-p/13958527" target="_self"&gt;this&lt;/A&gt; blog to know more about OData Provisioning Capability in SAP Integration Suite.&lt;/P&gt;&lt;H3 id="toc-hId-1700017353"&gt;Supported plans for OData Provisioning in Integration Suite&lt;/H3&gt;&lt;P&gt;OData Provisioning is available as a capability of SAP Integration Suite in all its plans. For details on SAP Integration Suite plans that support OData Provisioning, please refer SAP Note &lt;A href="https://me.sap.com/notes/2903776" target="_self" rel="noopener noreferrer"&gt;2903776&lt;/A&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1503503848"&gt;How to migrate to OData Provisioning on Integration Suite?&lt;/H3&gt;&lt;OL&gt;&lt;LI&gt;Transitioning OData Provisioning Service on &lt;STRONG&gt;Neo to OData Provisioning Capability in SAP Integration Suite&lt;/STRONG&gt;&lt;BR /&gt;Refer to &lt;A href="https://help.sap.com/docs/integration-suite/transitioning-to-odata-provisioning-capability-in-sap-integration-suite/transitioning-from-odata-provisioning-service-on-neo-to-odata-provisioning-capability-in-sap-integration-suite-on-multi-cloud-foundation-environment?locale=en-US&amp;amp;version=CLOUD" target="_self" rel="noopener noreferrer"&gt;this&lt;/A&gt; document for more detailed description on migration process.&lt;BR /&gt;&lt;STRONG&gt;&lt;EM&gt;Note:&lt;/EM&gt; &lt;/STRONG&gt;You must re-register the services which were already registered to ensure business continuity.&lt;/LI&gt;&lt;LI&gt;Transitioning OData Provisioning from &lt;STRONG&gt;SAP BTP&amp;nbsp; Serverless Runtime to SAP Integration Suite&lt;/STRONG&gt;&lt;BR /&gt;Follow &lt;A href="https://help.sap.com/docs/integration-suite/transitioning-to-odata-provisioning-capability-in-sap-integration-suite/transitioning-odata-provisioning-from-sap-btp-serverless-runtime-to-sap-integration-suite?locale=en-US" target="_self" rel="noopener noreferrer"&gt;this&lt;/A&gt; document for transition from using OData Provisioning functionality on SAP BTP, serverless runtime to SAP Integration Suite.&lt;BR /&gt;&lt;EM&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt;&lt;/EM&gt; If the SAP Integration Suite subscription is in the same subaccount as the Serverless Runtime, the services which were already registered will appear in the Integration Suite application, and the runtime will work seamlessly.&lt;BR /&gt;However, if the SAP Integration Suite subscription is in a different subaccount, then the services must be registered again for business continuity.&lt;/LI&gt;&lt;/OL&gt;&lt;H3 id="toc-hId-1306990343"&gt;Common concerns raised by customers during migration&lt;/H3&gt;&lt;P&gt;Scenarios:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Your UI5/HTML5 application is developed using SAP Business Application Studio (BAS) with SAP managed approuter and consumes the OData Provisioning services, then the CSRF token handling for ‘modify’ operations are done at the application approuter level.&lt;BR /&gt;In this case, to avoid any CSRF token validation failures from OData Provisioning, you would need to do the following steps:&lt;UL&gt;&lt;LI&gt;In the &lt;EM&gt;xs-app.json&lt;/EM&gt; file of your application remove parameter "csrfProtection"&lt;/LI&gt;&lt;LI&gt;Define prefix "/sap/opu" in backend destination of &lt;EM&gt;ui5.yaml&lt;/EM&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;You are using Principal Propagation scenario in the OData Provisioning Neo environment&lt;UL&gt;&lt;LI&gt;By using AppToAppSSO authentication type between your application and OData Provisioning end point, then while migrating to CF environment, this type of destination should be changed to use authentication type as OAuth2JWTBearer or OAuth2UserTokenExchange&lt;/LI&gt;&lt;LI&gt;For more information on the destination authentication types on Neo and CF environment, refer &lt;A href="https://help.sap.com/docs/btp/btp-admin-guide/destination-authentication-methods?locale=en-US" target="_self" rel="noopener noreferrer"&gt;this&lt;/A&gt; document.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/elevate-from-odata-provisioning-neo-serverless-runtime-cf-to-integration/ba-p/14295358"/>
    <published>2025-12-23T04:34:52.359000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/odata-v4-api-pagination-in-sap-cloud-integration/ba-p/14293561</id>
    <title>OData V4 API Pagination in SAP Cloud Integration</title>
    <updated>2025-12-23T06:57:52.200000+01:00</updated>
    <author>
      <name>ShubhamDhumal</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1938947</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Hi Folks,&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT face="arial black,avant garde"&gt;&lt;STRONG&gt;INTRODUCTION:&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/FONT&gt;In this blog post, I will explain how you can &lt;STRONG&gt;implement client-side pagination for an OData V4 API in SAP CPI (Cloud Platform Integration)&lt;/STRONG&gt;. Pagination is essential when dealing with large datasets, as it helps control the amount of data transferred and processed in each request.&lt;/P&gt;&lt;P&gt;In this scenario, I have used the&lt;A title=" Product Master OData V4 API" href="https://api.sap.com/api/CE_PRODUCT_0002/overview?searchterm=Product%20Master&amp;amp;tab=APIs&amp;amp;$refinedBy=true&amp;amp;$type=(%22API%22,%22API%20Package%22)" target="_self" rel="noopener noreferrer"&gt; Product Master OData V4 API&lt;/A&gt;&amp;nbsp; to demonstrate client-side pagination.&lt;BR /&gt;&lt;BR /&gt;&lt;FONT face="arial black,avant garde"&gt;Why Client-Side Pagination?&lt;/FONT&gt;&lt;BR /&gt;While server-side pagination works well for smaller datasets, it can become inefficient when the total number of records is large and fetching data page by page may consume more time and delaying overall integration performance.&lt;/P&gt;&lt;P&gt;To overcome this latency, I implemented &lt;STRONG&gt;client-side pagination&lt;/STRONG&gt; using the OData query options &lt;STRONG&gt;$top&lt;/STRONG&gt; and &lt;STRONG&gt;$skip&lt;/STRONG&gt;, allowing SAP CPI to control the number of records fetched and their offset.&lt;/P&gt;&lt;P&gt;&lt;FONT face="arial black,avant garde"&gt;&lt;STRONG&gt;Let’s start implementing in SAP CPI:&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;STRONG&gt;Create in IFLOW in SAP CI Tenant as below:&lt;/STRONG&gt;&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture1_1.jpeg" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353689iCD11F60001CFCC4E/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Picture1_1.jpeg" alt="Picture1_1.jpeg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT face="arial black,avant garde"&gt;Main Integration I-Flow&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;1: Use a Timer:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;For the purpose of this blog, a &lt;STRONG&gt;Timer&lt;/STRONG&gt; is used to trigger the iFlow.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;2: Create Exchange Properties in Content Modifier:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Below Properties are created:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;top = 5000 → Number of records to fetch per page (max value can be 5000 per page)&lt;/LI&gt;&lt;LI&gt;skip = 0 → Initial offset for fetching records&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_1-1766065310669.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353644iCB6DE4CD8EDD4763/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_1-1766065310669.png" alt="ShubhamDhumal_1-1766065310669.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;3: Looping Process Call&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;A &lt;STRONG&gt;Looping Process Call&lt;/STRONG&gt; will repeatedly call the LIP (Local Integration Process).&lt;BR /&gt;The loop condition is:&amp;nbsp; ${property.emptyPayload} = 'false'&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_2-1766065686805.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353647i1D5A99ADFF9B9BB5/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_2-1766065686805.png" alt="ShubhamDhumal_2-1766065686805.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT face="arial black,avant garde"&gt;&lt;STRONG&gt;Local Integration Process:&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;i : OData V4 adapter with Request-Reply&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Below query Parameters are used:&lt;BR /&gt;$select=Product,CreationDate,LastChangeDate&amp;amp;$top=${property.top}&amp;amp;$skip=${property.skip}&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;$select → &amp;nbsp;to retrieve specific field&lt;/LI&gt;&lt;LI&gt;$top → Number of records per call&lt;/LI&gt;&lt;LI&gt;$skip → Offset for fetching records&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This ensures only the required fields are fetched in each batch.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_4-1766068730856.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353684iE2B3E60B49ACAFAF/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_4-1766068730856.png" alt="ShubhamDhumal_4-1766068730856.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;ii: Groovy Script to Handle Pagination&lt;BR /&gt;&lt;/STRONG&gt;&lt;STRONG&gt;Groovy script&lt;/STRONG&gt; is used to manage the pagination logic. Its purpose is to:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Check if the payload is empty&lt;/STRONG&gt;:&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;If the API returns no records, it sets emptyPayload = true to stop the loop.&lt;/LI&gt;&lt;LI&gt;Otherwise, it keeps emptyPayload = false to continue fetching the next batch.&lt;/LI&gt;&lt;/UL&gt;&lt;LI&gt;&lt;STRONG&gt;Increment the skip property&lt;/STRONG&gt;:&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;Retrieves the current skip value&lt;/LI&gt;&lt;LI&gt;Adds the page size (e.g., 5000) to it for the next iteration.&lt;/LI&gt;&lt;/UL&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;Remove First and Last Line&lt;/STRONG&gt;: That carries the root node tags.&lt;BR /&gt;&lt;STRONG&gt;Groovy Script:&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;import com.sap.it.script.v2.api.Message
import java.io.Reader

Message processData(Message message) {
Reader reader = message.getBody(Reader)
String body = reader.text
def lines = body.readLines()
if (lines.size() &amp;gt; 0) lines.remove(0)
if (lines.size() &amp;gt; 0) lines.remove(lines.size() - 1)
body = lines.join("\n")
message.setBody(body)
def skipValue = message.getProperty("skip") as String
int skip = skipValue ? skipValue.toInteger() : 0
skip += 5000
message.setProperty("skip", skip)
message.setProperty("emptyPayload", body.trim() ? "false" : "true")
return message
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;Below are the screenshots to depict how the above groovy will execute:&lt;/P&gt;&lt;P&gt;CamelLoopIndex is increasing as per available no of pages to check if data is available in each page. Basis on data availability a custom property-&amp;nbsp;&lt;EM&gt;emptyPayload&lt;/EM&gt;&amp;nbsp; set as &lt;EM&gt;true&lt;/EM&gt; or&lt;EM&gt; false.&amp;nbsp;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_5-1766068841969.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353686i28D269AF74552A0A/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_5-1766068841969.png" alt="ShubhamDhumal_5-1766068841969.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_6-1766068889765.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353687iDA849B5EC3152C29/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_6-1766068889765.png" alt="ShubhamDhumal_6-1766068889765.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Now you can see the increment in skip value and top remain unchanged.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;iii: Append Payload in Each Iteration&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;STRONG&gt;Content Modifier&lt;/STRONG&gt; is used to &lt;STRONG&gt;gather the payload&lt;/STRONG&gt; for each iteration. Below&amp;nbsp;Exchange property is created:&lt;BR /&gt;storepayload = ${property.storepayload}${in.body}&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_7-1766069691855.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353691i5CC1F4E49519C282/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_7-1766069691855.png" alt="ShubhamDhumal_7-1766069691855.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;In &lt;STRONG&gt;Message Body&lt;/STRONG&gt; of &lt;STRONG&gt;Content Modifier:&lt;/STRONG&gt;&lt;BR /&gt;${property.storepayload}&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_8-1766069730254.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353692i69FBC00DBF340C35/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_8-1766069730254.png" alt="ShubhamDhumal_8-1766069730254.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Step &lt;STRONG&gt;i, ii, iii&lt;/STRONG&gt; in LIP will execute in loop until condition ${property.emptyPayload} = ‘false’ is met.&lt;BR /&gt;&lt;BR /&gt;&lt;SPAN&gt;Local Integration Process will stop calling when condition is not met in looping process call, The loop will end here.&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;(Back to main integration process)&lt;BR /&gt;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;BR /&gt;4: Add root node.&lt;BR /&gt;&lt;/STRONG&gt;&lt;STRONG&gt;Content Modifier&lt;/STRONG&gt; wraps the gathered payload under a single root node:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ShubhamDhumal_9-1766069850736.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353693i594DB4D3DA1BEB14/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ShubhamDhumal_9-1766069850736.png" alt="ShubhamDhumal_9-1766069850736.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Voilà! The process ends here!!!!!&lt;BR /&gt;&lt;BR /&gt;&lt;FONT face="arial black,avant garde"&gt;Conclusion:&amp;nbsp;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;Client-side pagination provides full control over page size by allowing the use of &lt;CODE&gt;$top&lt;/CODE&gt; and &lt;CODE&gt;$skip&lt;/CODE&gt; as needed, whereas server-side pagination can result in unpredictable page sizes.&lt;BR /&gt;I would recommend using OData Adapter for OData v2/v4 APIs over HTTP adapter because for any error, reason can be traced throw OData response body/headers that provides more realistic understanding of reason of failure.&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;&lt;SPAN&gt;I hope this blog post proves useful for implementing&amp;nbsp;client-side pagination for an OData V4 API.&lt;BR /&gt;&lt;BR /&gt;Thanks for reading!&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/odata-v4-api-pagination-in-sap-cloud-integration/ba-p/14293561"/>
    <published>2025-12-23T06:57:52.200000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/sap-btp-integration-advisor-mig-amp-mag-from-a-cpi-developer-perspective/ba-p/14297939</id>
    <title>SAP BTP - Integration Advisor - (MIG &amp; MAG) from a CPI Developer Perspective</title>
    <updated>2025-12-27T20:17:43.379000+01:00</updated>
    <author>
      <name>rhviana</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/160570</uri>
    </author>
    <content>&lt;P&gt;Hello Hello,&lt;/P&gt;&lt;H2 id="toc-hId-1767513426"&gt;Introduction:&lt;/H2&gt;&lt;P&gt;In this blog, I would like to share my hands-on experience using SAP Integration Advisor &amp;nbsp;based on independent exploration and practical experimentation.&lt;/P&gt;&lt;P&gt;The primary focus will be on&amp;nbsp;Message Implementation Guidelines (MIG) and Mapping Guidelines (MAG).&lt;/P&gt;&lt;P&gt;I will also briefly touch on the technology platform context, specifically SAP Business Technology Platform (SAP BTP), with the scope strictly limited to integration-related services. Topics such as analytics, artificial intelligence, automation, and application development are intentionally out of scope for this blog.&lt;/P&gt;&lt;P&gt;At the end of the blog, I will include a set of reference materials that supported my learning journey. That said, the majority of the insights and conclusions shared here are derived from direct, hands-on experience rather than theoretical examples.&lt;/P&gt;&lt;H2 id="toc-hId-1570999921"&gt;Technology Platform:&lt;/H2&gt;&lt;P&gt;First, let’s start with the Technology Platform. What does that really mean?&lt;/P&gt;&lt;P&gt;A &lt;STRONG&gt;t&lt;/STRONG&gt;echnology platform is the basic foundation that allows software to run. It is made up of different layers that work together, including infrastructure (hardware, memory, storage, databases), the operating system (Windows, Linux), runtime environments, security and networking, and the software layer itself — such as databases, web applications, mobile apps, and IoT solutions.&lt;/P&gt;&lt;P&gt;In simple terms, a technology platform provides everything needed to build, run, and secure applications.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rhviana_1-1766855866233.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356262i91A11184B2659B84/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_1-1766855866233.png" alt="rhviana_1-1766855866233.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1374486416"&gt;SAP BTP (SAP Business Technology Platform)&lt;/H2&gt;&lt;P&gt;SAP Business Technology Platform (SAP BTP) is SAP’s cloud-based platform-as-a-service (PaaS) that enables organizations to extend, integrate, and innovate across SAP and non-SAP systems in a secure and upgrade-safe way.&lt;/P&gt;&lt;P&gt;As mentioned earlier, the image below highlights the four technology pillars supported by SAP BTP. That said, in this blog we will focus only on the integration pillar, specifically SAP Integration Suite.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="rhviana_3-1766856531191.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356263i873660CCE8FBD73A/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_3-1766856531191.png" alt="rhviana_3-1766856531191.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1177972911"&gt;What is SAP Integration Suite?&lt;/H2&gt;&lt;P&gt;SAP Integration Suite is SAP’s cloud-based integration platform used to connect SAP and non-SAP systems, both in the cloud and on-premise, in a secure, scalable, and standardized way.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Cloud Integration&lt;/STRONG&gt; – Core component for end-to-end integrations&lt;/LI&gt;&lt;LI&gt;&lt;FONT color="#FF0000"&gt;&lt;STRONG&gt;Integration Advisor&lt;/STRONG&gt;&lt;/FONT&gt; – Used mainly for B2B and EDI scenarios&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;API Management&lt;/STRONG&gt; – Expose, secure, and manage APIs&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Open Connectors&lt;/STRONG&gt; – Prebuilt connectors for third-party applications&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Event Mesh&lt;/STRONG&gt; - The event-driven backbone&amp;nbsp;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;OK, we’ve already talked about the technology platform, explored SAP BTP, explored the cloud types of service and walked through SAP Integration Suite and its components.&lt;/P&gt;&lt;P&gt;Now comes the most important part of this blog — Integration Advisor. So let’s dive in and start this journey together.&lt;/P&gt;&lt;H2 id="toc-hId-981459406"&gt;What is SAP Integration Advisor?&lt;/H2&gt;&lt;P&gt;SAP Integration Advisor is a capability within SAP Integration Suite, primarily designed for B2B and EDI-based integrations, supporting both inbound and outbound scenarios.&lt;/P&gt;&lt;P&gt;Its main purpose is to help organizations design, standardize, and govern message structures and mappings in a reusable, scalable, and partner-independent manner, enabling consistent and efficient integration across multiple business partners.&lt;/P&gt;&lt;P&gt;Instead of building point-to-point mappings directly in iFlows in SAP Cloud Platform Integration, Integration Advisor introduces a model-driven approach based on:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;MIG (Message Implementation Guideline)&lt;/STRONG&gt; – Defines message type content, select field by field from the message type.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;MAG (Message Mapping Guideline)&lt;/STRONG&gt; – Defines mapping logic of fields.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;TPM (Trading Partner Management)&lt;/STRONG&gt; – Assigns partners and agreements at runtime&lt;BR /&gt;Since this is an exploratory blog, &lt;STRONG&gt;we will not go into TPM in depth and will focus only on its definition.&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H3 id="toc-hId-914028620"&gt;Roles and Responsibilities: MIG vs. MAG from a SAP CPI Developer Perspective:&lt;/H3&gt;&lt;P&gt;One important point to highlight is that a &lt;STRONG&gt;SAP CPI developer &lt;FONT color="#FF0000"&gt;should generally not be responsible for creating MIGs (Message Implementation Guidelines)&lt;/FONT&gt;&lt;/STRONG&gt;&lt;FONT color="#FF0000"&gt;.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;MIGs define the canonical data structure, including business fields, their semantic meaning, validation rules, and compliance with EDI standards. Creating a MIG requires deep business process knowledge and EDI expertise, typically provided by business analysts, functional consultants, or EDI specialists rather than technical integration developers.&lt;/P&gt;&lt;P&gt;From a SAP CPI developer’s point of view, &lt;FONT color="#FF0000"&gt;it is &lt;EM&gt;technically possible&lt;/EM&gt; to work with MIGs&lt;/FONT&gt; only if there is very clear and well-defined mapping documentation between the EDI standard and the SAP business objects. Without strong functional input, the risk of semantic errors is high—even if the technical mapping itself is correct.&lt;/P&gt;&lt;P&gt;MAGs (Mapping Guidelines), on the other hand, are where the actual field-to-field mapping logic is implemented. This activity is comparable to traditional message mapping tasks already familiar to SAP CPI developers. It involves transforming source structures into target structures based on predefined rules, conditions, and conversions.&lt;/P&gt;&lt;P&gt;The Mapping Guidelines (MAGs) are designed to support standardized, declarative mappings and therefore do not support complex transformation logic.&lt;/P&gt;&lt;P&gt;MAGs are implemented using XSLT, which is well-suited for:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Straightforward field-to-field mappings&lt;/LI&gt;&lt;LI&gt;Simple value mappings and lookups&lt;/LI&gt;&lt;LI&gt;Basic conditional logic&lt;/LI&gt;&lt;LI&gt;Structural transformations&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;However, MAGs are not intended for complex business logic, such as:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Advanced conditional flows&lt;/LI&gt;&lt;LI&gt;Context XML node control&lt;/LI&gt;&lt;LI&gt;Loop Structures&lt;/LI&gt;&lt;LI&gt;Stateful processing&lt;/LI&gt;&lt;LI&gt;Cross-message correlations&lt;/LI&gt;&lt;LI&gt;Custom algorithms or calculations&lt;/LI&gt;&lt;LI&gt;Dynamic, runtime-driven transformations&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This is precisely where a &lt;STRONG&gt;SAP CPI developer should be actively involved&lt;/STRONG&gt;, as MAGs require strong technical integration skills, knowledge of SAP data models, and experience with transformation logic.&lt;/P&gt;&lt;H2 id="toc-hId-588432396"&gt;SAP Processes vs. EDI Standards — A Practical Overview&lt;/H2&gt;&lt;P&gt;In SAP B2B integration scenarios, the same business process can be represented by different EDI standards, depending on factors such as industry, geographical region, and trading partner requirements.&lt;/P&gt;&lt;P&gt;For example, a single SAP business process (such as Order-to-Cash or Procure-to-Pay) may be exchanged using different EDI formats across partners. This variability increases complexity and requires a structured approach to mapping and governance.&lt;/P&gt;&lt;P&gt;Below is a simplified overview that illustrates how SAP business processes can be mapped to multiple EDI message formats.&lt;/P&gt;&lt;H2 id="toc-hId-391918891"&gt;Business Context: Inbound EDI Integration into SAP&lt;/H2&gt;&lt;P&gt;To simplify the explanation, I designed a &lt;STRONG&gt;single high-level diagram&lt;/STRONG&gt; that illustrates the end-to-end inbound EDI flow, instead of presenting multiple step-by-step screenshots and low-level technical details.&lt;/P&gt;&lt;H3 id="toc-hId-324488105"&gt;Integration Advisor Design Approach&lt;/H3&gt;&lt;P&gt;In SAP Integration Advisor (IA), the process starts with the definition of Message Implementation Guidelines (MIGs).&lt;BR /&gt;For an inbound integration scenario, two MIGs are required:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Outbound MIG (from the external partner perspective)&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Inbound MIG ( to the SAP system perspective)&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;H3 id="toc-hId-127974600"&gt;Use Case Description:&lt;/H3&gt;&lt;P&gt;In this proof-of-concept, I am working with the &lt;STRONG&gt;EDI X12 message type 850 (Purchase Order)&lt;/STRONG&gt;, version &lt;STRONG&gt;004010&lt;/STRONG&gt;, including the envelope structure.&lt;/P&gt;&lt;P&gt;For this purpose, I created the following MIG for the external system:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;MIG.ORDERPROCESS.X12.850.OUT&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;On the SAP inbound side, the target system is &lt;STRONG&gt;SAP S/4HANA On-Premise&lt;/STRONG&gt;, using the &lt;STRONG&gt;IDoc message type ORDERS05&lt;/STRONG&gt; (related to ORDCHG/ORDERS processing).&lt;/P&gt;&lt;P&gt;I created the inbound MIG:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;MIG.&lt;SPAN&gt;PROCESSORDERS&lt;/SPAN&gt;.IDOC.ORDERS05.IN&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H3 id="toc-hId--143770274"&gt;Mapping Design (MAG)&lt;/H3&gt;&lt;P&gt;After defining both MIGs, the next step is to create the &lt;STRONG&gt;Mapping Guideline (MAG)&lt;/STRONG&gt;.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Source: &lt;STRONG&gt;MIG.ORDERPROCESS.X12.850.OUT&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Target: &lt;STRONG&gt;MIG.&lt;SPAN&gt;PROCESSORDERS&lt;/SPAN&gt;.IDOC.ORDERS05.IN&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rhviana_6-1766858021590.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356266i61CB15A9F0AD8014/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_6-1766858021590.png" alt="rhviana_6-1766858021590.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId--340283779"&gt;Artifacts for SAP Cloud Integration:&lt;/H3&gt;&lt;P&gt;Once the MAG is finalized, Integration Advisor generates a ZIP package or you can Inject direct from IA to SAP CPI Iflow that can be downloaded.This package contains all technical artifacts required for implementation in SAP Cloud Integration (CPI), including:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;XSLT files&lt;/STRONG&gt; (mapping logic)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;XSL files&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;XSD schemas&lt;/STRONG&gt; (source and target message structures)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rhviana_5-1766770613517.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356138i369B6B26FB4F2E33/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_5-1766770613517.png" alt="rhviana_5-1766770613517.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Considering that this is an exploratory exercise, I will not perform end-to-end testing with an actual sending system and a receiving system.&lt;/P&gt;&lt;P&gt;It is important to mention that you can choose either to download the ZIP file or to directly inject the generated artifacts (XSDs and XSLTs) used by the MAG into SAP Cloud Integration directly from SAP Integration Advisor.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="rhviana_0-1766868867844.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356279i5AA2A563A9194634/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_0-1766868867844.png" alt="rhviana_0-1766868867844.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="rhviana_1-1766868917832.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356280iCADEDD93571D733A/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_1-1766868917832.png" alt="rhviana_1-1766868917832.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The final result will be an IDoc ORDCHG / ORDERS05, based on the simple mapping defined in the MAG &lt;STRONG&gt;&amp;nbsp;Mapping_MIG.ORDERPROCESS.X12.850.OUT_to_MIG.PROCESSORDERS.IDOC.ORDERS05.IN&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;The image below demonstrates the test execution.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rhviana_7-1766858920292.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356267i57438D13EAD4E11E/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_7-1766858920292.png" alt="rhviana_7-1766858920292.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;To simplify the explanation, the image below illustrates the Outbound MIG based on an EDI Flat File, the Inbound MIG based on an IDoc, and the MAG responsible for performing the field-level transformation between both message structures.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rhviana_0-1766859377376.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356268iAB7E7C9C64A106A6/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_0-1766859377376.png" alt="rhviana_0-1766859377376.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId--243394277"&gt;Proposed Scenario: EDI Integration Without Architectural Governance - SAP Integration Advisor&lt;/H2&gt;&lt;P&gt;In this scenario, no definition or governance was provided by the SAP Integration Architecture or SAP Solution Architecture teams.&lt;BR /&gt;There was no strategic decision to organize or centralize EDI integrations using SAP Integration Advisor.&lt;/P&gt;&lt;P&gt;As a result:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;No EDI governance model exists&lt;/LI&gt;&lt;LI&gt;No MIGs or MAGs were defined&lt;/LI&gt;&lt;LI&gt;No standardization or reuse of EDI structures&lt;/LI&gt;&lt;LI&gt;Each EDI integration is treated as an isolated, custom implementation&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId--439907782"&gt;Direct Impact on the SAP CPI Developer:&lt;/H2&gt;&lt;P&gt;Due to the lack of architectural definition, the &lt;STRONG&gt;SAP CPI Developer&lt;/STRONG&gt; receives the following business requirement directly.&lt;/P&gt;&lt;P&gt;In practice, architectural and functional responsibilities are shifted to the technical layer.&lt;/P&gt;&lt;P&gt;The image below illustrates this scenario, in which SAP CPI was responsible for the entire end-to-end integration, without guidance or governance from SAP Integration Advisor, and still managed to successfully build the iFlow.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rhviana_1-1766861742861.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356269i21A2E22912EC7842/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_1-1766861742861.png" alt="rhviana_1-1766861742861.png" /&gt;&lt;/span&gt;The difference between using a MAG (Mapping Guideline) and building a manual Message Mapping is significant and far more complex, as illustrated in the image below.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rhviana_2-1766862266231.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/356270iC3A111C400D06C74/image-size/large?v=v2&amp;amp;px=999" role="button" title="rhviana_2-1766862266231.png" alt="rhviana_2-1766862266231.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId--636421287"&gt;Conclusion from SAP CPI Developer Explorer:&lt;/H2&gt;&lt;P&gt;It is important to clarify that this governance—including the definition of MIGs, MAGs, and especially TPM—is not the primary responsibility of an SAP CPI developer.&lt;/P&gt;&lt;P&gt;The Integration Advisor is a powerful tool for standardizing EDI, its success depends on solid architectural governance involving both Business and Architects.&lt;/P&gt;&lt;P&gt;Thank you.&lt;/P&gt;&lt;P&gt;Kind regards,&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Viana.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Blogs about the topic:&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/integration-advisor-overview-of-components-for-building-b2b-integration/ba-p/13512772" target="_blank"&gt;Integration Advisor: Overview of components for building B2B integration content and further reading&lt;/A&gt;&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-members/beginner-s-guide-to-integration-advisor/ba-p/13629944" target="_self"&gt;Beginner's Guide to Integration Advisor&lt;/A&gt;&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/integration-advisor-key-concepts-of-a-message-implementation-guideline/ba-p/13412487" target="_self"&gt;Integration Advisor - Key concepts of a Message Implementation Guideline&lt;/A&gt;&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/integration-content-advisor-create-a-customized-interface-using-mig-editor/ba-p/13354699" target="_self"&gt;integration content advisor: Create a customized interface using MIG editor&lt;/A&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/sap-btp-integration-advisor-mig-amp-mag-from-a-cpi-developer-perspective/ba-p/14297939"/>
    <published>2025-12-27T20:17:43.379000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/btp-is-cpi-steps-to-find-the-api-from-successfactors-sf-url/ba-p/14283636</id>
    <title>BTP-IS(CPI) - Steps to find the API from SuccessFactors(SF) URL</title>
    <updated>2025-12-29T08:34:54.689000+01:00</updated>
    <author>
      <name>Ani902</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2079432</uri>
    </author>
    <content>&lt;P&gt;for example, SF url: hcm-eu10-sales.hr.cloud.sap&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture3.png" style="width: 797px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348372iA08B39AE06A07082/image-size/large?v=v2&amp;amp;px=999" role="button" title="Picture3.png" alt="Picture3.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;So, the customer will provide us this SF URL: &lt;A href="https://hcm-eu10-sales.hr.cloud.sap" target="_blank" rel="nofollow noopener noreferrer"&gt;https://hcm-eu10-sales.hr.cloud.sap&lt;/A&gt; and company ID along with user id/password. Based on this URL we need to generate the API which we can call from Postman:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture2.png" style="width: 610px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348374i2E536F706D93A9EA/image-size/large?v=v2&amp;amp;px=999" role="button" title="Picture2.png" alt="Picture2.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Step 1: Search for SF URL in knowledge article &lt;A href="https://userapps.support.sap.com/sap/support/knowledge/en/2089448" target="_blank" rel="noopener noreferrer"&gt;https://userapps.support.sap.com/sap/support/knowledge/en/2089448&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture1.png" style="width: 657px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348375i01EA887B287B3887/image-size/large?v=v2&amp;amp;px=999" role="button" title="Picture1.png" alt="Picture1.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Step 2: Get the data center:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture4.png" style="width: 673px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348376iD9A36061FC1A55EB/image-size/large?v=v2&amp;amp;px=999" role="button" title="Picture4.png" alt="Picture4.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Step3 : Based on the data center DC57 get the API url from this KBA : &lt;A href="https://userapps.support.sap.com/sap/support/knowledge/en/2215682" target="_blank" rel="noopener noreferrer"&gt;https://userapps.support.sap.com/sap/support/knowledge/en/2215682&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture8.png" style="width: 797px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348377iBB42B702B4D54543/image-size/large?v=v2&amp;amp;px=999" role="button" title="Picture8.png" alt="Picture8.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Step4: We only use this api &lt;A href="https://apisalesdemo2.successfactors.eu" target="_blank" rel="nofollow noopener noreferrer"&gt;https://apisalesdemo2.successfactors.eu&lt;/A&gt; in Postman as well as in CPI to connect to the SF&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture9.png" style="width: 610px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348378iF358F540DC7B1FC9/image-size/large?v=v2&amp;amp;px=999" role="button" title="Picture9.png" alt="Picture9.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Step5 : We can get the postman and CPI API URL from this link as well:&lt;/P&gt;&lt;P&gt;&lt;A href="https://help.sap.com/docs/successfactors-platform/sap-successfactors-api-reference-guide-odata-v2/list-of-sap-successfactors-api-servers" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/successfactors-platform/sap-successfactors-api-reference-guide-odata-v2/list-of-sap-successfactors-api-servers&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture10.png" style="width: 797px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348379i4DE97803BF40E2A3/image-size/large?v=v2&amp;amp;px=999" role="button" title="Picture10.png" alt="Picture10.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/btp-is-cpi-steps-to-find-the-api-from-successfactors-sf-url/ba-p/14283636"/>
    <published>2025-12-29T08:34:54.689000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/inbound-interface-edi-sap-btp-integration-suite-with-tpm-sap-s-4hana-via/ba-p/14296064</id>
    <title>Inbound Interface: EDI → SAP BTP (Integration Suite with TPM) → SAP S/4HANA (via IDoc) for B2B</title>
    <updated>2025-12-30T07:21:33.862000+01:00</updated>
    <author>
      <name>AbhimanyuY</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1493530</uri>
    </author>
    <content>&lt;P&gt;This Blog will guide you to set up an inbound EDI-to-IDOC integration using SAP BTP’s Trading Partner Management (TPM). It involves creating company and partner profiles, defining identifiers, systems, and communications, then configuring agreements and mapping to route EDI messages through BTP IS to SAP S/4HANA via IDOC.&lt;/P&gt;&lt;H3 id="toc-hId-1896557793"&gt;Step 0: Create MIG&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;0.1: &lt;/STRONG&gt;Create a&amp;nbsp;&lt;STRONG&gt;MIG&lt;/STRONG&gt;&amp;nbsp;in your Integration Advisor as per below details and use that MIG in the steps 3.2 and 4.3 and refresh &amp;amp; save it.&lt;/P&gt;&lt;H3 id="toc-hId-1700044288"&gt;Step 1: Create Company Profile&lt;/H3&gt;&lt;P&gt;Create a new &lt;STRONG&gt;Company&lt;/STRONG&gt; for “CPI”.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Note:&lt;/U&gt;&lt;/STRONG&gt; Only 1 Company Profile can exist per tenant.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;1.1:&lt;/STRONG&gt; Navigate to the&amp;nbsp;&lt;STRONG&gt;Design&lt;/STRONG&gt;&amp;nbsp;tab, choose the&amp;nbsp;&lt;STRONG&gt;B2B Scenario&lt;/STRONG&gt;, then select&amp;nbsp;&lt;STRONG&gt;Company Profile&lt;/STRONG&gt;&amp;nbsp;within&amp;nbsp;&lt;STRONG&gt;TPM&lt;/STRONG&gt;&amp;nbsp;(Trading Partner Management), and click the&amp;nbsp;&lt;STRONG&gt;Create profile&lt;/STRONG&gt;&amp;nbsp;button.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_109-1766480558958.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355040i06ABB826C27945D1/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_109-1766480558958.png" alt="AbhimanyuY_109-1766480558958.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Provide Company Name and short name then save it.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_110-1766480558963.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355042i5FC6B0C5F9926298/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_110-1766480558963.png" alt="AbhimanyuY_110-1766480558963.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;1.2:&lt;/STRONG&gt; Create &lt;STRONG&gt;Identifier&lt;/STRONG&gt; in above company which you have created, in the right side there is Identifier tab at top. You can have as many Identifiers for your Company as you want. In our case we have to create 2 Identifiers for our company, one is for SAP S4 and another for EDI.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_111-1766480558969.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355041iCB3C507E0CD5CC10/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_111-1766480558969.png" alt="AbhimanyuY_111-1766480558969.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_112-1766480558975.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355044i6D72C4BFE2CB5481/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_112-1766480558975.png" alt="AbhimanyuY_112-1766480558975.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Note:&lt;/U&gt;&lt;/STRONG&gt; for EDI, check Custom Scheme as per EDI and provide Scheme code and Scheme Name as per requirement.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;1.3:&lt;/STRONG&gt; Go to the Systems Tab of created Company and&amp;nbsp;&lt;STRONG&gt;Create&amp;nbsp;&lt;/STRONG&gt;a &lt;STRONG&gt;System&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_113-1766480558980.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355045i0188107058D42DDD/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_113-1766480558980.png" alt="AbhimanyuY_113-1766480558980.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Click on + button to create new Type.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_114-1766480558982.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355043i231A7EAF83B0E0BB/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_114-1766480558982.png" alt="AbhimanyuY_114-1766480558982.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_115-1766480558986.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355047i9F1A8B0947BE1369/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_115-1766480558986.png" alt="AbhimanyuY_115-1766480558986.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;1.4:&lt;/STRONG&gt; Select/Click on above system which you have created, in that new option will open in right side as Create &lt;STRONG&gt;Type System&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_116-1766480558993.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355048iCC5E06CD62E31B54/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_116-1766480558993.png" alt="AbhimanyuY_116-1766480558993.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_117-1766480558994.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355046i631FC2187B3A8C9D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_117-1766480558994.png" alt="AbhimanyuY_117-1766480558994.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Note:&lt;/U&gt;&lt;/STRONG&gt; The Version of System should match the&amp;nbsp;DOCREL&amp;nbsp;in your EDI Control Record (EDI_DC40) from your IDOC, so please provide the same version which is available in IDOC.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;1.5: &lt;/STRONG&gt;Select &lt;STRONG&gt;Communication&lt;/STRONG&gt; as per the below image and create it.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_118-1766480558998.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355051i1F90E20B6939FCF8/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_118-1766480558998.png" alt="AbhimanyuY_118-1766480558998.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;As we are going to map the EDI file to an IDOC and post it to SAP S4, we need to define a&amp;nbsp;&lt;STRONG&gt;Receiver&lt;/STRONG&gt;&lt;STRONG&gt;&amp;nbsp;Communication&lt;/STRONG&gt;&amp;nbsp;for our Company. Provide all IDOC details and save it.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_147-1766480935795.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355079iA74929FE1EFB0B4A/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_147-1766480935795.png" alt="AbhimanyuY_147-1766480935795.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1503530783"&gt;Step 2: Create Trading Partners&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;2.1: &lt;/STRONG&gt;Go to your Trading Partner Management (B2B Scenarios) in Design and&amp;nbsp;select &lt;STRONG&gt;Partner Profile &lt;/STRONG&gt;Tab. Click on&amp;nbsp;Create Trading Partner and provide all details.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_148-1766481002470.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355080iD96ECBC1F1DF9F06/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_148-1766481002470.png" alt="AbhimanyuY_148-1766481002470.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_121-1766480559007.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355052i6213A4A8F5661101/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_121-1766480559007.png" alt="AbhimanyuY_121-1766480559007.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;2.2:&lt;/STRONG&gt; Create &lt;STRONG&gt;Identifiers&lt;/STRONG&gt; for above Trading Partner which we have created.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_149-1766481046750.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355081i86E13E79515CB0BA/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_149-1766481046750.png" alt="AbhimanyuY_149-1766481046750.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt; Refer 1.2 for details.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;2.3:&lt;/STRONG&gt; Create a System for Trading Partner which you have created. Go to the Systems Tab of created Trading Partner and&amp;nbsp;&lt;STRONG&gt;Create&amp;nbsp;&lt;/STRONG&gt;a &lt;STRONG&gt;System&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_150-1766481076135.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355083i66ED33EF3D8F1299/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_150-1766481076135.png" alt="AbhimanyuY_150-1766481076135.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_124-1766480559019.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355055iFB72CA9C662F9B0E/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_124-1766480559019.png" alt="AbhimanyuY_124-1766480559019.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt;&lt;/U&gt; Refer 1.3 for more details.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;2.4:&lt;/STRONG&gt; Select/Click on above system which you have created, in that new option will open in right side as &lt;STRONG&gt;Create Type System&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_151-1766481130513.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355085i21DE528D83B73862/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_151-1766481130513.png" alt="AbhimanyuY_151-1766481130513.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Create a Type System for the Trading Partner with the details.&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Note: &lt;/STRONG&gt;&lt;/U&gt;Refer 1.4 for details.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;2.5:&lt;/STRONG&gt; Create &lt;STRONG&gt;Communication&lt;/STRONG&gt; for Trading Partner.&lt;/P&gt;&lt;P&gt;As we will receive the EDI File from our trading partner (HF) from SFTP, we will need to create a Sender Communication for this Trading Partner in TPM.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_152-1766481212601.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355086iCC55DBE8EBE29F32/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_152-1766481212601.png" alt="AbhimanyuY_152-1766481212601.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_127-1766480559038.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355059i96A7CA9DFC559184/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_127-1766480559038.png" alt="AbhimanyuY_127-1766480559038.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1307017278"&gt;Step 3: Define Agreement Template&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;3.1: &lt;/STRONG&gt;We will create an &lt;STRONG&gt;Agreement Template&lt;/STRONG&gt; in our Trading Partner Management. The Agreement Template here is where CUSTOMER1 is the&amp;nbsp;&lt;STRONG&gt;Initiator&amp;nbsp;&lt;/STRONG&gt;and SAPS4Hana200 is the&amp;nbsp;&lt;STRONG&gt;Reactor.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Select Agreement Templates in Trading Partner Management and click on create button.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_153-1766481345690.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355088i736C8BFB8C9FC47D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_153-1766481345690.png" alt="AbhimanyuY_153-1766481345690.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_129-1766480559050.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355058iFC08E4090BE88093/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_129-1766480559050.png" alt="AbhimanyuY_129-1766480559050.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_130-1766480559058.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355062i79EBD502AD74CB14/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_130-1766480559058.png" alt="AbhimanyuY_130-1766480559058.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_131-1766480559065.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355061iC76F7BD14F628605/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_131-1766480559065.png" alt="AbhimanyuY_131-1766480559065.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;3.2:&lt;/STRONG&gt; Select &lt;STRONG&gt;MIG&lt;/STRONG&gt; if you have created.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_154-1766481410440.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355089i1229403AFAE999D7/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_154-1766481410440.png" alt="AbhimanyuY_154-1766481410440.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;3.3:&lt;/STRONG&gt; Define the &lt;STRONG&gt;Communication channel (IDoc)&lt;/STRONG&gt; in your Template and save it.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_155-1766481438019.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355090iA84F3B99560D2898/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_155-1766481438019.png" alt="AbhimanyuY_155-1766481438019.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1110503773"&gt;Step 4: Define Agreement&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;4.1: &lt;/STRONG&gt;Create an&amp;nbsp;&lt;STRONG&gt;Agreement&lt;/STRONG&gt;&amp;nbsp;in your Trading Partner Management as per below details.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_156-1766481464933.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355091iBDEC80A4CB702262/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_156-1766481464933.png" alt="AbhimanyuY_156-1766481464933.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_135-1766480559094.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355064iFE4F65D258A5A3A3/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_135-1766480559094.png" alt="AbhimanyuY_135-1766480559094.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_166-1766482364961.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355101i8CE4C19E1CB0B2E6/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_166-1766482364961.png" alt="AbhimanyuY_166-1766482364961.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_167-1766482395374.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355102i478D02DAEF5415B5/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_167-1766482395374.png" alt="AbhimanyuY_167-1766482395374.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;You will now see D.96B.S3 in your Trading Partner Agreement. Select that and the remaining Identifiers as per screenshot below.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_165-1766482266290.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355100iDEBC1D3C7D4DCE59/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_165-1766482266290.png" alt="AbhimanyuY_165-1766482266290.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;4.2:&lt;/STRONG&gt; Provide &lt;STRONG&gt;Sender Communication Details&lt;/STRONG&gt; in Trading Partner Agreement. Select Sender Communication.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_158-1766481557176.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355093i8C61CF6547A5107D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_158-1766481557176.png" alt="AbhimanyuY_158-1766481557176.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Select Communication and save it.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_159-1766481581959.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355094iF4452833383E6599/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_159-1766481581959.png" alt="AbhimanyuY_159-1766481581959.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;4.3:&lt;/STRONG&gt; Provide &lt;STRONG&gt;Sender Interchange Details&lt;/STRONG&gt; in Trading Partner Agreement.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_160-1766481604131.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355095i7C8AE77617FF3B4C/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_160-1766481604131.png" alt="AbhimanyuY_160-1766481604131.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Choose MIG and save it.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_142-1766480559122.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355075iF415AB5A2E329D73/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_142-1766480559122.png" alt="AbhimanyuY_142-1766480559122.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;4.4:&lt;/STRONG&gt; Provide &lt;STRONG&gt;Mapping Details&lt;/STRONG&gt; in Trading Partner Agreement.&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt;&lt;/U&gt; As per our scope, we will not use MAG and use a Message Mapping in Cloud Integration. Select option “Customized Mapping Processing” and provide your Process Direct endpoint of your Iflow (/tpm/Customer1/EDIFACT_ORDERSD86B/IDOC_ORDERS_ORDERS05). Note this endpoint as you will use it in the next step.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_161-1766481695006.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355096i73C16F5D2B7A76FF/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_161-1766481695006.png" alt="AbhimanyuY_161-1766481695006.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;4.5:&lt;/STRONG&gt; &lt;STRONG&gt;Activate&lt;/STRONG&gt; your Trading Partner Agreement.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="AbhimanyuY_164-1766482197636.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/355099i6ADF079E610FAA80/image-size/medium?v=v2&amp;amp;px=400" role="button" title="AbhimanyuY_164-1766482197636.png" alt="AbhimanyuY_164-1766482197636.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion:&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV&gt;By following these steps, you can successfully set up an inbound EDI-to-IDOC integration using SAP BTP’s Trading Partner Management (TPM). The process involves creating company and partner profiles, defining identifiers and systems, configuring communications, and establishing agreements. Leveraging MIG for message structure and customized mapping in Cloud Integration ensures that EDI messages are accurately transformed and routed to SAP S/4HANA via IDoc. This approach provides a standardized, scalable, and efficient way to manage B2B integrations on SAP BTP.&lt;/DIV&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/inbound-interface-edi-sap-btp-integration-suite-with-tpm-sap-s-4hana-via/ba-p/14296064"/>
    <published>2025-12-30T07:21:33.862000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/sap-cap-blog-posts/how-to-use-a-cap-application-to-manage-dmq-messages-on-sap-advanced-event/ba-p/14299974</id>
    <title>How to use a CAP application to manage DMQ messages on SAP Advanced Event Mesh</title>
    <updated>2025-12-31T11:14:17.007000+01:00</updated>
    <author>
      <name>stefan-keuker</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/42251</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1638490408"&gt;Context&lt;/H1&gt;&lt;P&gt;A message that reaches SAP Integration Suite, Advanced Event Mesh is moved to a Dead Message Queue (DMQ) when it's 'Time to live' (TTL) has passed or when the number of delivery attempts to the consumer has been exceeded. Once the TTL of messages in the DMQ has passed the message broker deletes affected messages irrevocably. Message deletion might not be acceptable in the related integration scenario.&lt;BR /&gt;&lt;BR /&gt;This blog post describes how to create a CAP application that retrieves DMQ messages from SAP Advanced Event Mesh for quarantine. Retrieving DMQ messages from the message broker before their TTL ends safeguards messages from deletion and keeps the messages alive in quarantine. Using management features like payload inspection and correction, quarantined messages can be reinjected into SAP Advanced Event Mesh to reattempt delivery to the original consumer.&lt;/P&gt;&lt;H1 id="toc-hId-1441976903"&gt;Implement a CAP project&lt;/H1&gt;&lt;P&gt;Using SAP Build Code, in a Dev Space of type '&lt;SPAN&gt;Full-Stack Application Using Productivity Tools', create a multi-target application project using the project from template wizard 'Full Stack Project'. The project will use the node.js flavour of CAP.&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1374546117"&gt;&lt;SPAN&gt;Add CAP messaging plugin&lt;/SPAN&gt;&lt;/H2&gt;&lt;P&gt;To equip your project for interaction with SAP Advanced Event Mesh do configuration as described in plugin &lt;A href="https://github.com/cap-js/advanced-event-mesh/blob/main/README.md#setup" target="_self" rel="nofollow noopener noreferrer"&gt;cap-js/advanced-event-mesh&lt;/A&gt;. Set 'skipManagement' to 'true' because this CAP application is going to consume messages from and produce messages to existing queues. Management access (to create queues, publish or subscribe to topics) to SAP Advanced Event Mesh is not required for this. Use the 'subaccountId' property to indicate the subaccount in which SAP Advanced Event Mesh is subscribed in case you need to deploy your CAP application to another subaccount.&lt;/P&gt;&lt;P&gt;This is what our 'messaging' configuration in the package.json ended up looking:&lt;/P&gt;&lt;pre class="lia-code-sample language-json"&gt;&lt;code&gt;"messaging": {
  "kind": "advanced-event-mesh",
  "credentials": {
    "user-provided": {
      "name": "advanced-event-mesh"
    }
  },
  "skipManagement": true,
  "subaccountId": "our subaccount that subscribes to SAP Advanced Event Mesh"
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;On CAP application start, the cap-js/advanced-event-mesh plugin will take care of establishing a session with SAP Advanced Event Mesh and auto-renew the OAuth token for the time the CAP server is up. To get access to the session in your application logic, connect to the 'messaging' service&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;// get access to messaging service instance
const MessagingService = await cds.connect.to('messaging');&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;and use property MessagingService.session for interaction with SAP Advanced Event Mesh.&lt;/SPAN&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1178032612"&gt;&lt;SPAN&gt;CAP schema definition&lt;/SPAN&gt;&lt;/H2&gt;&lt;P&gt;&lt;SPAN&gt;Using CDS create a DB schema.cds, that caters for entities SourceQueue and QueueMessage. The SourceQueue is for configuration of the DMQs whose messages should be retrieved for quarantine. The QueueMessage entity is for persisting the retrieved DMQ messages in all relevant aspects for inspection and resubmission to SAP Advanced Event Mesh. For the binary payload use CAP type LargeBinary, for the text payload use CAP type LargeString.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This is what our QueueMessage entity ended up looking:&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;@assert.unique: {queueMessageId: [queueMessageId]}
entity QueueMessage : cuid, managed {
          queueMessageId : String(36) @mandatory;
          queueId        : String(250);
          sourceQueue    : Association to SourceQueue;
          contentType    : String;
          payloadType    : Association to PayloadType;
          payloadLength  : Integer;
          textPayload    : LargeString;
          ingestedAt     : Timestamp;
          messageStatus  : Association to MessageStatus;
          topicId        : String;
          binaryPayload  : LargeBinary;
          eventEmittedAt : Timestamp;
          eventType      : String;
          eventSource    : String;
          eventId        : String;
          acknowledged   : Boolean;
}&lt;/code&gt;&lt;/pre&gt;&lt;H2 id="toc-hId-981519107"&gt;&lt;SPAN&gt;CAP service definition&lt;/SPAN&gt;&lt;/H2&gt;&lt;P&gt;&lt;SPAN&gt;Using CDS create one service whose purpose is to connect a SourceQueue (sourcequeue-connector.cds) and another for managing quarantined messages (queuemessage-manager.cds). In&amp;nbsp;sourcequeue-connector.cds for entity SourceQueue add bound actions&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;openConnection,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;closeConnection,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;checkConnection,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;cleanup and&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;flush. For 'cleanup' we have implemented logic to remove all queue messages that have successfully been resubmitted to SAP Advanced Event Mesh. With 'flush' we cater for resubmission of all messages that remain to be resent to SAP Advanced Event Mesh for the source queue in question. In queuemessage-manager.cds for entity QueueMessage add bound action produce.&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;H2 id="toc-hId-785005602"&gt;&lt;SPAN&gt;CAP service implementation&lt;/SPAN&gt;&lt;/H2&gt;&lt;P&gt;&lt;SPAN&gt;As SAP Advanced Event Mesh is powered by the &lt;A href="https://solace.com/products/platform/" target="_self" rel="nofollow noopener noreferrer"&gt;Solace PubSub+ Platform&lt;/A&gt;&amp;nbsp;it comes as no surprise that the cap-js/advanced-event-mesh plugin is an implementation of the &lt;A href="https://docs.solace.com/API/Messaging-APIs/NodeJS-API/node-js-home.htm" target="_self" rel="nofollow noopener noreferrer"&gt;Solace Node.js Messaging API&lt;/A&gt;. This is good to know as with this CAP application we are not letting the plugin publish and subscribe to a CAP app specific topic as it normally would but we'll be consuming and producing from queues instead. So we'll be relying on the CAP messaging plugin merely for establishing the session with SAP Advanced Event Mesh.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Add a sourcequeue-connector.js file in the same location as sourcequeue-connector.cds which CAP by convention of matching names will consider as the module holding custom application logic for the service.&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;For action openConnection of entity SourceQueue implement as per the Solace &lt;/SPAN&gt;&lt;A href="https://github.com/SolaceSamples/solace-samples-nodejs/blob/master/src/features/QueueConsumer.js" target="_self" rel="nofollow noopener noreferrer"&gt;QueueConsumer&lt;/A&gt;&lt;SPAN&gt; sample. Instead of establishing a new session with SAP Advanced Event Mesh though just reuse the one established for you by the CAP plugin:&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;// create the consumer, specifying the name of the queue
let consumer = new QueueConsumer(solace, sourceQueue, MessagingService.session);&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;To receive messages add a handler function for the&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;solace&lt;/SPAN&gt;&lt;SPAN&gt;.MessageConsumerEventName.&lt;/SPAN&gt;&lt;SPAN&gt;MESSAGE event and write all relevant attributes to the QueueMessage entity using CQL INSERT.&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Opening a connection from CAP will create a consumer on the queue on SAP Advanced Event Mesh message broker. All messages in the queue on the SAP Advanced Event Mesh message broker at the time of establishing a connection and all new messages entering the DMQ while connected will be consumed and acknowledged by the CAP application.&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;Add a queuemessage-manager.js file in the same location as queuemessage-manager.cds which CAP by convention of matching names will consider as the module holding custom application logic for the service. For action produce of entity QueueMessage implement as per the Solace &lt;A href="https://github.com/SolaceSamples/solace-samples-nodejs/blob/master/src/features/QueueProducer.js" target="_self" rel="nofollow noopener noreferrer"&gt;QueueProducer&lt;/A&gt; sample to write the quarantined message to the target queue on SAP Advanced Event Mesh.&lt;/P&gt;&lt;H2 id="toc-hId-588492097"&gt;Fiori Element UIs&lt;/H2&gt;&lt;P&gt;Using the Storyboard feature in Build Code add 2 separate List Report Page UIs, one consuming the sourcequeue-connector service and one consuming the queuemessage-manager service. Using the sourcequeue-connector UI users can connect to a DMQ on SAP Advanced Event Mesh and manage the connection. If a DMQ is left in connected state then all messages from the related DMQ are immediately quarantined to the CAP application. Using the queuemessage-manager UI users can inspect quarantined messages, validate payloads and resubmit them to SAP Advanced Event Mesh. In our implementation of the CAP application we allow for correcting payloads to cater for situations where the source system cannot reproduce messages.&lt;/P&gt;&lt;H3 id="toc-hId-521061311"&gt;Fiori Elements visual impressions&lt;/H3&gt;&lt;P&gt;This is how our tiles in the launchpad ended up looking:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="stefankeuker_0-1767168627276.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357350i11E05FD691B261DD/image-size/medium?v=v2&amp;amp;px=400" role="button" title="stefankeuker_0-1767168627276.png" alt="stefankeuker_0-1767168627276.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Here is an impression of the SourceQueue object page of the 'Connect Source Queues' app. Note the buttons for execution of custom actions connect, disconnect, check connection, flush and cleanup from the CDS service definition. The footer action 'Refresh' is a custom action implemented as extension to the Fiori Elements Listreport and Object Page template.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="stefankeuker_1-1767169869891.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357357i4E309A978BC59717/image-size/large?v=v2&amp;amp;px=999" role="button" title="stefankeuker_1-1767169869891.png" alt="stefankeuker_1-1767169869891.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Here is an impression of the QueueMessage object page of the 'Manage Queue Messages' app. Note the button for execution of custom action produce from the CDS service definition.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="stefankeuker_2-1767170273648.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357360i98D7DCAD25417BFB/image-size/large?v=v2&amp;amp;px=999" role="button" title="stefankeuker_2-1767170273648.png" alt="stefankeuker_2-1767170273648.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Note the payload facet that will visualize a textual message body formatted as JSON where applicable. Depending on your requirements make fields editable or disallow editing all together depending on user authorization.&lt;/P&gt;&lt;H1 id="toc-hId-66382368"&gt;Deploy as Multitarget Application to Cloud Foundry&lt;/H1&gt;&lt;P&gt;Deploying to Cloud Foundry in BTP requires the formulation of a development descriptor mta.yaml for the CAP project. Leave the creation of the mta.yaml file to the 'cds add mta, workzone-standard' command to get its base structure right. As the cap-js/advanced-event-mesh CDS plugin requires bindings to a user provided service 'advanced-event-mesh' and an aem-validation-service plan instance add them manually as resources to our mta.yaml.&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;  #User provided service for cap-js/messaging plugin
  - name: advanced-event-mesh
    type: org.cloudfoundry.user-provided-service

  #Service to validate message broker (VMR) exists
  - name: aem-validation-cap-queuemessagemanager
    type: org.cloudfoundry.managed-service
    parameters:
      service: aem-validation-service
      service-plan: aem-validation-service-plan&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;and refer to them in the 'require' section of the CAP server module.&lt;/P&gt;&lt;H1 id="toc-hId--130131137"&gt;Special considerations&lt;/H1&gt;&lt;P&gt;The following topics deserve special mention as they need to be thought of ahead of deploying the CAP application.&lt;/P&gt;&lt;H2 id="toc-hId-149692434"&gt;BTP subaccount for deployment&lt;/H2&gt;&lt;P&gt;We consider the CAP application to quarantine DMQ messages from SAP Advanced Event Mesh as enterprise support, i.e. a central support function that should be implemented once per global account. That is why we have chosen a central BTP subaccount dedicated to Enterprise Application Integration for deployment of the CAP application, i.e. a subaccount that is not dedicated to a line of business.&lt;/P&gt;&lt;P&gt;SAP Advanced Event Mesh (powered by Solace PubSub+) has a concept of 'environments' with which it separates development, test and production artifacts. All environments are managed through the SAP Integration Suite, Advanced Event Mesh subscription of the &lt;STRONG&gt;one&lt;/STRONG&gt; BTP subaccount. To stick to our approach to use BTP subaccounts for separating development, test and production we use the BTP subaccounts dedicated to the respective stage to deploy the CAP application. It is the user provided service '&lt;A href="https://github.com/cap-js/advanced-event-mesh/blob/main/README.md#setup" target="_self" rel="nofollow noopener noreferrer"&gt;advanced-event-mesh&lt;/A&gt;' in each subaccount that provides the CAP application with details about the message broker to connect to. Our development, test and production BTP subaccounts trust different SAP Identity and Authentication Service (IAS) instances and the OAuth Profile that we created on the message brokers accordingly ensure that messages cannot be sent across stages.&lt;/P&gt;&lt;H2 id="toc-hId--46821071"&gt;Rendering through SAP Build Workzone&lt;/H2&gt;&lt;P&gt;For deployment of our CAP application for DMQ message management we chose the managed app router approach. Due to the fact that our central enterprise launchpad though is running on another BTP subaccount than the one that holds the deployed CAP application we are exposing it as a '&lt;A href="https://help.sap.com/docs/cloud-portal-service/sap-cloud-portal-service-on-cloud-foundry/developing-html5-apps-for-cross-subaccount-consumption?locale=en-US" target="_self" rel="noopener noreferrer"&gt;content provider&lt;/A&gt;'. This way we can consume it cross-subaccount from the BTP subaccount that runs our central enterprise launchpad.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/sap-cap-blog-posts/how-to-use-a-cap-application-to-manage-dmq-messages-on-sap-advanced-event/ba-p/14299974"/>
    <published>2025-12-31T11:14:17.007000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/generic-groovyscript-to-log-customheaderproperties-dynamically-for-xml/ba-p/14299923</id>
    <title>Generic GroovyScript to Log CustomHeaderProperties Dynamically for XML Payloads in Cloud Integration</title>
    <updated>2025-12-31T13:25:18.585000+01:00</updated>
    <author>
      <name>Daggolu_PremSai</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1668154</uri>
    </author>
    <content>&lt;H4 id="toc-hId-2025738409"&gt;Introduction&lt;/H4&gt;&lt;P&gt;In SAP Integration Suite, Message Processing Logs (MPL) are a primary tool for monitoring and troubleshooting interfaces.&lt;/P&gt;&lt;P&gt;While CPI provides technical details by default, integration developers often need &lt;STRONG&gt;business relevant information&lt;/STRONG&gt; such as document numbers, PO numbers, statuses or reference ID from the payload to quickly &lt;STRONG&gt;search for specific messages&lt;/STRONG&gt; in MPL.&lt;/P&gt;&lt;P&gt;To address this, many projects adopt &lt;STRONG&gt;custom header properties&lt;/STRONG&gt; that are written into MPL and later used as search criteria in MPL view.&lt;/P&gt;&lt;P&gt;This blog presents a &lt;STRONG&gt;generic and reusable approach&lt;/STRONG&gt; to populate such custom header properties, supporting both:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Static values&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Dynamic values extracted from XML payloads&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H4 id="toc-hId-1829224904"&gt;What are Custom Header Properties in MPL?&lt;/H4&gt;&lt;P&gt;Custom Header Properties are key-value pairs explicitly written into the message processing logs using groovy.&lt;/P&gt;&lt;P&gt;Once added:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;They appear in the &lt;STRONG&gt;MPL Custom Headers section&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;They can be used to &lt;STRONG&gt;search and filter messages&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;They significantly reduce time spent opening and inspecting payloads&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Example use cases:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Search messages by &lt;STRONG&gt;Purchase Order Number&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Filter failed messages by &lt;STRONG&gt;business status&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Trace a message by &lt;STRONG&gt;external reference ID&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H4 id="toc-hId-1632711399"&gt;Design Overview&lt;/H4&gt;&lt;P&gt;This solution follow a configuration-first design:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Developers configure headers or properties with a specific prefix&lt;/LI&gt;&lt;LI&gt;A single groovy script reads these configuration&lt;/LI&gt;&lt;LI&gt;Values are logged into MPL as custom header properties&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;No payload specific logic is hardcoded in the script.&lt;/P&gt;&lt;H5 id="toc-hId-1565280613"&gt;Naming Convention Used&lt;/H5&gt;&lt;TABLE border="1" width="100%"&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="50%"&gt;&lt;STRONG&gt;Prefix&lt;/STRONG&gt;&lt;/TD&gt;&lt;TD width="50%"&gt;&lt;STRONG&gt;Purpose&lt;/STRONG&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%"&gt;custH_&lt;/TD&gt;&lt;TD width="50%"&gt;Marks a header/property to be logged as a custom header property in MPL&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%"&gt;Xpath_&lt;/TD&gt;&lt;TD width="50%"&gt;Indicates the value should be extracted dynamically from the XML Payload&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;H5 id="toc-hId-1368767108"&gt;Example Configuration&lt;/H5&gt;&lt;P&gt;custH_StaticHeader = HelloWorld&lt;BR /&gt;custH_PONumber = Xpath_/PurchaseOrder/Header/DocumentNumber&lt;BR /&gt;custH_Status = Xpath_/PurchaseOrder/Status&lt;/P&gt;&lt;H5 id="toc-hId-1172253603"&gt;How this works:&lt;/H5&gt;&lt;UL&gt;&lt;LI&gt;static values are logged as-is&lt;/LI&gt;&lt;LI&gt;XPath-based values are evaluated against the XML payload&lt;/LI&gt;&lt;LI&gt;Each extracted values is written into MPL as a custom header property&lt;/LI&gt;&lt;/UL&gt;&lt;H5 id="toc-hId-975740098"&gt;Dynamic XML Payload Support&lt;/H5&gt;&lt;P&gt;This script is designed specifically for Static values and XML Payloads&lt;/P&gt;&lt;P&gt;It supports:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Namespace-agnostic XPath (using local-name()) - no need to provide namespace in XPath.&lt;/LI&gt;&lt;LI&gt;Repeating nodes (NodeSet extraction)&lt;/LI&gt;&lt;LI&gt;Attributes and element values&lt;/LI&gt;&lt;LI&gt;Optional and empty elements&lt;/LI&gt;&lt;LI&gt;Real-world SAP XML structures with multiple namespaces&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Scope Note:&lt;/STRONG&gt; This script currently supports only static values and XML payloads, It does not process JSON, CSV or other non-XML formats.&lt;/P&gt;&lt;P&gt;&lt;EM&gt;The Groovy script was refined in multiple iterations with the help of AI, making it more generic and easier to extend for future enhancements.&lt;/EM&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;// This script supports Groovy Verion 2, please upgrade if needed.

// Import required classes for message handling, XML parsing, and XPath processing

import com.sap.gateway.ip.core.customdev.util.Message
import javax.xml.parsers.DocumentBuilderFactory
import javax.xml.parsers.ParserConfigurationException
import javax.xml.xpath.XPathFactory
import javax.xml.xpath.XPathConstants
import org.xml.sax.InputSource
import org.xml.sax.SAXException
import java.io.StringReader
import java.io.IOException


Message processData(Message message) {
    def messageLog

    // Attempt to obtain messageLog for logging
    try {
        messageLog = messageLogFactory.getMessageLog(message)
    } catch (Exception e) {
        return message
    }
    if (messageLog == null) return message

    // Get the message body and check if it's XML
    def body = message.getBody(String)
    boolean isXML = body?.trim()?.startsWith("&amp;lt;")
    def xmlDoc = null
    def xpath = null

    // Combine headers and properties into a single map for unified processing
    def allInputs = [:]
    allInputs.putAll(message.getHeaders())
    allInputs.putAll(message.getProperties())

    // PREPROCESS: Check if any 'custH_' keyed field will require XPath extraction.
    // Only parse XML if at least one such case exists (for performance optimization).
    boolean needsXmlParse = allInputs.any { k, v -&amp;gt;
        k.startsWith("custH_") &amp;amp;&amp;amp; v?.toString()?.trim()?.startsWith("Xpath_") &amp;amp;&amp;amp; isXML
    }
    if (needsXmlParse) {
        try {
            def factory = DocumentBuilderFactory.newInstance()
            factory.setNamespaceAware(false)

            // --- Security Block: Prevent XXE attacks and other unsafe XML behaviors ---
            factory.setFeature("http://apache.org/xml/features/disallow-doctype-decl", true)
            factory.setFeature("http://xml.org/sax/features/external-general-entities", false)
            factory.setFeature("http://xml.org/sax/features/external-parameter-entities", false)
            factory.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false)
            factory.setXIncludeAware(false)
            factory.setExpandEntityReferences(false)
            // -------------------------------------------------------------------------

            // Parse the XML document and prepare for XPath usage
            xmlDoc = factory.newDocumentBuilder().parse(new InputSource(new StringReader(body)))
            xpath = XPathFactory.newInstance().newXPath()
        } catch (ParserConfigurationException | SAXException | IOException | IllegalArgumentException e) {
            // If secure parsing fails, fall back to not using XPath extraction
            xmlDoc = null
            xpath = null
        }
    }

    // MAIN LOGIC: Iterate over all combined header/property fields
    allInputs.each { key, value -&amp;gt;
        if (!key.startsWith("custH_")) return // Only process custom header entries

        def headerName = key.substring(6) // Remove prefix to get the real header/property name
        def val = value?.toString()?.trim()
        if (!val) return

        // CASE 1: Static value - always log as custom header property
        if (!val.startsWith("Xpath_")) {
            messageLog.addCustomHeaderProperty(headerName, val)
            return
        }

        // CASE 2: XPath value - extract from body using constructed XPath, if XML and parser available
        if (isXML &amp;amp;&amp;amp; xmlDoc &amp;amp;&amp;amp; xpath) {
            def rawXpath = val.substring(6)
            def finalXpath = buildXPath(rawXpath) // Build namespace-agnostic XPath from supplied string
            if (finalXpath) {
                try {
                    // Evaluate the XPath and extract all resulting node values
                    def nodes = xpath.evaluate(finalXpath, xmlDoc, XPathConstants.NODESET)
                    if (nodes &amp;amp;&amp;amp; nodes.getLength() &amp;gt; 0) {
                        for (int i = 0; i &amp;lt; nodes.getLength(); i++) {
                            def nodeVal = nodes.item(i)?.getTextContent()?.trim()
                            if (nodeVal) {
                                messageLog.addCustomHeaderProperty(headerName, nodeVal)
                            }
                        }
                    }
                } catch (Exception ignore) { /* Never fail for XPath extraction errors */ }
            }
        }
    }
    // Return message object at end of processing
    return message
}

/*
 * buildXPath: Build a namespace-agnostic XPath expression from a path string.
 * Supports attributes and repeated elements. Used by main function to simplify XPath field extraction even in the presence of XML namespaces.
 */


String buildXPath(String xp) {
    try {
        // Tokenize and filter out empty tokens
        return xp.tokenize('/').findAll { it }.collect { token -&amp;gt;
            def element = token, idx = "", attr = ""

            // Handle attribute syntax in each token
            if (element.contains("@")) {
                def parts = element.split("@")
                element = parts[0]
                attr = parts[1]
            }

            // Handle index in element (e.g., /Header/Item[3]/Field/@attribute)
            if (element == "") {
                // In case of /@attr at the end
                return attr ? "/@${attr}" : ""
            } else {
                def matcher = (element =~ /^(.+?)(\[(\d+)\])?$/)
                if (matcher.matches()) {
                    element = matcher[0][1]
                    idx = matcher[0][2] ?: ""
                }
                def nodeExpr = "/*[local-name()='${element}']"
                nodeExpr += idx
                if (attr) {
                    nodeExpr += "/@${attr}"
                }
                return nodeExpr
            }
        }.join('')
    } catch (Exception e) {
        return ""
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId-779226593"&gt;Test Payload Used&lt;/H5&gt;&lt;P&gt;The following XML Payload used to validate the Groovy script across multiple scenarios:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Multiple namespaces&lt;/LI&gt;&lt;LI&gt;Repeating elements&lt;/LI&gt;&lt;LI&gt;Attributes and element values&lt;/LI&gt;&lt;LI&gt;Optional and empty nodes&lt;/LI&gt;&lt;LI&gt;Nested structures&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;&amp;lt;ns0:PurchaseOrder xmlns:ns0="urn:sap-com:document:sap:rfc:functions" xmlns:sf="urn:sap-com:document:sap:soap:functions:mc-style"&amp;gt;
    &amp;lt;ns0:Header&amp;gt;
        &amp;lt;ns0:DocumentNumber&amp;gt;4500001234&amp;lt;/ns0:DocumentNumber&amp;gt;
        &amp;lt;ns0:CreatedBy&amp;gt;Jane Doe&amp;lt;/ns0:CreatedBy&amp;gt;
        &amp;lt;ns0:ApprovalStatus code="APPROVED"/&amp;gt;
        &amp;lt;ns0:Note/&amp;gt;
    &amp;lt;/ns0:Header&amp;gt;
    &amp;lt;ns0:Items&amp;gt;
        &amp;lt;ns0:Item&amp;gt;
            &amp;lt;ns0:PosNumber&amp;gt;10&amp;lt;/ns0:PosNumber&amp;gt;
            &amp;lt;ns0:Material&amp;gt;MAT-ABC&amp;lt;/ns0:Material&amp;gt;
            &amp;lt;ns0:Quantity unit="EA"&amp;gt;5&amp;lt;/ns0:Quantity&amp;gt;
        &amp;lt;/ns0:Item&amp;gt;
        &amp;lt;ns0:Item&amp;gt;
            &amp;lt;ns0:PosNumber&amp;gt;20&amp;lt;/ns0:PosNumber&amp;gt;
            &amp;lt;ns0:Material&amp;gt;MAT-XYZ&amp;lt;/ns0:Material&amp;gt;
            &amp;lt;ns0:Quantity unit="BOX"&amp;gt;2&amp;lt;/ns0:Quantity&amp;gt;
        &amp;lt;/ns0:Item&amp;gt;
        &amp;lt;ns0:Item&amp;gt;
            &amp;lt;ns0:PosNumber&amp;gt;30&amp;lt;/ns0:PosNumber&amp;gt;
            &amp;lt;ns0:Material&amp;gt;MAT-EMP&amp;lt;/ns0:Material&amp;gt;
            &amp;lt;ns0:Quantity unit="EA"/&amp;gt;
        &amp;lt;/ns0:Item&amp;gt;
    &amp;lt;/ns0:Items&amp;gt;
    &amp;lt;sf:Status statusCode="CONFIRMED"&amp;gt;Order Confirmed&amp;lt;/sf:Status&amp;gt;
    &amp;lt;ns0:References&amp;gt;
        &amp;lt;ns0:Reference referencetype="Customer"&amp;gt;CUST-001&amp;lt;/ns0:Reference&amp;gt;
        &amp;lt;ns0:Reference referencetype="Supplier"&amp;gt;SUP-002&amp;lt;/ns0:Reference&amp;gt;
    &amp;lt;/ns0:References&amp;gt;
&amp;lt;/ns0:PurchaseOrder&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId-582713088"&gt;Test Configuration&lt;/H5&gt;&lt;P&gt;The following headers/properties were configures in content modifier to test the script:&lt;/P&gt;&lt;TABLE border="1" width="100%"&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;&lt;STRONG&gt;Header/Property Key&lt;/STRONG&gt;&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;&lt;STRONG&gt;Value&lt;/STRONG&gt;&lt;/TD&gt;&lt;TD width="25%"&gt;&lt;STRONG&gt;Case&lt;/STRONG&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_StaticHeader&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;HelloWorld&lt;/TD&gt;&lt;TD width="25%"&gt;Static (non-XPath)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_Materials&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;Xpath_/PurchaseOrder/Items/Item/Material&lt;/TD&gt;&lt;TD width="25%"&gt;Node set (multiple elements)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_QtyUnit&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;Xpath_/PurchaseOrder/Items/Item/Quantity@unit&lt;/TD&gt;&lt;TD width="25%"&gt;Attribute extraction (all items)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_PONum&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;Xpath_/PurchaseOrder/Header/DocumentNumber&lt;/TD&gt;&lt;TD width="25%"&gt;Single value (element)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_StaticProperty&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;HelloWorld&lt;/TD&gt;&lt;TD width="25%"&gt;Static (non-XPath)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_Approval&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;Xpath_/PurchaseOrder/Header/ApprovalStatus@code&lt;/TD&gt;&lt;TD width="25%"&gt;Attribute value&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_PosNumbers&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;Xpath_/PurchaseOrder/Items/Item/PosNumber&lt;/TD&gt;&lt;TD width="25%"&gt;Repeated values&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_CustRef&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;Xpath_/PurchaseOrder/References/Reference@referencetype&lt;/TD&gt;&lt;TD width="25%"&gt;All attributes in reference nodes&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%"&gt;custH_ThirdQtyUnit&lt;/TD&gt;&lt;TD width="25%"&gt;Xpath_/PurchaseOrder/Items/Item[3]/Quantity@unit&lt;/TD&gt;&lt;TD width="25%"&gt;Specific index value&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%" height="30px"&gt;custH_EmptyNote&lt;/TD&gt;&lt;TD width="25%" height="30px"&gt;Xpath_/PurchaseOrder/Header/Note&lt;/TD&gt;&lt;TD width="25%"&gt;Empty element (does not create if value is blank)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%"&gt;custH_Status&lt;/TD&gt;&lt;TD width="25%"&gt;Xpath_/PurchaseOrder/Status&lt;/TD&gt;&lt;TD width="25%"&gt;Namespaced element (content)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="50%"&gt;custH_StatusAttr&lt;/TD&gt;&lt;TD width="25%"&gt;Xpath_/PurchaseOrder/Status@statusCode&lt;/TD&gt;&lt;TD width="25%"&gt;Namespaced attribute&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;H6 id="toc-hId-515282302"&gt;Properties&lt;/H6&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Daggolu_PremSai_2-1767181407484.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357420iE7DD4A0A35F06A7C/image-size/large?v=v2&amp;amp;px=999" role="button" title="Daggolu_PremSai_2-1767181407484.png" alt="Daggolu_PremSai_2-1767181407484.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H6 id="toc-hId--1023919750"&gt;Headers&lt;/H6&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Daggolu_PremSai_3-1767181454632.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357421i965547DC769429BB/image-size/large?v=v2&amp;amp;px=999" role="button" title="Daggolu_PremSai_3-1767181454632.png" alt="Daggolu_PremSai_3-1767181454632.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;After execution, the following custom header properties were visible in the Message Processing Log:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Daggolu_PremSai_4-1767181605329.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357422i5F7E0041F54E5CA8/image-size/large?v=v2&amp;amp;px=999" role="button" title="Daggolu_PremSai_4-1767181605329.png" alt="Daggolu_PremSai_4-1767181605329.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The following scenarios were also tested to ensure robustness:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Invalid Xpath -&lt;/STRONG&gt; Script continues without failure&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Missing XML Payload -&lt;/STRONG&gt; XPath extraction skipped&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Header/Property without custH_ prefix -&lt;/STRONG&gt; Ignored by script&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Static value without Xpath_ -&lt;/STRONG&gt; Logged directly&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Large Payload -&lt;/STRONG&gt; XML parsed only once&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;XXE content -&lt;/STRONG&gt; Blocked by secure XML parsing&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt; This groovy script only logs custom header properties for MPL search and passes the input payload unchanged to the output.&lt;/P&gt;&lt;H4 id="toc-hId--633627241"&gt;Conclusion:&amp;nbsp;&lt;/H4&gt;&lt;P&gt;This generic Groovy Script provides a simple, reusable, and configuration-driven way to log custom header properties for static values and dynamic XML Payloads, improving message processing log search and operation visibility in SAP CPI without impacting the message payload.&lt;/P&gt;&lt;P&gt;&lt;EM&gt;If anything is not working as expected or if you see scope for enhancement in the script, feel free to drop a comment.&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Happy Integrating!&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/generic-groovyscript-to-log-customheaderproperties-dynamically-for-xml/ba-p/14299923"/>
    <published>2025-12-31T13:25:18.585000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/rpt-1-document-ai-perplexity-in-ai-core-and-co-how-to-start-your-2026-right/ba-p/14301143</id>
    <title>RPT-1, Document AI, Perplexity in AI Core and co. - How to start your 2026 right with SAP's AI offer</title>
    <updated>2026-01-05T13:50:32.357000+01:00</updated>
    <author>
      <name>leoirudayam</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/5159</uri>
    </author>
    <content>&lt;P&gt;AI remains years after its new wave of generative AI more omnipresent then ever in our daily lives and there not a single day passes where we don't talk about new announcements, AI ethics discussion, if it is a bubble, what amount of money is spent and so on. For those of you, who follow me, will know, that I preach all day that the key to successful AI adoption is a useful case, the right technology and working with the people.&lt;/P&gt;&lt;P&gt;Writing prompt guidelines is just enablement for another side-by-side tool and does not gain efficiency rather joy trying out new things. Building an agent for a pretty deterministic process might be fun and easy to implement, but expensive and unpredictable in production. And so on... While many are talking about large mainly American software vendors with their "agentic foundation killing any SaaS", SAP's offerings might not be so familiar to you (besides Joule and BDC) - so that's my motivation to provide a sneak peak of exciting topics in 2026.&lt;/P&gt;&lt;H2 id="toc-hId-1787644479"&gt;Use Case: Onboarding of a new vehicle to the car fleet&lt;/H2&gt;&lt;P&gt;In order to make tools tangible and understand the bigger picture, we will sketch an AI-assisted process of vehicle onboarding. Previously following steps were mandatory:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Clerk typing vehicle data into system from the official vehicle document&lt;/LI&gt;&lt;LI&gt;Vehicle Master Data Engineer adding additional information based on public search as required drivers licence and consumption values&lt;/LI&gt;&lt;LI&gt;Finance expert to determine the tax amount to be paid for that year based on manual and local review&lt;/LI&gt;&lt;LI&gt;Field Service Manager classifying the vehicle for the right purposes to be used&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;As you can see, this process is slow, very labor-intense and quite possibly error-prone. We will now step-by-step automate this by leveraging different AI tools offered by SAP within the Business AI portfolio&amp;nbsp;&lt;span class="lia-unicode-emoji" title=":slightly_smiling_face:"&gt;🙂&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Our ultimate goal is creating a low-code-first, enterprise-ready automation to avoid manual research and typing into the system:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="RPT1-co.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358176i6D2CF2CBC02FCEEF/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="RPT1-co.png" alt="RPT1-co.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1720213693"&gt;Capturing of correct data: No more manual data entries from 2026 on&lt;/H3&gt;&lt;P&gt;If you have in 2026 tasks which require typing in data from one medium (e.g. mail or paper) into your system, it's time to automate this asap. In our scenario, we do have the vehicle document on paper, as this one:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Fahrzeugausweis.png" style="width: 604px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358065iB1B80AD18AAE94AE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Fahrzeugausweis.png" alt="Fahrzeugausweis.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Instead of typing this, we use the SAP Start app on our iPhone to take a picture and the deep integration to SAP Document AI to process this document (see more &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/new-in-sap-mobile-start-v2-4-integrate-and-launch-sap-document-ai-on-mobile/ba-p/14162770" target="_self"&gt;here&lt;/A&gt;). We then utilise Document AI with our custom schema to extract the results and preview these to our clerk for a double-check. Instead of building entire new UIs, workflows, etc. we can now do this directly in Document AI and get a nice view of the document on the left and extraction on the right:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2026-01-05 at 08.58.54.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358066i8E07B660AC78E347/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2026-01-05 at 08.58.54.png" alt="Screenshot 2026-01-05 at 08.58.54.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1523700188"&gt;Automating web searching: Leverage the perplexity integration in SAP AI Core&lt;/H3&gt;&lt;P&gt;SAP AI Core is the central hub for any access to MLOps activities and GenAI. With your BTP account you have access to a wide variety of partner models hosted on hyperscaler infrastructure and SAP's very own one with Mistral. If you didn't know this yet, that we have an orchestration workflow with prompt optimiser and much more, look up &lt;A href="https://me.sap.com/notes/3437766" target="_self" rel="noopener noreferrer"&gt;here&lt;/A&gt; which models we offer through your BTP contract.&lt;/P&gt;&lt;P&gt;Lately, we have added Perplexity as well - the AI-assisted search engine. Now we can connect publicly available data straight into our workflows, and it's huge, e.g.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;classify the purchased non-catalog item to the correct product group&lt;/LI&gt;&lt;LI&gt;fill gaps in master data based on product sheets&lt;/LI&gt;&lt;LI&gt;make research on sustainability KPIs of your supplier&lt;/LI&gt;&lt;LI&gt;conduct analysis for B2G processes&lt;/LI&gt;&lt;LI&gt;get market macro trends or real-time insights, e.g. supply chain disruptions&lt;/LI&gt;&lt;LI&gt;...&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;We will leverage the Perplexity integration to enhance our vehicle master data by the required drivers licence type for Swiss drivers licences and the energy consumption according to WLTP (an industry standard to measure consumption). We can model our prompt in SAP AI Launchpad and use the prompt registry to save it with placeholders:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2026-01-05 at 09.11.59.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358072i6197E155711894F6/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2026-01-05 at 09.11.59.png" alt="Screenshot 2026-01-05 at 09.11.59.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;And now it's so simple to add it to your pro-code app via CAP, to your low-code automation in SAP Build Process Automation or your integration flow in SAP Integration Suite:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2026-01-05 at 09.13.34.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358078i814679EFCE19B0F6/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2026-01-05 at 09.13.34.png" alt="Screenshot 2026-01-05 at 09.13.34.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;In this iFlow you can see how we leverage the new outbound channel feature in Document AI to enrich the extraction of the results straightaway with an iFlow exposed via API management (for more, stay tuned on upcoming webinars). If you have seen in the previous screenshot of Document AI - there is a tab with "Z - additional values" &lt;span class="lia-unicode-emoji" title=":winking_face:"&gt;😉&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1327186683"&gt;Do machine learning without data scientist: SAP's own foundational model RPT-1&lt;/H3&gt;&lt;P&gt;Now we have been onboarding our vehicle, but we must classify for which tasks we can use it. Luckily we have already quite a large fleet and some data. Ideal for machine learning (yes that's also part of AI and yes AI is not only GenAI).&lt;/P&gt;&lt;P&gt;Machine learning learns from historical data - as simple as this is, this requires a data set, model fitting, model validation and deployment. Not straightforward. With Gemini, Le Chat and co. we are used to just prompt AI models. What if, we could just put a snapshot of our table to a pre-trained model and let it classify by itself. Congrats - you are now a RPT-1 user:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2026-01-05 at 09.19.47.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358093i263FA479AAE7337D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2026-01-05 at 09.19.47.png" alt="Screenshot 2026-01-05 at 09.19.47.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;RPT-1 has its own &lt;A href="https://rpt.cloud.sap/dashboard" target="_self" rel="nofollow noopener noreferrer"&gt;playground&lt;/A&gt;, is accessible via &lt;A href="https://me.sap.com/notes/3437766" target="_self" rel="noopener noreferrer"&gt;AI Core&lt;/A&gt; and is phenomenal for transactional classification and prediction tasks. If you want to know more about its &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-members/sap-rpt-1-ready-to-use-ai-for-structured-data/ba-p/14264801" target="_self"&gt;integration&lt;/A&gt;, I'd recommend you this &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/what-is-sap-rpt-1-a-table-specialized-model-explained-through-the-original/ba-p/14277618" target="_self"&gt;gem&lt;/A&gt;. In my scenario, we use RPT-1 in our workflow in Build Process Automation to classify our vehicle correctly before we post it to our equipments in S/4HANA:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="leoirudayam_0-1767601356212.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358095i0FE66960A490081E/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="leoirudayam_0-1767601356212.png" alt="leoirudayam_0-1767601356212.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1130673178"&gt;Performing more agentic tasks: Joule Studio&lt;/H3&gt;&lt;P&gt;Previously you might have heard, you can use Joule Studio to make Joule truly yours. Joule Skills are intent-based automations made familiar to Joule to perform tasks conversational based. They can leverage workflows, pro-code and integrations via Integration Suite.&lt;/P&gt;&lt;P&gt;2025 Christmas gift, was the GA of the agent building capability in Joule where we can model agents. Agents are behaving non-deterministic and trying to mimic a human thought by providing it a scene and background - like an improvisation theatre. Now it's oftentimes pretty tricky to understand when an agent is really necessary. In our example we use an agent to determine how the vehicle tax are calculated for the Kanton St.Gallen, where we have registered our car and perform a calculation based on the perplexity web search (disclaimer - this can be modelled through a workflow in Build, it's just for the sake of simplicity):&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2026-01-05 at 09.28.53.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358096i942585BE83ABA36B/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2026-01-05 at 09.28.53.png" alt="Screenshot 2026-01-05 at 09.28.53.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-805076954"&gt;Why choose SAP for your AI journey?&lt;/H2&gt;&lt;P&gt;That's a good question and especially given there are soooo many tools on the market, why should you? It's simple: it's all about enterprise readiness. Behind every of this automation, there is only 5-10% AI, the remaining parts are security, audibility, traceability, transport management, scale resiliently in production, monitoring, low-code modelling etc. And for all of the remaining bits and pieces, SAP BTP has always been the best option from SAP Build to SAP Integration Suite. With SAP Document AI, we have a leader in document processing with inbound and outbound channels, and SAP AI Core a powerful AI orchestration service at low costs each.&lt;/P&gt;&lt;P&gt;While you can get other services cheaper somewhere, the TCO of this toolbox is imho astonishingly low. And for building this scenario from mobile device intake to equipment in S/4, I just needed a day to configure and build without pro-code needed. Happy AI-2026...&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/rpt-1-document-ai-perplexity-in-ai-core-and-co-how-to-start-your-2026-right/ba-p/14301143"/>
    <published>2026-01-05T13:50:32.357000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/unlock-value-with-sap-integration-suite-q4-2025-roadmap-insights/ba-p/14300799</id>
    <title>Unlock value with SAP Integration Suite: Q4 2025 roadmap insights</title>
    <updated>2026-01-05T17:00:00.021000+01:00</updated>
    <author>
      <name>JoseBastidas</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/3227</uri>
    </author>
    <content>&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Unlock value with SAP Integration Suite.png" style="width: 799px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357895i6FD9F37EF5DD7B2B/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Unlock value with SAP Integration Suite.png" alt="Unlock value with SAP Integration Suite.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;SAP Integration Suite is evolving fast—bringing new ways to simplify connectivity, accelerate processes, and unlock real business value.&lt;/P&gt;&lt;P&gt;In our upcoming webinar, “Unlock value with SAP Integration Suite: Q4 2025 roadmap insights,” we’ll walk you through:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The most important roadmap highlights from Q4 2025&lt;/LI&gt;&lt;LI&gt;What’s coming next in Q1 2026&lt;/LI&gt;&lt;LI&gt;A deep dive into selected innovations you can start planning for now&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;We’ll connect the roadmap to concrete partner scenarios, so you can translate capabilities into outcomes for your customers—faster projects, smoother landscapes, and more resilient integrations.&lt;/P&gt;&lt;P&gt;If you already have a foundational understanding of SAP Integration Suite, this is your chance to stay ahead of the curve and bring fresh, strategic guidance to your clients and internal stakeholders.&lt;/P&gt;&lt;P&gt;Register now and turn roadmap insights into tangible results.&amp;nbsp; &lt;A href="https://partneredge.sap.com/en/library/education/psd/2025/dec/e_oe_te_w_PSD_WEB_00012369.html" target="_blank" rel="noopener noreferrer"&gt;https://partneredge.sap.com/en/library/education/psd/2025/dec/e_oe_te_w_PSD_WEB_00012369.html&lt;/A&gt;&lt;/P&gt;&lt;P&gt;#SAP #SAPBTP #SAPIntegrationSuite #SAPPartner #SAPBTP #IntegrationStrategy #SAPWebinar&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/unlock-value-with-sap-integration-suite-q4-2025-roadmap-insights/ba-p/14300799"/>
    <published>2026-01-05T17:00:00.021000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-members/turning-sap-btp-integration-suite-as-a-core-erp-module-for-business-apis/ba-p/14302771</id>
    <title>Turning SAP BTP Integration Suite as a core ERP module for Business APIs &amp; Business AI</title>
    <updated>2026-01-07T12:19:25.663000+01:00</updated>
    <author>
      <name>gsimeone</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/12834</uri>
    </author>
    <content>&lt;H2 id="toc-hId-1767360596" id="toc-hId-1787680127"&gt;ERP modernization is not enough&lt;/H2&gt;&lt;P&gt;Over recent years, SAP clients have concentrated transformation efforts on&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;S/4HANA&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;to standardize processes, adopt cloud operating models (public, private, hybrid, sovereign), and enable continuous evolution. In parallel, the&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;integration backbone&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;must evolve from&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;SAP PI-PO&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;to&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;SAP Integration Suite&lt;/STRONG&gt;, ensuring your enterprise can operate&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;API‑first&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;and&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Event‑first&lt;/STRONG&gt;, at the speed and scale modern business demands.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Context:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;SAP PI/PO maintenance aligns with NetWeaver 7.5 lifecycles. But this decision point is not just about end‑of‑maintenance.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Imperative:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Integration modernization is foundational to agility, AI‑enabled processes, and resilient cloud operations across heterogeneous landscapes.&lt;/LI&gt;&lt;/UL&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-1570847091" id="toc-hId-1591166622"&gt;Beyond “middleware”: What SAP Integration Suite really is&lt;/H2&gt;&lt;P&gt;&lt;STRONG&gt;SAP Integration Suite&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;is not a one‑to‑one PI-PO replacement. It’s an&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;enterprise iPaaS&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;on&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;SAP BTP&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;that unifies:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Cloud Integration&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;for process and data integration&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;API Management&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;to design, secure, publish, and govern&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Business APIs&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Event Mesh&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;for event‑driven architectures (EDA)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Integration Advisor&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;and content packages for accelerated build&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Monitoring and observability&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;for end‑to‑end visibility across hybrid landscapes&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This shift, from “interfaces” to "&lt;STRONG&gt;Business APIs&lt;/STRONG&gt;", enables secure, discoverable, measurable, and even monetizable capabilities. It opens a path to&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Composable Architecture&lt;/STRONG&gt;, where SAP and non‑SAP modules can be assembled, re‑assembled, and composed to meet changing business needs.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key benefits:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Speed:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Faster delivery via reusable APIs, events, and prebuilt content&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Quality:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Strong governance, testing patterns, and observability&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Resilience:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Decoupling through asynchronous events and queues&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Scale &amp;amp; Security:&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Unified policy enforcement, rate limiting, and consistent identity/access models&lt;/LI&gt;&lt;/UL&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-1374333586" id="toc-hId-1394653117"&gt;From Monolith to Modular: Real‑Time, Composable Integration&lt;/H2&gt;&lt;P&gt;For&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Supply Chain&lt;/STRONG&gt;,&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Manufacturing&lt;/STRONG&gt;, and other data‑intensive domains, real‑time integration is essential. By slicing the SAP monolith into modular building blocks, organizations can distribute, elevate, and govern data across the enterprise and partners ecosystem.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Decoupled communication&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;allows plug‑and‑play assembly of new components and systems.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Event‑driven patterns&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;(domain events, queues, fan‑out) reduce coupling and improve reliability.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Business APIs + events&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;become the operating surface for cross‑system processes and innovation.&lt;/LI&gt;&lt;/UL&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-1177820081" id="toc-hId-1198139612"&gt;Preparing for Enterprise AI Agents: Event‑First, API‑First&lt;/H2&gt;&lt;P&gt;AI is rapidly moving beyond chat into&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;agents&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;that act, use tools, and orchestrate work across systems. SAP is rolling out agentic capabilities on&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;SAP BTP&lt;/STRONG&gt;, including&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Joule Studio&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;for Enterprise Agents, and secure access to foundation models via&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;SAP AI Core&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;and&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Generative AI Hub&lt;/STRONG&gt;. Capabilities and patterns emerging in the ecosystem include:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Model Context Protocol (MCP)&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;to simplify agent connections to tools and data&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Agent‑to‑Agent (A2A)&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;patterns/protocols for secure, autonomous collaboration&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;AI Adapter&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;patterns to link Integration Suite flows with GenAI tasks&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;In this operating model,&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Business APIs&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;and&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;events&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;let agents subscribe to near real‑time signals, trigger actions/approvals, and enrich processes,&amp;nbsp;&lt;STRONG&gt;reusing the IT estate and preserving existing investments&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;while modernizing how work gets done.&lt;/P&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-981306576" id="toc-hId-1001626107"&gt;A Practical PI-PO to Integration Suite Path&lt;/H2&gt;&lt;P&gt;&lt;STRONG&gt;Treat the transformation as a program&lt;/STRONG&gt;, not a lift‑and‑shift. A pragmatic path often includes:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Assessment &amp;amp; Prioritization&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Inventory interfaces (by business process, domain, criticality, volume, latency).&lt;/LI&gt;&lt;LI&gt;Identify patterns: synchronous APIs, asynchronous events, B2B/EDI, file, IDoc, RFC, REST/SOAP.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Target Architecture &amp;amp; Design Principles&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Define API‑first and event‑first standards (naming, versioning, domain event taxonomy).&lt;/LI&gt;&lt;LI&gt;Establish security models (identity, scopes, policies), observability, and SLAs.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Co‑Existence &amp;amp; Strangler Pattern&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Run PI-PO and Integration Suite side by side.&lt;/LI&gt;&lt;LI&gt;Gradually redirect traffic to new APIs/events, decommission legacy interfaces incrementally.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Enablement &amp;amp; Guardrails&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Cutover &amp;amp; Stabilization&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Decommissioning &amp;amp; Continuous Evolution&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Retire redundant PI-PO objects; codify lessons learned.&lt;/LI&gt;&lt;LI&gt;Expand event domains; evolve API products; onboard partners faster.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-784793071" id="toc-hId-805112602"&gt;Anti‑Patterns to avoid&lt;/H2&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Lift‑and‑shift&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;without rethinking business APIs and event domains&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Point‑to‑point proliferation&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;that undermines modularity and reuse&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;No product ownership&lt;/STRONG&gt;, leaving integrations to drift without roadmaps or SLAs&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Limited observability&lt;/STRONG&gt;, making troubleshooting slow and costly&lt;/LI&gt;&lt;/UL&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-588279566" id="toc-hId-608599097"&gt;The takeaway&lt;/H2&gt;&lt;P&gt;The&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;ECC to S/4HANA&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;journey modernizes the core.&lt;BR /&gt;The&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;PI-PO to Integration Suite&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;journey&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;operationalizes Business APIs and events&lt;/STRONG&gt;, enabling composable architectures, resilient integrations, and&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;AI‑ready&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;operating models.&lt;/P&gt;&lt;P&gt;Organizations that treat integration as a&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;business platform&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;- rather than a technical migration - will gain a durable advantage in agility, innovation, and speed to value.&lt;/P&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-391766061" id="toc-hId-412085592"&gt;Call to Action&lt;/H2&gt;&lt;P&gt;Are you aligning the&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;PI-PO to Integration Suite&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;transformation with your&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Cloud ERP&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;journey? Start with a portfolio assessment, define API‑first and event‑first standards, and establish a co‑existence plan that drives measurable business outcomes. The sooner you begin, the faster your enterprise will be ready for&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;event‑driven&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;processes and&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;AI agents&lt;/STRONG&gt;.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-members/turning-sap-btp-integration-suite-as-a-core-erp-module-for-business-apis/ba-p/14302771"/>
    <published>2026-01-07T12:19:25.663000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/sap-cloud-integration-cpi-how-to-return-custom-error-messages-to-sender/ba-p/14300193</id>
    <title>SAP Cloud Integration/CPI: How to Return Custom Error Messages to Sender - available options</title>
    <updated>2026-01-07T16:05:27.740000+01:00</updated>
    <author>
      <name>MateuszPiotrowski</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1161523</uri>
    </author>
    <content>&lt;P&gt;Dear Community,&lt;/P&gt;&lt;P&gt;I often receive questions about how to return meaningful error responses to senders in synchronous interfaces.&lt;/P&gt;&lt;P&gt;Although there are some posts on this topic, there's no definitive tutorial explaining what's possible and what isn't.&lt;/P&gt;&lt;P&gt;For some of you, this will be an aha moment; for others, some aspects may be familiar. However, even experienced experts should find this a useful synthesized summary.&lt;/P&gt;&lt;P&gt;This is a brief showcase of the options we have as integration architects and developers.&lt;/P&gt;&lt;H3 id="toc-hId-1916697562"&gt;&amp;nbsp;&lt;/H3&gt;&lt;H3 id="toc-hId-1720184057"&gt;Problem with ERROR END EVENT&lt;/H3&gt;&lt;P&gt;The main point is that it doesn't matter whether an iFlow finishes with an ERROR END EVENT or ESCALATION END EVENT (both unsuccessful end steps). In such cases, the HTTP status of the message will be 500, and a generic error message will be returned to the sender. The standard status in the CI monitor will be set to FAILED/ESCALATED.&lt;/P&gt;&lt;P&gt;You can try to set your own message body and expect to see it but... this will not happen (although it is quite intuitive approach, right?)&lt;/P&gt;&lt;P&gt;Message returned to Sender:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_14-1767287035871.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357520i15B9FBEC38B5A1EB/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_14-1767287035871.png" alt="MateuszPiotrowski_14-1767287035871.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Optionally, you can return error details (the full exception visible also in the CI monitor) to the sender by checking "Return Exception to Sender" but we're still in not expected situation: a standard error message that's often unclear and doesn't provide enough information to resolve the root cause of the problem.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_15-1767287054039.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357521i7749E351F2B375A7/image-size/medium?v=v2&amp;amp;px=400" role="button" title="MateuszPiotrowski_15-1767287054039.png" alt="MateuszPiotrowski_15-1767287054039.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Remark: Additionally, sometimes returning the raw exception isn't recommended from a security perspective, as we don't want to expose internal logic to the external world.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Bottom line:&lt;/STRONG&gt; By finishing an iFlow with an ERROR END/ESCALATION END step, you cannot set a custom error response message and/or custom HTTP status code using Content Modifier and/or a Groovy script. It will always be 500 with a standard error message.&lt;/P&gt;&lt;P&gt;So the main question is: how do we accomplish our goal?&lt;/P&gt;&lt;H3 id="toc-hId-1523670552"&gt;&amp;nbsp;&lt;/H3&gt;&lt;H3 id="toc-hId-1327157047"&gt;Resolution (although still partial) = End Message step&lt;/H3&gt;&lt;P&gt;Finish your iFlow with an END MESSAGE event (in the exception subprocess). Only if you finish with a "successful" end step can you set a custom error response and/or custom HTTP status code.&lt;/P&gt;&lt;P&gt;See the simple iFlow example below.&lt;/P&gt;&lt;P&gt;Remark: this iflow does not have sense as there is no logic inside - created only for purpose of this exercise.&lt;/P&gt;&lt;P&gt;In step: "Check if Basic Auth" - I am checking Authorization header, whether contains prefix "Basic". If yes - it means that Sender try to authenticate via Basic authentication and not expected OAuth client credentials. I do not want to allow this to happen although possible if no circumvent solution applied.&lt;/P&gt;&lt;P&gt;Btw. better idea is to secure iflow by APIM if used already (other features are required like throttling or IP whitelisting). But this is topic for different blog &lt;span class="lia-unicode-emoji" title=":slightly_smiling_face:"&gt;🙂&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_16-1767287157093.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357522i52A0E6D46F10A83E/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_16-1767287157093.png" alt="MateuszPiotrowski_16-1767287157093.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;In Exception Subprocess, I'm using a standard Content Modifier step to return what I need to the sender, but you can also do this in a Groovy script.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_17-1767287178135.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357523iB9E212B85F6AC3DB/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_17-1767287178135.png" alt="MateuszPiotrowski_17-1767287178135.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Standard Header: CamelHttpResponseCode = 401&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_18-1767287200695.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357524i587F4B6015A4DE2D/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_18-1767287200695.png" alt="MateuszPiotrowski_18-1767287200695.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Outcome:&lt;/STRONG&gt; iFlow finished with status COMPLETED with custom information returned to sender.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_19-1767287221550.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357525i10FE6739FBD68952/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_19-1767287221550.png" alt="MateuszPiotrowski_19-1767287221550.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_20-1767287233145.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357526i0C991AB79E3B2214/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_20-1767287233145.png" alt="MateuszPiotrowski_20-1767287233145.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;OK... we've delivered what we wanted: our sender is probably happier now, but the operations team in CI monitoring/CALM won't know that this message actually ended with an error and wasn't truly successful, although the status being set to COMPLETED.&lt;/P&gt;&lt;H3 id="toc-hId-1130643542"&gt;&amp;nbsp;&lt;/H3&gt;&lt;H3 id="toc-hId-934130037"&gt;Resolution = End Message step + custom status&lt;/H3&gt;&lt;P&gt;What we still need is to somehow mark such messages.&lt;/P&gt;&lt;P&gt;A few options:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Set a custom header in groovy script, e.g. MessageStatus=BasicAuthFailed&lt;/LI&gt;&lt;LI&gt;Set a custom status (recommended) by utilizing the standard property SAP_MessageProcessingLogCustomStatus&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_21-1767287258330.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357527iA3F0AFC396BF97A1/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_21-1767287258330.png" alt="MateuszPiotrowski_21-1767287258330.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Outcome:&lt;/STRONG&gt; iFlow finished with main status COMPLETED ... but also with our custom status&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_22-1767287272661.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357528i0554ADF8FE89583A/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_22-1767287272661.png" alt="MateuszPiotrowski_22-1767287272661.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The ability to filter makes this truly practical:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_23-1767287306780.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357529iC33FDFEFA78AE33D/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_23-1767287306780.png" alt="MateuszPiotrowski_23-1767287306780.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Now, most of you are thinking: OK, this is good enough, but you still need to remember to filter by custom status, and a message visible as COMPLETED isn't really completed, but failed.&lt;/P&gt;&lt;P&gt;Can we leave our iFlow with status FAILED?&lt;/P&gt;&lt;P&gt;Short answer: &lt;STRONG&gt;No.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;SAP is not supporting this: &lt;A href="https://me.sap.com/notes/0003316452" target="_blank" rel="noopener noreferrer"&gt;https://me.sap.com/notes/0003316452&lt;/A&gt;&lt;/P&gt;&lt;P&gt;Quote: "&lt;EM&gt;This is not currently possible in SAP CI. SAP has introduced SAP Influence to allow customers to provide feedback and requirements.&lt;/EM&gt;"&lt;/P&gt;&lt;P&gt;I haven't found an influence idea for this yet as well, so this will not happen in near future.&lt;/P&gt;&lt;P&gt;Is this over? Are all options explained?&lt;/P&gt;&lt;H3 id="toc-hId-737616532"&gt;&amp;nbsp;&lt;/H3&gt;&lt;H3 id="toc-hId-541103027"&gt;Intermediary solution&lt;/H3&gt;&lt;P&gt;Actually, there's one more option that can be helpful if leaving the iFlow with status FAILED is equally important as setting a custom error response.&lt;/P&gt;&lt;P&gt;As is often the case, if standard features don't deliver what you want, you can rely on scripting &lt;span class="lia-unicode-emoji" title=":slightly_smiling_face:"&gt;🙂&lt;/span&gt;&lt;/P&gt;&lt;P&gt;It's enough to add this single line to your Groovy script to set a response message for your sender:&lt;/P&gt;&lt;P&gt;&lt;CODE&gt;throw new Exception("Basic Authentication now allowed")&lt;/CODE&gt;&lt;/P&gt;&lt;P&gt;And set this setting &lt;STRONG&gt;(important)&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_24-1767287354907.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357530i012B494EFFA2E00D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="MateuszPiotrowski_24-1767287354907.png" alt="MateuszPiotrowski_24-1767287354907.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;This is what's visible to the sender:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_25-1767287363547.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357531i95D717293739D11E/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_25-1767287363547.png" alt="MateuszPiotrowski_25-1767287363547.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;and in CI monitor:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="MateuszPiotrowski_26-1767287378632.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/357532iB9579394DA8EEDAA/image-size/large?v=v2&amp;amp;px=999" role="button" title="MateuszPiotrowski_26-1767287378632.png" alt="MateuszPiotrowski_26-1767287378632.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Outcome:&lt;/STRONG&gt; iFlow with status FAILED, custom response (although somewhat messy), HTTP status code returned... still 500.&lt;/P&gt;&lt;P&gt;Yes, as in real life, you often can't have everything &lt;span class="lia-unicode-emoji" title=":disappointed_face:"&gt;😞&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Remark: if you use already API management, it can be good idea to utilize it: refine final response message and set proper HTTP response status code in API policy.&lt;/P&gt;&lt;H3 id="toc-hId-344589522"&gt;&amp;nbsp;&lt;/H3&gt;&lt;H3 id="toc-hId-148076017"&gt;CONCLUSION&lt;/H3&gt;&lt;P&gt;Options to return a custom response:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Leave iFlow with END MESSAGE and:&lt;/STRONG&gt;&lt;UL&gt;&lt;LI&gt;Set response message in body&lt;/LI&gt;&lt;LI&gt;Set standard header CamelHttpResponseCode&lt;/LI&gt;&lt;LI&gt;Set custom status in standard property: SAP_MessageProcessingLogCustomStatus&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;DRAWBACK: iFlow has still main status COMPLETED&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Throw exception in Groovy script:&lt;/STRONG&gt; &lt;CODE&gt;throw new Exception("error message here")&lt;/CODE&gt;&lt;P&gt;DRAWBACK: HTTP status code returned to sender = 500 &amp;amp; response isn't clean (our text + framework text)&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Please share any comments, improvements or alternative approaches - I'm always eager to learn!&lt;/P&gt;&lt;P&gt;Best regards,&lt;BR /&gt;Mateusz&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/sap-cloud-integration-cpi-how-to-return-custom-error-messages-to-sender/ba-p/14300193"/>
    <published>2026-01-07T16:05:27.740000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/automating-amazon-sp-api-data-extraction-in-btp-integration-suite/ba-p/14301023</id>
    <title>Automating Amazon SP-API Data Extraction in BTP Integration Suite</title>
    <updated>2026-01-07T16:07:00.518000+01:00</updated>
    <author>
      <name>SolnArch_Satish</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1528</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1658560737"&gt;Part 1: The Problem Statement&lt;/H1&gt;&lt;P&gt;When integrating with the Amazon Selling Partner API (SP-API), developers often run into a significant roadblock: Data Volume vs API Limits.&lt;/P&gt;&lt;P&gt;Imagine you need to sync thousands of financial transactions for a month-end reconciliation. Amazon doesn’t provide this data in one massive payload; instead, it serves data in "pages". If your integration only makes a single call, you are likely leaving 90% of your data behind.&lt;/P&gt;&lt;P&gt;Furthermore, the SP-API requires a complex dance of OAuth2 token exchange and header-based authentication. The "problem" is two-fold:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Authentication:&lt;/STRONG&gt; How do we dynamically retrieve and inject the “&lt;STRONG&gt;&lt;EM&gt;x-amz-access-token&lt;/EM&gt;&lt;/STRONG&gt;” into every call?&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Completeness:&lt;/STRONG&gt; How do we design a "smart" loop in Integration Suite that recognizes when a "&lt;STRONG&gt;&lt;EM&gt;NextToken&lt;/EM&gt;&lt;/STRONG&gt;" exists and continues fetching data until the very last record is secured?&lt;/P&gt;&lt;H1 id="toc-hId-1462047232"&gt;Part 2: Deep Dive&lt;/H1&gt;&lt;P&gt;In the Integration Suite, XPaths are the "surgical tools" used to extract specific data from an XML payload.&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Authentication and Token Management&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;The integration begins by preparing the credentials required to request an access token from Amazon's identity service.&lt;/P&gt;&lt;P&gt;&lt;U&gt;Initial Configuration&lt;/U&gt; &lt;STRONG&gt;&lt;EM&gt;(&lt;/EM&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;EM&gt;set_getToken_Properties)&lt;/EM&gt;&lt;/STRONG&gt;: The flow sets the necessary OAuth2 parameters in the message body, including &lt;STRONG&gt;&lt;EM&gt;grant_type&lt;/EM&gt;&lt;/STRONG&gt;, &lt;STRONG&gt;&lt;EM&gt;refresh_token&lt;/EM&gt;&lt;/STRONG&gt;, &lt;STRONG&gt;&lt;EM&gt;client_id&lt;/EM&gt;&lt;/STRONG&gt;, and &lt;STRONG&gt;&lt;EM&gt;client_secret&lt;/EM&gt;&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_0-1767570573379.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358000i0A15DBA4920CE0F4/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_0-1767570573379.png" alt="vsp4btp_0-1767570573379.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;U&gt;Token Request&lt;/U&gt; &lt;STRONG&gt;&lt;EM&gt;(&lt;/EM&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;EM&gt;get_Token)&lt;/EM&gt;&lt;/STRONG&gt;: An HTTP POST call is made to: &lt;A href="https://api.amazon.com/auth/o2/token" target="_blank" rel="noopener nofollow noreferrer"&gt;&lt;EM&gt;https://api.amazon.com/auth/o2/token&lt;/EM&gt;&lt;/A&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_1-1767570605260.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358001i9C3E20B94160140D/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_1-1767570605260.png" alt="vsp4btp_1-1767570605260.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Extracting the Access Token&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;After the &lt;STRONG&gt;&lt;EM&gt;get_Token&lt;/EM&gt;&lt;/STRONG&gt; call, the JSON response is converted to XML. To use this token in subsequent calls, we use a Content Modifier.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;XPath:&lt;/STRONG&gt; /root/access_token (&lt;STRONG&gt;Source Type:&lt;/STRONG&gt; XPath and &lt;STRONG&gt;Data Type:&lt;/STRONG&gt; java.lang.String)&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Purpose:&lt;/STRONG&gt; This extracts the bearer token string. By storing this in a &lt;STRONG&gt;Message Header&lt;/STRONG&gt; (specifically named &lt;STRONG&gt;&lt;EM&gt;x-amz-access-token&lt;/EM&gt;&lt;/STRONG&gt;), IS automatically includes it in the HTTP headers of the next request to Amazon.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_2-1767570648998.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358002i5F18AE64FF1593AA/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_2-1767570648998.png" alt="vsp4btp_2-1767570648998.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Initial Data Fetch (The "First Page")&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Before entering a loop, the system attempts to fetch the first batch of financial events.&lt;/P&gt;&lt;P&gt;&lt;U&gt;Request Header Configuration&lt;/U&gt;: The &lt;STRONG&gt;&lt;EM&gt;x-amz-access-token&lt;/EM&gt;&lt;/STRONG&gt; is passed into the allowed headers so it can be sent in the outbound request.&lt;/P&gt;&lt;P&gt;&lt;U&gt;First API Call&lt;/U&gt; &lt;STRONG&gt;&lt;EM&gt;(&lt;/EM&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;EM&gt;get_FI_Events)&lt;/EM&gt;&lt;/STRONG&gt;: An HTTP GET request is sent to the Financial Events endpoint. The URL includes parameters like &lt;STRONG&gt;&lt;EM&gt;PostedAfter&lt;/EM&gt;&lt;/STRONG&gt; and &lt;STRONG&gt;&lt;EM&gt;PostedBefore&lt;/EM&gt;&lt;/STRONG&gt; to define the date range for the data sync.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_3-1767570708237.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358003i1539799938D15B4D/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_3-1767570708237.png" alt="vsp4btp_3-1767570708237.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_4-1767570728030.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358004iAC8093A7613AC171/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_4-1767570728030.png" alt="vsp4btp_4-1767570728030.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Capturing the Pagination Link (NextToken)&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;This is the most critical step for the loop. &lt;U&gt;When you call the Financial Events API, the response contains a field that tells you if more data is available&lt;/U&gt;.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;XPath:&lt;/STRONG&gt; /FIevents/payload/NextToken (&lt;STRONG&gt;Source Type:&lt;/STRONG&gt; XPath and &lt;STRONG&gt;Data Type:&lt;/STRONG&gt; java.lang.String)&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step:&lt;/STRONG&gt; set_NextToken (Content Modifier)&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Behavior:&lt;/STRONG&gt; * If a next page exists, this XPath retrieves a long alphanumeric string.&lt;/P&gt;&lt;P&gt;If no more pages exist, the field is empty (null).&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_5-1767570760042.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358005iC2A0AACE02022E69/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_5-1767570760042.png" alt="vsp4btp_5-1767570760042.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Implementing the Pagination Loop&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;The “Router” and “Looping Process Call” steps do not use an XPath directly, but rather an &lt;STRONG&gt;Exchange Property&lt;/STRONG&gt; derived from the XPath above.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Expression Type:&lt;/STRONG&gt; Non-XML&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Condition:&lt;/STRONG&gt; ${property.P_NextToken} != ''&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Logic:&lt;/STRONG&gt; As long as the &lt;STRONG&gt;&lt;EM&gt;P_NextToken&lt;/EM&gt;&lt;/STRONG&gt; property is not empty, the Router will direct the message back into the get FI Events in local process loop. Inside that process, the HTTP query is dynamically updated:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Query:&lt;/STRONG&gt; ...&amp;amp;NextToken=${property.P_NextToken}&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_6-1767570794398.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358006i010B65B82C442CAC/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_6-1767570794398.png" alt="vsp4btp_6-1767570794398.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_7-1767570809130.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358007i26AD2315770ADC35/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_7-1767570809130.png" alt="vsp4btp_7-1767570809130.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vsp4btp_8-1767570839816.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358009i9B0567D38EE5765B/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="vsp4btp_8-1767570839816.png" alt="vsp4btp_8-1767570839816.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H1 id="toc-hId-1265533727"&gt;Part 3: Summary Table&lt;/H1&gt;&lt;TABLE width="573"&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="86"&gt;&lt;P&gt;&lt;STRONG&gt;Step&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="95"&gt;&lt;P&gt;&lt;STRONG&gt;Component&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="279"&gt;&lt;P&gt;&lt;STRONG&gt;XPath / Expression&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="113"&gt;&lt;P&gt;&lt;STRONG&gt;Target Storage&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="86"&gt;&lt;P&gt;Auth&lt;/P&gt;&lt;/TD&gt;&lt;TD width="95"&gt;&lt;P&gt;Content Modifier&lt;/P&gt;&lt;/TD&gt;&lt;TD width="279"&gt;&lt;P&gt;/root/access_token&lt;/P&gt;&lt;/TD&gt;&lt;TD width="113"&gt;&lt;P&gt;Header: x-amz-access-token&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="86"&gt;&lt;P&gt;Pagination&lt;/P&gt;&lt;/TD&gt;&lt;TD width="95"&gt;&lt;P&gt;Content Modifier&lt;/P&gt;&lt;/TD&gt;&lt;TD width="279"&gt;&lt;P&gt;/FIevents/payload/NextToken&lt;/P&gt;&lt;/TD&gt;&lt;TD width="113"&gt;&lt;P&gt;Property: P_NextToken&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="86"&gt;&lt;P&gt;Routing&lt;/P&gt;&lt;/TD&gt;&lt;TD width="95"&gt;&lt;P&gt;Router&lt;/P&gt;&lt;/TD&gt;&lt;TD width="279"&gt;&lt;P&gt;${property.P_NextToken} != ''&lt;/P&gt;&lt;/TD&gt;&lt;TD width="113"&gt;&lt;P&gt;Route to "Loop_Route"&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="86"&gt;&lt;P&gt;Iteration&lt;/P&gt;&lt;/TD&gt;&lt;TD width="95"&gt;&lt;P&gt;HTTP Request&lt;/P&gt;&lt;/TD&gt;&lt;TD width="279"&gt;&lt;P&gt;...&amp;amp;NextToken=${property.P_NextToken}&lt;/P&gt;&lt;/TD&gt;&lt;TD width="113"&gt;&lt;P&gt;Outbound Query Parameter&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;H1 id="toc-hId-1069020222"&gt;Part 4: Error Handling &amp;amp; Resilience&lt;/H1&gt;&lt;P&gt;In a looping integration, a single failure can either stall your process or create an infinite loop. To make this production-ready, consider these layers of defense:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;The "Circuit Breaker" (Max Iterations):&lt;/STRONG&gt; As seen in the configuration, setting the &lt;STRONG&gt;Max. Numbers of Iterations&lt;/STRONG&gt; (e.g., 200) is your insurance policy. If the API somehow enters a state where it returns the same &lt;STRONG&gt;&lt;EM&gt;NextToken&lt;/EM&gt;&lt;/STRONG&gt; repeatedly, this setting prevents your IS tenant from crashing or hitting memory limits.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;The "Pause" Script:&lt;/STRONG&gt; In the looping sub-process, there is a Pause Script step. This is a best practice to avoid &lt;STRONG&gt;API Throttling&lt;/STRONG&gt;. Amazon SP-API has strict "leaky bucket" quotas. Adding a small Groovy script (e.g., Thread.sleep(1000)) helps stay within the allowed request rate.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Exception Sub-Processes:&lt;/STRONG&gt; If the &lt;STRONG&gt;&lt;EM&gt;get_FI_Events&lt;/EM&gt;&lt;/STRONG&gt; call fails (401 Unauthorized or 500 Internal Server Error), the loop should be caught by an &lt;STRONG&gt;Exception Sub-Process&lt;/STRONG&gt;.&lt;/P&gt;&lt;H1 id="toc-hId-872506717"&gt;Part 5: Conclusion &amp;amp; Best Practices&lt;/H1&gt;&lt;P&gt;Automating the extraction of Amazon Financial Events within SAP BTP Integration Suite is more than just a "mapping" exercise; it is an exercise in &lt;STRONG&gt;state management&lt;/STRONG&gt;. By using a combination of XPaths to capture session state (tokens) and Loop Routers to manage flow state, you create a robust, hands-off synchronization engine.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Header Cleaning:&lt;/STRONG&gt; After the &lt;STRONG&gt;&lt;EM&gt;get_Token&lt;/EM&gt;&lt;/STRONG&gt; step, ensure you are only passing the necessary headers to Amazon. Use the "Allowed Headers" field in the HTTP adapter to prevent internal SAP headers from being sent to the external API.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Externalize Parameters:&lt;/STRONG&gt; Values like the &lt;STRONG&gt;&lt;EM&gt;client_id&lt;/EM&gt;&lt;/STRONG&gt;, &lt;STRONG&gt;&lt;EM&gt;refresh_token&lt;/EM&gt;&lt;/STRONG&gt;, and even the &lt;STRONG&gt;&lt;EM&gt;MaxResultsPerPage&lt;/EM&gt;&lt;/STRONG&gt; should be &lt;STRONG&gt;Externalized&lt;/STRONG&gt;. This allows your operations team to update credentials or tuning parameters without redeploying the entire integration package.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Traceability:&lt;/STRONG&gt; Use the "Custom Header" logging feature in IS to log the &lt;STRONG&gt;&lt;EM&gt;P_NextToken&lt;/EM&gt;&lt;/STRONG&gt; value. If a specific page of data is missing or corrupted, you can track exactly which API call handled that data.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/automating-amazon-sp-api-data-extraction-in-btp-integration-suite/ba-p/14301023"/>
    <published>2026-01-07T16:07:00.518000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/integration-blog-posts/part-1-understanding-define-identifiers-to-search-in-message-processing/ba-p/14302337</id>
    <title>Part 1 - Understanding ‘Define Identifiers To Search In Message Processing Logs’</title>
    <updated>2026-01-07T16:40:08.746000+01:00</updated>
    <author>
      <name>nick_bagalay</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/724382</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;SAP integration Suite provides a wonderful tab in your integration flow titled 'Design Guidelines'. These guidelines ensure that your iFlow conforms to standards and peak efficiency (and consistency). When you run the design guidelines and if a section becomes 'Non-Compliant', many of the areas will provide a nice tooltip explaining the reason for the issue. However, some of them are too vague and leaves my developers wondering what to do next. These article series will identify a few that needed a little more in-depth explanation to help make it Compliant.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="nick_bagalay_2-1767721066568.png" style="width: 649px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358708i3A28D60E86E22B47/image-dimensions/649x302/is-moderation-mode/true?v=v2" width="649" height="302" role="button" title="nick_bagalay_2-1767721066568.png" alt="nick_bagalay_2-1767721066568.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Throughout the series we'll discuss many of the available options in the design guidelines but today the focus is on 'Define Identifiers To Search In Message Processing Logs'. To meet this requirement, you will need to add four key headers in a content modifier as&amp;nbsp;&lt;STRONG&gt;early as possible&lt;/STRONG&gt; in your integration flow (more details to come).&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="nick_bagalay_0-1767723900092.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358715i4379A09F13B4D214/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="nick_bagalay_0-1767723900092.png" alt="nick_bagalay_0-1767723900092.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;To satisfy this requirement, the following four headers are needed to be added to your integration flow:&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;SAP_Sender&amp;nbsp; - This identifies the “start” of your integration&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;SAP_Receiver - This identifies the “end” of your integration. Say you are sending from Company A to Company B, in this context Company B is the final receiver&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;SAP_MessageType - The identifier of the type of message this is. Examples include: Create Purchase Order, Delete Sales Order etc.&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;SAP_ApplicationID - This is the unique ID of your flow. For example: a purchase order number, sales order etc.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H3 id="toc-hId-1916758884"&gt;&lt;SPAN&gt;Understanding the Implementation&lt;/SPAN&gt;&lt;/H3&gt;&lt;P&gt;&lt;SPAN&gt;Ok so you added this new header to your integration. You are probably thinking “I have 15+ iFlows in this single process, *sigh* I am going to have to add to add to all of them”. If you were thinking that then let me be the first to say “false!” I bet that made you slightly happy? So then how does it work?&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="nick_bagalay_3-1767721135785.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/358710i7526B12E485728F2/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="nick_bagalay_3-1767721135785.png" alt="nick_bagalay_3-1767721135785.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Let's look at the above example. In this organization, this company has a Sales Order Creation that has an asynchronous process in the middle. The headers we added in the last section, what iFlow do you think they need to be added in? iFlow A? Why? If you said iFlow A and C, you would be correct (you technically would be also correct with A, B and C). Lets understand why.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Recall that when I mentioned to implement these headers I mentioned that it should be as &lt;/SPAN&gt;&lt;SPAN&gt;early&lt;/SPAN&gt;&lt;SPAN&gt; as possible? By setting the headers as the first thing in your iFlow A it &lt;/SPAN&gt;&lt;SPAN&gt;trickles down to iFlow B!&lt;/SPAN&gt;&lt;SPAN&gt; Pretty cool, right!? Unfortunately, since we have an async call to an OData service, iFlow A and B are part of one correlation. This means when it starts back in iFlow C, you need to reset the headers.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Now if you are the type of person who did set these headers in iFlow A and C, do you think the Design Guidelines will be satisfied in iFlow B? If you said no, you sadly would be correct. The design guidelines does allow the developer to “Skip Status” and asks you provide a reason. If you are confident beyond a double that iFlow B will only ever be called by iFlow A then we can be assured that the headers will carry on. If not, you should set the headers in iFlow B to be safe.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;If you found this article helpful, please like and comment. Thanks for reading!&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/integration-blog-posts/part-1-understanding-define-identifiers-to-search-in-message-processing/ba-p/14302337"/>
    <published>2026-01-07T16:40:08.746000+01:00</published>
  </entry>
</feed>
