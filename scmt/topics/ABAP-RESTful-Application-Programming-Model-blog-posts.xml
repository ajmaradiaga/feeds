<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>https://raw.githubusercontent.com/ajmaradiaga/feeds/main/scmt/topics/ABAP-RESTful-Application-Programming-Model-blog-posts.xml</id>
  <title>SAP Community - ABAP RESTful Application Programming Model</title>
  <updated>2025-12-27T18:00:05.261006+00:00</updated>
  <link href="https://community.sap.com/t5/c-khhcw49343/ABAP RESTful Application Programming Model/pd-p/7e44126e-7b27-471d-a379-df205a12b1ff" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator>
  <subtitle>ABAP RESTful Application Programming Model blog posts in SAP Community</subtitle>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-call-a-rap-action-from-your-controller-extension/ba-p/14286229</id>
    <title>How to call a RAP action from your Controller Extension</title>
    <updated>2025-12-08T18:24:46.170000+01:00</updated>
    <author>
      <name>PranayGaroo</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2116915</uri>
    </author>
    <content>&lt;P&gt;&lt;FONT size="4"&gt;Traditionally to improve performance of a Fiori application the roundtrips to the backend (OData Service) should be minimal. To achieve this, we can push some processing logic to the frontend, This Blog explores one of the option to do that.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;RAP Action&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;One of RAP’s powerful capabilities is the concept of &lt;EM&gt;actions&lt;/EM&gt; — custom operations tied to a business object that let you implement domain-specific logic in ABAP using the behaviour implementation class (e.g. “approve order,” “mass update statuses,” “trigger workflow,” etc.) rather than relying purely on standard CRUD behaviour.&lt;/P&gt;&lt;P&gt;When you want to expose such actions in the UI of your RAP based Fiori App, there are two ways you can do it,&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Using OData Annotations&lt;/LI&gt;&lt;LI&gt;Using Controller extensions&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This blog covers a basic scenario of adding a custom button on the list page.&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;Using OData Annotations&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;Using OData annotation is the easier way out and suggested by SAP. SAP don’t want ABAPers to think much about the front end, that’s where the Fiori elements come in which is standard UI5 library to deploy Fiori apps, using which any ABAPer can create a Fiori app without have any knowledge about UI5.&lt;/P&gt;&lt;P&gt;Fiori elements generate the Fiori app in runtime using&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;OData Annotations&lt;/LI&gt;&lt;LI&gt;OData Service&lt;/LI&gt;&lt;LI&gt;Standard Fiori Floorplans.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;So, adding your annotations in the below manner to your CDS will add the custom action on your Fiori App.&lt;/P&gt;&lt;P&gt;For sake of simplicity, I am using a static action&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_0-1765214156877.png" style="width: 439px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349831i9D500EAA93394314/image-dimensions/439x264?v=v2" width="439" height="264" role="button" title="PranayGaroo_0-1765214156877.png" alt="PranayGaroo_0-1765214156877.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Below is the metadata extension file containing the UI annotations&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_1-1765214156887.png" style="width: 432px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349833i8B5F3D686479049F/image-dimensions/432x383?v=v2" width="432" height="383" role="button" title="PranayGaroo_1-1765214156887.png" alt="PranayGaroo_1-1765214156887.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Result,&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_2-1765214156893.png" style="width: 457px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349832iDB4BC7C7D3DDDB52/image-dimensions/457x191?v=v2" width="457" height="191" role="button" title="PranayGaroo_2-1765214156893.png" alt="PranayGaroo_2-1765214156893.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;You can write the business logic for this action in the behaviour implementation class&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_3-1765214156901.png" style="width: 484px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349836iE4408C0247766A64/image-dimensions/484x327?v=v2" width="484" height="327" role="button" title="PranayGaroo_3-1765214156901.png" alt="PranayGaroo_3-1765214156901.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;Using Controller extensions&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;If your requirement is not fulfilled by using the OData Annotations, for instance you want to call multiple actions using a single button or push some processing to your frontend rather than the backend (Your OData Service). You can use application modeler to add a custom button in the front end.&lt;/P&gt;&lt;P&gt;You can add a custom button using Application Modeler and add a handler method in your Controller extension. Using this handler method, you can call the same custom action from the RAP OData V4 service.&lt;/P&gt;&lt;P&gt;In the below example I am adding a custom button on the list page in the table toolbar.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_4-1765214156905.png" style="width: 466px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349834i00D60E7646DD07F6/image-dimensions/466x201?v=v2" width="466" height="201" role="button" title="PranayGaroo_4-1765214156905.png" alt="PranayGaroo_4-1765214156905.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_5-1765214156909.png" style="width: 471px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349835iD7B6FE1F3468588C/image-dimensions/471x186?v=v2" width="471" height="186" role="button" title="PranayGaroo_5-1765214156909.png" alt="PranayGaroo_5-1765214156909.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_6-1765214156913.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349837iB198F7A46CC6A6D1/image-size/medium?v=v2&amp;amp;px=400" role="button" title="PranayGaroo_6-1765214156913.png" alt="PranayGaroo_6-1765214156913.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Make Sure that you have created a Controller Extension for the page you are adding the custom button to, you can do that using the application modeler as well&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_7-1765214156922.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349838i21E5AAA1F7BE8503/image-size/medium?v=v2&amp;amp;px=400" role="button" title="PranayGaroo_7-1765214156922.png" alt="PranayGaroo_7-1765214156922.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Once the custom action is added you can add the below logic to call the custom action of the OData Service, you can replace the endpoint as per your OData service&lt;/P&gt;&lt;P&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;OnActionPress: async function() {
// Calling a custom action of RAP Bobj using Controller ext
console.log("OnActionPress");
// Getting service URL
var model = this.base.getExtensionAPI().getModel();
var url = model.sServiceUrl;

// Making a GET call to fetch CSRF Token
var getTokenResp = await fetch( url, { method: "GET", headers: 
{ "X-CSRF-Token": "Fetch", Accept: "application/json" },credentials: "same-origin"  });
var token = getTokenResp.headers.get("x-csrf-token");	

// Calling Custom action by making a POST call
var uploadEndpoint = url + "Y_C_UTILAPP_PG/SAP__self.Upload";
const uploadResp = await fetch(uploadEndpoint, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            Accept: "application/json",
                            "X-CSRF-Token": token
                        },
                        credentials: "same-origin"
                    });
console.log("Calling a custom action of RAP Bobj using Controller ext"); }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Result&lt;/P&gt;&lt;P&gt;A similar custom button will be created&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_8-1765214156927.png" style="width: 550px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349839i56ADF25851B6239E/image-dimensions/550x271?v=v2" width="550" height="271" role="button" title="PranayGaroo_8-1765214156927.png" alt="PranayGaroo_8-1765214156927.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Pressing this button will trigger the handler method ‘OnActionPress’ which will make the POST call triggering the same ‘Upload’ static action of the RAP Business Object.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;&lt;STRONG&gt;PS: Thank you for reading. I’ll be writing more blogs soon on RAP, OData, UI5, and flexible programming languages — hope to see you there!&lt;/STRONG&gt;&lt;/EM&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-call-a-rap-action-from-your-controller-extension/ba-p/14286229"/>
    <published>2025-12-08T18:24:46.170000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/call-bapi-in-custom-entity-through-rap/ba-p/14268610</id>
    <title>CALL BAPI IN CUSTOM ENTITY THROUGH RAP</title>
    <updated>2025-12-09T11:29:06.943000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;Hi RAP Developers, Good Day&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Introduction:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In many business scenarios, we need to expose BAPI-based data to SAP Fiori applications without creating database tables or CDS-based persistency. With the RESTful ABAP Programming Model (RAP), this can be achieved efficiently using &lt;STRONG&gt;Custom Entities&lt;/STRONG&gt;, which allow us to call ABAP logic directly—such as BAPIs—and return the data as an OData service.&lt;/P&gt;&lt;P&gt;In this blog, I will walk through how to build a &lt;STRONG&gt;Custom Entity that fetches bank details by calling a BAPI&lt;/STRONG&gt;, how to annotate it for UI consumption, and how to expose it seamlessly to a Fiori Elements application. This approach is useful whenever you want to reuse existing BAPIs and business logic while keeping your RAP model clean, lightweight, and high-performing.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This solution demonstrates how RAP can seamlessly integrate with classic SAP functionality by exposing BAPI output through a &lt;STRONG&gt;Custom Entity&lt;/STRONG&gt;. Instead of relying on database tables or CDS views, the Custom Entity acts as a virtual data source whose data is supplied dynamically via an ABAP class.&lt;/P&gt;&lt;P&gt;When a Fiori Elements UI requests the entity, RAP forwards the query to the ABAP implementation class. This class reads the query parameters (filters, sorting, pagination) and uses them to call &lt;STRONG&gt;BAPI_BANK_GETDETAIL&lt;/STRONG&gt;. The BAPI returns the bank’s address, master data, and related details, which are then transformed into the response structure expected by the Custom Entity.&lt;/P&gt;&lt;P&gt;The result is an OData-based, read-only endpoint capable of delivering real-time data from a BAPI with full RAP features such as filtering, sorting, paging, and total count support. This approach makes it easy to modernize existing SAP data retrieval logic while still leveraging stable, proven BAPIs in the backend.&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Custom Entity:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;custom entity not underlying any data source.&lt;/LI&gt;&lt;LI&gt;data preview is not possible, becuase this should be implemented in seperate class.&lt;/LI&gt;&lt;LI&gt;suitable for paging,calling bapi's and external api's.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Custom Entity calling bapi'
@ObjectModel: {
    query: {
        implementedBy: 'ABAP:ZCL_BAPI_BANK'
    }
}

@UI: {
    headerInfo: {
        typeName: 'Banks',
        typeNamePlural: 'Banks',
        title: { value: 'bank_ctry' },
        description: { value: 'bank_ctry' }
    }
}

@UI: {
    presentationVariant: [{
        sortOrder: [{
            by: 'bank_ctry',
            direction: #ASC
        }],
        visualizations: [{
            type: #AS_LINEITEM
        }]
    }]
}
define root custom entity ZCE_BANK
{
      .facet                : [
      {
          id      : 'Bank_data',
          purpose : #STANDARD,
          type    : #IDENTIFICATION_REFERENCE,
          label   : 'Bank Details',
          position: 10 }
      ]
      .lineItem             : [{ position: 10 }]
      .selectionField       : [{position: 10}]
      .identification       : [{position: 10}]
  key bank_ctry                : banks;
      .lineItem             : [{ position: 20 }]
      .selectionField       : [{position: 20}]
      .identification       : [{position: 20}]
  key bank_key                 : bankk;

      .lineItem             : [{ position: 30 }]
      .identification       : [{position: 30}]
      bank_name                : banka;

      .lineItem             : [{ position: 40 }]
      .identification       : [{position: 40}]
      street                   : stras_gp;

      .lineItem             : [{ position: 50 }]
      .identification       : [{position: 50}]
      city                     : ort01_gp;

      .lineItem             : [{ position: 60 }]
      .identification       : [{position: 60}]
      BANK_NO                  : bankl;

      .lineItem             : [{ position: 70 }]
      .identification       : [{position: 70}]
      CREAT_DATE               : erdat_bf;

      .lineItem             : [{ position: 80 }]
      .identification       : [{position: 80}]
      creator                  : ernam_bf;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Implementation:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS ZCL_BAPI_BANK DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    " RAP interface for query implementation
    INTERFACES IF_RAP_QUERY_PROVIDER.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.


CLASS ZCL_BAPI_BANK IMPLEMENTATION.

  METHOD IF_RAP_QUERY_PROVIDER~SELECT.

    "----------------------------------------------------------------------
    " Local type used to return data back to Custom Entity ZCE_BANK
    "----------------------------------------------------------------------
    TYPES: BEGIN OF TY_BANK_RESULT,
             BANK_CTRY  TYPE BANKS,
             BANK_KEY   TYPE BANKK,
             BANK_NAME  TYPE BANKA,
             STREET     TYPE STRAS_GP,
             CITY       TYPE ORT01_GP,
             BANK_NO    TYPE BANKL,
             CREAT_DATE TYPE ERDAT_BF,
             CREATOR    TYPE ERNAM_BF,
           END OF TY_BANK_RESULT.

    DATA: LT_RESULT  TYPE TABLE OF TY_BANK_RESULT,
          LS_RESULT  TYPE TY_BANK_RESULT,
          LS_ADDRESS TYPE BAPI1011_ADDRESS,
          LS_DETAIL  TYPE BAPI1011_DETAIL,
          LS_RETURN  TYPE BAPIRET2.

    " Proceed only if the consumer has requested data
    IF IO_REQUEST-&amp;gt;IS_DATA_REQUESTED( ).

      "---------------------------------------------------------------
      " Read pagination details (TOP and SKIP)
      "---------------------------------------------------------------
      DATA(LV_TOP)  = IO_REQUEST-&amp;gt;GET_PAGING( )-&amp;gt;GET_PAGE_SIZE( ).
      DATA(LV_SKIP) = IO_REQUEST-&amp;gt;GET_PAGING( )-&amp;gt;GET_OFFSET( ).

      "---------------------------------------------------------------
      " Prepare ORDER BY clause based on sort request from UI
      "---------------------------------------------------------------
      DATA(LT_SORT) = IO_REQUEST-&amp;gt;GET_SORT_ELEMENTS( ).
      DATA LV_ORDERBY TYPE STRING.

      IF LT_SORT IS NOT INITIAL.
        CLEAR LV_ORDERBY.

        LOOP AT LT_SORT INTO DATA(LS_SORT).
          IF SY-TABIX &amp;gt; 1.
            LV_ORDERBY = |{ LV_ORDERBY }, |.
          ENDIF.

          " Construct ORDER BY element (ASCENDING/DESCENDING)
          LV_ORDERBY =
            |{ LV_ORDERBY }{ LS_SORT-ELEMENT_NAME } {
               COND #( WHEN LS_SORT-DESCENDING = ABAP_TRUE
                       THEN 'DESCENDING'
                       ELSE 'ASCENDING' ) }|.
        ENDLOOP.
      ENDIF.

      "---------------------------------------------------------------
      " Derive SQL filter string from UI filter (if any)
      "---------------------------------------------------------------
      DATA(lv_conditions) = io_request-&amp;gt;get_filter( )-&amp;gt;get_as_sql_string( ).

      "---------------------------------------------------------------
      " Read bank master records (BNKA) based on filters
      "---------------------------------------------------------------
      SELECT BANKS AS bank_ctry,
             BANKL AS bank_key,
             BNKLZ AS bank_no,
             ERDAT AS creat_date,
             ERNAM AS creator
        FROM BNKA
        WHERE (lv_conditions)
        ORDER BY (lv_orderby)
        INTO TABLE &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1407137"&gt;@DATA&lt;/a&gt;(lt_banks)
        UP TO &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1419942"&gt;@LV&lt;/a&gt;_top ROWS
        OFFSET &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1419942"&gt;@LV&lt;/a&gt;_skip.

      "---------------------------------------------------------------
      " Loop through each BNKA record and enrich details using BAPI
      "---------------------------------------------------------------
      LOOP AT lt_banks INTO DATA(ls_bank).

        " Get detailed bank address info
        CALL FUNCTION 'BAPI_BANK_GETDETAIL'
          EXPORTING
            bankcountry  = ls_bank-bank_ctry
            bankkey      = ls_bank-bank_key
          IMPORTING
            bank_address = ls_address
            bank_detail  = ls_detail
            return       = ls_return.

        " Prepare output row
        LS_RESULT-bank_ctry   = ls_bank-bank_ctry.
        LS_RESULT-bank_key    = ls_bank-bank_key.
        LS_RESULT-bank_name   = ls_address-bank_name.
        LS_RESULT-street      = ls_address-street.
        LS_RESULT-city        = ls_address-city.
        LS_RESULT-bank_no     = ls_bank-bank_no.
        LS_RESULT-creat_date  = ls_bank-creat_date.
        LS_RESULT-creator     = ls_bank-creator.

        APPEND LS_RESULT TO LT_RESULT.

        CLEAR: ls_result, ls_address, ls_detail, ls_return.

      ENDLOOP.

      "---------------------------------------------------------------
      " Return total count for UI pagination (if requested)
      "---------------------------------------------------------------
      IF IO_REQUEST-&amp;gt;IS_TOTAL_NUMB_OF_REC_REQUESTED( ).
        SELECT COUNT(*)
          FROM BNKA
          WHERE (lv_conditions)
          INTO &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1407137"&gt;@DATA&lt;/a&gt;(lv_count).

        IO_RESPONSE-&amp;gt;SET_TOTAL_NUMBER_OF_RECORDS( lv_count ).
      ENDIF.

      "---------------------------------------------------------------
      " Send final result back to RAP framework
      "---------------------------------------------------------------
      IO_RESPONSE-&amp;gt;SET_DATA( LT_RESULT ).

    ENDIF.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="bank.jpg" style="width: 621px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/340394iA7F2C1EEC70EB6A5/image-dimensions/621x294/is-moderation-mode/true?v=v2" width="621" height="294" role="button" title="bank.jpg" alt="bank.jpg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion:&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;this approach highlights how RAP can modernize SAP applications by exposing classic BAPI data through Custom Entities. It enables real-time, read-only access with full OData capabilities—filtering, sorting, paging—without changing existing backend logic, bridging the gap between proven SAP functionality and modern Fiori UIs.&lt;BR /&gt;Thanks For Reading, Best Wishes&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/call-bapi-in-custom-entity-through-rap/ba-p/14268610"/>
    <published>2025-12-09T11:29:06.943000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/date-hierarchy-using-tree-alv-fm-amp-oops/ba-p/14267818</id>
    <title>Date Hierarchy Using Tree ALV(FM &amp; OOPS )</title>
    <updated>2025-12-09T11:37:56.809000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;Hi Everyone&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1893824558"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;&lt;FONT face="Times New Roman, serif"&gt;&lt;FONT size="4"&gt;&lt;SPAN&gt;Introduction:&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P class=""&gt;The user needs an interactive &lt;STRONG&gt;Date Hierarchy&lt;/STRONG&gt; display in SAP that provides a structured view of years, months, and individual dates.This helps users quickly navigate through large date ranges and select specific dates for downstream operations such as data extraction, reporting, or analysis.&lt;/P&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P class="" align="left"&gt;&amp;nbsp;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P class=""&gt;The screen should display a hierarchical &lt;STRONG&gt;Tree ALV&lt;/STRONG&gt; titled &lt;STRONG&gt;“DATE HIERARCHY”&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;The top-level nodes represent &lt;STRONG&gt;Years&lt;/STRONG&gt; (e.g., 2021 to 2025).&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;When the user &lt;STRONG&gt;expands a Year&lt;/STRONG&gt;, the &lt;STRONG&gt;12 months (January to December)&lt;/STRONG&gt; are displayed as child nodes.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;When the user &lt;STRONG&gt;expands a Month&lt;/STRONG&gt;, all &lt;STRONG&gt;valid calendar dates&lt;/STRONG&gt; for that month are dynamically generated and displayed.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;Each date node should display the date in &lt;STRONG&gt;user’s local format (DD.MM.YYYY)&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;The user should be able to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P class=""&gt;Expand/collapse nodes dynamically.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;View all levels of hierarchy.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P class="" align="left"&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TABLES : BKPF.

"Internal table and work area for tree nodes
DATA: IT_NODE TYPE TABLE OF SNODETEXT,
      WA_NODE TYPE SNODETEXT.

"Variables for Year, Month, Date calculations
DATA: LV_YEAR  TYPE GJAHR,
      LV_MONTH TYPE NUMC2,
      LV_DATE  TYPE DATUM,
      LV_DAYS  TYPE I,
      LV_DAY   TYPE NUMC2.

"Keys for hierarchy levels
DATA: LV_YEAR_KEY  TYPE CHAR10,
      LV_MONTH_KEY TYPE CHAR15,
      LV_DATE_KEY  TYPE CHAR20.

"Selection range for fiscal year
SELECT-OPTIONS: S_GJAHR FOR BKPF-GJAHR DEFAULT '2021' TO '2025'.

START-OF-SELECTION.

  CLEAR: WA_NODE, IT_NODE.

"------------------------------------------------------------"
" Root Node Creation                                         "
"------------------------------------------------------------"
WA_NODE-TYPE    = 'T'.             "Tree title
WA_NODE-NAME    = 'DATE HIERARCHY'.
WA_NODE-TLEVEL  = '01'.
WA_NODE-NLENGTH = '18'.
WA_NODE-COLOR   = '05'.
APPEND WA_NODE TO IT_NODE.
CLEAR WA_NODE.

"------------------------------------------------------------"
" Build Year → Month → Date Hierarchy                       "
"------------------------------------------------------------"
LOOP AT S_GJAHR.
  DO.
    "Loop through each year within the selected range
    LV_YEAR = S_GJAHR-LOW + SY-INDEX - 1.
    IF LV_YEAR &amp;gt; S_GJAHR-HIGH.
      EXIT.
    ENDIF.

    "--------------------------------------------------------"
    " Year Node (Level 02)                                   "
    "--------------------------------------------------------"
    LV_YEAR_KEY = LV_YEAR.
    WA_NODE-TYPE    = 'P'.
    WA_NODE-ID      = LV_YEAR_KEY.
    CONCATENATE LV_YEAR ' ' INTO WA_NODE-NAME SEPARATED BY SPACE.
    WA_NODE-TLEVEL  = '02'.
    WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
    WA_NODE-COLOR   = '03'.
    APPEND WA_NODE TO IT_NODE.
    CLEAR WA_NODE.

    "--------------------------------------------------------"
    " 12 Months Loop (Level 03)                              "
    "--------------------------------------------------------"
    DO 12 TIMES.
      LV_MONTH = SY-INDEX.
      CONCATENATE LV_YEAR_KEY LV_MONTH INTO LV_MONTH_KEY.

      WA_NODE-TYPE = 'P'.
      WA_NODE-ID   = LV_MONTH_KEY.

      "Month Name Assignment"
      CASE LV_MONTH.
        WHEN '01'. WA_NODE-NAME = 'January'.
        WHEN '02'. WA_NODE-NAME = 'February'.
        WHEN '03'. WA_NODE-NAME = 'March'.
        WHEN '04'. WA_NODE-NAME = 'April'.
        WHEN '05'. WA_NODE-NAME = 'May'.
        WHEN '06'. WA_NODE-NAME = 'June'.
        WHEN '07'. WA_NODE-NAME = 'July'.
        WHEN '08'. WA_NODE-NAME = 'August'.
        WHEN '09'. WA_NODE-NAME = 'September'.
        WHEN '10'. WA_NODE-NAME = 'October'.
        WHEN '11'. WA_NODE-NAME = 'November'.
        WHEN '12'. WA_NODE-NAME = 'December'.
      ENDCASE.

      WA_NODE-TLEVEL  = '03'.
      WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
      WA_NODE-COLOR   = '04'.
      APPEND WA_NODE TO IT_NODE.
      CLEAR WA_NODE.

      "------------------------------------------------------"
      " Determine number of days in the month                "
      "------------------------------------------------------"
      CONCATENATE LV_YEAR LV_MONTH '01' INTO LV_DATE.
      CALL FUNCTION 'SLS_MISC_GET_LAST_DAY_OF_MONTH'
        EXPORTING
          DAY_IN            = LV_DATE
        IMPORTING
          LAST_DAY_OF_MONTH = LV_DATE.

      LV_DAYS = LV_DATE+6(2). "Extract day part → last day of month

      "------------------------------------------------------"
      " Date Nodes (Level 04)                                "
      "------------------------------------------------------"
      DO LV_DAYS TIMES.
        LV_DAY = SY-INDEX.
        CONCATENATE LV_YEAR LV_MONTH LV_DAY INTO LV_DATE_KEY.

        WA_NODE-TYPE    = 'P'.
        WA_NODE-ID      = LV_DATE_KEY.
        CONCATENATE LV_DAY '.' LV_MONTH '.' LV_YEAR INTO WA_NODE-NAME.
        WA_NODE-TLEVEL  = '04'.
        WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
        WA_NODE-COLOR   = '06'.
        APPEND WA_NODE TO IT_NODE.
        CLEAR WA_NODE.

      ENDDO.

    ENDDO.

  ENDDO.
ENDLOOP.

"------------------------------------------------------------"
" Display the Tree Output                                    "
"------------------------------------------------------------"
CALL FUNCTION 'RS_TREE_CONSTRUCT'
  TABLES
    NODETAB = IT_NODE.

CALL FUNCTION 'RS_TREE_LIST_DISPLAY'
  EXPORTING
    CALLBACK_PROGRAM = SY-REPID.&lt;/code&gt;&lt;/pre&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;Output:&lt;/STRONG&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="tree.png" style="width: 812px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339971i42BB7569A9EF68CF/image-dimensions/812x534/is-moderation-mode/true?v=v2" width="812" height="534" role="button" title="tree.png" alt="tree.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;STRONG&gt;OOPS Approach:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TABLES: MARA, BKPF.

*---------------------------------------------------------------------*
* Data Declarations
*---------------------------------------------------------------------*
"ALV Tree objects
DATA: GO_TREE      TYPE REF TO CL_GUI_ALV_TREE,
      GO_CONTAINER TYPE REF TO CL_GUI_CUSTOM_CONTAINER.

"ALV field catalog and layout
DATA: GT_FIELDCAT TYPE LVC_T_FCAT,
      GS_FIELDCAT TYPE LVC_S_FCAT,
      GS_LAYOUT   TYPE LVC_S_LAYO.

"Output structure for tree text
TYPES: BEGIN OF TY_OUTPUT,
         COLUMN1 TYPE CHAR255,  "Single text column for tree nodes
       END OF TY_OUTPUT.

DATA: GT_OUTPUT TYPE TABLE OF TY_OUTPUT,
      GS_OUTPUT TYPE TY_OUTPUT.

"Variables used for Year → Month → Date hierarchy
DATA: LV_YEAR       TYPE GJAHR,
      LV_MONTH      TYPE NUMC2,
      LV_DATE       TYPE DATUM,
      LV_LAST_DATE  TYPE DATUM,
      LV_DAYS       TYPE I,
      LV_DAY        TYPE NUMC2,
      LV_YEAR_KEY   TYPE LVC_NKEY,
      LV_MONTH_KEY  TYPE LVC_NKEY,
      LV_DATES_LINE TYPE STRING.

"Node layout (folder / item)
DATA: LS_NODE_LAYOUT TYPE LVC_S_LAYN.

"Year range for hierarchy
SELECT-OPTIONS: S_GJAHR FOR BKPF-GJAHR DEFAULT '2021' TO '2025'.

*---------------------------------------------------------------------*
* Selection Screen Trigger
*---------------------------------------------------------------------*
START-OF-SELECTION.
  CALL SCREEN 100.  "Call main screen

*---------------------------------------------------------------------*
* PBO: Set status and create tree
*---------------------------------------------------------------------*
MODULE STATUS_0100 OUTPUT.
  SET PF-STATUS 'ZSTANDARD'.

  "Create the tree only once
  IF GO_CONTAINER IS INITIAL.
    PERFORM CREATE_AND_FILL_TREE.
  ENDIF.
ENDMODULE.

*---------------------------------------------------------------------*
* PAI: Handle user commands
*---------------------------------------------------------------------*
MODULE USER_COMMAND_0100 INPUT.
  CASE SY-UCOMM.
    WHEN 'BACK' OR 'EXIT' OR 'CANCEL'.
      "Release frontend controls
      PERFORM FREE_RESOURCES.
      LEAVE TO SCREEN 0.
  ENDCASE.
ENDMODULE.

*---------------------------------------------------------------------*
* Create container, tree control, root node and load hierarchy
*---------------------------------------------------------------------*
FORM CREATE_AND_FILL_TREE.

  "Create custom container inside screen element 'CONTAINER'
  CREATE OBJECT GO_CONTAINER
    EXPORTING
      CONTAINER_NAME = 'CONTAINER'.

  "Build ALV field catalog
  PERFORM BUILD_FIELDCAT.

  "Create ALV tree control
  CREATE OBJECT GO_TREE
    EXPORTING
      PARENT              = GO_CONTAINER
      NODE_SELECTION_MODE = CL_GUI_COLUMN_TREE=&amp;gt;NODE_SEL_MODE_SINGLE
      ITEM_SELECTION      = 'X'
    EXCEPTIONS
      OTHERS              = 1.

  "Bind output table and field catalog to tree
  CALL METHOD GO_TREE-&amp;gt;SET_TABLE_FOR_FIRST_DISPLAY
    CHANGING
      IT_OUTTAB       = GT_OUTPUT
      IT_FIELDCATALOG = GT_FIELDCAT.

  "---------------------------------------------------------------*
  " Create Root Node (DATE HIERARCHY)
  "---------------------------------------------------------------*
  CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
  LS_NODE_LAYOUT-ISFOLDER  = 'X'.
  LS_NODE_LAYOUT-N_IMAGE   = '@AV@'.
  LS_NODE_LAYOUT-EXP_IMAGE = '@AV@'.
  GS_OUTPUT-COLUMN1        = 'DATE HIERARCHY'.

  "Add root node
  CALL METHOD GO_TREE-&amp;gt;ADD_NODE
    EXPORTING
      I_RELAT_NODE_KEY = ''  "Root level
      I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
      IS_OUTTAB_LINE   = GS_OUTPUT
      IS_NODE_LAYOUT   = LS_NODE_LAYOUT
    IMPORTING
      E_NEW_NODE_KEY   = LV_YEAR_KEY.

  "Build full tree under root node
  PERFORM BUILD_TREE_NODES USING LV_YEAR_KEY.

  "Auto-expand root node
  CALL METHOD GO_TREE-&amp;gt;EXPAND_NODE
    EXPORTING
      I_NODE_KEY = LV_YEAR_KEY.

  CALL METHOD GO_TREE-&amp;gt;FRONTEND_UPDATE.

ENDFORM.

*---------------------------------------------------------------------*
* Create field catalog for ALV tree
*---------------------------------------------------------------------*
FORM BUILD_FIELDCAT.
  CLEAR GS_FIELDCAT.
  GS_FIELDCAT-FIELDNAME = 'COLUMN1'.
  GS_FIELDCAT-COLTEXT   = 'Description'.
  GS_FIELDCAT-OUTPUTLEN = 255.
  APPEND GS_FIELDCAT TO GT_FIELDCAT.
ENDFORM.

*---------------------------------------------------------------------*
* Build YEAR → MONTH → DAY hierarchy inside ALV Tree
*---------------------------------------------------------------------*
FORM BUILD_TREE_NODES USING IV_ROOT_KEY TYPE LVC_NKEY.

  DATA: LV_PARENT_YEAR  TYPE LVC_NKEY,
        LV_PARENT_MONTH TYPE LVC_NKEY,
        LV_MONTH_NAME   TYPE STRING,
        LV_CHUNK        TYPE STRING,
        LV_CHUNK_COUNT  TYPE I,
        GV_GROUP_SIZE   TYPE I VALUE 10,  "Group 10 days per line
        LV_DATE_STRING  TYPE STRING.

  "Loop through selected year range
  LOOP AT S_GJAHR.
    DO.
      LV_YEAR = S_GJAHR-LOW + SY-INDEX - 1.
      IF LV_YEAR &amp;gt; S_GJAHR-HIGH.
        EXIT.
      ENDIF.

      "---------------------------------------------------------------*
      " Create YEAR Node
      "---------------------------------------------------------------*
      CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
      LS_NODE_LAYOUT-ISFOLDER  = 'X'.
      LS_NODE_LAYOUT-N_IMAGE   = '@AV@'.
      LS_NODE_LAYOUT-EXP_IMAGE = '@AV@'.
      GS_OUTPUT-COLUMN1        = |Year: { LV_YEAR }|.

      CALL METHOD GO_TREE-&amp;gt;ADD_NODE
        EXPORTING
          I_RELAT_NODE_KEY = IV_ROOT_KEY      "Attach to root
          I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
          IS_OUTTAB_LINE   = GS_OUTPUT
          IS_NODE_LAYOUT   = LS_NODE_LAYOUT
        IMPORTING
          E_NEW_NODE_KEY   = LV_PARENT_YEAR.

      "---------------------------------------------------------------*
      " Create MONTH Nodes under each Year
      "---------------------------------------------------------------*
      DO 12 TIMES.
        LV_MONTH = SY-INDEX.

        "Month name mapping
        CASE LV_MONTH.
          WHEN 1.  LV_MONTH_NAME = 'January'.
          WHEN 2.  LV_MONTH_NAME = 'February'.
          WHEN 3.  LV_MONTH_NAME = 'March'.
          WHEN 4.  LV_MONTH_NAME = 'April'.
          WHEN 5.  LV_MONTH_NAME = 'May'.
          WHEN 6.  LV_MONTH_NAME = 'June'.
          WHEN 7.  LV_MONTH_NAME = 'July'.
          WHEN 8.  LV_MONTH_NAME = 'August'.
          WHEN 9.  LV_MONTH_NAME = 'September'.
          WHEN 10. LV_MONTH_NAME = 'October'.
          WHEN 11. LV_MONTH_NAME = 'November'.
          WHEN 12. LV_MONTH_NAME = 'December'.
        ENDCASE.

        CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
        LS_NODE_LAYOUT-ISFOLDER  = 'X'.
        LS_NODE_LAYOUT-N_IMAGE   = '@2L@'.
        LS_NODE_LAYOUT-EXP_IMAGE = '@2L@'.
        GS_OUTPUT-COLUMN1        = LV_MONTH_NAME.

        "Add Month node
        CALL METHOD GO_TREE-&amp;gt;ADD_NODE
          EXPORTING
            I_RELAT_NODE_KEY = LV_PARENT_YEAR
            I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
            IS_OUTTAB_LINE   = GS_OUTPUT
            IS_NODE_LAYOUT   = LS_NODE_LAYOUT
          IMPORTING
            E_NEW_NODE_KEY   = LV_PARENT_MONTH.

        "-----------------------------------------------------------*
        " Determine last day of month
        "-----------------------------------------------------------*
        CONCATENATE LV_YEAR LV_MONTH '01' INTO LV_DATE.
        CALL FUNCTION 'LAST_DAY_OF_MONTHS'
          EXPORTING
            DAY_IN            = LV_DATE
          IMPORTING
            LAST_DAY_OF_MONTH = LV_LAST_DATE.

        LV_DAYS = LV_LAST_DATE+6(2).  "Extract number of days

        "-----------------------------------------------------------*
        " Add DAY Nodes grouped (10 days per node)
        "-----------------------------------------------------------*
        CLEAR: LV_CHUNK, LV_CHUNK_COUNT.

        DO LV_DAYS TIMES.
          LV_DAY = SY-INDEX.

          "Format date string: DD.MM.YYYY
          LV_DATE_STRING = |{ LV_DAY WIDTH = 2 }.{ LV_MONTH WIDTH = 2 }.{ LV_YEAR }|.

          "Build chunk of 10 dates
          IF LV_CHUNK IS INITIAL.
            LV_CHUNK = LV_DATE_STRING.
          ELSE.
            CONCATENATE LV_CHUNK LV_DATE_STRING INTO LV_CHUNK SEPARATED BY SPACE.
          ENDIF.

          ADD 1 TO LV_CHUNK_COUNT.

          "Add one group node after every 10 days OR last day
          IF LV_CHUNK_COUNT &amp;gt;= GV_GROUP_SIZE OR LV_DAY = LV_DAYS.

            CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
            LS_NODE_LAYOUT-ISFOLDER = ''.   "Leaf node
            LS_NODE_LAYOUT-N_IMAGE  = '@3C@'.
            GS_OUTPUT-COLUMN1       = LV_CHUNK.

            "Add day-chunk node
            CALL METHOD GO_TREE-&amp;gt;ADD_NODE
              EXPORTING
                I_RELAT_NODE_KEY = LV_PARENT_MONTH
                I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
                IS_OUTTAB_LINE   = GS_OUTPUT
                IS_NODE_LAYOUT   = LS_NODE_LAYOUT.

            CLEAR: LV_CHUNK, LV_CHUNK_COUNT.
          ENDIF.
        ENDDO.

      ENDDO.  "End Month Loop

    ENDDO.
  ENDLOOP.

ENDFORM.

*---------------------------------------------------------------------*
* Release frontend controls
*---------------------------------------------------------------------*
FORM FREE_RESOURCES.
  IF GO_TREE IS BOUND.
    CALL METHOD GO_TREE-&amp;gt;FREE.
    FREE GO_TREE.
  ENDIF.

  IF GO_CONTAINER IS BOUND.
    CALL METHOD GO_CONTAINER-&amp;gt;FREE.
    FREE GO_CONTAINER.
  ENDIF.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="date.jpg" style="width: 619px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339973i6AA78918170CB894/image-dimensions/619x242/is-moderation-mode/true?v=v2" width="619" height="242" role="button" title="date.jpg" alt="date.jpg" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Conclusion:&lt;/STRONG&gt;&lt;BR /&gt;This solution showcases a practical and user-friendly way to visualize date structures by building a dynamic Year–Month–Day hierarchy using the ALV Tree control. By grouping daily entries and leveraging container-based GUI elements, the approach delivers a clean, scalable, and intuitive navigation experience. It also demonstrates how classic ABAP techniques—selection screens, tree controls, and month/day calculations—can be combined to create interactive UI components that enhance data exploration within SAP GUI.&lt;STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/date-hierarchy-using-tree-alv-fm-amp-oops/ba-p/14267818"/>
    <published>2025-12-09T11:37:56.809000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-2/ba-p/14286757</id>
    <title>Collective Value Helps in RAP: V2 and V4 Implementation Guide - Part 2</title>
    <updated>2025-12-09T15:35:14.655000+01:00</updated>
    <author>
      <name>Abhinav_Roy</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1109</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;In &lt;A href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-1/ba-p/14271885" target="_blank"&gt;Part 1&lt;/A&gt;&amp;nbsp;of this series, we explored the fundamentals of &lt;STRONG&gt;Collective Value Helps&lt;/STRONG&gt; in RAP, covering implementation patterns across OData V2 and V4 service bindings. The community response has been overwhelming, with particular interest in hierarchical implementations for complex business scenarios.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;While CDS hierarchies are extensively documented in the SAP ecosystem and widely used for representing parent-child relationships across business objects, a critical implementation gap exists: &lt;STRONG&gt;there are virtually no practical examples of incorporating hierarchical display patterns within Collective Value Helps.&lt;/STRONG&gt; &lt;STRONG&gt;Part 2&lt;/STRONG&gt; bridges this gap by demonstrating how to seamlessly integrate hierarchical search templates into the collective value help framework we built in Part 1.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;STRONG&gt;Watch the demonstration video below&lt;/STRONG&gt; to see hierarchical value helps in action, including how they work alongside existing flat list search templates, in a Collective Value Help:&lt;BR /&gt;&lt;BR /&gt;&lt;div class="video-embed-center video-embed"&gt;&lt;iframe class="embedly-embed" src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F2Zt9gykfJOE%3Ffeature%3Doembed&amp;amp;display_name=YouTube&amp;amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D2Zt9gykfJOE&amp;amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F2Zt9gykfJOE%2Fhqdefault.jpg&amp;amp;type=text%2Fhtml&amp;amp;schema=youtube" width="400" height="225" scrolling="no" title="SAP Community Hierarchical Variant - CVH" frameborder="0" allow="autoplay; fullscreen; encrypted-media; picture-in-picture;" allowfullscreen="true"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;U&gt;&lt;SPAN&gt;System Requirements&lt;/SPAN&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**Hierarchical Value Help Dialogs require: **&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**SAP S/4HANA Cloud**&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Minimum Release: 2311&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Protocol: OData V4 service binding&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**SAP S/4HANA On-Premise/Private Edition: **&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Minimum Release : S/4HANA 2025 onwards&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Protocol: OData V4 service binding&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**Important: ** OData V2 does not support hierarchical&lt;/EM&gt; visualization&amp;nbsp;&lt;EM&gt;out of the box via CDS Hierarchy due to protocol limitations. CDS hierarchical patterns require OData V4.&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;CDS Hierarchies: Foundation for Hierarchical Value Helps&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;CDS (Core Data Services) hierarchies are well-established patterns in the SAP landscape for representing parent-child relationships. SAP provides comprehensive documentation and numerous community resources for learning hierarchy fundamentals:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-data-models/hierarchy-definition" target="_blank" rel="noopener noreferrer"&gt;Hierarchy Definition | SAP Help Portal&lt;/A&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/treeview-with-read-only-capability?version=sap_btp" target="_blank" rel="noopener noreferrer"&gt;Treeviews with Read-Only Capabilities | SAP Help Portal&lt;/A&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/cds-how-to-define-hierarchy-view/ba-p/13758059" target="_self"&gt;SAP Community: CDS Hierarchy Articles&lt;/A&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;This article focuses specifically on utilizing CDS hierarchies within RAP-compliant value helps&lt;/STRONG&gt; and demonstrating how to incorporate hierarchical search templates alongside the flat templates created in Part 1.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Use Case:&lt;/STRONG&gt; Hierarchies are particularly powerful in domains like Asset Management, where technical objects form complex parent-child structures that users need to navigate when making selections.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Business Context: Asset Management-&amp;gt; Hierarchical Relationships&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In Asset Management, technical objects naturally form hierarchical structures that reflect real-world installations and organizational relationships:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Functional Location Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent functional locations contain child functional locations&lt;/LI&gt;&lt;LI&gt;Example: TATM → TATM-UT3 → TATM-UT3-001&lt;/LI&gt;&lt;LI&gt;Represents physical plant structure and organizational grouping&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Equipment Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Equipment can be installed under functional locations&lt;/LI&gt;&lt;LI&gt;Equipment can be installed under other equipment (sub-assemblies)&lt;/LI&gt;&lt;LI&gt;Example: Main equipment (11947458) contains sub-equipment (11947627)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Mixed Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Equipment installed at functional locations&lt;/LI&gt;&lt;LI&gt;Sub-equipment installed under main equipment&lt;/LI&gt;&lt;LI&gt;Creates complex parent-child navigation &lt;SPAN&gt;requirements&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;A sample Hierarchy in Asset Management:&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Transaction: IH01 - Structure List" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350113i6B449DCB4E2430AE/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765275145771.png" alt="Transaction: IH01 - Structure List" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Transaction: IH01 - Structure List&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Why Hierarchical Value Helps Matter:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;When users select technical objects in business processes (work orders, maintenance notifications, asset transfers), they need to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Understand the installation hierarchy&lt;/LI&gt;&lt;LI&gt;Navigate parent-child relationships visually&lt;/LI&gt;&lt;LI&gt;Select objects while seeing their organizational context&lt;/LI&gt;&lt;LI&gt;Identify relationships between equipment and functional locations&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Standard flat list value helps lose this critical hierarchical context, making object selection difficult and error-prone in complex asset structures.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Implementation: Building the Hierarchical VDM Model &lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 1: Interface View (I-View) with Parent Association&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The foundation of any CDS hierarchy is a self-association that establishes the parent-child relationship.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="I-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350176i90BA3A7BE43AA7E5/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765276862163.png" alt="I-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;I-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Elements:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Self-Association _ParentNode:&lt;/STRONG&gt; Establishes the many-to-one parent relationship&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Cardinality [0..1]:&lt;/STRONG&gt; Each node has either zero (root) or one parent&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Join Condition:&lt;/STRONG&gt; Links child's SuperiorTechnicalObject to parent's TechnicalObject&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This I-View serves as the data foundation, providing the parent-child relationship that the hierarchy view will consume.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 2: Hierarchy View Definition&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The hierarchy view transforms the I-View's parent association into an actual hierarchical structure with defined traversal rules.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchy View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350177i06598EFF9C04E570/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765276926694.png" alt="Hierarchy View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchy View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Hierarchy Annotations:&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;source ZAR_I_TechObjHierarchy:&lt;/STRONG&gt; References the I-View containing the parent association&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;child to parent association _ParentNode:&lt;/STRONG&gt; Specifies which association defines the hierarchy&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;start where SuperiorTechnicalObject is initial:&lt;/STRONG&gt; Defines root nodes (no parent = top of hierarchy)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;siblings order by TechnicalObject:&lt;/STRONG&gt; Sorts nodes at the same level&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;multiple parents not allowed:&lt;/STRONG&gt; Enforces strict tree structure (each node has max one parent)&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;This hierarchy view establishes the traversal logic and structural rules for displaying the parent-child relationships.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 3: Consumption (C-View) Definition&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The consumption view serves as the bridge between the CDS hierarchy and the collective value help framework. It exposes the hierarchy as a searchable value help provider while maintaining the hierarchical data structure.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350178i1A66EA4BBEADFDAB/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1765277179651.png" alt="C-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Annotations:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;@ObjectModel.supportedCapabilities&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;#VALUE_HELP_PROVIDER&lt;/STRONG&gt;: Enables this view to provide value help data&lt;BR /&gt;&lt;STRONG&gt;#SEARCHABLE_ENTITY&lt;/STRONG&gt;: Allows search functionality within the value help dialog&lt;BR /&gt;These capabilities are essential for user interaction&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.hierarchy.recursiveHierarchy: [{ entity.name: 'ZAR_I_TechObjHierarchyView' }]&lt;/STRONG&gt;&lt;BR /&gt;THE CRITICAL HIERARCHICAL LINK&lt;BR /&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt; The entity name should reference the &lt;STRONG&gt;Hierarchy View&lt;/STRONG&gt; (from Step 2), not the I-View or C-View itself.&lt;BR /&gt;Points to the CDS hierarchy view created in Step 2&lt;BR /&gt;Instructs OData V4 service to use hierarchical structure&lt;BR /&gt;Without this annotation, hierarchy won't display in value help&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;association of many to one ... as _ParentNode&lt;/STRONG&gt;&lt;BR /&gt;Recreates the parent association in the consumption layer&lt;BR /&gt;Must match the join conditions from the I-View&lt;BR /&gt;Required for OData V4 hierarchy metadata generation&lt;BR /&gt;Links both TechnicalObject AND TechObjIsEquipOrFuncnLoc (composite key)&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;Step 4: Including Hierarchical Template in Collective Value Help&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;Now we integrate the hierarchical search template into our existing collective value help framework from Part 1:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V2 Metadata Extension" style="width: 742px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350276iA574D0E8B7D628A7/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284016068.png" alt="CVH V2 Metadata Extension" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V2 Metadata Extension&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V4 Metadata Extension" style="width: 785px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350277i534D6BAD5BEC6D23/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765284037633.png" alt="CVH V4 Metadata Extension" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V4 Metadata Extension&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Definition" style="width: 698px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350278iAF30882ADD5E2AB7/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1765284142136.png" alt="Service Definition" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Definition&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;OData V2 Service Binding: The Limitation&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding OData V2" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350279i5E8C2D9DE435F840/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_3-1765284199980.png" alt="Service Binding OData V2" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding OData V2&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;This eliminates the possibility of incorporating hierarchical search templates via CDS hierarchy in V2 collective value helps.&lt;/STRONG&gt; OData V2's protocol limitations prevent hierarchy visualization in value help dialogs&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;OData V4 Service Binding: The Solution Path&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding OData V4" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350280i61F5F556EF135F3C/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284407687.png" alt="Service Binding OData V4" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding OData V4&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The V4 service binding successfully exposes the hierarchical template without errors.&lt;/P&gt;&lt;H3 id="toc-hId-1895640971"&gt;&lt;BR /&gt;The Problem - Flat List Display&lt;/H3&gt;&lt;P class=""&gt;Even with a properly defined hierarchy view exposed in V4, the initial preview reveals an unexpected result:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Flat List Display (as opposed to expected Hierarchical display)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350282i95E36C0C3779F7B5/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765284477750.png" alt="Flat List Display (as opposed to expected Hierarchical display)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Flat List Display (as opposed to expected Hierarchical display)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;&lt;BR /&gt;The Problem:&lt;BR /&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Despite having a hierarchical CDS view, the value help displays data as a &lt;/SPAN&gt;&lt;STRONG&gt;flat list&lt;/STRONG&gt;&lt;SPAN&gt; without any parent-child visualization. Users see individual records but lose all hierarchical context.&lt;/SPAN&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;Why This Happens:&lt;BR /&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Creating a CDS hierarchy view is necessary but &lt;/SPAN&gt;&lt;STRONG&gt;not sufficient&lt;/STRONG&gt;&lt;SPAN&gt; for hierarchical display in value helps. The RAP framework requires &lt;EM&gt;explicit UI presentation instructions&lt;/EM&gt; to render hierarchy in the value help dialog.&lt;/SPAN&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;The Missing Piece:&lt;/STRONG&gt; The framework needs explicit instructions via presentation variant annotations to understand that this data should be rendered as a hierarchy tree, not a flat table. Without these annotations, OData V4 treats the hierarchy view as just another data source.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;The Solution - Presentation Variant Annotations&lt;/STRONG&gt;&lt;BR /&gt;To provision hierarchical display in value helps, we must add specific presentation variant annotations that declare hierarchical visualization intent.&lt;BR /&gt;&lt;BR /&gt;&lt;U&gt;Consumption View (C-View) Annotations&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View (Presentation Variant Added)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350296i16DB4408E668ECBE/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284859373.png" alt="C-View (Presentation Variant Added)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View (Presentation Variant Added)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;A presentation variant annotation needs to be included here which will contain the InitialExpansionLevel for the hierarchy and&amp;nbsp; a property RecursiveHierarchyQualifier.&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;RecursiveHierarchyQualifier&lt;/STRONG&gt; - This annotation contains a string with the name of the hierarchy view and make possible that the data is then shown on UI as tree table. The projection view should also have the annotation&lt;BR /&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;STRONG&gt;InitialExpansionLevel&lt;/STRONG&gt; - This annotation indicates up to which level a display hierarchy shall be initially expanded.&lt;/SPAN&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;U&gt;Collective Value Help Metadata Extension&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V4 Metadata Extension (Presentation Variant annotation added)" style="width: 668px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350312i4D5761FE4F127D32/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765285284629.png" alt="CVH V4 Metadata Extension (Presentation Variant annotation added)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V4 Metadata Extension (Presentation Variant annotation added)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;A &lt;SPAN&gt;&lt;STRONG&gt;presentationVariantQualifier&lt;/STRONG&gt; annotation needs to be included here, which should've the same value as the Qualifier in the C-View, i.e., '&lt;STRONG&gt;HIERARCHY&lt;/STRONG&gt;', in this case. This annotation&amp;nbsp;indicates how the value help result should be displayed.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;The Result: Hierarchical Value Help in Action&lt;/STRONG&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchical value help display" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350315i8BC8724DE1A9A35B/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765285480130.png" alt="Hierarchical value help display" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchical value help display&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Success! The hierarchical variant now displays&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent-child relationships visualized as tree structure&lt;/LI&gt;&lt;LI&gt;Expand/collapse controls for navigation&lt;/LI&gt;&lt;LI&gt;Indentation showing hierarchy levels&lt;/LI&gt;&lt;LI&gt;Seamless integration with flat templates from Part 1&lt;/LI&gt;&lt;LI&gt;Full hierarchy traversal in value help dialog&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;User Experience - End Users can now&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Switch between flat and hierarchical search templates&lt;/LI&gt;&lt;LI&gt;Navigate parent-child relationships visually&lt;/LI&gt;&lt;LI&gt;Expand/collapse hierarchy nodes and even the entire Tree View&lt;/LI&gt;&lt;LI&gt;Select objects while understanding their organizational context&lt;/LI&gt;&lt;LI&gt;See equipment installation hierarchies and functional location structures&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Key Takeaways: When to Use Hierarchical Collective Value Helps&lt;BR /&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;&lt;U&gt;&lt;STRONG&gt;Use Hierarchical Patterns When&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent-Child Relationships Matter: Business objects naturally form hierarchies (org structures, location hierarchies etc)&lt;/LI&gt;&lt;LI&gt;Context Aids Selection: Users need to see relationships to make correct selections&lt;/LI&gt;&lt;LI&gt;Navigation is Important: Users need to browse up/down hierarchies during selection&lt;/LI&gt;&lt;LI&gt;OData V4 is Available: V2 protocol does not support hierarchy visualization&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Implementation Checklist&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Define I-View with self-association (_ParentNode)&lt;/LI&gt;&lt;LI&gt;Create hierarchy view with traversal rules (start where, siblings order by)&lt;/LI&gt;&lt;LI&gt;Use OData V4 service binding (V2 not supported)&lt;/LI&gt;&lt;LI&gt;Add presentation variant in C-View&lt;/LI&gt;&lt;LI&gt;Reference presentation variant in CVH metadata extension&lt;/LI&gt;&lt;LI&gt;Test expand/collapse and hierarchy navigation&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Key Implementation points&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Cardinality Enforcement: multiple parents not allowed ensures tree structure&lt;/LI&gt;&lt;LI&gt;Root Node Definition: start where clause correctly identifies top-level nodes&lt;/LI&gt;&lt;LI&gt;Presentation Variant annotation must be added in&amp;nbsp;C-View and CVH metadata&lt;/LI&gt;&lt;LI&gt;Qualifier Consistency: Same qualifier in C-View and CVH metadata&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Series Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;This two-part series has explored the complete spectrum of collective value helps in RAP:&lt;BR /&gt;&lt;STRONG&gt;&lt;U&gt;Part 1 established the foundation&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Basic collective value help concepts and structure&lt;/LI&gt;&lt;LI&gt;Implementation across OData V2 and V4 service bindings&lt;/LI&gt;&lt;LI&gt;Service binding architectural differences&lt;/LI&gt;&lt;LI&gt;Nested value help workarounds&lt;/LI&gt;&lt;LI&gt;Multi-dimensional search capabilities&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Part 2 extended to advanced patterns&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Hierarchical CDS view construction&lt;/LI&gt;&lt;LI&gt;VDM model for hierarchy-enabled value helps&lt;/LI&gt;&lt;LI&gt;OData V2 protocol limitations&lt;/LI&gt;&lt;LI&gt;Presentation variant configuration for hierarchy visualization&lt;/LI&gt;&lt;LI&gt;Seamless integration of flat and hierarchical search templates&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Together, these patterns enable user-centric, multi-criteria search capabilities that leverage RAP's full value help framework while maintaining clean architectural separation and reusability.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Architectural Insight&lt;/STRONG&gt;:&lt;BR /&gt;Collective value helps in RAP provide a powerful, user-centric approach to value help management by enabling multi-criteria search through a single, reusable model. The addition of hierarchical display patterns extends this capability to complex business scenarios requiring parent-child navigation—delivering a comprehensive search experience that adapts to diverse user needs.&lt;BR /&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;Hierarchical collective value helps represent the convergence of RAP's value help framework with CDS hierarchy capabilities, enabling rich, context-aware search experiences for complex business objects. While implementation requires careful attention to presentation variant configuration and V4 protocol requirements, the result is a powerful pattern applicable across any SAP domain where parent-child relationships drive user decision-making.&lt;BR /&gt;Whether you're building asset management applications, organizational hierarchies, material master navigation, or any scenario requiring hierarchical context during selection, this pattern provides the foundation for delivering intuitive, efficient user experiences.&lt;BR /&gt;The combination of CDS hierarchies, collective value helps, and RAP's presentation variant framework creates a powerful combination for solving complex data selection challenges-no custom coding required, just optimal usage of key annotations.&lt;BR /&gt;Thank you for following this two-part series. I welcome your feedback, and experiences implementing collective value helps in your own RAP applications.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-2/ba-p/14286757"/>
    <published>2025-12-09T15:35:14.655000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/you-are-standing-in-an-open-field-inside-sap-gui/ba-p/14287253</id>
    <title>You Are Standing in an Open Field... Inside SAP GUI</title>
    <updated>2025-12-09T17:51:44.456000+01:00</updated>
    <author>
      <name>Alice_V</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/609259</uri>
    </author>
    <content>&lt;P class=""&gt;&lt;EM&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="unnamed (4).jpg" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350411i159705E00B82B76C/image-size/large?v=v2&amp;amp;px=999" role="button" title="unnamed (4).jpg" alt="unnamed (4).jpg" /&gt;&lt;/span&gt;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P class=""&gt;&lt;EM&gt;How I ported Zork to ABAP in one day and made 46-year reunion of two mainframe legends possible.&lt;/EM&gt;&lt;/P&gt;&lt;P class=""&gt;1979 was quite a year for the mainframe: In Germany, &lt;STRONG&gt;SAP &lt;/STRONG&gt;released &lt;STRONG&gt;R/2&lt;/STRONG&gt;, the integrated ERP system that would define enterprise computing. In Massachusetts, &lt;STRONG&gt;Infocom &lt;/STRONG&gt;was founded to commercialize &lt;STRONG&gt;Zork&lt;/STRONG&gt;, the text adventure born on MIT's PDP-10 mainframes.&lt;/P&gt;&lt;P class=""&gt;For 46 years, they ran on parallel tracks. Until last month.&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;Microsoft &lt;/STRONG&gt;&lt;A class="" href="https://opensource.microsoft.com/blog/2025/11/20/preserving-code-that-shaped-generations-zork-i-ii-and-iii-go-open-source" target="_self" rel="nofollow noopener noreferrer"&gt;released the original source code&lt;/A&gt; for Zork I. The stars aligned. It was time for a family reunion.&lt;/P&gt;&lt;P class=""&gt;I got nostalgic. I wanted to play Zork I: The Great Underground Empire. But I didn't want to play it in a browser or a terminal. I wanted to play it where I spend my time: In SAP GUI.&lt;/P&gt;&lt;P class=""&gt;So, I decided to port the Z-Machine (Infocom's Virtual Machine) into SAP S/4HANA.&lt;/P&gt;&lt;P class=""&gt;The Z-Namespace destiny... you knew it. In SAP development, every custom object must start with the letter Z: &lt;EM&gt;(Also Y, but Y is not used widely. And no one knows why Y is not used)&lt;/EM&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The Machine: &lt;STRONG&gt;Z&lt;/STRONG&gt;-Machine.&lt;/LI&gt;&lt;LI&gt;The Transaction: ZORK.&lt;/LI&gt;&lt;LI&gt;The Package: $ZORK.&lt;/LI&gt;&lt;/UL&gt;&lt;P class=""&gt;So it felt like it was meant to be here.&lt;/P&gt;&lt;H3 id="ember770" id="toc-hId-1895665953"&gt;Building a VM in One Day (The "How")&lt;/H3&gt;&lt;P class=""&gt;"&lt;EM&gt;Alice&lt;/EM&gt;," you say, "&lt;EM&gt;Writing a Virtual Machine in ABAP takes weeks of reading bit-level specs.&lt;/EM&gt;"&lt;/P&gt;&lt;P class=""&gt;It took &lt;STRONG&gt;one day&lt;/STRONG&gt;.&lt;/P&gt;&lt;P class=""&gt;And I wrote almost none of it:&lt;/P&gt;&lt;DIV class=""&gt;&amp;nbsp;&lt;/DIV&gt;&lt;DIV class=""&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ZORK T-CODE in SAP GUI" style="width: 872px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350406i8DBE61F8B148BACE/image-size/large?v=v2&amp;amp;px=999" role="button" title="zork-abap.png" alt="ZORK T-CODE in SAP GUI" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;ZORK T-CODE in SAP GUI&lt;/span&gt;&lt;/span&gt;&lt;/DIV&gt;&lt;H3 id="ember775" id="toc-hId-1699152448"&gt;99% Vibe coded&lt;/H3&gt;&lt;P class=""&gt;I used &lt;STRONG&gt;VSP (Vibing-Steampunk)&lt;/STRONG&gt; — my open-source bridge that gives &lt;STRONG&gt;Claude&lt;/STRONG&gt; (or Copilot/Codex/Mistral Vibe - any other Assistant) direct access to the SAP system via MCP. I treated the AI not as a chatbot, but as a Senior ABAP Developer who loves retro specs.&lt;/P&gt;&lt;P class=""&gt;Here is what happened when my Z-Machine crashed on the first turn:&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;Me:&lt;/STRONG&gt; "It crashes when I try to LOOK. Plz &lt;STRONG&gt;debug&lt;/STRONG&gt;."&lt;/P&gt;&lt;P class=""&gt;Claude didn't guess. Using VSP, Claude:&lt;/P&gt;&lt;P class=""&gt;&amp;nbsp;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Set a breakpoint&lt;/STRONG&gt; in the ABAP code.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Ran the game&lt;/STRONG&gt; inside SAP.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Inspected the memory&lt;/STRONG&gt; (finding a Big-Endian vs Little-Endian mismatch in the object table).&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Fixed the code.&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P class=""&gt;This isn't just generating text. This is &lt;STRONG&gt;Digital Archaeology&lt;/STRONG&gt; assisted by &lt;STRONG&gt;Artificial Intelligence&lt;/STRONG&gt;.&lt;/P&gt;&lt;H3 id="ember782" id="toc-hId-1502638943"&gt;Why This Matters&lt;/H3&gt;&lt;P class=""&gt;I now have Zork running in S/4HANA.&lt;/P&gt;&lt;P class=""&gt;But the real story isn't the game. It's the capability.&lt;/P&gt;&lt;P class=""&gt;If an AI agent can read a 1980s technical spec, navigate a custom ABAP stack, and debug runtime errors to reunite two pieces of 1979 history...&lt;/P&gt;&lt;P class=""&gt;...imagine what it can do for your 2005 legacy code ^_^ (Yes, even with ECC).&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The Repo (ZORK-ABAP): &lt;A class="" href="https://github.com/oisee/zork-abap" target="_self" rel="nofollow noopener noreferrer"&gt;https://github.com/oisee/zork-abap&lt;/A&gt;&lt;/LI&gt;&lt;LI&gt;The Tool (VSP): &lt;A class="" href="https://github.com/oisee/vibing-steampunk" target="_self" rel="nofollow noopener noreferrer"&gt;https://github.com/oisee/vibing-steampunk&lt;/A&gt; - ADT-to-MCP bridge.&lt;/LI&gt;&lt;/UL&gt;&lt;P class=""&gt;&lt;STRONG&gt;Credits:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Infocom (1979)&lt;/STRONG&gt; for the Z-Machine.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;SAP (1979)&lt;/STRONG&gt; for the R/2 legacy that led us here.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Graham Nelson &lt;/STRONG&gt;for the Z-Machine Standards Document.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Claude (2025)&lt;/STRONG&gt; for writing the code.&lt;/LI&gt;&lt;/UL&gt;&lt;P class=""&gt;&lt;EM&gt;P.S. West of House. There is a transport request here. &lt;/EM&gt;&lt;/P&gt;&lt;P class=""&gt;#SAP #ABAP #Zork #RetroGaming #AI #MCP #DigitalArchaeology #OpenSource #Microsoft&lt;/P&gt;&lt;P class=""&gt;Shout out to &lt;A class="" href="https://www.linkedin.com/in/shanselman/" target="_blank" rel="noopener nofollow noreferrer"&gt;Scott Hanselman&lt;/A&gt;: Tnx for driving Open Source initiative ^_^&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/you-are-standing-in-an-open-field-inside-sap-gui/ba-p/14287253"/>
    <published>2025-12-09T17:51:44.456000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/rap-based-adobeform-with-custom-action-and-annotations/ba-p/14281893</id>
    <title>RAP BASED ADOBEFORM WITH CUSTOM ACTION and Annotations</title>
    <updated>2025-12-10T07:53:48.802000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Introduction:&lt;/STRONG&gt;&lt;BR /&gt;In this blog, we explore how RAP and Adobe Forms can be integrated to deliver a fully digital, end-to-end document generation experience directly from Fiori. By leveraging custom actions, virtual elements, and media-stream handling, we can trigger Adobe Form generation from the UI, manage the file output within RAP, and enable users to download the PDF instantly—ensuring a clean, cloud-ready and future-proof architecture.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In modern SAP applications, combining &lt;STRONG&gt;RAP (RESTful ABAP Programming Model)&lt;/STRONG&gt; with Adobe Forms unlocks a clean, scalable way to generate and manage documents directly from Fiori. By extending the Fiori Elements UI with a custom action through the Integrative Extension Controller, we can trigger Adobe form generation seamlessly from the frontend. Using RAP virtual elements and media-stream properties, the generated PDF can be stored, retrieved, and downloaded. This approach delivers a fully end-to-end, cloud-ready solution for document creation, storage, and user-triggered actions—all built natively within &lt;STRONG&gt;RAP&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Root Entity:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED         // No authorization checks required for read access
@EndUserText.label: 'ROOT ENTITY FOR ADOBE FORM'         // Description for display in tools
@Metadata.ignorePropagatedAnnotations: true              // Avoid unwanted propagated annotations

define root view entity ZRV_AFORM 
  as select from vbap                                    // Based on VBAP (Sales Order Item Data)
{

  /*-----------------------------------------------------------
    Key Fields for RAP Root Entity
  -----------------------------------------------------------*/
  key vbeln,          // Sales Document Number
  posnr,              // Item Number
  matnr,              // Material Number

  /*-----------------------------------------------------------
    Display text: Shown in UI for SEGW/Fiori preview
    Not used for actual functionality, only for readability.
  -----------------------------------------------------------*/
  'Preview(SEGW)' as ShowPDF,

  /*-----------------------------------------------------------
    Dynamic URL to download the Adobe Form PDF
    Format:
      /sap/opu/odata/SAP/ZRAP_ADOBE_FORM_SRV/adobeSet('&amp;lt;VBELN&amp;gt;')/$value
    This URL triggers GET_STREAM in the OData service.
  -----------------------------------------------------------*/
  concat(
    '/sap/opu/odata/SAP/ZRAP_ADOBE_FORM_SRV/adobeSet(''',
    concat( vbeln, ''')') /$value'
  ) as LinkToPDF

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;OData Service:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Include &lt;STRONG&gt;vbeln&lt;/STRONG&gt; as a property in your entity type, and when the user provides a sales document number, the service should return the corresponding Adobe Form data in the response, implement &lt;STRONG&gt;GET_STREAM&lt;/STRONG&gt; Method .&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Implementation:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  METHOD /IWBEP/IF_MGW_APPL_SRV_RUNTIME~GET_STREAM.

    "---------------------------------------------------------------
    " Data Declarations
    "---------------------------------------------------------------
    DATA: lv_funcname   TYPE funcname,         " Generated FM name for Adobe Form
          ls_o_p        TYPE sfpoutputparams,  " Output parameters for Adobe Forms
          ls_formoutput TYPE fpformoutput,     " Adobe form output structure
          ls_stream     TYPE ty_s_media_resource,  " Stream returned to OData
          gv_bin_file   TYPE xstring.          " PDF binary data (unused variable)

    "---------------------------------------------------------------
    " Read Input Key from OData Request
    " Example: /sap/opu/odata/SRV/FormSet(vbeln='12345')/$value
    "---------------------------------------------------------------
    DATA(lv_vbeln) = VALUE vbeln_vl(
                        it_key_tab[ name = 'vbeln' ]-value OPTIONAL ).

    "---------------------------------------------------------------
    " STEP 1: Retrieve Adobe Form Generated Function Module
    "---------------------------------------------------------------
    TRY.
        CALL FUNCTION 'FP_FUNCTION_MODULE_NAME'
          EXPORTING
            i_name     = 'ZSALES_FORM_ITEMS'   " Adobe Form interface name
          IMPORTING
            e_funcname = lv_funcname.          " Generated FM name

        IF sy-subrc &amp;lt;&amp;gt; 0.
          RETURN.  " Stop processing if FM not found
        ENDIF.

        "-----------------------------------------------------------
        " STEP 2: Adobe Form Output Setup (Request PDF Only)
        "-----------------------------------------------------------
        ls_o_p-nodialog  = abap_true.   " No dialog popups
        ls_o_p-getpdf    = abap_true.   " Request PDF output
        ls_o_p-nopreview = abap_true.   " Skip preview

        " Open Adobe spool job
        CALL FUNCTION 'FP_JOB_OPEN'
          CHANGING
            ie_outputparams = ls_o_p
          EXCEPTIONS
            cancel          = 1
            usage_error     = 2
            system_error    = 3
            internal_error  = 4
            OTHERS          = 5.

      CATCH cx_root.
        " Ideally log or raise error
        RETURN.
    ENDTRY.

    "---------------------------------------------------------------
    " STEP 3: Call Adobe Form Generated Function Module
    "---------------------------------------------------------------
    CALL FUNCTION lv_funcname
      EXPORTING
        p_vbeln            = lv_vbeln         " Sales document number
      IMPORTING
        /1bcdwb/formoutput = ls_formoutput    " PDF Output (XSTRING)
      EXCEPTIONS
        usage_error        = 1
        system_error       = 2
        internal_error     = 3
        OTHERS             = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      RETURN.    " Handle form rendering errors
    ENDIF.

    "---------------------------------------------------------------
    " STEP 4: Close Adobe Print Job
    "---------------------------------------------------------------
    CALL FUNCTION 'FP_JOB_CLOSE'
      EXCEPTIONS
        usage_error    = 1
        system_error   = 2
        internal_error = 3
        OTHERS         = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      RETURN.
    ENDIF.

    "---------------------------------------------------------------
    " STEP 5: Populate OData Media Stream
    "---------------------------------------------------------------
    ls_stream-mime_type = 'application/pdf'.   " MIME type for PDF
    ls_stream-value     = ls_formoutput-pdf.   " XSTRING PDF data

    "---------------------------------------------------------------
    " STEP 6: Set Filename in Response Header
    "---------------------------------------------------------------
    DATA: ls_header   TYPE ihttpnvp,
          lv_filename TYPE string.

    " Dynamic file name e.g. SalesDoc_80001234.pdf
    lv_filename = |SalesDoc_{ lv_vbeln }.pdf|.

    ls_header-name  = 'Content-Disposition'.
    ls_header-value = |attachment; filename="{ lv_filename }"|.

    " Add header to OData HTTP response
    me-&amp;gt;set_header( is_header = ls_header ).

    "---------------------------------------------------------------
    " STEP 7: Return Stream to OData Framework
    "---------------------------------------------------------------
    CALL METHOD me-&amp;gt;copy_data_to_ref
      EXPORTING
        is_data = ls_stream
      CHANGING
        cr_data = er_stream.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Projection View:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;To expose the Adobe Form download link in the Fiori UI, I used a projection view with ui.lineItem and type: &lt;STRONG&gt;WITH_URL&lt;/STRONG&gt; so the PDF URL becomes directly clickable in the list and object page. The actual PDF content&amp;nbsp; BASE64&amp;nbsp; is not stored in the CDS view; instead,&lt;STRONG&gt; I used a RAP virtual element attach calculated by an ABAP class for Custom Action&lt;/STRONG&gt;. This virtual element lets me fetch and return the generated Adobe Form dynamically at runtime without persisting the binary in the database.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED          // No auth checks for read access
@EndUserText.label: 'PV FOR ADOBE FORM'                   // Description of the view
@Metadata.ignorePropagatedAnnotations: true               // Prevent annotation inheritance from base view

define root view entity ZPV_AFORM 
  as projection on ZRV_AFORM                               // Projection on RAP consumption view
{

  /*-----------------------------------------------------------
    Key Field: Sales Document (VBELN)
    Displayed in UI (List + Object Page)
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.facet: [{ type: #IDENTIFICATION_REFERENCE }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 10 }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{ position: 10 }]
  key vbeln,

  /*-----------------------------------------------------------
    Item Number
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 20 }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{ position: 20 }]
  posnr,

  /*-----------------------------------------------------------
    Material
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 30 }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{ position: 30 }]
  matnr,

  /*-----------------------------------------------------------
    PDF Link Column (UI: Display as clickable URL)
    This displays a clickable link "Show PDF" in the List Report.
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{
     position: 10,
     type: #WITH_URL,      // URL-enabled column
     url: 'LinkToPDF'      // Field used as hyperlink
  }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{
     position: 61,
     type: #WITH_URL,
     url: 'LinkToPDF'
  }]
  ShowPDF,                // UI label for the clickable link

  /*-----------------------------------------------------------
    URL Field - Populated in Behavior Implementation
    Used by Fiori to download/open the PDF.
  -----------------------------------------------------------*/
  LinkToPDF,

  /*-----------------------------------------------------------
    Virtual Field for Base64 PDF content
    RAP calculates this via ZCL_ADOBEFORMM class.
  -----------------------------------------------------------*/
  @ObjectModel.virtualElement: true
  @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_ADOBEFORMM'
  virtual attach : abap.string(0)     // Base64 PDF to be fetched on-demand

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Elements Implementation:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_adobeformm IMPLEMENTATION.

  METHOD if_sadl_exit_calc_element_read~calculate.

    " Internal table for virtual elements defined in projection view
    DATA: lt_virtual TYPE TABLE OF zpv_aform,
          lv_base64 TYPE string.

    " Move original RAP data into a working virtual table
    lt_virtual = CORRESPONDING #( it_original_data ).

    " Loop over each row to calculate the virtual element (Base64 PDF)
    LOOP AT lt_virtual INTO DATA(ls_virtual).

      " Get Sales Order number from the current row
      DATA(lv_vbeln) = ls_virtual-vbeln.

      " Create instance of Adobe Form handler class
      DATA(lo_inst) = NEW zcl_adobeform( ).

      " Call Adobe Form generator to get raw PDF (XSTRING)
      DATA(rv_pdf) = lo_inst-&amp;gt;get_data(
                        EXPORTING
                          p_vbeln = lv_vbeln     " Sales Order
                     ).

      " Convert PDF (XSTRING) → Base64 string, required for RAP media download
      CALL FUNCTION 'SCMS_BASE64_ENCODE_STR'
        EXPORTING
          input  = rv_pdf
        IMPORTING
          output = lv_base64.

      " Assign Base64 string to virtual element field
      ls_virtual-attach = lv_base64.

    ENDLOOP.

    " Move calculated data back to RAP consumption structure
    ct_calculated_data = CORRESPONDING #( lt_virtual ).

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;To retrieve the Adobe Form as an XSTRING, I implemented a dedicated ABAP class responsible for generating and returning the PDF content. The implementation code is as follows:&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  method GET_DATA.

    " Adobe Form name
    DATA(lv_form_name) = CONV tdsfname( 'ZSALES_FORM_ITEMS' ).

    " Name of the generated function module for the form
    DATA(lv_form_fm_name) = VALUE rs38l_fnam( ).

    " Structures for Adobe Form parameters
    DATA(ls_docparams)    = VALUE sfpdocparams( ).
    DATA(ls_outputparams) = VALUE sfpoutputparams( ).
    DATA(ls_formoutput)   = VALUE fpformoutput( ).

*--------------------------------------------------------------------*
*   STEP 1: Get the Generated Function Module of the Adobe Form
*--------------------------------------------------------------------*
    TRY.
        CALL FUNCTION 'FP_FUNCTION_MODULE_NAME'
          EXPORTING
            i_name     = lv_form_name          " Form name
          IMPORTING
            e_funcname = lv_form_fm_name.      " Generated FM name

      CATCH cx_fp_api INTO DATA(lx_fp_api).
        " Handle form API errors
        MESSAGE ID lx_fp_api-&amp;gt;msgid TYPE lx_fp_api-&amp;gt;msgty
                NUMBER lx_fp_api-&amp;gt;msgno
                WITH lx_fp_api-&amp;gt;msgv1 lx_fp_api-&amp;gt;msgv2
                     lx_fp_api-&amp;gt;msgv3 lx_fp_api-&amp;gt;msgv4.
        RETURN.
    ENDTRY.


*--------------------------------------------------------------------*
*   STEP 2: Prepare Output Parameters for PDF Generation
*--------------------------------------------------------------------*
    ls_outputparams-nodialog = 'X'.   " Avoid popup / preview dialog
    ls_outputparams-getpdf   = 'X'.   " Request PDF output only


*--------------------------------------------------------------------*
*   STEP 3: Open Adobe Form Spool Job
*--------------------------------------------------------------------*
    CALL FUNCTION 'FP_JOB_OPEN'
      CHANGING
        ie_outputparams = ls_outputparams
      EXCEPTIONS
        cancel          = 1
        usage_error     = 2
        system_error    = 3
        internal_error  = 4
        OTHERS          = 5.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      " Display error message and exit
      MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
              WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      RETURN.
    ENDIF.


*--------------------------------------------------------------------*
*   STEP 4: Call the Generated Adobe Form Function Module
*--------------------------------------------------------------------*
    CALL FUNCTION lv_form_fm_name
      EXPORTING
        /1BCDWB/DOCPARAMS  = ls_docparams    " Document parameters
        p_vbeln            = p_vbeln          " Sales document input
      IMPORTING
        /1BCDWB/FORMOUTPUT = ls_formoutput    " Output structure
      EXCEPTIONS
        USAGE_ERROR        = 1
        SYSTEM_ERROR       = 2
        INTERNAL_ERROR     = 3
        OTHERS             = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      " Errors during form rendering
      MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
              WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      RETURN.
    ENDIF.


*--------------------------------------------------------------------*
*   STEP 5: Close Adobe Form Spool Job
*--------------------------------------------------------------------*
    CALL FUNCTION 'FP_JOB_CLOSE'
      EXCEPTIONS
        usage_error    = 1
        system_error   = 2
        internal_error = 3
        OTHERS         = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      " Handle spool closing issues
      MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
              WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      RETURN.
    ENDIF.


*--------------------------------------------------------------------*
*   STEP 6: Return Base64 PDF string to RAP Virtual Element
*--------------------------------------------------------------------*
    rv_string = ls_formoutput-pdf.    " Base64 encoded PDF

  endmethod.&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;&lt;EM&gt;generate service definition and binding.&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;&lt;EM&gt;bind our service to list report.&lt;BR /&gt;&lt;BR /&gt;&lt;/EM&gt;&lt;/EM&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="harsha_reddy24_0-1764672827401.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347434iD5FFDE825C148890/image-size/medium?v=v2&amp;amp;px=400" role="button" title="harsha_reddy24_0-1764672827401.png" alt="harsha_reddy24_0-1764672827401.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;The link is highlighted in the UI, and when the user clicks it, the corresponding Adobe Form for that specific sales document is downloaded instantly.&lt;/LI&gt;&lt;LI&gt;&lt;P class="" align="left"&gt;Right click on web app and click on open guided development.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;We need custom action to be implemented.&lt;/LI&gt;&lt;LI&gt;Click on add a custom action.&lt;/LI&gt;&lt;LI&gt;Add necessary details and click on insert code snippet it will be added to manifest.json, it will add one more controller, where we can add our custom logic.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;To handle multi-PDF downloads from the List Report, I implemented a custom action in the controller extension. When the user selects one or more rows, a confirmation popup is shown using MessageBox.confirm. After the user confirms, the extension reads each selected entity via the OData model and retrieves the attach virtual element, which contains the Adobe Form as a Base64 string. The code then converts the Base64 into a PDF Blob and automatically triggers a download for each sales document, generating individual files such as Sales_Document_&amp;lt;VBELN&amp;gt;.pdf. This approach provides a smooth, scalable way to download multiple Adobe Forms directly from the Fiori UI without additional backend endpoints.&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;sap.ui.define([
    "sap/m/MessageToast",
    "sap/m/MessageBox"
], function (MessageToast, MessageBox) {
    "use strict";

    return {
        adf: function (oEvent) {

            // Get the SmartTable from the view
            var oSmartTable = this.getView().byId("listReport");
            if (!oSmartTable) {
                MessageToast.show("SmartTable not found");
                return;
            }

            // Get the inner table (GridTable/ResponsiveTable)
            var oTable = oSmartTable.getTable();
            if (!oTable || typeof oTable.getSelectedContexts !== "function") {
                // If table is not ready or does not support selection
                MessageToast.show("Table not ready or selection not supported");
                return;
            }

            // Get selected row contexts
            var aSelectedContexts = oTable.getSelectedContexts();
            if (aSelectedContexts.length === 0) {
                // User must select at least one row
                MessageToast.show("Please select at least one row.");
                return;
            }

            // Ask user for confirmation before downloading PDFs
            MessageBox.confirm("Do you want to download the selected PDF(s)?", {
                title: "Confirm Download",
                actions: [MessageBox.Action.OK, MessageBox.Action.CANCEL],

                onClose: function (oAction) {
                    if (oAction === MessageBox.Action.OK) {

                        // Get OData model
                        var oModel = this.getOwnerComponent().getModel();

                        // Loop through all selected rows
                        aSelectedContexts.forEach(function (oContext, index) {
                            var sPath = oContext.getPath();  // Entity path of the row

                            // Read entity to fetch Base64 PDF (virtual element)
                            oModel.read(sPath, {
                                success: function (odata) {

                                    // Extract Base64 string from response
                                    var base64String = odata.attach;

                                    try {
                                        // Convert Base64 → binary
                                        var binaryString = atob(base64String);
                                        var len = binaryString.length;
                                        var bytes = new Uint8Array(len);

                                        for (var i = 0; i &amp;lt; len; i++) {
                                            bytes[i] = binaryString.charCodeAt(i);
                                        }

                                        // Create Blob for PDF download
                                        var blob = new Blob([bytes], { type: "application/pdf" });

                                        // Create a temporary download link
                                        var link = document.createElement("a");
                                        link.href = URL.createObjectURL(blob);

                                        // File name: Sales_Document_&amp;lt;VBELN&amp;gt;.pdf
                                        link.download = "Sales_Document_" + odata.vbeln + ".pdf";

                                        // Trigger download
                                        document.body.appendChild(link);
                                        link.click();
                                        document.body.removeChild(link);

                                    } catch (e) {
                                        // Invalid Base64 or conversion failure
                                        MessageToast.show("Invalid base64 for: " + odata.vbeln);
                                    }
                                },

                                // Error while calling OData service
                                error: function () {
                                    MessageToast.show("Error fetching PDF for: " + sPath);
                                }
                            });
                        });
                    }
                }.bind(this)
            });
        }
    };
});&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="harsha_reddy24_1-1764673727896.png" style="width: 320px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347441i86766F8B44AFE42D/image-dimensions/320x169?v=v2" width="320" height="169" role="button" title="harsha_reddy24_1-1764673727896.png" alt="harsha_reddy24_1-1764673727896.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion:&lt;/STRONG&gt;&lt;BR /&gt;This end-to-end setup demonstrates how RAP, Adobe Forms, and Fiori Elements can work together seamlessly to deliver a modern document-generation experience. By leveraging virtual elements for XSTRING handling, URL-based PDF links, and a custom UI action for multi-file downloads, we can generate, expose, and retrieve Adobe Forms without any custom Gateway coding. The solution is clean, extensible, and fully aligned with SAP’s cloud-ready RAP architecture making it a practical template for building similar document-driven features in enterprise applications.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;Thanks For Reading, Good Wishes&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Connectivity/pd-p/266264953119842772207986043063520" class="lia-product-mention" data-product="313-1"&gt;ABAP Connectivity&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Development/pd-p/833755570260738661924709785639136" class="lia-product-mention" data-product="314-1"&gt;ABAP Development&lt;/a&gt;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+BTP+ABAP+environment/pd-p/73555000100800001164" class="lia-product-mention" data-product="11-1"&gt;SAP BTP ABAP environment&lt;/a&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/rap-based-adobeform-with-custom-action-and-annotations/ba-p/14281893"/>
    <published>2025-12-10T07:53:48.802000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/sap-rap-data-modeling-handling-virtual-fields-with-amdp-and-table-functions/ba-p/14220974</id>
    <title>SAP RAP Data Modeling: Handling Virtual Fields with AMDP and Table Functions</title>
    <updated>2025-12-10T08:30:29.592000+01:00</updated>
    <author>
      <name>manijangiti</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2174619</uri>
    </author>
    <content>&lt;P&gt;Hi all,&lt;/P&gt;&lt;P&gt;In SAP RAP development, it is common to work with fields that should not be physically stored in database tables but must still appear in the service output. Such fields are often required for real-time calculations, business validations, or UI-level display logic.&lt;/P&gt;&lt;P&gt;This blog demonstrates two powerful techniques to handle these derived fields:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Table Functions (AMDP)&lt;/STRONG&gt; for database-side calculations&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt; for ABAP-based runtime logic&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;To make the concept relatable, we use a simple &lt;STRONG&gt;Student Marks Management&lt;/STRONG&gt; scenario where:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Total Marks&lt;/STRONG&gt; is calculated using a Table Function (AMDP)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Pass/Fail Status&lt;/STRONG&gt; is determined using Virtual Elements&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This article will walk you through all necessary components—including CDS view entities, AMDP class implementation, RAP behavior definition, and the virtual element class.&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;I am implementing this requirement using two approaches:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Table Function&lt;/STRONG&gt; for calculating &lt;STRONG&gt;Total Marks&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Field&lt;/STRONG&gt; for determining &lt;STRONG&gt;Status&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Both methods will be covered in this blog.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 1: Create a new database table to store student information.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1758181540341.png" style="width: 728px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316300i9468610271916E46/image-dimensions/728x354?v=v2" width="728" height="354" role="button" title="manijangiti_0-1758181540341.png" alt="manijangiti_0-1758181540341.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Code:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@EndUserText.label : 'Student Information'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zstudent_info {
  key client : abap.clnt not null;
  key id     : zstudentid_de not null;
  name       : abap.char(50);
  class      : abap.int4;
  telugu     : abap.int4;
  hindi      : abap.int4;
  english    : abap.int4;
  maths      : abap.int4;
  science    : abap.int4;
  social     : abap.int4;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Step 2: Create a Table Function&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Real-time Use Case for Table Function&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In a Student Marks Management System, Total Marks are calculated dynamically across subjects without storing the result physically. A Table Function, implemented with AMDP and SQLScript, performs this calculation efficiently in the database, improving performance and keeping the data model clean by avoiding redundant storage.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1758184577411.png" style="width: 727px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316310i4D78C5951FDCB9E9/image-dimensions/727x501?v=v2" width="727" height="501" role="button" title="manijangiti_0-1758184577411.png" alt="manijangiti_0-1758184577411.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;For now, I am adding only the Total Marks field to implement the AMDP approach.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@EndUserText.label: 'Student Info with Total Marks'
define table function ZTABLE_FUNCTION_STUDENT
  with parameters
    @Environment.systemField: #CLIENT
    p_client : abap.clnt
  returns {
    client     : abap.clnt;
    id         : zstudentid_de;
    name       : abap.char(50);
    class      : abap.int4;
    telugu     : abap.int4;
    hindi      : abap.int4;
    english    : abap.int4;
    maths      : abap.int4;
    science    : abap.int4;
    social     : abap.int4;
    totalmarks : abap.int4;     // 🆕 Calculated field
  }
  implemented by method ZCL_TABLE_FUNC_STUDENT=&amp;gt;get_total_data;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Step 3: Now create a class ZCL_TABLE_FUNC_STATUS to implement the logic for calculating Total Marks.&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Example Code:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;CLASS zcl_table_func_student DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC.
  PUBLIC SECTION.
    INTERFACES if_amdp_marker_hdb.
    " Table function method declaration
    CLASS-METHODS get_total_data
      FOR TABLE FUNCTION ztable_function_student.
ENDCLASS.
CLASS zcl_table_func_student IMPLEMENTATION.
  METHOD get_total_data
    BY DATABASE FUNCTION
    FOR HDB
    LANGUAGE SQLSCRIPT
    OPTIONS READ-ONLY
    USING zstudent_info.
    RETURN
      SELECT
        client,
        id,
        name,
        class,
        telugu,
        hindi,
        english,
        maths,
        science,
        social,
        telugu + hindi + english + maths + science + social AS totalmarks
      FROM zstudent_info
      WHERE client = :p_client;
  ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Step 4: Execute and test the code by pressing F8 On Table Function.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Output:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_1-1758185047368.png" style="width: 698px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316311i5854F2CCAE027181/image-dimensions/698x396?v=v2" width="698" height="396" role="button" title="manijangiti_1-1758185047368.png" alt="manijangiti_1-1758185047368.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Now I am going with &lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Virtual elements are defined using annotations such as:&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@ObjectModel.virtualElement: true
@ObjectModel.virtualElementCalculatedBy: 'ABAP:className'&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;The logic for the virtual element is implemented in the specified ABAP class.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Now I am creating the Root View&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1758186312865.png" style="width: 750px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316327iFC909F4BEC0D7817/image-dimensions/750x386?v=v2" width="750" height="386" role="button" title="manijangiti_0-1758186312865.png" alt="manijangiti_0-1758186312865.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Student Info with Status'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType: {
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define root view entity zstudent_info_view
  as select from ZTABLE_FUNCTION_STUDENT( p_client : $session.client )
{
  key id         as Id,
      name       as Name,
      class      as Class,
      telugu     as Telugu,
      hindi      as Hindi,
      english    as English,
      maths      as Maths,
      science    as Science,
      social     as Social,
      totalmarks as TotalMarks,
      @ObjectModel.virtualElement: true
      @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_ELEMENT_CALCC'
      @EndUserText.label: 'Pass/Fail Status'
      cast( '' as abap.char(10) ) as Status
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Root View Code :&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Root View'
@Metadata.ignorePropagatedAnnotations: true
define root view entity zstudent_info_view_root as select from zstudent_info_view
{

 key Id as Id,
 Name as Name,
 Class as Class,
 Telugu as Telugu,
 Hindi as Hindi,
 English as English,
 Maths as Maths,
 Science as Science,
 Social as Social,
 TotalMarks as TotalMarks,
      @ObjectModel.virtualElement: true
      @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_ELEMENT_CALCC'
      @EndUserText.label: 'Pass/Fail Status'
      cast( '' as abap.char(10) ) as Status
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Projection View Code :&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Projection View'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity ZSTUDENT_INFO_VIEW_ROOT_Pro as projection on zstudent_info_view_root
{


//@Consumption.valueHelpDefinition: [
//   { entity: {
//               name: 'ZSTUDENT_INFO_VIEW_ROOT',
//               element: 'ID'
//       } }
//   ]

   key Id,
//  @Consumption.valueHelpDefinition: [
//   { entity: {
//               name: 'ZSTUDENT_INFO_VIEW_ROOT',
//               element: 'Name'
//       } }
//   ]

    Name,

    Class,


    Telugu,

 
    Hindi,

   
    English,

   
    Maths,


    Science,

    Social,
    
    TotalMarks,       // Virtual field
    @ObjectModel.virtualElement: true
      @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_ELEMENT_CALCC'
      @EndUserText.label: 'Pass/Fail Status'
    Status            // Virtual field (Pass/Fail)
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;Definition of behavior for the root view&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_student_info_view_root unique;
strict ( 2 );

define behavior for zstudent_info_view_root alias student
  persistent table zstudent_informa
  lock master
  authorization master ( instance )
// etag master &amp;lt;field_name&amp;gt; " Uncomment if using ETag for concurrency control
{
  create;
  update;
  delete;
  field ( readonly ) TotalMarks, Status;

  mapping for zstudent_informa
  {
    Id      = id;
    Name    = name;
    Class   = class;
    Telugu  = telugu;
    Hindi   = hindi;
    English = english;
    Maths   = maths;
    Science = science;
    Social  = social;
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Create classes for the root view and projection view.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1761548831424.png" style="width: 580px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332796i891247D0979D4C71/image-dimensions/580x370?v=v2" width="580" height="370" role="button" title="manijangiti_0-1761548831424.png" alt="manijangiti_0-1761548831424.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Create a class and logic for the virtual element.&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_virtual_element_calcc DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC.
  PUBLIC SECTION.
    INTERFACES if_sadl_exit_calc_element_read.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.

CLASS zcl_virtual_element_calcc IMPLEMENTATION.

  METHOD if_sadl_exit_calc_element_read~calculate.

    CHECK NOT it_original_data IS INITIAL.

    DATA lt_calculated_data TYPE STANDARD TABLE OF zstudent_info_view WITH DEFAULT KEY.

    MOVE-CORRESPONDING it_original_data TO lt_calculated_data.

    LOOP AT lt_calculated_data ASSIGNING FIELD-SYMBOL(&amp;lt;student&amp;gt;).

      " Calculate TotalMarks by summing all subject marks
*      &amp;lt;student&amp;gt;-totalmarks = &amp;lt;student&amp;gt;-telugu
*                           + &amp;lt;student&amp;gt;-hindi
*                           + &amp;lt;student&amp;gt;-english
*                           + &amp;lt;student&amp;gt;-maths
*                           + &amp;lt;student&amp;gt;-science
*                           + &amp;lt;student&amp;gt;-social.

      " Check if any subject marks are less than 25
*      IF &amp;lt;student&amp;gt;-telugu &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-hindi  &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-english &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-maths &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-science &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-social &amp;lt; 25.
*        &amp;lt;student&amp;gt;-status = 'Failed'.
*      ELSE.
*          &amp;lt;student&amp;gt;-status = 'Passed'.
**        ENDIF.
*      ENDIF.
      IF &amp;lt;student&amp;gt;-totalmarks &amp;gt; 250 .
       &amp;lt;student&amp;gt;-status = 'Passed'.
       ELSE.
       &amp;lt;student&amp;gt;-status = 'Failed'.
ENDIF.


    ENDLOOP.

    MOVE-CORRESPONDING lt_calculated_data TO ct_calculated_data.

  ENDMETHOD.

  METHOD if_sadl_exit_calc_element_read~get_calculation_info.

    " Tell framework which fields you need from original data
    et_requested_orig_elements = VALUE #( BASE et_requested_orig_elements
                                          ( CONV #( 'TELUGU' ) )
                                          ( CONV #( 'HINDI' ) )
                                          ( CONV #( 'ENGLISH' ) )
                                          ( CONV #( 'MATHS' ) )
                                          ( CONV #( 'SCIENCE' ) )
                                          ( CONV #( 'SOCIAL' ) )
                                          ( CONV #( 'TOTALMARKS' ) )
                                        ).

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Now, create a service definition for the projection view and bind the service.&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_1-1761553513670.png" style="width: 711px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332889i128C5CA6829A447E/image-dimensions/711x123?v=v2" width="711" height="123" role="button" title="manijangiti_1-1761553513670.png" alt="manijangiti_1-1761553513670.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_2-1761553556091.png" style="width: 661px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332890i41FD980B1426340F/image-dimensions/661x233?v=v2" width="661" height="233" role="button" title="manijangiti_2-1761553556091.png" alt="manijangiti_2-1761553556091.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Now, we are able to see the virtual element output field in the web application.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_3-1761553739515.png" style="width: 633px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332891i6ECD6CEE5A34D071/image-dimensions/633x304?v=v2" width="633" height="304" role="button" title="manijangiti_3-1761553739515.png" alt="manijangiti_3-1761553739515.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H1 id="toc-hId-1631757642"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;This blog demonstrated how to enrich a RAP data model using both &lt;STRONG&gt;Table Functions&lt;/STRONG&gt; and &lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt;, allowing you to compute fields dynamically without storing redundant values in the database.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Table Functions (AMDP)&lt;/STRONG&gt; perform high-performance calculations on the HANA database, such as Total Marks.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt; allow ABAP-based runtime logic for UI-visible derived fields like Pass/Fail Status.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;By combining these methods, you achieve a clean, efficient, and scalable RAP model that supports real-time business calculations while keeping the underlying data model simple and maintainable.&lt;/P&gt;&lt;P&gt;This approach can be extended for validations, analytical measures, financial calculations, or any scenario where derived fields should remain virtual yet visible in the application layer.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Development/pd-p/833755570260738661924709785639136" class="lia-product-mention" data-product="314-1"&gt;ABAP Development&lt;/a&gt;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Connectivity/pd-p/266264953119842772207986043063520" class="lia-product-mention" data-product="313-1"&gt;ABAP Connectivity&lt;/a&gt;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+BTP+ABAP+environment/pd-p/73555000100800001164" class="lia-product-mention" data-product="11-1"&gt;SAP BTP ABAP environment&lt;/a&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/sap-rap-data-modeling-handling-virtual-fields-with-amdp-and-table-functions/ba-p/14220974"/>
    <published>2025-12-10T08:30:29.592000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/artificial-intelligence-blogs-posts/abap-meets-ai-my-hands-on-experience-with-sap-s-abap-sdk-for-llm/ba-p/14285453</id>
    <title>ABAP Meets AI: My Hands-On Experience with SAP’s ABAP SDK for LLM Integration</title>
    <updated>2025-12-10T14:31:42.806000+01:00</updated>
    <author>
      <name>SreekanthKrishn</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/132462</uri>
    </author>
    <content>&lt;P&gt;Exciting news for ABAP developers!&lt;/P&gt;&lt;P&gt;SAP has introduced the ABAP SDK powered by ISLM, enabling ABAP developers to access LLMs via SAP AI Core. This breakthrough allows ABAP programs to integrate generative AI directly into the S/4HANA core, delivering seamless AI capabilities.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1637442855"&gt;&lt;FONT color="#0000FF"&gt;&lt;STRONG&gt;Introduction of ABAP SDK Powered by ISLM for LLM Integration&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H1&gt;&lt;P&gt;Late in 2025, SAP introduced the ABAP SDK powered by ISLM, marking a significant advancement for ABAP developers. With this release, for the first time, ABAP programs can seamlessly connect to large language models (LLMs) configured through SAP AI Core. This integration empowers developers to incorporate generative AI capabilities directly within ABAP, unlocking new possibilities for automation, intelligence, and efficiency.&lt;/P&gt;&lt;P&gt;This development represents a groundbreaking innovation for the SAP ecosystem. By embedding AI capabilities directly into the S4 Core, organizations can now leverage advanced AI-powered features natively in their business processes. The seamless integration ensures that generative AI is no longer a side-by-side add-on, but an intrinsic part of the S4HANA environment, enhancing both the power and flexibility available to ABAP developers.&lt;/P&gt;&lt;P&gt;I’ve had the chance to try it out, and being an ABAPer, it’s quite fascinating.&lt;/P&gt;&lt;P&gt;The first use case I wanted to implement was a summarization utility, to test the LLM capabilities within ABAP. To do this, I created an RAP-based program containing lengthy text and utilized LLM to condense it into a meaningful summary. Essentially, I connected the ABAP system to AI Core, which then links to the LLM for summarization. While there are many LLM APIs and functions available from SAP, I started with the basic ones for this initial test. In the upcoming phases, I’ll explore other APIs and functions and share those insights as well.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1440929350"&gt;&lt;FONT color="#0000FF"&gt;&lt;STRONG&gt;General Concepts and availability&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H1&gt;&lt;P&gt;The ABAP AI SDK leverages SAP ISLM to create models that access LLMs configured in SAP AI Core on SAP BTP. This setup allows users to select specific LLM models and versions, effectively integrating SAP AI launchpad features for configuring core LLM models directly within ISLM.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_0-1765180319481.jpeg" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349547iBD28617FDDCBA8A7/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_0-1765180319481.jpeg" alt="SreekanthKrishn_0-1765180319481.jpeg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The ABAP AI SDK powered by ISLM is available in:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;SAP BTP ABAP Environment&amp;nbsp;&lt;/LI&gt;&lt;LI&gt;SAP S/4HANA Cloud Public Edition&amp;nbsp;&lt;/LI&gt;&lt;LI&gt;SAP S/4HANA Cloud Private Edition and OnPrem as of release 2025 via standard delivery.&lt;/LI&gt;&lt;LI&gt;S4 HANA private cloud version and on-premise 2021 onwards are supported via Transport-based Correction Instructions (TCI), see details in&amp;nbsp;&lt;A href="https://me.sap.com/notes/3513374" target="_blank" rel="noopener noreferrer"&gt;SAP Note 3513374&lt;/A&gt;.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Please refer this blog (&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/joule-speaks-abap/ba-p/14018226" target="_blank"&gt;Joule speaks ABAP! - SAP Community&lt;/A&gt;) by Alexander for details on the availability.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1244415845"&gt;&lt;FONT color="#0000FF"&gt;&lt;STRONG&gt;Configuration and Setup&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H1&gt;&lt;P&gt;In this section, we’ll walk through the essential steps needed to set up the ABAP LLM integration. We’ll cover everything from the initial environment setup and prerequisites to the detailed configuration steps. By the end, you’ll have a fully functional integration ready for your ABAP environment. &amp;nbsp;Please refer sap help document &lt;A href="https://help.sap.com/docs/abap-ai/generative-ai-in-abap-cloud/developing-your-own-ai-enabled-applications" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/abap-ai/generative-ai-in-abap-cloud/developing-your-own-ai-enabled-applications&lt;/A&gt; for complete details and further information on APIs.&lt;/P&gt;&lt;H2 id="toc-hId-1176985059"&gt;&lt;FONT color="#339966"&gt;My System details&lt;/FONT&gt;&lt;/H2&gt;&lt;UL&gt;&lt;LI&gt;System - S4 HANA public cloud instance.&lt;/LI&gt;&lt;LI&gt;LLM used – openAI, gpt-4o-mini, 2024-07-18&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId-980471554"&gt;&lt;FONT color="#339966"&gt;Prerequisites&lt;/FONT&gt;&lt;/H2&gt;&lt;UL&gt;&lt;LI&gt;SAP AI Core Service subscribed, and instance created (please refer step 4 of my &lt;A href="https://community.sap.com/t5/artificial-intelligence-blogs-posts/transform-your-genai-based-btp-experience-digital-assistant-with-data/ba-p/13941052" target="_blank"&gt;blog&lt;/A&gt; to get details).&lt;/LI&gt;&lt;LI&gt;Eclipse with SAP ADT installed and connected to S4 HANA instance.&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId-783958049"&gt;&lt;FONT color="#339966"&gt;&lt;STRONG&gt;Summary of Configuration Steps&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H2&gt;&lt;TABLE width="648"&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;Step&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;&lt;STRONG&gt;Activity&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;&lt;STRONG&gt;System&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;&lt;STRONG&gt;Application/Details&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;1&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Get S4 HANA system certificate&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;S4 HANA public Cloud (ABAP system)&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;Maintain client certificates App&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;2&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Create new service key for AI Core&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;SAP BTP&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;SAP AI Core instance&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;3&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Communication system setup&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;S4 HANA public Cloud (ABAP system)&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;Communication System App&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;4&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Communication Arrangements setup&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;S4 HANA public Cloud (ABAP system)&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;Communication Arrangements App&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;5&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Create Intelligent Scenario&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;Eclipse ADT&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;ABAP Perspective&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;6&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Create intelligent scenario model&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;Eclipse ADT&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;ABAP Perspective&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;7&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Develop the RAP program&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;Eclipse ADT&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;ABAP Perspective&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;8&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Define the prompt&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;Eclipse ADT&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;Behavior implementation class&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;9&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Call ISLM scenario&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;Eclipse ADT&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;Behavior implementation class&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="48"&gt;&lt;P&gt;&lt;STRONG&gt;10&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD width="237"&gt;&lt;P&gt;Test the output&lt;/P&gt;&lt;/TD&gt;&lt;TD width="129"&gt;&lt;P&gt;Eclipse ADT&lt;/P&gt;&lt;/TD&gt;&lt;TD width="234"&gt;&lt;P&gt;Business service binding&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Let's now dive into the specifics of each step.&lt;/P&gt;&lt;H3 id="toc-hId-716527263"&gt;&lt;FONT color="#808080"&gt;1. Fetch the SAP ABAP System Client Default Certificate&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;This certificate is necessary to enable connectivity between the SAP AI Core instance on SAP BTP and the backend ABAP system. Please refer to the following help documentation for additional information.&lt;/P&gt;&lt;P&gt;&lt;A href="https://help.sap.com/docs/SAP_S4HANA_CLOUD/a630d57fc5004c6383e7a81efee7a8bb/fd682bfef603494b9023b1f1b93f27e0.html" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/SAP_S4HANA_CLOUD/a630d57fc5004c6383e7a81efee7a8bb/fd682bfef603494b9023b1f1b93f27e0.html&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_1-1765180319485.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349546i89AB1FA50BD5BBFA/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_1-1765180319485.png" alt="SreekanthKrishn_1-1765180319485.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-520013758"&gt;&lt;FONT color="#808080"&gt;2. BTP Service Key and link to the ABAP system using certificate.&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;During this step, find the SAP AI core instance you set up in SAP BTP and generate a new service key for it.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_2-1765180319488.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349548iD94279D5DCCFB52E/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_2-1765180319488.png" alt="SreekanthKrishn_2-1765180319488.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;When generating the key, make sure to populate the “certificate” parameter with the value obtained from the certificate you downloaded from the ABAP system in the previous step.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_3-1765180319495.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349549i5F188F9E0D431A55/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_3-1765180319495.png" alt="SreekanthKrishn_3-1765180319495.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-323500253"&gt;&lt;FONT color="#808080"&gt;3. Communication system setup&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;In this step, we need to create a communication system in the S4 HANA ABAP instance by using FIORI app “Communication System”. Please use the values generated in the newly created key in the step above to fill parameters. Details of values to be used and steps are mentioned in below SAP help. Please note that wherever you are maintaining the hyperlink, remove the “https://”.&lt;/P&gt;&lt;P&gt;&lt;A href="https://help.sap.com/docs/SAP_S4HANA_CLOUD/a630d57fc5004c6383e7a81efee7a8bb/0d8de8180954443db83a2ceb127b8734.html" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/SAP_S4HANA_CLOUD/a630d57fc5004c6383e7a81efee7a8bb/0d8de8180954443db83a2ceb127b8734.html&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_4-1765180319500.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349550iD6EC4B96C23183F5/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_4-1765180319500.png" alt="SreekanthKrishn_4-1765180319500.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_5-1765180319504.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349551i76779C3850EC8CC5/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_5-1765180319504.png" alt="SreekanthKrishn_5-1765180319504.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_6-1765180319508.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349554iB711C4B2E92C2474/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_6-1765180319508.png" alt="SreekanthKrishn_6-1765180319508.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-126986748"&gt;&lt;FONT color="#808080"&gt;4. Communication Arrangement setup.&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Now that the communication system is set up, next step is to connect thus communication system to a communication arrangement. Please use the SAP provided scenario ID: &amp;nbsp;SAP_COM_0A69 (SAP AI Core - GenAI - Customer Outbound Integration) and use the communication system which was setup in the previous step. Details can be found in the help below.&lt;/P&gt;&lt;P&gt;&lt;A href="https://help.sap.com/docs/SAP_S4HANA_CLOUD/a630d57fc5004c6383e7a81efee7a8bb/16d3b0ed27b64bebb4f1ccdac7663ba0.html" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/SAP_S4HANA_CLOUD/a630d57fc5004c6383e7a81efee7a8bb/16d3b0ed27b64bebb4f1ccdac7663ba0.html&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_7-1765180319512.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349553iEEF45C90CD1AE14E/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_7-1765180319512.png" alt="SreekanthKrishn_7-1765180319512.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_8-1765180319513.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349552i548E402DFC9EF983/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_8-1765180319513.png" alt="SreekanthKrishn_8-1765180319513.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId--144758126"&gt;&lt;FONT color="#808080"&gt;5. Create Intelligent Scenario in Eclipse.&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;By now, we have completed the connection between BTP and ABAP system. Next step would be to create the ISLM scenario to connect the AI core with the ABAP system.&lt;/P&gt;&lt;P&gt;You can do this by logging into your ABAP system via Eclipse ADT and selecting option create intelligent scenarios. Details in the help below.&lt;/P&gt;&lt;P&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-development-tools-user-guide/creating-intelligent-scenarios" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/abap-cloud/abap-development-tools-user-guide/creating-intelligent-scenarios&lt;/A&gt;&lt;/P&gt;&lt;P&gt;In here, you may choose SAPGENAI as the type and technology as SIDEBYSIDE.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_9-1765180319523.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349560iA58137019691D4A7/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_9-1765180319523.png" alt="SreekanthKrishn_9-1765180319523.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId--341271631"&gt;&lt;FONT color="#808080"&gt;6. Create intelligent scenario model.&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;The intelligent scenario that has been created now requires linkage to a model. Please select the scenario developed in the previous step and then choose the appropriate LLM models and versions.&lt;/P&gt;&lt;P&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-development-tools-user-guide/creating-intelligent-scenario-models" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/abap-cloud/abap-development-tools-user-guide/creating-intelligent-scenario-models&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_10-1765180319530.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349559i501067FC5AAE1A3A/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_10-1765180319530.png" alt="SreekanthKrishn_10-1765180319530.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId--537785136"&gt;&lt;FONT color="#808080"&gt;7. Develop the RAP program&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;In here, I have developed a simple managed RAP based program to fetch entries from a table. I have created a service definition and binding with UI to test the app.&lt;/P&gt;&lt;P&gt;I developed an implementation based on the behavior definition, and all of the following source code originates from that behavior definition class. &amp;nbsp;I have created a button for summarizing the selected row. This code is implemented in the button event handler method.&lt;/P&gt;&lt;H3 id="toc-hId--734298641"&gt;&lt;FONT color="#808080"&gt;8. Prompt Definition.&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Designing a prompt is essential for each AI use case. &amp;nbsp;Since I am using LLM/AI to summarize a text, I have used the prompt below in the behavior implementation class.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_11-1765180319533.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349558i392FE737841EF4BF/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_11-1765180319533.png" alt="SreekanthKrishn_11-1765180319533.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId--930812146"&gt;&lt;FONT color="#808080"&gt;9. Create instance and call the ISLM instance from ABAP Program.&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Now, use this prompt to create and an instance of ISLM model. Use CL_AIC_ISLM_COMPL_API_FACTORY=&amp;gt;GET to obtain a factory instance (IF_AIC_ISLM_COMPL_API_FACTORY). Then call CREATE_INSTANCE on the factory, passing only the intelligent scenario name. This returns a new completion API instance (IF_AIC_COMPLETION_API), as the scenario contains all connection and model details.&lt;/P&gt;&lt;P&gt;The completion AI can be called by using the method execute_for_string &amp;nbsp;as shown below, which responds the result as type string in variable “result”.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_12-1765180319539.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349562iD4379041C2FFD8EE/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_12-1765180319539.png" alt="SreekanthKrishn_12-1765180319539.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Once the result is available from LLM, I will use that text to update the table back with the summarized description.&lt;/P&gt;&lt;H3 id="toc-hId--1127325651"&gt;&lt;FONT color="#808080"&gt;10. Final Output and Testing&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Here is the final output. You can see that once we click on “Fill Summary”, it calls the LLM, summarizes the long description and populates that into the short description field.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_13-1765180319544.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349563i65F3116B07841664/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_13-1765180319544.png" alt="SreekanthKrishn_13-1765180319544.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="SreekanthKrishn_14-1765180319549.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349564i90D4DF765E35C1D5/image-size/large?v=v2&amp;amp;px=999" role="button" title="SreekanthKrishn_14-1765180319549.png" alt="SreekanthKrishn_14-1765180319549.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--737033142"&gt;&lt;FONT color="#339966"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H1&gt;&lt;P&gt;Integrating LLMs directly into ABAP makes life much easier for developers, removing the need to learn entirely new technologies. Now, ABAP developers can use LLMs within their familiar environment, making it simpler to unlock new possibilities and drive innovation.&lt;/P&gt;&lt;P&gt;&lt;FONT color="#0000FF"&gt;Stay tuned, I will be sharing new blogs soon, exploring even more advanced uses of the ABAP SDK.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/artificial-intelligence-blogs-posts/abap-meets-ai-my-hands-on-experience-with-sap-s-abap-sdk-for-llm/ba-p/14285453"/>
    <published>2025-12-10T14:31:42.806000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/create-deep-entity-using-rap-managed/ba-p/14219483</id>
    <title>Create Deep Entity Using Rap (Managed)</title>
    <updated>2025-12-12T08:39:03.978000+01:00</updated>
    <author>
      <name>reddysekharapathipati</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2189357</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Introduction:&lt;/STRONG&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;In the world of SAP development, the &lt;STRONG&gt;RESTful Application Programming (RAP)&lt;/STRONG&gt; model offers a modern and efficient approach for building scalable, data-driven applications. This blog explores the process of creating a &lt;EM&gt;deep entity&lt;/EM&gt; within the RAP framework, specifically focusing on the structure of header and item tables and their associated projection views. We'll break down the core concepts of root and item entities, along with service and behavior definitions, to demonstrate how these components come together to manage employee data effectively.&lt;/P&gt;&lt;P&gt;Whether you're a seasoned SAP developer or just beginning to explore RAP, this guide will provide step-by-step instructions for creating and editing entries in the system, helping you streamline your development process. You'll also find helpful links to further resources and the author's professional profiles, enabling you to expand your knowledge and connect with the broader SAP community.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;BR /&gt;This blog outlines the creation of a deep entity using the RAP (RESTful Application Programming) model, detailing the structure of header and item tables, as well as their associated projection views. It includes definitions for root and item entities, service definitions, and behavior definitions for managing employee data. Additionally, it provides instructions for creating and editing entries in the system, with links to the author's professional profiles and resources.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;HEADER TABLE:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Employee table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #ALLOWED

define table zemptable {

key client : abap.clnt not null;
key empid : zv_id not null;
firstname : abap.char(50);
lastname : abap.char(50);
dateofbirth : abap.dats;
gender : zgendar;
department : abap.char(30);
@Semantics.amount.currencyCode : 'zemptable.currency'
salary : abap.curr(13,2);
currency : abap.cuky;
email : abap.char(100);
phone_number : abap.char(20);

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;ITEM TABLE:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'emp item table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #ALLOWED

define table zemp_itemtable {

key client : abap.clnt not null;
@AbapCatalog.foreignKey.screenCheck : false
key emp_id : zv_id not null
with foreign key [1..1] zemptable
where empid = zemp_itemtable.emp_id;

key item_id : abap.int8 not null;
item_type : abap.char(30);
item_desc : abap.char(100);
assign_date : abap.dats;
return_date : abap.dats;
status : abap.char(10);
remarks : abap.char(255);
created_by : abap.char(12);
created_on : abap.dats;
changed_by : abap.char(12);
changed_on : abap.dats;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;ROOT ENTITY:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label : 'Root entity for header'
@Metadata.ignorePropagatedAnnotations: true

define root view entity ZRS_EMP_HDR as select from zemptable
composition [0..*] of Zcom_emptable as _child
{
key empid,
firstname,
lastname,
department,
gender,
_child
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;ITEM ENTITY:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'EMPLOY ITEM'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType: {
serviceQuality: #X,
sizeCategory: #XS,
dataClass: #MIXED
}

define view entity Zcom_emptable as select from zemp_itemtable
association to parent ZRS_EMP_HDR as _parent on $projection.empid = _parent.empid
{
key emp_id as empid,
key item_id as itemid,
item_type as itemtype,
item_desc as itemdesc,
status as status,
remarks as remarks,
_parent
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;HEADER PROJECTION VIEW :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Projection view for HDR'
define root view entity ZPU_roothdr as projection on ZRS_EMP_HDR
{
UI.facet: [{
type: #COLLECTION,
id: 'emptable',
label: 'emptable',
purpose: #STANDARD }
],
UI.lineItem: [{
type: #STANDARD,
targetElement: 'details',
label: 'Employee Full Details'}
],
UI.identification: [{
type: #IDENTIFICATION_REFERENCE,
targetElement: 'emptable',
position: 10,
label: 'Employee Information'}
],

@UI.lineItem ( [label: 'EmpId', position: 10 ] )
empid,
@UI.lineItem ( [label: 'Firstname', position: 20 ] )
firstname,
@UI.lineItem ( [label: 'Lastname', position: 30 ] )
lastname,
@UI.lineItem ( [label: 'Age', position: 40 ] )
age,
@UI.lineItem ( [label: 'Department', position: 50 ] )
department,
@UI.lineItem ( [label: 'Gender', position: 60 ] )
gender,
identification,

/* Associations */
_child : redirected to composition child ZRS_empitem
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;ITEM PROJECTION VIEW :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'employ item table'
@Metadata.ignorePropagatedAnnotations: true
define view entity ZRS_empitem as projection on Zcom_emptable
{
@UI.facet: [{
purpose: #STANDARD,
type: #IDENTIFICATION_REFERENCE,
position: 10,
label: 'EmpId'
}]
@UI.lineItem: [{ label: 'empid', position: 10 }]
@UI.identification: [{ label: 'empid', position: 10 }]
key empid,

@UI.lineItem: [{ label: 'itemid', position: 20 }]
@UI.identification: [{ label: 'itemid', position: 20 }]
key itemid,

@UI.lineItem: [{ label: 'itemtype', position: 30 }]
@UI.identification: [{ label: 'itemtype', position: 30 }]
itemtype,

@UI.lineItem: [{ label: 'itemdesc', position: 40 }]
@UI.identification: [{ label: 'itemdesc', position: 40 }]
itemdesc,

@UI.lineItem: [{ label: 'status', position: 50 }]
@UI.identification: [{ label: 'status', position: 50 }]
status,

@UI.lineItem: [{ label: 'remarks', position: 60 }]
@UI.identification: [{ label: 'remarks', position: 60 }]
remarks,

/* Associations */
_parent : redirected to parent ZPV_roothdr
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;BEHAVIOUR DEFINITION FOR ROOT ENTITY :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_rs_emp_hdr unique;
strict ( 2 );

define behavior for ZRS_EMP_HDR alias emp
persistent table zemptable
lock master
authorization master ( instance );

create ( authorization : global );
update;
delete;
field ( readonly ) empid;
association _child { create; };

mapping for zemptable
{
empid = empid;
firstname = firstname;
lastname = lastname;
department = department;
gender = gender;
}

define behavior for Zcom_emptable //alias &amp;lt;alias_name&amp;gt;
persistent table zemp_temptable
lock dependent by _parent
authorization dependent by _parent
//etag master &amp;lt;field_name&amp;gt;

update;
delete;
field ( readonly ) empid, itemid;
association _parent;

mapping for zemp_temptable{
empid = emp_id;
itemdesc = item_desc;
itemid = item_id;
itemtype = item_type;
remarks = remarks;
status = status;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;ACTIVATE THE CLASS USING&amp;nbsp; QUICK FIX(CTRL + 1)&amp;nbsp; ON BEHAVIOUR DEFINTION :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_ZRS_EMP_HDR DEFINITION INHERITING FROM cl_abap_behavior_handler.
PRIVATE SECTION.

METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
IMPORTING keys REQUEST requested_authorizations FOR zrs_emp_hdr RESULT result.

METHODS get_global_authorizations FOR GLOBAL AUTHORIZATION
IMPORTING REQUEST requested_authorizations FOR zrs_emp_hdr RESULT result.

ENDCLASS.

CLASS lhc_ZRS_EMP_HDR IMPLEMENTATION.

METHOD get_instance_authorizations.
ENDMETHOD.

METHOD get_global_authorizations.
ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;BEHAVIOUR DEFINITION FOR PROJECTION VIEW&amp;nbsp; :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );

define behavior for ZPV_roothdr //alias &amp;lt;alias_name&amp;gt;
{
use create;
use update;
use delete;

use association _child { create; }
}

define behavior for ZRS_empitem //alias &amp;lt;alias_name&amp;gt;
{
use update;
use delete;

use association _parent;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;SERVICE DEFINITION :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service definition for emp hdr'
define service ZSD_emp_hdr {
expose ZPV_roothdr;
expose ZRS_empitem;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;SERVICE BINDING&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_10-1758087947005.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315578i1BAD35A9AC6C40A8/image-size/medium?v=v2&amp;amp;px=400" role="button" title="reddysekharapathipati_10-1758087947005.png" alt="reddysekharapathipati_10-1758087947005.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;PREVIEW&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;HEADER DATA&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_11-1758088065628.png" style="width: 604px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315579iD421AB2E22E028C8/image-dimensions/604x169?v=v2" width="604" height="169" role="button" title="reddysekharapathipati_11-1758088065628.png" alt="reddysekharapathipati_11-1758088065628.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;ITEM DATA&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_1-1758101505814.png" style="width: 626px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315751iC71AE99619C891D2/image-dimensions/626x129?v=v2" width="626" height="129" role="button" title="reddysekharapathipati_1-1758101505814.png" alt="reddysekharapathipati_1-1758101505814.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;HEADER AND ITEM DATA.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_2-1758101562110.png" style="width: 575px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315753i78F73108A36FD56D/image-dimensions/575x217?v=v2" width="575" height="217" role="button" title="reddysekharapathipati_2-1758101562110.png" alt="reddysekharapathipati_2-1758101562110.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;GO BACK AND CLICK ON CREATE BUTTON.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_4-1758101782597.png" style="width: 631px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315756i57767917A0A473EE/image-dimensions/631x239?v=v2" width="631" height="239" role="button" title="reddysekharapathipati_4-1758101782597.png" alt="reddysekharapathipati_4-1758101782597.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;ONCE WE CREATE HEADER WE&amp;nbsp; ALLOWED&amp;nbsp; TO CREATE ITEMS AS WE SHOWN IN ABOVE IMAGE.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;ITEM.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_5-1758101863001.png" style="width: 658px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315757iB2BAD1FD7CAAC779/image-dimensions/658x150?v=v2" width="658" height="150" role="button" title="reddysekharapathipati_5-1758101863001.png" alt="reddysekharapathipati_5-1758101863001.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;EMPLOYE ID WILL BE AUTO POPULATED , EMPID WILL BE TAKEN FROM HEADER WHICH BE CREATED.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_6-1758102343396.png" style="width: 651px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315759iBBC767E5FA4DAE40/image-dimensions/651x289?v=v2" width="651" height="289" role="button" title="reddysekharapathipati_6-1758102343396.png" alt="reddysekharapathipati_6-1758102343396.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;IF I WANT CHANGE HEADER AND ITEM ONCE CLICK ON EDIT.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_0-1758101437092.png" style="width: 593px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/315748i00D9F9A5C15E453B/image-dimensions/593x206?v=v2" width="593" height="206" role="button" title="reddysekharapathipati_0-1758101437092.png" alt="reddysekharapathipati_0-1758101437092.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion:&lt;/STRONG&gt;&lt;BR /&gt;Building deep entities using the RAP model empowers developers to design structured, scalable, and future-ready SAP applications. By defining clear header–item relationships, implementing projection views, and leveraging robust service and behavior definitions, we can streamline data handling and deliver a seamless user experience. This blog walked through the essential steps for creating and editing entries within the RAP framework, providing both conceptual clarity and practical guidance.&lt;/P&gt;&lt;P&gt;As you continue to explore RAP, the provided resources and profile links offer opportunities to deepen your knowledge and stay connected with the SAP community. With these foundations in place, you are well-equipped to extend your application further and adopt more advanced RAP features in your development journey.&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Thanks For Reading, Best Wishes&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+BTP+ABAP+environment/pd-p/73555000100800001164" class="lia-product-mention" data-product="11-1"&gt;SAP BTP ABAP environment&lt;/a&gt;&amp;nbsp; &lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Development/pd-p/833755570260738661924709785639136" class="lia-product-mention" data-product="314-1"&gt;ABAP Development&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/create-deep-entity-using-rap-managed/ba-p/14219483"/>
    <published>2025-12-12T08:39:03.978000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/send-an-email-for-an-selected-record-using-a-sap-rap-restful-abap/ba-p/14259102</id>
    <title>Send an Email for an selected record Using a SAP RAP(RESTful ABAP Programming Model)</title>
    <updated>2025-12-12T08:44:04.273000+01:00</updated>
    <author>
      <name>vinodkumarreddyappannagari</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2174225</uri>
    </author>
    <content>&lt;P&gt;Hi Everyone,&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Scenario :&lt;/STRONG&gt; Sending an Email for a Selected Record Using the RAP Model&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Introduction:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In an SAP S/4HANA system, there is a need to send an email notification when a user selects or processes a specific record in a RAP (RESTful ABAP Programming)–based application. For example, when a sales order, request, or approval record is selected in the Fiori Elements app, an email should automatically be triggered to the responsible user or approver.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;1. Creation of &lt;STRONG&gt;Table&lt;/STRONG&gt; :&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Service Header Table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #ALLOWED
define table zva_hdr_service {
  key client    : abap.clnt not null;
  key serviceno : zva_serviceno not null;
  servicename   : zva_servicename;
  startdate     : abap.dats;
  enddate       : abap.dats;
  @Semantics.amount.currencyCode : 'zva_hdr_service.currency'
  amount        : abap.curr(8,2);
  currency      : abap.cuky;
  createdby     : uname;
  createdon     : datum;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;2. Creation of&amp;nbsp;&lt;STRONG&gt;Root&lt;/STRONG&gt; &lt;STRONG&gt;View Entity&lt;/STRONG&gt; :&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;In the &lt;STRONG&gt;SAP RESTful ABAP Programming Model (RAP)&lt;/STRONG&gt;, the &lt;STRONG&gt;Root View Entity&lt;/STRONG&gt; is the &lt;STRONG&gt;main CDS view entity&lt;/STRONG&gt; that defines the &lt;STRONG&gt;data model&lt;/STRONG&gt; and &lt;STRONG&gt;structure&lt;/STRONG&gt; of the &lt;STRONG&gt;root business object&lt;/STRONG&gt;.&lt;BR /&gt;It serves as the &lt;STRONG&gt;entry point&lt;/STRONG&gt; for the RAP business object and forms the foundation for its behavior and service exposure.&lt;/P&gt;&lt;P&gt;A Root View Entity is defined using the CDS keyword&amp;nbsp;&lt;EM&gt;define root view entity.&lt;/EM&gt;&amp;nbsp;It typically represents the main database table or a combination of tables that store the business data.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Root View'
@Metadata.ignorePropagatedAnnotations: true
define root view entity zva_header_serv_root as select from zva_hdr_service as Service
{
key Service.serviceno as Serviceno,
Service.servicename as Servicename,
Service.startdate as Startdate,
Service.enddate as Enddate,
@Semantics.amount.currencyCode: 'currency'
Service.amount as Amount,
Service.currency as Currency
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;3. Creation of&amp;nbsp;&amp;nbsp;&lt;STRONG&gt;Projection View&amp;nbsp; &lt;/STRONG&gt;for&amp;nbsp;&lt;STRONG&gt;Root&amp;nbsp; View&lt;/STRONG&gt;&amp;nbsp;&lt;STRONG&gt;Entity&lt;/STRONG&gt;:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;In &lt;STRONG&gt;SAP RAP&lt;/STRONG&gt;, a &lt;STRONG&gt;Projection View&lt;/STRONG&gt; is a &lt;STRONG&gt;Core Data Services (CDS) view&lt;/STRONG&gt; that defines &lt;STRONG&gt;which parts of a Business Object (BO)&lt;/STRONG&gt; — specifically its data and associations — are &lt;STRONG&gt;exposed to the outside world&lt;/STRONG&gt; (for example, through an &lt;STRONG&gt;OData service&lt;/STRONG&gt; or &lt;STRONG&gt;Fiori app&lt;/STRONG&gt;).&lt;/P&gt;&lt;P&gt;It acts as a &lt;STRONG&gt;public interface&lt;/STRONG&gt; of your business object.&lt;BR /&gt;While the &lt;STRONG&gt;Root View Entity&lt;/STRONG&gt; defines the &lt;EM&gt;complete internal data model&lt;/EM&gt;, the &lt;STRONG&gt;Projection View&lt;/STRONG&gt; determines the &lt;EM&gt;external view&lt;/EM&gt; that users or external systems can access.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Projection View'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity ZVA_HEADER_SERV_ROOT_pro as projection on zva_header_serv_root as Service
{
    key Service.Serviceno,
    Service.Servicename,
    Service.Startdate,
    Service.Enddate,
    @Semantics.amount.currencyCode: 'Currency'
    Service.Amount,
    Service.Currency
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;4. Creation of &lt;STRONG&gt;Metadata Extensions&lt;/STRONG&gt; for &lt;STRONG&gt;Projection View&lt;/STRONG&gt;:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Metadata extensions are used to define&amp;nbsp;&lt;STRONG&gt;UI-specific annotations&lt;/STRONG&gt;&amp;nbsp;for CDS views. They allow the separation of concerns by keeping the data model independent of UI-related semantics. These extensions are particularly useful for defining Fiori UI layouts and behaviors without modifying the underlying CDS view.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
annotate entity ZVA_HEADER_SERV_ROOT_pro
    with 
{
   
    :{ lineItem:[{ type: #FOR_ACTION , dataAction: 'SendEmail',label: 'Email' } ] }
    :{ lineItem:[{  position:1  }],
          selectionField: [{ position: 1 ,element: 'Serviceno'  }] }
    Serviceno;
    :{ lineItem: [{ label: 'Service Name' , position:2  }],
          selectionField: [{ position: 2 ,element: 'Servicename'  }] }
    Servicename;
    : { lineItem: [{ label: 'Start Date' , position:3  }],
            selectionField: [{ position: 3,element: 'Startdate'  }]       }
    Startdate;
     : { lineItem: [{ label: 'End Date' , position:4 }],
            selectionField: [{  position: 4 ,element: 'Enddate'}] }
    Enddate;
    .lineItem: [{ label: 'Amount' , position:5  }]
    Amount;
    .lineItem: [{ label: 'Currency' , position:6 }]
    Currency;  
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;5. Creation of &lt;STRONG&gt;Root&amp;nbsp; Abstract&amp;nbsp; Entity&lt;/STRONG&gt; :&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;A&amp;nbsp;&lt;STRONG&gt;Root Abstract Entity&lt;/STRONG&gt;&amp;nbsp;is a CDS construct designed for modeling complex input parameters or non-standard operations in RAP. Unlike root view entities, abstract entities are not tied to database tables.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Email'
define root abstract entity zva_email_send
{
//    Email : char200; 
    Email : zva_email;  
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;6. Creation of&lt;STRONG&gt; Behavior Definition for Root View or Consumption View&lt;/STRONG&gt; and implement the classes:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Behavior Definition (BDEF)&lt;/STRONG&gt;&amp;nbsp;is a key component that defines the transactional behavior of a RAP Business Object (BO). It specifies how the BO can be accessed and manipulated by consumers, such as creating, updating, or deleting records. The BDEF is always tied to a&amp;nbsp;&lt;STRONG&gt;Core Data Services (CDS)&lt;/STRONG&gt;&amp;nbsp;data model, which includes at least one root entity.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;A BDEF consists of two main parts: a&amp;nbsp;&lt;STRONG&gt;header&lt;/STRONG&gt;&amp;nbsp;and one or more&amp;nbsp;&lt;STRONG&gt;entity behavior definitions&lt;/STRONG&gt;. The header defines the overall behavior, while the entity behavior definitions specify the characteristics and operations for each entity. These operations include standard actions like&amp;nbsp;&lt;STRONG&gt;&lt;EM&gt;create&lt;/EM&gt;&lt;/STRONG&gt;,&amp;nbsp;&lt;STRONG&gt;&lt;EM&gt;update&lt;/EM&gt;&lt;/STRONG&gt;, and&amp;nbsp;&lt;STRONG&gt;&lt;EM&gt;delete&lt;/EM&gt;&lt;/STRONG&gt;, as well as custom actions, determinations, and validations.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_va_header_serv_root unique;
strict ( 2 );
define behavior for zva_header_serv_root alias Service
persistent table ZVA_HDR_SERVICE
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
{
  action SendEmail parameter zva_email_send;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;Place the cursor on the class name, press&amp;nbsp; ( Ctrl + 1 ), choose Implement the&amp;nbsp; Class, and then activate the class.&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_Service DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.
    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR Service RESULT result.
    METHODS SendEmail FOR MODIFY
      IMPORTING keys FOR ACTION Service~SendEmail.
ENDCLASS.
CLASS lhc_Service IMPLEMENTATION.
  METHOD get_instance_authorizations.
  ENDMETHOD.
  METHOD SendEmail.
  ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;Implementation of SendEmail Method:&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  " Implementation of the custom action SendEmail
  METHOD SendEmail.
    " Get the first selected record from the action context
    DATA(ls_keys) = VALUE #( keys[ 1 ] OPTIONAL ).
    DATA(p_email) = ls_keys-%param-Email.
    "-------------------------
    " Step 1: Validate email
    "-------------------------
    IF p_email IS INITIAL.
      " No email provided -&amp;gt; return error message
      APPEND VALUE #( %tky = ls_keys-%tky
                      %msg = new_message( id = 'ZVA_MSG'
                                          number = '000'
                                          severity = if_abap_behv_message=&amp;gt;severity-error ) )
             TO reported-Service.
      RETURN.
    ENDIF.

    IF NOT p_email CP '*@*.*'.
      " Invalid email format -&amp;gt; return error message
      APPEND VALUE #( %tky = ls_keys-%tky
                      %msg = new_message( id = 'ZVA_MSG'
                                          number = '001'
                                          severity = if_abap_behv_message=&amp;gt;severity-error ) )
             TO reported-Service.
      RETURN.
    ENDIF.

    "-------------------------
    " Step 2: Read service data
    "-------------------------
    READ ENTITIES OF zva_header_serv_root
      ENTITY Service
      ALL FIELDS
      WITH VALUE #( ( Serviceno = ls_keys-Serviceno ) )
      RESULT DATA(lt_serv).

    DATA(ls_serv) = lt_serv[ 1 ].

    "-------------------------
    " Step 3: Prepare and send email
    "-------------------------
    TRY.
        " Create persistent send request (BCS)
        DATA(lo_send_request) = cl_bcs=&amp;gt;create_persistent( ).

        " Prepare HTML email body
        DATA: lt_body TYPE soli_tab,
              lv_html TYPE string,
              lv_text TYPE string.

        lv_text = 'Hi Good Morning..'.

        " Add HTML table header
        CONCATENATE
          '&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;'
          '&amp;lt;p&amp;gt;' lv_text '&amp;lt;/p&amp;gt;'
          '&amp;lt;h3&amp;gt;Service Details&amp;lt;/h3&amp;gt;'
          '&amp;lt;table border="1" cellpadding="8" cellspacing="0" style="border-collapse:collapse;"&amp;gt;'
          '&amp;lt;tr&amp;gt;'
          '&amp;lt;th&amp;gt;Service Number&amp;lt;/th&amp;gt;'
          '&amp;lt;th&amp;gt;Service Name&amp;lt;/th&amp;gt;'
          '&amp;lt;th&amp;gt;StartDate&amp;lt;/th&amp;gt;'
          '&amp;lt;th&amp;gt;EndDate&amp;lt;/th&amp;gt;'
          '&amp;lt;th&amp;gt;Amount&amp;lt;/th&amp;gt;'
          '&amp;lt;/tr&amp;gt;'
          INTO lv_html SEPARATED BY space.

        APPEND lv_html TO lt_body.
        CLEAR lv_html.

        " Add dynamic service data rows
        LOOP AT lt_serv INTO ls_serv.
          DATA(lv_amount) = ls_serv-Amount.
          CONCATENATE
            '&amp;lt;tr&amp;gt;'
            '&amp;lt;td&amp;gt;' ls_serv-Serviceno '&amp;lt;/td&amp;gt;'
            '&amp;lt;td&amp;gt;' ls_serv-Servicename '&amp;lt;/td&amp;gt;'
            '&amp;lt;td&amp;gt;' ls_serv-Startdate '&amp;lt;/td&amp;gt;'
            '&amp;lt;td&amp;gt;' ls_serv-Enddate '&amp;lt;/td&amp;gt;'
            '&amp;lt;td&amp;gt;' lv_amount '&amp;lt;/td&amp;gt;'
            '&amp;lt;/tr&amp;gt;'
            INTO lv_html SEPARATED BY space.
          APPEND lv_html TO lt_body.
          CLEAR lv_html.
        ENDLOOP.

        " Set up document object for the email
        DATA(lo_document) = cl_document_bcs=&amp;gt;create_document(
                              i_type    = 'HTM'
                              i_text    = lt_body
                              i_subject = 'Service Details' ).

        " Add document to send request
        lo_send_request-&amp;gt;set_document( lo_document ).

        " Set sender as current SAP user
        lo_send_request-&amp;gt;set_sender( cl_sapuser_bcs=&amp;gt;create( sy-uname ) ).

        " Add recipient email
        lo_send_request-&amp;gt;add_recipient(
          i_recipient = cl_cam_address_bcs=&amp;gt;create_internet_address( p_email ),
          i_express   = abap_true ).

        " Send the email
        DATA(lv_sent_to_all) = lo_send_request-&amp;gt;send( ).

    ENDTRY.

    "-------------------------
    " Step 4: Show success or error messages
    "-------------------------
    IF lv_sent_to_all = abap_true.
      " Email sent successfully
      APPEND VALUE #( %tky = ls_keys-%tky
                      %msg = new_message( id = 'ZVA_MSG'
                                          number = '002'
                                          severity = if_abap_behv_message=&amp;gt;severity-success ) )
             TO reported-Service.
    ELSE.
      " Email sending failed
      APPEND VALUE #( %tky = ls_keys-%tky
                      %msg = new_message( id = 'ZVA_MSG'
                                          number = '003'
                                          severity = if_abap_behv_message=&amp;gt;severity-error ) )
             TO reported-Service.
    ENDIF.
  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;7. Creation of &lt;STRONG&gt;Behavior Definition for Projection View&lt;/STRONG&gt; and Implement the classes :&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;A&amp;nbsp;&lt;STRONG&gt;Behavior Projection&lt;/STRONG&gt;&amp;nbsp;maps the transactional capabilities of the base behavior definition to a projection view. This allows for further customization of the behavior for specific use cases. For example:&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection implementation in class zbp_va_header_serv_root_pro unique;
strict ( 2 );
define behavior for ZVA_HEADER_SERV_ROOT_pro //alias &amp;lt;alias_name&amp;gt;
{
 use action SendEmail ;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&amp;nbsp;&lt;SPAN&gt;Place the cursor on the class name, press&amp;nbsp; ( Ctrl + 1 ), choose Implement the&amp;nbsp; Class, and then activate the class.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_0-1762167079334.png" style="width: 577px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335317iC6B428275E785138/image-dimensions/577x166?v=v2" width="577" height="166" role="button" title="vinodkumarreddyappannagari_0-1762167079334.png" alt="vinodkumarreddyappannagari_0-1762167079334.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;8. Creation of Service Definition for Consumption View :&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_1-1762167271502.png" style="width: 598px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335318i3A839E8EAF6EF448/image-dimensions/598x481/is-moderation-mode/true?v=v2" width="598" height="481" role="button" title="vinodkumarreddyappannagari_1-1762167271502.png" alt="vinodkumarreddyappannagari_1-1762167271502.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service Definition'
define service ZVA_HEADER_SERV_ROOT_PRO_SD {
  expose ZVA_HEADER_SERV_ROOT_pro;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;9. Creation of Service Binding for Service Definition:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_0-1762167831491.png" style="width: 529px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335319iF53FABB738D4F17D/image-dimensions/529x357?v=v2" width="529" height="357" role="button" title="vinodkumarreddyappannagari_0-1762167831491.png" alt="vinodkumarreddyappannagari_0-1762167831491.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Click on public button and activate&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_1-1762167958764.png" style="width: 625px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335321i5BC49F9DD2360817/image-dimensions/625x300?v=v2" width="625" height="300" role="button" title="vinodkumarreddyappannagari_1-1762167958764.png" alt="vinodkumarreddyappannagari_1-1762167958764.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Click on preview button&amp;nbsp; then navigate the fiori .&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-11-03 163745.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335322i2D5B81F28407426A/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-11-03 163745.png" alt="Screenshot 2025-11-03 163745.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-11-03 164133.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335323iE4A2602E446A8CAA/image-size/large?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-11-03 164133.png" alt="Screenshot 2025-11-03 164133.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Click on a Email button then open a popup then provide the email id.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_0-1762168588704.png" style="width: 601px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335326iE604C93EC956D43C/image-dimensions/601x482?v=v2" width="601" height="482" role="button" title="vinodkumarreddyappannagari_0-1762168588704.png" alt="vinodkumarreddyappannagari_0-1762168588704.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;if email id is not provided it's shows the error and incorrect email provided also shows a error message.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_1-1762168619343.png" style="width: 546px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335327iC8A7894ADB79C531/image-dimensions/546x602?v=v2" width="546" height="602" role="button" title="vinodkumarreddyappannagari_1-1762168619343.png" alt="vinodkumarreddyappannagari_1-1762168619343.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_2-1762168743938.png" style="width: 648px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335328i1320F1DB9CF73CD0/image-dimensions/648x421/is-moderation-mode/true?v=v2" width="648" height="421" role="button" title="vinodkumarreddyappannagari_2-1762168743938.png" alt="vinodkumarreddyappannagari_2-1762168743938.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_3-1762168756550.png" style="width: 626px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335329i65C00DCD9180C754/image-dimensions/626x633?v=v2" width="626" height="633" role="button" title="vinodkumarreddyappannagari_3-1762168756550.png" alt="vinodkumarreddyappannagari_3-1762168756550.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-11-03 152748.png" style="width: 569px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350785i02F4C37B2AACD8F8/image-size/large?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-11-03 152748.png" alt="Screenshot 2025-11-03 152748.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Email sent successful then shows the success message.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="vinodkumarreddyappannagari_6-1762168821678.png" style="width: 615px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335333i46511C6A6CDD81D5/image-dimensions/615x200/is-moderation-mode/true?v=v2" width="615" height="200" role="button" title="vinodkumarreddyappannagari_6-1762168821678.png" alt="vinodkumarreddyappannagari_6-1762168821678.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Go to SOST&amp;nbsp; t-code we will check the the record.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-12-10 184410.png" style="width: 944px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350791i16EC7DBCD3881558/image-size/large?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-12-10 184410.png" alt="Screenshot 2025-12-10 184410.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Select the record and click on display button&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-11-03 165445.png" style="width: 684px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/335338i41F679AE038FF885/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-11-03 165445.png" alt="Screenshot 2025-11-03 165445.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1763871136"&gt;&lt;STRONG&gt;&lt;FONT size="4"&gt;Summary:&lt;/FONT&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;In this implementation, a custom action &lt;STRONG&gt;SendEmail&lt;/STRONG&gt; is added to a RAP BO to allow users to send an email containing service details directly from the application.&lt;/P&gt;&lt;H3 id="toc-hId-1696440350"&gt;&lt;FONT size="3"&gt;&lt;STRONG&gt;&amp;nbsp;1. Email Validation&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;The action first retrieves the email ID passed through the action parameters.&lt;BR /&gt;It performs two validations:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Checks if the email field is empty&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Checks if the email format is valid using a simple pattern &lt;CODE&gt;*@*.*&lt;/CODE&gt;&lt;BR /&gt;If the validation fails, an error message is returned using RAP messaging.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H3 id="toc-hId-1499926845"&gt;&lt;FONT size="3"&gt;&lt;STRONG&gt;2. Reading Service Data&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;The code reads the selected service record from the root entity (&lt;CODE&gt;zva_header_serv_root&lt;/CODE&gt;) using &lt;CODE&gt;READ ENTITIES&lt;/CODE&gt;.&lt;BR /&gt;The retrieved fields are later used to dynamically build the email content.&lt;/P&gt;&lt;H3 id="toc-hId-1303413340"&gt;&lt;FONT size="3"&gt;&lt;STRONG&gt;&amp;nbsp;3. Building and Sending the Email&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;The email is sent using &lt;STRONG&gt;SAP Business Communication Services (BCS)&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;A persistent send request (&lt;CODE&gt;cl_bcs&lt;/CODE&gt;) is created&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;An HTML email body is built, including:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Greeting text&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;A formatted HTML table&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Dynamically added service details&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;The document is attached to the send request as an HTML email (&lt;CODE&gt;HTM&lt;/CODE&gt;)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Sender is set as the logged-in SAP user&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Recipient is the email address entered by the user&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;The email is finally sent using &lt;CODE&gt;send( )&lt;/CODE&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H3 id="toc-hId-1106899835"&gt;&lt;FONT size="3"&gt;&lt;STRONG&gt;4. Success &amp;amp; Error Handling&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;After sending, the system returns:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;A success message if the email was sent&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;An error message if the sending process failed&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;These messages are reported back through RAP’s &lt;CODE&gt;reported-&lt;/CODE&gt; structure.&lt;/P&gt;&lt;P&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Development/pd-p/833755570260738661924709785639136" class="lia-product-mention" data-product="314-1"&gt;ABAP Development&lt;/a&gt;&amp;nbsp;,&lt;/P&gt;&lt;P&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+Fiori+for+SAP+S%25252F4HANA/pd-p/73555000100800000131" class="lia-product-mention" data-product="623-1"&gt;SAP Fiori for SAP S/4HANA&lt;/a&gt;&amp;nbsp;,&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/send-an-email-for-an-selected-record-using-a-sap-rap-restful-abap/ba-p/14259102"/>
    <published>2025-12-12T08:44:04.273000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-platform-in-sap-s-4hana-cloud-private-edition-and-sap-s-4hana-2025/ba-p/14289979</id>
    <title>ABAP Platform in SAP S/4HANA Cloud Private Edition and SAP S/4HANA 2025</title>
    <updated>2025-12-14T23:10:11.122000+01:00</updated>
    <author>
      <name>OlgaDolinskaja</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/6638</uri>
    </author>
    <content>&lt;P&gt;SAP&amp;nbsp;S/4HANA Cloud Private Edition and SAP&amp;nbsp;S/4HANA 2025 were released to the SAP customer base on October 8, 2025.&lt;/P&gt;&lt;P&gt;ABAP Platform 2025 is the technology platform underlying the release 2025 of SAP S/4HANA Cloud Private Edition and SAP&amp;nbsp;S/4HANA and is shipped as part of these products, supporting only SAP HANA database with full exploitation of its advanced capabilities. In addition,&amp;nbsp; ABAP Platform 2025 is part of &lt;A href="https://me.sap.com/notes/3568504/E" target="_self" rel="noopener noreferrer"&gt;SAP&amp;nbsp;S/4HANA Foundation 2025&lt;/A&gt; for SAP HANA-only Add-Ons.&lt;/P&gt;&lt;P&gt;ABAP Platform 2025 is not shipped as a standalone product. ABAP Platform 2025 consists of the AS ABAP,&amp;nbsp; the ABAP development tools for Eclipse, and several additional technology components which are required to run SAP&amp;nbsp;S/4HANA Cloud Private Edition and SAP S/4HANA.&lt;BR /&gt;&lt;BR /&gt;Previous versions of SAP S/4HANA Private Edition and SAP S/4HANA such as 1610, 1709, 1809, 1909, 2020, 2021, 2022 and 2023 can be upgraded directly to the 2025 release, which is based on ABAP Platform 2025 (corresponding to&amp;nbsp;&lt;SPAN&gt;&lt;A href="https://help.sap.com/doc/abapdocu_latest_index_htm/latest/en-US/ABENNEWS-81.html" target="_blank" rel="noopener noreferrer"&gt;SAP_BASIS 816&lt;/A&gt;&lt;/SPAN&gt;).&lt;/P&gt;&lt;H2 id="toc-hId-1766649611"&gt;&lt;FONT color="#3366FF"&gt;Product Highlights&lt;/FONT&gt;&lt;/H2&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="2025_abap_platform_highlights.jpg" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/351817i005DC626988E769A/image-size/large?v=v2&amp;amp;px=999" role="button" title="2025_abap_platform_highlights.jpg" alt="2025_abap_platform_highlights.jpg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1570136106"&gt;&lt;FONT color="#3366FF"&gt;Presentation&lt;/FONT&gt;&lt;/H2&gt;&lt;P&gt;This presentation provides the SAP official external slide deck, just click on it to view:&lt;/P&gt;&lt;P&gt;&lt;A title="ABAP Platform 2025 - Overview and Product Highlights" href="https://www.sap.com/documents/2025/12/a43c7800-317f-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="abap_platform_2025.jpg" style="width: 723px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/351818i56128BEDA971EB19/image-dimensions/723x406?v=v2" width="723" height="406" role="button" title="abap_platform_2025.jpg" alt="abap_platform_2025.jpg" /&gt;&lt;/span&gt;&lt;/A&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1373622601"&gt;&lt;FONT color="#3366FF"&gt;Overview&lt;/FONT&gt;&lt;/H2&gt;&lt;P&gt;ABAP Platform 2025 delivers innovations for the ABAP stack in different areas.&lt;/P&gt;&lt;H3 id="toc-hId-1306191815"&gt;&lt;FONT color="#666699"&gt;Clean core development&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;In August 2025, SAP enhanced its extensibility guidelines by introducing the new &lt;SPAN&gt;&lt;A href="https://www.sap.com/documents/2024/09/20aece06-d87e-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;Clean core extensibility white paper&lt;/A&gt;&lt;/SPAN&gt;. The sustainable and upgrade-safe ABAP extensibility model in SAP&amp;nbsp;S/4HANA Cloud Private Edition and SAP&amp;nbsp;S/4HANA fully relies on SAP clean core guiding principles, aiming to decouple custom extensions from SAP standard whenever possible. The refined SAP guidance for extensibility replaces binary clean core decisions with a more nuanced evaluation of classic ABAP extensions based on the clean core level concept. Evolving from the previous 3-tier model, the new extensibility model categorizes extensions into four levels (A, B, C, and D) and provides rules for ABAP classic extensions to meet the clean core level qualifications. Following this new clean core extensibility guidance the&amp;nbsp;&lt;SPAN&gt;&lt;A href="https://www.sap.com/documents/2022/10/52e0cd9b-497e-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;ABAP extensibility guide&lt;/A&gt;&lt;/SPAN&gt;&amp;nbsp;was updated with technical guidelines to support the clean core level concept. The ABAP extensibility model was changed from 3-tier model to ABAP Cloud development (level A) and classic ABAP development (levels B, C and D).&lt;/P&gt;&lt;P&gt;The overall clean core guidance remained unchanged: always striving for the highest possible level of extensibility. ABAP Cloud is the SAP’s recommended development model for all new custom extensions in SAP S/4HANA private cloud and on-premise systems, whereby the classic ABAP extensibility can still be used to reach clean core, with a focus on upgrade-stability and code quality. This enables SAP customers and partners to transition to a clean core incrementally and at their own speed. SAP provides guidance for ABAP clean core development by offering a recommended list of APIs (so-called “classic APIs”) to be used in classic ABAP development. For governance of ABAP clean core development, the ABAP test cockpit (ATC) now supports the clean core level concept with new ATC checks (see the blog post &lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-test-cockpit-atc-recommendations-for-governance-of-clean-core-abap/ba-p/14186130" target="_blank"&gt;ABAP test cockpit (ATC) recommendations for governance of clean core ABAP development&lt;/A&gt;&lt;/SPAN&gt;). For governance of ABAP development for clean core in SAP S/4HANA private cloud or on-premise systems the remote &lt;SPAN&gt;&lt;A href="https://www.sap.com/documents/2025/11/38e238f7-2b7f-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;ATC in SAP BTP ABAP environment&lt;/A&gt;&lt;/SPAN&gt; is the SAP recommended approach.&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1109678310"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;SAP Joule for Developers,&amp;nbsp; ABAP AI capabilities&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;SAP Joule for Developers, ABAP AI capabilities are now key components and an integral part of AI-assisted ABAP Cloud development, also facilitating custom code transformation from ECC to SAP S/4HANA. The capabilities supporting developer tasks include Joule copilot in ABAP development tools for Eclipse, predictive code completion, code explanation and unit test generation for ABAP and ABAP CDS, app and service generation (including RAP BO generation), predictive business logic for RAP BOs, and OData consumption. The provided ABAP AI SDK, powered by Intelligent Scenario Lifecycle Management (ISLM), can be utilized for the implementation of AI capabilities in custom applications.&lt;/P&gt;&lt;P&gt;The custom code migration capabilities include docs chat for questions around custom code migration and S/4HANA simplifications, explanation of business purpose and processing logic of legacy code (ABAP reports), explanation of S/4HANA-related ATC findings in custom code, along with resolution recommendations based on S/4HANA simplification items and cookbooks (see the blog post &lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/sap-joule-for-developers-expands-to-private-cloud-accelerating-abap/ba-p/14237958" target="_blank"&gt;SAP Joule for Developers Expands to Private Cloud: Accelerating ABAP Innovation and Transformation&lt;/A&gt;&lt;/SPAN&gt;).&lt;/P&gt;&lt;H3 id="toc-hId-913164805"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;ABAP RESTful Application Programming Model (RAP)&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Another major investment area in the 2025 release is the ABAP RESTful Application Programming Model, which powers modern development in both ABAP Cloud and classic ABAP, enabling the creation of delightful transactional SAP Fiori apps as well as local and web APIs. This release delivers new features to accelerate and enhance the development with RAP, including new generators to boost efficiency, support of CDS table entities as persistence layer, various capabilities for SAP Fiori elements-based UIs, such as collaborative draft, cross-BO scenarios, tree views, and event-driven side effects, as well as end-to-end extensibility options.&lt;/P&gt;&lt;P&gt;New ABAP Cloud generators for creating OData UI services with RAP BOs (with one or more entities) from scratch, with or without AI assistance, or for generating custom UI service based on RAP BO interface are provided. ABAP CDS table entities can be used as active persistence layer for managed RAP BOs without draft, replacing classic dictionary database tables.&lt;/P&gt;&lt;P&gt;Enhancements for building of SAP Fiori elements-based apps with RAP include the collaborative draft handling, which allows multiple users to work simultaneously and collaboratively on the same draft instance of an entity without blocking one another. You can now also build SAP Fiori UIs that use multiple RAP BOs interacting with each other. These cross-BO scenarios rely on cross-BO transactional enablement, where the entities of the participating RAP BOs are linked through so-called cross-BO associations. Read-only and editable tree view supports displaying and manipulating hierarchical data in SAP Fiori UIs, with options for drag and drop, cut and paste, reordering, and cascading delete. Event-driven RAP side effects enable asynchronous updates in SAP Fiori UIs. When such a specific RAP business event is raised, the associated side effect is triggered, and the defined targets are reloaded in the UI.&lt;/P&gt;&lt;P&gt;The privileged context can now be propagated in subsequent Entity Manipulation Language (EML) requests in reading and modifying operation. Further enhancement for the behavior definitions and the behavior pools are provided with this release.&lt;/P&gt;&lt;H3 id="toc-hId-716651300"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;ABAP development tools for Eclipse (ADT)&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Various enhancements are provided in ABAP development tools for Eclipse for ABAP development, RAP and ABAP CDS related development aspects, testing and troubleshooting, as well as overall IDE and productivity improvements.&lt;/P&gt;&lt;P&gt;Refactoring support for ABAP classes and interfaces was improved by activation of renaming changes by default, validation of new names and displaying long texts of exceptions. The new where-used dialog enables prefiltering of search results to focus on usages relevant for the concrete use case. There is a new property&amp;nbsp;&lt;EM&gt;abaplv&lt;/EM&gt;&amp;nbsp;to filter object searches with the ABAP language version. There are new editors like for example for working with software component relations, Adobe Forms or maintaining intelligent scenarios and intelligent scenarios models which are required to run a solution based on generative AI. It is possible to create and edit CDS table entities and create for them behavior definitions.&lt;/P&gt;&lt;P&gt;In the area of ABAP unit tests, method calls in test classes can now be highlighted in different colors to distinguish their method contexts. Quick actions allow tests to be launched or templates for test classes to be inserted with a single mouse click. The failed assertions and status of test methods can be displayed directly in the source code editor. The unit tests can be rerun with coverage and coverage results can be cleared in the&amp;nbsp;&lt;EM&gt;ABAP Coverage&lt;/EM&gt;&amp;nbsp;view. Additionally, there is a new AMDP Test Double Framework, and the CDS Test Double Framework now supports CDS hierarchy views.&lt;/P&gt;&lt;P&gt;In the ABAP debugger, it is now possible to display the memory consumption of a debugged ABAP program in the new &lt;EM&gt;ABAP Memory&lt;/EM&gt; (Debugger) view. The&amp;nbsp;&lt;EM&gt;ABAP Memory Snapshot&lt;/EM&gt;&amp;nbsp;view lists all memory snapshots, which can be opened in the editor to show memory objects ranked by size. These views make it easier to analyze the memory usage of an ABAP application. Internal tables can now be easily compared using the table comparison tool within the ABAP debugger. Beyond this, the ABAP debugger can now consider variables with hidden values (for sensitive data), display variables of type JSON, and show component groups for nested structures in the &lt;EM&gt;Variables&lt;/EM&gt; view. Collaborative error analysis is supported by export/import of ABAP Cross Trace results to/from JSON file or export of short dumps as ZIP file in the &lt;EM&gt;ABAP Runtime Error Viewer&lt;/EM&gt;.&lt;/P&gt;&lt;P&gt;Beyond this there are also enhancements in transport management for adding an object to a transport or searching and grouping transport requests.&lt;/P&gt;&lt;H3 id="toc-hId-520137795"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;ABAP Language&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;The modern, declarative, and expression-oriented ABAP language allows writing simple and concise ABAP code through features such as inline declarations and constructor expressions. Advanced operations for internal tables include grouping, filtering, and the CORRESPONDING( ) operator. The cloud-optimized version “&lt;EM&gt;ABAP for Cloud Development&lt;/EM&gt;” is used for ABAP Cloud development.&lt;/P&gt;&lt;P&gt;There are further enhancements for internal tables, including support for arbitrary logical expressions and equality conditions, as well as harmonization of table expressions and READ TABLE statement. &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/random-numbers-and-probability-distributions-in-the-abap-environments-for/ba-p/14173266" target="_blank"&gt;New ABAP system classes for probability distributions&lt;/A&gt; are provided, enabling the generation of random number and the calculation of quantile, probabilities, and other aspects. These classes support various discrete and continuous distributions. This release also delivers enhancements for expressions and functions, as well as for transformations, such as the new domain XSDGEO for serializing and deserializing spatial data between the Extended Well-Known Binary (EWKB) representation and&amp;nbsp;the&amp;nbsp;GeoJSON&amp;nbsp;format.&lt;/P&gt;&lt;H3 id="toc-hId-323624290"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;SAP HANA-centric optimizations &amp;amp; Data Integration scenarios&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Modern ABAP development on SAP HANA has been enhanced with several advanced, database-centric features also enriching data integration scenarios. Recent innovations in data integration focus on data exposure, including ABAP-managed database procedures for advanced read scenarios.&amp;nbsp; With CDS updatable view entities it is now possible to wrap existing DDIC database tables (or CDS table entities) and expose a native CDS signature, which can be used with ABAP SQL in combination with DCL-based access control.&amp;nbsp;&lt;/P&gt;&lt;P&gt;On the consumption side, new write scenarios, the use of static CDS external entities, and the possibility to create ABAP CDS models based on imported CDS models make it easier than ever to integrate external data seamlessly into an ABAP CDS view stack.&lt;/P&gt;&lt;P&gt;Additional enhancements, such as CDS table entities to define and manage SAP HANA database tables as native CDS repository objects, a CDS generation wizard to simplify and automate the creation of hierarchically structured data in ABAP CDS, and AI-powered CDS Explain to get semantical context information about CDS entities further brighten the ABAP development landscape.&lt;/P&gt;&lt;H3 id="toc-hId-127110785"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;Embedded analytics&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;For embedded analytics scenarios it is now possible to expedite development workflow using ABAP Cloud generator wizards for creation of multidimensional analysis apps, Review Booklet apps, or native CDS hierarchy definitions. With the introduction of reusable measures and filters, the key figures, measures, filters and many more features can now be defined centrally, based on user needs to better manage and align analytical reporting. They can also be utilized in CDS view entities to ensure homogenous definition of complex calculations and unification of coherences of the running business.&lt;/P&gt;&lt;H3 id="toc-hId--144634089"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;Event Enablement &amp;amp; Business Events&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;The event-driven architecture of SAP S/4HANA Cloud Private Edition and&amp;nbsp;SAP S/4HANA is strengthened, and the interoperability across enterprise solutions is improved through seamless integration with SAP Event Mesh Advanced Plan and support of SAP Cloud Application Event Hub to consume events published by SAP Order Management Foundation on SAP BTP.&lt;/P&gt;&lt;P&gt;The event-driven processing and monitoring was enhanced with new outbound event filtering, enabling selective publishing based on configurable criteria, and dynamic topics in SAP Event Mesh Advanced Plan for more efficient routing. Operational transparency was improved through comprehensive event logging, including local capture and logging of successfully processed events. Events of the same type and object within a session can now be grouped as activities, improving traceability and reducing monitoring noise. Together, these features provide a scalable and well-governed foundation for event-driven architecture.&lt;/P&gt;&lt;H3 id="toc-hId--341147594"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;Process integration&lt;/STRONG&gt;&lt;STRONG&gt; &amp;amp; Connectivity&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Key highlights of process integration include a robust OData service consumption model with Swagger UI preview and advanced OData V4 capabilities, such as bulk processing and asynchronous communication integrated with AIF. The API governance and communication management was enhanced by introducing Communication Targets within Communication Arrangements, enabling more granular control over connectivity endpoints. API lifecycle management is improved through API-to-package assignment and the ability to create API packages for better organization across API types. Additionally, OData-based access to Communication Management data increases automation, transparency, and integration with external tools.&lt;/P&gt;&lt;P&gt;Additional connectivity improvements include outbound communication enablement via HTTP and RFC, support for setting the AIR key as a custom HTTP header in SOAP requests for more secure message handling, direct push-based data exchange between ABAP systems via RFC, and SSE support in the ABAP HTTP client and server for efficient real-time event delivery in distributed scenarios.&lt;/P&gt;&lt;H3 id="toc-hId--537661099"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;Key user extensibility&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Further improvements are provided for key user extensibility. It is now possible to generate a Fiori elements application for a custom business object with just one click and maintain behavior extensions for SAP-provided RAP business objects using key user extensibility. Moreover, using developer extensibility it is now possible to implement feature control for custom fields that were created via the Custom Fields app. The new extension field wizard provides a better development efficiency by boosting the creation of custom fields via developer extensibility.&lt;/P&gt;&lt;H3 id="toc-hId--734174604"&gt;&lt;FONT color="#666699"&gt;&lt;STRONG&gt;Security&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P&gt;Key updates include support for OAuth Authorization Code with PKCE (RFC 7636) and JWT-based client authentication (RFC 7523), as well as SAP-managed client certificates for secure integration in S/4HANA Private Cloud (2025 FPS01). TLS 1.3 is now supported across HTTP, WebSocket RFC, and SMTP, with OAuth Client Credential Grant enabled for SMTP outbound scenarios such as Exchange Online.&lt;/P&gt;&lt;P&gt;Additional enhancements include new OpenID Connect features, improved troubleshooting guidance (SAP Note 3111813), and a new OAuth Client Configuration UI (SOAUTH_CLIENT) with built-in testing and token metadata display.&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId--637285102"&gt;&lt;FONT color="#3366FF"&gt;Useful Blog Posts, Community pages and Learnings&lt;/FONT&gt;&lt;/H2&gt;&lt;P&gt;ABAP Community Topic Pages:&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://pages.community.sap.com/topics/abap" target="_blank" rel="noopener noreferrer"&gt;ABAP Development Community&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://pages.community.sap.com/topics/abap-testing-analysis" target="_blank" rel="noopener noreferrer"&gt;ABAP Testing and Analysis Community&amp;nbsp;&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://pages.community.sap.com/topics/abap-extensibility" target="_blank" rel="noopener noreferrer"&gt;ABAP Extensibility Community&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://pages.community.sap.com/topics/abap-connectivity" target="_blank" rel="noopener noreferrer"&gt;ABAP Connectivity Community&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://pages.community.sap.com/topics/btp-abap-environment" target="_blank" rel="noopener noreferrer"&gt;SAP BTP ABAP Environment Community&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://pages.community.sap.com/topics/s4hana-cloud-abap-environment" target="_blank" rel="noopener noreferrer"&gt;SAP S/4HANA Cloud ABAP Environment Community&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;ABAP at SAP Events:&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-cloud-sessions-at-sap-teched-in-2025/ba-p/14175995" target="_blank"&gt;ABAP Cloud at SAP TechEd in 2025&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-cloud-sessions-at-devtoberfest-2025/ba-p/14188138" target="_blank"&gt;ABAP Cloud at Devtoberfest in 2025&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;Clean Core&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://www.sap.com/documents/2024/09/20aece06-d87e-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;Clean core extensibility&lt;/A&gt;&lt;/SPAN&gt;&amp;nbsp;white paper&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-extensibility-guide-clean-core-for-sap-s-4hana-cloud-august-2025/ba-p/14175399" target="_blank"&gt;ABAP Extensibility Guide – Clean Core for SAP S/4HANA Cloud - August 2025 Update&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-test-cockpit-atc-recommendations-for-governance-of-clean-core-abap/ba-p/14186130" target="_blank"&gt;ABAP test cockpit (ATC) recommendations for governance of clean core ABAP development&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;ATC on SAP BTP: &lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/usage-of-abap-test-cockpit-atc-in-the-cloud-for-on-premise-developments/ba-p/13576887" target="_blank"&gt;blog&lt;/A&gt;&lt;/SPAN&gt; | &lt;SPAN&gt;&lt;A href="https://www.sap.com/documents/2025/11/38e238f7-2b7f-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;overview presentation&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/certification-of-partner-solutions-following-clean-core/ba-p/13556247" target="_blank"&gt;Certification of Partner Solutions following Clean Core&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;SAP Joule for Developers, ABAP AI capabilities&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/sap-joule-for-developers-expands-to-private-cloud-accelerating-abap/ba-p/14237958" target="_blank"&gt;SAP Joule for Developers Expands to Private Cloud: Accelerating ABAP Innovation and Transformation&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-ai-revolution-accelerates-the-abap-developer-who-built-enterprise-apps/ba-p/14216073" target="_blank"&gt;ABAP AI Revolution Accelerates: The ABAP Developer Who Built Enterprise Apps in Minutes&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/from-legacy-to-ai-powered-rise-transformation-revolution-with-joule-for/ba-p/14267448" target="_blank"&gt;From Legacy to AI-Powered: RISE Transformation Revolution with Joule for developers&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-ai-chapter-2/ba-p/14210568" target="_blank"&gt;ABAP AI - Chapter 2&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;ABAP Cloud:&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://www.sap.com/documents/2022/10/52e0cd9b-497e-0010-bca6-c68f7e60039b.html" target="_blank" rel="noopener noreferrer"&gt;ABAP Exensibility Guide&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;Become &lt;SPAN&gt;&lt;A href="https://learning.sap.com/certification/sap-certified-associate-back-end-developer-abap-cloud" target="_blank" rel="noopener noreferrer"&gt;SAP Certified Associate – Back-End Developer - ABAP Cloud&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://pages.community.sap.com/topics/abap/abap-cloud-faq" target="_blank" rel="noopener noreferrer"&gt;ABAP Cloud FAQ&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/sap-build-and-abap-cloud-basic-trial-offering/ba-p/14117116" target="_blank"&gt;SAP Build and ABAP Cloud Basic Trial Offering&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/developer-guide-from-classic-abap-to-abap-cloud/developer-guide-from-classic-abap-to-abap-cloud" target="_self" rel="noopener noreferrer"&gt;&lt;SPAN&gt;Developer Guide: From Classic ABAP to ABAP Cloud&lt;/SPAN&gt; &lt;/A&gt;on SAP Help Portal&lt;/P&gt;&lt;P&gt;Further blog posts and topic pages:&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/topics/abap/rap" target="_blank"&gt;State-of-the-Art ABAP Development with ABAP RESTful Application Programming Model (RAP)&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://blogs.sap.com/2023/10/09/abap-tools-for-clean-abap/" target="_blank" rel="noopener noreferrer"&gt;ABAP Tools for Clean ABAP&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;H2 id="toc-hId--833798607"&gt;&lt;FONT color="#3366FF"&gt;Useful Links&lt;/FONT&gt;&lt;/H2&gt;&lt;P&gt;&lt;A href="https://help.sap.com/whats-new/5fc51e30e2744f168642e26e0c1d9be1?Product_Line=SAP+S/4HANA+and+SAP+S/4HANA+Cloud+Private+Edition;SAP+S/4HANA+Cloud+Private+Edition&amp;amp;Business_Area=ABAP+Platform" target="_blank" rel="noopener noreferrer"&gt;Release Notes for ABAP Platform 2025&lt;/A&gt;&lt;BR /&gt;&lt;A href="https://help.sap.com/docs/ABAP_PLATFORM_NEW/b5670aaaa2364a29935f40b16499972d/48ba073157b85295e10000000a42189b.html" target="_blank" rel="noopener noreferrer"&gt;Documentation on SAP Help Portal&lt;/A&gt;&lt;BR /&gt;&lt;A href="https://apps.support.sap.com/sap(bD1lbiZjPTAwMQ==)/support/pam/pam.html#s=SAP%20S%2F4HANA%202020&amp;amp;o=most_viewed%7Cdesc&amp;amp;st=l&amp;amp;rpp=20&amp;amp;ts=5&amp;amp;page=1&amp;amp;pvnr=73554900100900003539&amp;amp;pt=g%7Cd" target="_blank" rel="noopener noreferrer"&gt;Product Availability Matrix (PAM)&lt;/A&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/the-abap-platform-strategy/ba-p/13413078" target="_blank"&gt;The ABAP Platform Strategy&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-platform-releases-and-consumers/ba-p/13438776" target="_blank"&gt;ABAP Platform Releases and Consumers&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://me.sap.com/notes/3612209/E" target="_blank" rel="noopener noreferrer"&gt;SAP Note 3612209 – ABAP Platform 2025 – General information&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;H2 id="toc-hId--1030312112"&gt;&lt;FONT color="#3366FF"&gt;Previous landing pages&lt;/FONT&gt;&lt;/H2&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-platform-for-sap-s-4hana-2023/ba-p/13573791" target="_blank"&gt;ABAP Platform for SAP S/4HANA 2023&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-platform-for-sap-s-4hana-2022/ba-p/13562774" target="_blank"&gt;ABAP Platform for SAP S/4HANA 2022&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-platform-for-sap-s-4hana-2021/ba-p/13514539" target="_blank"&gt;ABAP Platform for SAP S/4HANA 2021&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-platform-for-sap-s-4hana-2020/ba-p/13481357" target="_blank"&gt;ABAP Platform for SAP S/4HANA 2020&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-platform-for-sap-s-4hana-1909/ba-p/13399472" target="_blank"&gt;ABAP Platform for SAP S/4HANA 1909&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-platform-for-sap-s-4hana-1809/ba-p/13356978" target="_blank"&gt;ABAP Platform for SAP S/4HANA 1809&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/sap-netweaver-as-for-abap-7-52-available-now/ba-p/13342473" target="_blank"&gt;SAP NetWeaver AS for ABAP 7.52&lt;/A&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/sap-netweaver-as-for-abap-7-5-one-abap-platform-for-sap-business-suite-and/ba-p/13278977" target="_blank"&gt;SAP NetWeaver AS ABAP 7.50&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-sap/abap-platform-in-sap-s-4hana-cloud-private-edition-and-sap-s-4hana-2025/ba-p/14289979"/>
    <published>2025-12-14T23:10:11.122000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/hide-show-field-in-ui-dynamically-through-virtual-elements-in-rap/ba-p/14271595</id>
    <title>Hide/Show Field In UI Dynamically Through Virtual Elements In RAP</title>
    <updated>2025-12-15T06:39:16.774000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Hi RAP Developers, Good Day&lt;BR /&gt;&lt;BR /&gt;Introduction:&lt;/STRONG&gt;&lt;BR /&gt;In the SAP RAP (RESTful ABAP Programming Model), enhancing UI behavior dynamically is a common requirement, especially when business rules demand that certain fields be shown or hidden based on the underlying data. While RAP provides powerful mechanisms for extending behavior, one of the most flexible techniques for achieving dynamic UI control is through &lt;STRONG&gt;virtual elements&lt;/STRONG&gt;.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Virtual elements allow developers to calculate values at runtime without physically storing them in the database. Beyond computed fields, they can also serve as &lt;EM&gt;UI control flags,&amp;nbsp;&lt;/EM&gt;for example, determining whether a field should be visible, editable, or hidden in the Fiori Elements UI. In this blog, we explore how to leverage virtual elements to dynamically show or hide UI fields based on data conditions. Using a simple ABAP class implementation, we demonstrate how a virtual field can drive UI visibility logic efficiently within RAP.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;Projection View:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_HIDE_VIRT'
  
    virtual ishide : abap_boolean&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Metadata Extension:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  " Hide field from Identification section based on virtual element 'ishide'
  .identification: [{ position: 40, hidden: #( ishide ) }]

  " Display field in Line Item section
  .lineItem: [{ position: 30 }]

  " Make field available as a Selection Field
  .selectionField: [{ position: 30 }]

  " Business field – Total Price
  TotalPrice;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Implement Virtual Elements:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_hide_virt DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.

    " SADL Exit Interface
    INTERFACES if_sadl_exit .

    " Interface for Virtual Element Calculation (Read)
    INTERFACES if_sadl_exit_calc_element_read .

  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.



CLASS zcl_hide_virt IMPLEMENTATION.

  METHOD if_sadl_exit_calc_element_read~calculate.
    "------------------------------------------------------------------
    " Purpose: Populate virtual element 'ishide' based on TotalPrice
    "          to control field visibility in the UI.
    "------------------------------------------------------------------

    DATA : lt_virtual TYPE TABLE OF zc_tbjrn.

    " Copy original data to local internal table
    lt_virtual = CORRESPONDING #( it_original_data ).

    " Loop through internal table and set virtual element value
    LOOP AT lt_virtual ASSIGNING FIELD-SYMBOL(&amp;lt;fs_travel&amp;gt;).

      " Set ishide = abap_true when TotalPrice &amp;lt;= 142, else false
      &amp;lt;fs_travel&amp;gt;-ishide = COND abap_boolean(
                              WHEN &amp;lt;fs_travel&amp;gt;-totalprice LE 142
                                THEN abap_true
                                ELSE abap_false ).

    ENDLOOP.

    " Return updated table with calculated virtual element
    ct_calculated_data = CORRESPONDING #( lt_virtual ).

  ENDMETHOD.


  METHOD if_sadl_exit_calc_element_read~get_calculation_info.
    " No additional calculation info required
  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Preview:&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hide.png" style="width: 527px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342119iCF395FE5E4C66B36/image-dimensions/527x103/is-moderation-mode/true?v=v2" width="527" height="103" role="button" title="hide.png" alt="hide.png" /&gt;&lt;/span&gt;&lt;BR /&gt;Conclusion:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;By leveraging virtual elements together with the SADL exit class, we can dynamically control field visibility in RAP applications without modifying the actual database layer. This approach provides a clean separation between data and UI logic, improves performance, and keeps the design fully extensible. With a simple calculation exit, fields like &lt;EM&gt;Hide Indicator&lt;/EM&gt; can be determined at runtime based on business rules, allowing the UI to react instantly and display only what is relevant to the user. This method ensures a smarter, more flexible, and more maintainable RAP application.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Thanks For Reading My Blog..&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Connectivity/pd-p/266264953119842772207986043063520" class="lia-product-mention" data-product="313-1"&gt;ABAP Connectivity&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+BTP+ABAP+environment/pd-p/73555000100800001164" class="lia-product-mention" data-product="11-1"&gt;SAP BTP ABAP environment&lt;/a&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/hide-show-field-in-ui-dynamically-through-virtual-elements-in-rap/ba-p/14271595"/>
    <published>2025-12-15T06:39:16.774000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/abap-rap-download-any-kind-of-file-from-rap-application-object-page/ba-p/14290667</id>
    <title>ABAP RAP - Download any kind of file from RAP application object page</title>
    <updated>2025-12-15T20:33:03.556000+01:00</updated>
    <author>
      <name>Louis-Arnaud</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/15467</uri>
    </author>
    <content>&lt;P&gt;To the best of my knowledge, there is no built-in solution in RAP applications to add a 'Download' action on the object page without resorting to custom UI5 JavaScript coding.&lt;/P&gt;&lt;P&gt;This can be very useful when you need to download a file that is generated dynamically (such as an Adobe form, SmartForm, or any type of flat file). The ABAP RAP framework only provides upload/download functionality for objects stored in database tables.&lt;/P&gt;&lt;P&gt;In this blog post, I aim to present a simple workaround that enables adding a download button which triggers custom code to generate the file.&lt;/P&gt;&lt;P&gt;The concept is straightforward: create a virtual element (in fact, three virtual elements) in the consumption view and apply the appropriate file management annotations. In my example, I wanted to enable downloading a JSON file (hence the naming), but as mentioned earlier, this approach works for any type of file.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_CALC'
@Semantics.largeObject: { fileName: 'jsonFileName', mimeType: 'jsonMimeType', contentDispositionPreference: #ATTACHMENT }
virtual jsonOutputFile: abap.rawstring(0),

@Semantics.mimeType: true
@ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_CALC'
virtual jsonMimeType: abap.char(128),

@ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_CALC'
virtual jsonFileName: abap.char(128),&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;In the ABAP class responsible for virtual element calculation, you simply retrieve the &lt;CODE&gt;xstring&lt;/CODE&gt; of your file and set its name and type. In my example, we chose to call a function from our behavior definition, but other approaches are possible.&lt;/P&gt;&lt;P&gt;Please note that I removed the &amp;lt;&amp;gt; of field symbols (conflict with the sap community blog post html, don't know why).&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_virtual_calc DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    INTERFACES if_sadl_exit .
    INTERFACES if_sadl_exit_calc_element_read .
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.

CLASS zcl_virtual_calc IMPLEMENTATION.

  METHOD if_sadl_exit_calc_element_read~calculate.

    IF it_requested_calc_elements IS INITIAL.
      "Method was called but no virtual elements have been requested -&amp;gt; skip calculation
      RETURN.
    ENDIF.

    LOOP AT it_requested_calc_elements REFERENCE INTO DATA(requested_element).

      LOOP AT it_original_data ASSIGNING FIELD-SYMBOL(original_entity).

        "Get changing line for calculation result
        READ TABLE ct_calculated_data ASSIGNING FIELD-SYMBOL(calculated_data) INDEX sy-tabix.
        IF sy-subrc &amp;lt;&amp;gt; 0.
          CONTINUE.
        ENDIF.

        DATA(original) = CORRESPONDING zc_myobjectconsumptionview( original_entity ).

        CASE requested_element-&amp;gt;*.

          WHEN 'JSONMIMETYPE'.
            ASSIGN COMPONENT requested_element-&amp;gt;* OF STRUCTURE calculated_data TO FIELD-SYMBOL(field_value).
            IF field_value IS ASSIGNED.
              field_value = |application/json|.
            ENDIF.

          WHEN 'JSONFILENAME'.
            ASSIGN COMPONENT requested_element-&amp;gt;* OF STRUCTURE calculated_data TO field_value.
            IF field_value IS ASSIGNED.
              field_value = |file name_{ original-period }.json|.
            ENDIF.

          WHEN 'JSONOUTPUTFILE'.
            ASSIGN COMPONENT requested_element-&amp;gt;* OF STRUCTURE calculated_data TO field_value.
            IF field_value IS ASSIGNED.

              READ ENTITIES OF zr_myobjectbehviour
                ENTITY Header
                  EXECUTE exportjsonfilefunction
                  FROM VALUE #( ( %key-uuidkey = original-uuidkey ) )
                RESULT FINAL(result)
                FAILED FINAL(failed)
                REPORTED FINAL(reported).

              READ TABLE result ASSIGNING FIELD-SYMBOL(field_value) INDEX 1.
              IF sy-subrc = 0.
                field_value = -%param-file_content. "Should be xstring !
              ENDIF.
            ENDIF.

          WHEN OTHERS.
            CONTINUE.

        ENDCASE.

      ENDLOOP.

      UNASSIGN .

    ENDLOOP.

  ENDMETHOD.

  METHOD if_sadl_exit_calc_element_read~get_calculation_info.

    LOOP AT it_requested_calc_elements REFERENCE INTO DATA(requested_element).

      CASE requested_element-&amp;gt;*.

        WHEN 'JSONOUTPUTFILE' OR 'JSONMIMETYPE' OR 'JSONFILENAME'.
          INSERT |PERIOD| INTO TABLE et_requested_orig_elements.

        WHEN OTHERS.
          CONTINUE.

      ENDCASE.

    ENDLOOP.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Finally, you need to add the file field to your object page using the appropriate annotations.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;.identification: [ { position: 50 } ]
@UI.fieldGroup: [ { qualifier: 'GeneralInformations', position: 50 } ]
@EndUserText.label: 'JSON file'
jsonOutputFile;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;The result is a download link available directly on the object page.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="LouisArnaud_0-1765813827798.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352209i3EF8B4EAB293665D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="LouisArnaud_0-1765813827798.png" alt="LouisArnaud_0-1765813827798.png" /&gt;&lt;/span&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/abap-rap-download-any-kind-of-file-from-rap-application-object-page/ba-p/14290667"/>
    <published>2025-12-15T20:33:03.556000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/building-a-real-rap-application-step-by-step-vlog-series-introduction/ba-p/14290896</id>
    <title>Building a Real RAP Application Step by Step — Vlog Series Introduction</title>
    <updated>2025-12-15T21:13:47.721000+01:00</updated>
    <author>
      <name>Kinsbrunner</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/124164</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1638221392"&gt;Introduction&lt;/H1&gt;&lt;P&gt;This vlog series aims to demonstrate how to build a real-life ABAP RAP application, following a practical, incremental, and production-oriented approach.&lt;/P&gt;&lt;BLOCKQUOTE&gt;&lt;P&gt;Disclaimer:&lt;/P&gt;&lt;P&gt;This series focuses on showcasing how a RAP application can be built incrementally from real functional requirements. The app is intentionally kept practical and educational, rather than exhaustive or fully hardened for production. Some edge cases or potential enhancements are intentionally not covered.&lt;/P&gt;&lt;P&gt;The purpose of the vlog is to share knowledge, demonstrate real development workflows, and contribute to the SAP community, not to deliver a fully polished commercial-grade application.&lt;/P&gt;&lt;P&gt;To allow anyone to follow the vlog series, I will be using an SAP BTP Pay-As-You-Go platform with ABAP free-tier. This environment carries several limitations compared to a customer system (i.e. I do not have I_Product available), but it is perfectly sufficient for demonstrating the concepts and end-to-end implementation.&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;P&gt;Instead of showing a pre-built demo or isolated RAP examples, the series walks through the development process from scratch, implementing the application one requirement at a time, exactly as it would be done in an actual ABAP Cloud project.&lt;/P&gt;&lt;P&gt;Each episode focuses on a small, well-defined set of user stories, keeping the learning process smooth and allowing you to see how the application grows after every step. The structure ensures the app is testable from the very beginning, and every enhancement is immediately visible in the UI preview.&lt;/P&gt;&lt;P&gt;If you want to understand RAP not just in theory but in practice, including determinations, validations, feature control, actions, side effects, completeness checks, semantic keys, and UI configuration, this series is for you.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1441707887"&gt;What are we going to build?&lt;/H1&gt;&lt;P&gt;We’ll be developing an internal equipment request application for a consulting firm.&lt;/P&gt;&lt;P&gt;Employees can request items kept in internal stock (laptops, monitors, headsets, etc.).&lt;/P&gt;&lt;P&gt;Each request follows a simple lifecycle:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Not Prepared / In Preparation / Delivered / &lt;EM&gt;(later also Cancelled)&lt;/EM&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Each request includes header data (requester, deadline, priority, status) and one or more items referencing products from a customizing table of available materials.&lt;/P&gt;&lt;P&gt;The scenario is intentionally simple but rich enough to cover the most important RAP concepts: CDS data modeling, RAP behavior definitions in managed scenarios, Semantic keys, Determinations &amp;amp; validations, UI annotations, Feature control, Prechecks, Popup actions, Value helps, Inline editing, Integration with customizing tables, ABAP Cloud–compliant development practices.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1245194382"&gt;How the Vlog is structured&lt;/H1&gt;&lt;P&gt;The application is built based on a list of functional requirements expressed as user stories. These stories are implemented in the same order they would typically be addressed in a real project. The format of each episode is:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Short and focused&lt;/STRONG&gt; (usually covering 1-3 user stories)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Incremental&lt;/STRONG&gt; (the app evolves visibly every episode)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Practical&lt;/STRONG&gt; (every change is immediately testable)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Aligned with ABAP Cloud guidelines&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Designed for long-term learning and reference&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Whether you're starting with RAP or expanding your expertise, this series aims to provide a clear, realistic, and reusable learning path.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1048680877"&gt;Full requirement backlog (User Stories)&lt;/H1&gt;&lt;P&gt;Below is the collection of user stories implemented throughout the series, listed in almost the exact order used for development:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-01: Basic request object:&lt;/STRONG&gt; As an employee, I want to create internal equipment requests so that I can receive the products I need.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-02: Search and Filter capabilities:&lt;/STRONG&gt; As a user, I want to search requests using structured filters so that I can quickly locate relevant orders. I need to be able to search through the following criteria:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;free search field,&lt;/LI&gt;&lt;LI&gt;by Requester (with search help),&lt;/LI&gt;&lt;LI&gt;by Priority (drop-down )&lt;/LI&gt;&lt;LI&gt;by Status (drop-down with multiple selections).&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;US-03: Sequential External ID and semantic key:&lt;/STRONG&gt; As the system, I want to assign each request a sequential external number so that users can reference meaningful IDs.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-04: Mandatory fields:&lt;/STRONG&gt; As a user, I want the system to require Requester Name and Deadline Date so that requests are always complete.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-05: Deadline validation:&lt;/STRONG&gt; As the system, I want to validate that the deadline date is at least one day in the future so that operations can prepare on time.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-06: Automatic priority determination:&lt;/STRONG&gt; As the system, I want priority to be set based on deadline so that urgent requests receive proper attention (High: &amp;lt; 3 days, Medium: &amp;lt;7 days, otherwise, Low).&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-07: Status icons:&lt;/STRONG&gt; As a user, I want statuses displayed with colored icons so that I can understand them at a glance.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-08: Cancel status restrictions:&lt;/STRONG&gt; As a user, I want to search for cancelled requests but not manually set status as “Cancelled” so that lifecycle rules are respected.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-09: Default status:&lt;/STRONG&gt; As the system, I want new requests to default to “In Preparation” so that the lifecycle begins correctly.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-10: Status editability rules:&lt;/STRONG&gt; As a user, I want status to be editable only after creation so that inconsistencies are avoided.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-11: Cancel action:&lt;/STRONG&gt; As a user, I want to cancel one or more requests from the list so that I can invalidate unnecessary requests.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-12: Cancellation popup:&lt;/STRONG&gt; As a user, I want to cancel and justify cancellations through a popup so that the system enforces to have reasons registered.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-13: Cancel reason rules:&lt;/STRONG&gt; As a user, I want “Cancellation Reason” to be editable only when status is “Cancelled” so that it appears available only when relevant.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-13b:&lt;/STRONG&gt; changing dynamic field hiding approach from CDS into virtual element.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-14: No editing after cancellation:&lt;/STRONG&gt; As the system, I want cancelled requests to become read-only so that historical data is kept intact.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-15: Product catalog restriction:&lt;/STRONG&gt; As a user, I want to select products only from internal stock so that I request only available items. Internal stock is customized through a customizing table.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-16: Product value help:&lt;/STRONG&gt; As a user, I want a value help showing only available products so that selection is efficient.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-17: Unique product per request:&lt;/STRONG&gt; As a system, I want to prevent duplicate products within a request so that items remain consistent.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-18: Item creation via popup:&lt;/STRONG&gt; As a user, I want to create items in a popup and edit them inline so that maintenance is fast and intuitive.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-19: Make popup fields mandatory:&lt;/STRONG&gt; As a system, I want to ensure that the data entered through the Product popup is complete.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-20: Make item fields mandatory:&lt;/STRONG&gt; As a system, I want to ensure that the data entered through the Product object page is complete.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-21: Show product description at item level:&lt;/STRONG&gt; As a system, I want to show the item description instead of the Product ID at item level.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;US-22: No editing after completion:&lt;/STRONG&gt; As the system, I want completed requests to become read-only so that historical data is kept intact.&lt;/P&gt;&lt;P&gt;&lt;!--     notionvc: a6408df4-7d25-4b7b-ac5f-fe15a840c99c     --&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-852167372"&gt;Episode Roadmap&lt;/H1&gt;&lt;P&gt;Each episode implements a specific subset of user stories.&amp;nbsp;Episodes are planned to be released on a &lt;STRONG&gt;weekly basis (approx.)&lt;/STRONG&gt;.&amp;nbsp;Episode 1 will be released shortly, before end of year!&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;TABLE width="617px"&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;01&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Project introduction + Data model basics (&lt;A href="https://youtu.be/6V54APzzdbo" target="_blank" rel="noopener nofollow noreferrer"&gt;Video&lt;/A&gt;&amp;nbsp;|&amp;nbsp;&lt;A href="https://github.com/kinsbrunner/abap-rap-request-vlog/releases/tag/Ep01" target="_blank" rel="noopener nofollow noreferrer"&gt;Repository&lt;/A&gt;)&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-01&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;02&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Service exposure + First UI (read-only) preview&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-01&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="57px"&gt;03&lt;/TD&gt;&lt;TD width="472.126px" height="57px"&gt;Basic behavior + Search fields (Part 1): Free text + Requester&lt;/TD&gt;&lt;TD width="103.963px" height="57px"&gt;US-02 (Requester + Free text)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;04&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Search fields (Part 2): Status &amp;amp; Priority&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-02 (Status + Priority)&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;05&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Semantic key &amp;amp; Sequential numbering&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-03&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;06&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Mandatory fields + Deadline validation&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-04 + US-05&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="57px"&gt;07&lt;/TD&gt;&lt;TD width="472.126px" height="57px"&gt;Automatic Priority determination + Status icons &amp;amp; visual enhancements&lt;/TD&gt;&lt;TD width="103.963px" height="57px"&gt;US-06 + US-07&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;08&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Status behavior rules&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-08 + US-09 + US-10&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;09&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Cancel feature (Part 1)&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-11 + US-12&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;10&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Cancel feature (Part 2)&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-13 + US-13b + US-14&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;11&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Item popup creation &amp;amp; inline editing&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-18 + US-19&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;12&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Product customizing + availability&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-15 + US-16&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px" height="30px"&gt;13&lt;/TD&gt;&lt;TD width="472.126px" height="30px"&gt;Item consistency: prevent duplicates&lt;/TD&gt;&lt;TD width="103.963px" height="30px"&gt;US-17 + US-20&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="40px"&gt;14&lt;/TD&gt;&lt;TD width="472.126px"&gt;Additional rules&lt;/TD&gt;&lt;TD width="103.963px"&gt;US-21 + US-22&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;!--         notionvc: 901e9484-b00c-44be-842e-77412ea38c89         --&gt;&lt;STRONG&gt;If this introduction was helpful, a like or follow would be appreciated as it helps others in the community find the series.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/building-a-real-rap-application-step-by-step-vlog-series-introduction/ba-p/14290896"/>
    <published>2025-12-15T21:13:47.721000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/building-a-custom-stock-requirements-report-in-sap-abap/ba-p/14287594</id>
    <title>Building a Custom Stock/Requirements Report in SAP ABAP</title>
    <updated>2025-12-16T06:16:16.031000+01:00</updated>
    <author>
      <name>reddysekharapathipati</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2189357</uri>
    </author>
    <content>&lt;P&gt;&lt;!--         StartFragment          --&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;Introduction&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;!--   StartFragment    --&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;In SAP Materials Management, the Stock or Requirements List MD04 is one of the most frequently used transactions for planners and production teams. It provides a real-time view of current stock, incoming receipts, and outgoing requirements for a material at plant level. However, in real project scenarios, users often need a simplified, customized, or report-based version of MD04 that can be enhanced further or adapted to specific business needs.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;During one such requirement, I worked on building a custom ABAP report that replicates the core functionality of MD04 while keeping the logic transparent and flexible. This blog explains how a custom Stock/Requirements Report can be built using standard SAP tables and function modules, without modifying standard SAP transactions.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;!--   EndFragment    --&gt;&lt;STRONG&gt;Solution Review :&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;!--   StartFragment    --&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;The custom report ZSTCOK_912 is designed to display stock and MRP elements for a given Material and Plant, closely mirroring the MD04 output.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;1. Selection Screen&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN class=""&gt;The report starts with a simple and user friendly selection screen:&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Material Number MATNR&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Plant WERKS&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Both parameters are mandatory to ensure accurate stock evaluation.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;2. Material Number Conversion&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;Since SAP stores material numbers with leading zeros, the report uses:&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;SPAN class=""&gt;CONVERSION_EXIT_ALPHA_INPUT&lt;/SPAN&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;SPAN class=""&gt;This ensures the material number is in the correct internal format before database access.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;3. Current Stock Determination&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;To calculate the opening balance:&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Table MARD is read&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;All unrestricted stock LABST across storage locations is summed&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;This provides the current physical stock, which becomes the starting available quantity.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;4. Fetching Stock or Requirements Data&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;The core of the solution uses the standard SAP function module:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;MD_STOCK_REQUIREMENTS_LIST_API&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN class=""&gt;This is the same API used by MD04 and returns:&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;MRP elements&amp;nbsp; receipts and requirements&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Quantities&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Planning and control data&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;The data is stored in internal tables such as MDPSX, MDEZX, and MDSUX.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;5. Display Logic and Running Stock Calculation&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Each MRP element is processed sequentially:&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Receipts increase available stock&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Requirements reduce available stock&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;A running available quantity is calculated and displayed line by line, giving users a projected stock position over time.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;6. Output Format&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;The report displays:&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Date&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;MRP element type&amp;nbsp; Receipt, Requirement, Dependent Requirement, etc.&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Document number&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Receipt quantity&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Projected available stock&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN class=""&gt;Additionally, summary information such as total records processed and current stock is displayed at the end.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;!--   EndFragment    --&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;!--         StartFragment          --&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;!--        StartFragment         --&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;The Complete Solution Code&lt;BR /&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; Report ZSTCOK_912
*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; Custom Stock/Requirements  Report
*&amp;amp; Purpose: Display stock and requirements similar to MD04 transaction
*&amp;amp;---------------------------------------------------------------------*
REPORT ZSTCOK_912.

*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; DATA DECLARATIONS
*&amp;amp;---------------------------------------------------------------------*

" Reference to standard SAP tables for material master data
TABLES: mara, " General Material Data
marc. " Plant Data for Material

*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; SELECTION SCREEN
*&amp;amp;---------------------------------------------------------------------*
" Input parameters for the report - both are mandatory
SELECTION-SCREEN BEGIN OF BLOCK b1 WITH FRAME TITLE TEXT-001.
PARAMETERS: p_matnr TYPE matnr OBLIGATORY, " Material Number
p_werks TYPE werks_d OBLIGATORY. " Plant
SELECTION-SCREEN END OF BLOCK b1.

*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; INTERNAL TABLES AND WORK AREAS
*&amp;amp;---------------------------------------------------------------------*

" Internal tables to store data returned by the function module
DATA: gt_mdpsx TYPE TABLE OF mdps, " MRP element data (dates, doc numbers)
gs_mdpsx TYPE mdps, " Work area for MDPSX
gt_mdezx TYPE TABLE OF mdez, " MRP element quantities
gs_mdezx TYPE mdez, " Work area for MDEZX
gt_mdsux TYPE TABLE OF mdsu, " Summary data
gs_mdsux TYPE mdsu. " Work area for MDSUX

" Structures for exporting parameters from function module
DATA: gs_mt61d TYPE mt61d, " Material requirements planning data
gs_mdkp TYPE mdkp, " MRP controller and configuration
gs_cm61m TYPE cm61m, " MRP list control data
gs_mdsta TYPE mdsta, " MRP statistics
gv_ergbz TYPE ergbz. " Result indicator

" Variables for processing and display
DATA: gv_labst TYPE labst, " Unrestricted stock quantity
gv_available TYPE labst, " Available quantity (opening stock)
lv_running_stock TYPE mng01, " Running available stock
lv_matnr TYPE matnr, " Material number with leading zeros
lv_txt TYPE char30, " Text for MRP element description
lv_count TYPE i. " Counter for total records

*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; START-OF-SELECTION
*&amp;amp;---------------------------------------------------------------------*
START-OF-SELECTION.

"*------------------------------------------------------------------*
"* Step 1: Convert Material Number with Leading Zeros
"*------------------------------------------------------------------*
" SAP stores material numbers with leading zeros in database
" This conversion ensures proper format for database queries
CALL FUNCTION 'CONVERSION_EXIT_ALPHA_INPUT'
EXPORTING
input = p_matnr
IMPORTING
output = lv_matnr.

"*------------------------------------------------------------------*
"* Step 2: Get Current Stock from MARD Table
"*------------------------------------------------------------------*
" MARD contains storage location data for materials
" We sum all unrestricted stock (LABST) across storage locations
SELECT SINGLE SUM( labst )
INTO gv_labst
FROM mard
WHERE matnr = lv_matnr
AND werks = p_werks.

" Initialize available quantity based on query result
IF sy-subrc = 0.
gv_available = gv_labst. " Stock found
ELSE.
gv_available = 0. " No stock found
ENDIF.

"*------------------------------------------------------------------*
"* Step 3: Call Function Module to Get Stock Requirements List
"*------------------------------------------------------------------*
" MD_STOCK_REQUIREMENTS_LIST_API is SAP standard FM used by MD04
" It returns all MRP elements (receipts and requirements)
CALL FUNCTION 'MD_STOCK_REQUIREMENTS_LIST_API'
EXPORTING
matnr = lv_matnr " Material number
werks = p_werks " Plant
IMPORTING
e_mt61d = gs_mt61d " Planning data
e_mdkp = gs_mdkp " MRP configuration
e_cm61m = gs_cm61m " Control data
e_mdsta = gs_mdsta " Statistics
e_ergbz = gv_ergbz " Result indicator
TABLES
mdpsx = gt_mdpsx " MRP element master data
mdezx = gt_mdezx " MRP element quantities
mdsux = gt_mdsux " Summary data
EXCEPTIONS
material_plant_not_found = 1 " Material doesn't exist
plant_not_found = 2 " Plant doesn't exist
OTHERS = 3. " Other errors

" Error handling for function module call
IF sy-subrc &amp;lt;&amp;gt; 0.
WRITE: / 'Error getting stock requirements data'.
WRITE: / 'Return Code:', sy-subrc.
EXIT.
ENDIF.

" Check if any data was returned
IF gt_mdpsx IS INITIAL AND gt_mdezx IS INITIAL.
WRITE: / 'No stock requirements data found for Material:', p_matnr,
'Plant:', p_werks.
EXIT.
ENDIF.

"*------------------------------------------------------------------*
"* Step 4: Display Report Header Information
"*------------------------------------------------------------------*
WRITE: / 'Stock/Requirements List as of', sy-datum, sy-uzeit.
WRITE: / sy-uline(155).
WRITE: / 'Material:', p_matnr, ' Plant:', p_werks.
WRITE: / sy-uline(155).
SKIP 1.

" Display MRP configuration details if available
IF gs_mdkp IS NOT INITIAL.
WRITE: / 'MRP Controller:', gs_mdkp-dispo. " Person responsible
WRITE: / 'MRP Type:', gs_mdkp-dismm. " Planning strategy
WRITE: / 'Lot Size:', gs_mdkp-disls. " Lot sizing procedure
SKIP 1.
ENDIF.

"*------------------------------------------------------------------*
"* Step 5: Display Column Headers
"*------------------------------------------------------------------*
" Column positions are carefully aligned for readability
WRITE: / 'Date', " Date of MRP element
15 'MRP Element data', " Type of element (receipt/requirement)
45 'Doc Number', " Document number reference
70 'Receipt Qty', " Quantity of receipt
90 'Available Qty'. " Running available stock
WRITE: / sy-uline(155).

" Initialize running stock with opening balance
lv_running_stock = gv_available.

"*------------------------------------------------------------------*
"* Step 6: Display Opening Stock
"*------------------------------------------------------------------*
" Show current available stock as starting point
WRITE: / sy-datum USING EDIT MASK '__/______', " Today's date formatted
90 gv_available. " Opening stock quantity
WRITE: / sy-uline(155).

"*------------------------------------------------------------------*
"* Step 7: Process and Display MRP Elements
"*------------------------------------------------------------------*
" Loop through all MRP elements (receipts and requirements)
LOOP AT gt_mdpsx INTO gs_mdpsx.

" Get corresponding quantity data for this MRP element
" Match by date (dat00) and planning number (plumi)
READ TABLE gt_mdezx INTO gs_mdezx
WITH KEY dat00 = gs_mdpsx-dat00
plumi = gs_mdpsx-plumi.

IF sy-subrc = 0.

"*----------------------------------------------------------------*
"* Determine MRP Element Type Description
"*----------------------------------------------------------------*
" DELKZ field indicates whether element is receipt or requirement
CASE gs_mdpsx-delkz.
WHEN 'V'.
lv_txt = 'Receipt'. " Incoming material
WHEN 'B'.
lv_txt = 'Requirement'. " Outgoing material demand
WHEN 'L'.
lv_txt = 'Delivery Schedule'. " Scheduled delivery
WHEN 'A'.
lv_txt = 'Dependent Reqmt'. " From BOM explosion
WHEN 'U'.
lv_txt = 'Stock Transfer'. " Between storage locations
WHEN OTHERS.
lv_txt = gs_mdpsx-delkz. " Display code if unknown
ENDCASE.

"*----------------------------------------------------------------*
"* Calculate Running Available Stock
"*----------------------------------------------------------------*
" Receipts (+) increase stock, Requirements (-) decrease stock
IF gs_mdpsx-delkz = 'V'.
" Receipt: Add to available stock
lv_running_stock = lv_running_stock + gs_mdezx-mng03.
ELSE.
" Requirement: Subtract from available stock
lv_running_stock = lv_running_stock - gs_mdezx-mng02.
ENDIF.

"*----------------------------------------------------------------*
"* Display MRP Element Line
"*----------------------------------------------------------------*
" Show each element with aligned columns
WRITE: / gs_mdpsx-dat00 USING EDIT MASK '__/______', " Date formatted
15 lv_txt, " Element type description
45 gs_mdpsx-delnr, " Document number
70 gs_mdezx-mng03, " Receipt quantity
90 lv_running_stock. " Projected available stock

" Increment record counter
lv_count = lv_count + 1.

ENDIF.

ENDLOOP.

"*------------------------------------------------------------------*
"* Step 8: Display Summary Information
"*------------------------------------------------------------------*
WRITE: / sy-uline(155).
SKIP 1.

" Show total number of MRP elements processed
WRITE: / 'Total Records:', lv_count.
" Show current physical stock
WRITE: / 'Current Stock:', gv_labst.

" Display summary data count if available
IF gt_mdsux IS NOT INITIAL.
SKIP 2.
WRITE: / 'Summary Data Available - Total Entries:', lines( gt_mdsux ).
ENDIF.

*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; END OF REPORT
*&amp;amp;---------------------------------------------------------------------*&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;!--        StartFragment         --&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;Output&amp;nbsp; for standard MD04&amp;nbsp; real stock view:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_0-1765352645154.png" style="width: 727px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350599iF2BBED715F2C3DDB/image-dimensions/727x308?v=v2" width="727" height="308" role="button" title="reddysekharapathipati_0-1765352645154.png" alt="reddysekharapathipati_0-1765352645154.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Output for custom Report output:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="reddysekharapathipati_1-1765352723809.png" style="width: 725px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350600i81D0676745289928/image-dimensions/725x243?v=v2" width="725" height="243" role="button" title="reddysekharapathipati_1-1765352723809.png" alt="reddysekharapathipati_1-1765352723809.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;Conclusion :&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;!--   StartFragment    --&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;This custom ABAP report demonstrates how standard SAP functionality like MD04 can be replicated and customized using clean ABAP logic and standard APIs. By leveraging MD_STOCK_REQUIREMENTS_LIST_API and combining it with stock data from MARD, the report provides a clear and reliable view of stock movements and future requirements.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;From my experience, building such custom reports not only helps meet specific business requirements but also improves understanding of SAP’s internal MRP data flow. This approach offers flexibility for further enhancements such as ALV output, additional filters, or integration with planning dashboards, making it a practical alternative to standard transactions when customization is required.&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;!--   EndFragment    --&gt;&lt;!--        StartFragment         --&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;Thanks for Reading My Blog..&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Connectivity/pd-p/266264953119842772207986043063520" class="lia-product-mention" data-product="313-1"&gt;ABAP Connectivity&lt;/a&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+BTP+ABAP+environment/pd-p/73555000100800001164" class="lia-product-mention" data-product="11-1"&gt;SAP BTP ABAP environment&lt;/a&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;!--        EndFragment         --&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;!--        EndFragment         --&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;!--        EndFragment         --&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;!--        EndFragment         --&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;!--        EndFragment         --&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;!--        EndFragment         --&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;SPAN class=""&gt;&lt;!--        EndFragment         --&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class=""&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;!--         EndFragment          --&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;!--         EndFragment          --&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/building-a-custom-stock-requirements-report-in-sap-abap/ba-p/14287594"/>
    <published>2025-12-16T06:16:16.031000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/clean-core-maturity-and-the-new-extensibility-levels/ba-p/14293974</id>
    <title>Clean Core maturity and the new Extensibility Levels</title>
    <updated>2025-12-19T02:05:13.081000+01:00</updated>
    <author>
      <name>EmilianoAyub</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1814</uri>
    </author>
    <content>&lt;P&gt;For years, the architectural conversation around SAP S/4HANA seemed trapped in a rigid side.&lt;BR /&gt;On one side, the purist vision moving all development to side-by-side extensibility on SAP BTP. On the other side, the operational reality, where complex transactional logic and proximity to data made decoupling code technically expensive and sometimes unfeasible..&lt;/P&gt;&lt;P&gt;However, we often lost in this conversation: Clean Core... what's side-by-side... what's On-stack&lt;BR /&gt;Not so far back in time, we followed the 3-Tier Development Model. This framework tried to organize development into three tiers (Tier 1 for Cloud, Tier 2 with Wrappers, Tier 3 for Legacy).&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="EmilianoAyub_0-1766095271167.png" style="width: 753px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353961i364C3C93F0EE335F/image-dimensions/753x344?v=v2" width="753" height="344" role="button" title="EmilianoAyub_0-1766095271167.png" alt="EmilianoAyub_0-1766095271167.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;While useful, there's a new pragmatic second generation framework: the Clean Core Level Concept&lt;STRONG&gt;&lt;BR /&gt;&lt;/STRONG&gt;This new maturity model increases the availability of APIs and reduces the forced need for wrappers, incorporating classic ABAP use cases safely.&amp;nbsp;But how does this translate into the modern architecture of Levels A, B, C, and D?&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="EmilianoAyub_1-1766095526949.png" style="width: 754px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353962iDF99305712507E9A/image-dimensions/754x383?v=v2" width="754" height="383" role="button" title="EmilianoAyub_1-1766095526949.png" alt="EmilianoAyub_1-1766095526949.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Level A: The Gold Standard (On-stack &amp;amp; Side-by-side)&lt;/STRONG&gt;&lt;BR /&gt;Level A doesn't force you off-stack. It represents extensions that rely exclusively on stable, public interfaces backed by stability.&amp;nbsp;Is agnostic to the deployment environment:&lt;BR /&gt;&lt;BR /&gt;Side-by-side Extensions: Decoupled extensions running on the Business Technology Platform. This ecosystem allows for SAP Build (low-code/pro-code), CAP (Java/Node.js), and ABAP Cloud (Steampunk) to create scalable apps and automations&lt;BR /&gt;&lt;BR /&gt;On-stack Extensions: Created inside SAP S/4HANA Cloud (either as Key User Extensions or Developer Extensions). This validates that building tightly coupled logic within the S/4HANA it's ok, provided that released technologies like RAP (RESTful ABAP Programming) and CDS Views are used. So that by using of released APIs and strict syntax checks, you can build tightly coupled logic (essential for transactional integrity) without creating technical debt&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Level B: The Pragmatism of "Classic APIs"&lt;/STRONG&gt;&lt;BR /&gt;Unlike Level A, which relies on stability contracts, Level B uses Classic APIs and frameworks. While not strictly "Cloud" capable, these are upgrade-stable.&lt;BR /&gt;You can identify these in the &lt;A href="https://sap.github.io/abap-atc-cr-cv-s4hc/?states=classicAPI" target="_self" rel="nofollow noopener noreferrer"&gt;Cloudification Repository&lt;/A&gt;. Object frameworks such as&amp;nbsp;SAPscript, and ALE/IDoc integrations fall into this category. This provides a critical "safe harbor," allowing to leverage proven legacy technologies without facing immediate refactoring pressure&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Level C: Risk Management and Changelogs&lt;BR /&gt;&lt;/STRONG&gt;When business reality demands the use of internal SAP objects for legacy scenarios, we enter Level C. Unlike the previous levels, there is an upgrade risk here. To mitigate it, SAP provides the Changelog for SAP Objects, a tool that allows you to identify incompatible changes early and plan proactive actions. Although not the preferred approach, it is a valid option if managed with wrappers to isolate the dependency.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Level D : The red line (Technical Debt)&lt;/STRONG&gt;&lt;BR /&gt;Any extension that uses non-recommended patterns, such as direct modifications to the standard, direct writing to tables, or Implicit Enhancements, falls into this category. This represents the highest risk of technical debt and must be rigorously blocked using ABAP Test Cockpit (ATC) checks.&amp;nbsp;These patterns bypass standard logic and guarantee disruption during upgrades&lt;/P&gt;&lt;P&gt;&lt;EM&gt;Extensions objects are classified as unfit for customer use (marked as "noAPI" in the &lt;A href="https://sap.github.io/abap-atc-cr-cv-s4hc/?states=classicAPI" target="_self" rel="nofollow noopener noreferrer"&gt;Cloudification Repository&lt;/A&gt;)&amp;nbsp;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="EmilianoAyub_2-1766099778150.png" style="width: 756px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353980i25C19A4B536F906C/image-dimensions/756x336?v=v2" width="756" height="336" role="button" title="EmilianoAyub_2-1766099778150.png" alt="EmilianoAyub_2-1766099778150.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;By understanding Levels (A, B, C, D) we can make architectural decisions that balance technical purity with operational reality, prioritizing business stability and flexibility.... But Important!!: Beyond the levels, a Clean Core strategy requires governance. The fundamental principle is: Extensions must be avoided when possible. Before, we must to evaluate if standard functionality covers the process. If the extension is inevitable, we must ensure that &lt;U&gt;extensions don't break Upgrades&lt;BR /&gt;&lt;/U&gt;To decide between an On-stack or Side-by-side implementation, customers should use the &lt;A href="https://help.sap.com/docs/sap-btp-guidance-framework/sap-application-extension-methodology/sap-application-extension-methodology-overview" target="_self" rel="noopener noreferrer"&gt;SAP Application Extension Methodology&lt;/A&gt;. This methodology helps to define a custom extension strategy. It addresses challenges like "clean core" by offering a structured, standard approach. This ensures a common understanding and terminology and it allows to assess technical options and make informed decisions to build an extension framework for your organization.&lt;/P&gt;&lt;P&gt;---&lt;BR /&gt;Bookmark this SAP Note: &lt;A href="https://me.sap.com/notes/3578329" target="_self" rel="noopener noreferrer"&gt;3578329 - Frameworks, Technologies and Development Patterns in Context of Clean Core Extensibility&lt;/A&gt;&amp;nbsp;&lt;BR /&gt;Official list of framework and technology classifications that will tell you what is Level A, B, C, or D&lt;BR /&gt;&lt;BR /&gt;New Cloudification Repository Viewer for Clean Core Governance and Development&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/new-cloudification-repository-viewer-for-clean-core-governance-and/ba-p/14236110" target="_self"&gt;https://community.sap.com/t5/technology-blog-posts-by-sap/new-cloudification-repository-viewer-for-clean-core-governance-and/ba-p/14236110&lt;/A&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/clean-core-maturity-and-the-new-extensibility-levels/ba-p/14293974"/>
    <published>2025-12-19T02:05:13.081000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/welcome-corner-blog-posts/hierarchical-value-help-in-sap-fiori-elements-beyond-flat-value-help/ba-p/14295106</id>
    <title>Hierarchical Value Help in SAP Fiori Elements – Beyond Flat Value Help</title>
    <updated>2025-12-23T06:56:20.998000+01:00</updated>
    <author>
      <name>LiyaAjayan</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1585930</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Intro&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Hierarchies are everywhere in business data.&lt;BR /&gt;Org units, product groups, cost centers… none of these are really flat.&lt;/P&gt;&lt;P&gt;In analytical Fiori apps, we’re used to work with hierarchies — defined via annotations and used for drill-down and analysis. The focus there is navigation, aggregation, and analysis. We have seen many blogs showing how to display a &lt;STRONG&gt;hierarchical list of data in a List Report page&lt;/STRONG&gt; using CDS hierarchy definitions. What’s less discussed, however, is that the &lt;STRONG&gt;similar approach can be used for value helps.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;When it comes to &lt;STRONG&gt;value helps in transactional apps&lt;/STRONG&gt;, we usually still end up with long, flat F4 lists. The good news: &lt;STRONG&gt;hierarchical value help is possible in Fiori Elements&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Using &lt;STRONG&gt;CDS hierarchy definitions&lt;/STRONG&gt;, a value help can be rendered as a tree, directly reflecting the parent–child structure of the data — no custom logic, no custom UI coding, no Fiori elements extensions. I stumbled upon this while working on a RAP-based app and thought it’s worth sharing.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;How It Works&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;At a high level, the setup looks like this:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Model the hierarchical data in CDS&lt;/LI&gt;&lt;LI&gt;Define the hierarchy using a CDS hierarchy definition&lt;/LI&gt;&lt;LI&gt;Expose the hierarchy through a value help CDS view&lt;/LI&gt;&lt;LI&gt;Reference that view using @Consumption.valueHelpDefinition&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;That’s it.&lt;/P&gt;&lt;P&gt;Once this is in place, the value help in a List Report or Object Page shows up as a tree, including expand/collapse behavior, driven entirely by the CDS model. Everything stays model-driven and clean-core friendly.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Scenario:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;I have taken a common &lt;STRONG&gt;Employee–Manager hierarchy&lt;/STRONG&gt; as an example; however, the same approach can be applied to other hierarchical scenarios such as &lt;STRONG&gt;G/L account hierarchies, cost center structures&lt;/STRONG&gt;, and similar use cases.&lt;/P&gt;&lt;P&gt;In this application, project owners are selected from the employee list. To better represent the reporting structure, the value help is implemented as a &lt;STRONG&gt;hierarchy rather than a flat list&lt;/STRONG&gt;. The focus of this blog is &lt;STRONG&gt;only on the value help&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Reference:&lt;/STRONG&gt; For detailed steps on showing a hierarchy in a List Report, see &lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/treeview-with-read-only-capability" target="_blank" rel="noopener noreferrer"&gt;SAP Help – Tree View with Read-Only Capability&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Inetrface View:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Below is the interface view, which is defined with a &lt;STRONG&gt;self-referenced association&lt;/STRONG&gt; to represent the employee–manager relationship. This adds the hierarchical logic to the exisiting data.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="LiyaAjayan_4-1766391041341.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354508i69F59B9E3C32E19C/image-size/large?v=v2&amp;amp;px=999" role="button" title="LiyaAjayan_4-1766391041341.png" alt="LiyaAjayan_4-1766391041341.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Hierarchy Definition:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Define how the hierarchical data is interpreted with a parent-child hierarchy.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="LiyaAjayan_5-1766391041346.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354509iCD7901D55F0F7B7C/image-size/large?v=v2&amp;amp;px=999" role="button" title="LiyaAjayan_5-1766391041346.png" alt="LiyaAjayan_5-1766391041346.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;define hierarchy ZI_LA_EMPL_HIER
  as parent child hierarchy(
    source ZR_LA_EMPL
    child to parent association _manager
    start where
      ManagerId is initial
    siblings order by
      FirstName ascending
  )
{
  key EmpId,
      FirstName,
      ManagerId

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Projection View:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Here’s the projection view, defined with hierarchy annotations and the self association. The &lt;STRONG&gt;Presentation Variant qualifier must be defined&lt;/STRONG&gt;. Without it, the hierarchy will not render correctly in the value help.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt; The recursiveHierarchy entity name is case-sensitive and must be used exactly as defined. If your CDS views use namespaces, check the metadata and enter the correct fully qualified name.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="LiyaAjayan_6-1766391041354.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354510iCBC0B74B04F12BD9/image-size/large?v=v2&amp;amp;px=999" role="button" title="LiyaAjayan_6-1766391041354.png" alt="LiyaAjayan_6-1766391041354.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Projection View for ZR_LA_EMPL'

@ObjectModel.dataCategory: #VALUE_HELP
@OData.hierarchy.recursiveHierarchy:[{ entity.name: 'ZI_LA_EMPL_HIER' }]

@UI.presentationVariant: [{ recursiveHierarchyQualifier: 'ZI_LA_EMPL_HIER',
                            initialExpansionLevel: 1,
                            qualifier: 'HierN' }]

define root view entity ZC_LA_EMPL
  provider contract transactional_query
  as projection on ZR_LA_EMPL
  association of many to one ZC_LA_EMPL as _manager on $projection.ManagerId = _manager.EmpID

{
@UI.hidden: true
  key EmpId as EmpID,
      FirstName,
      LastName,
      ManagerId,
      Email,
      _manager 
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Value Help Consumption&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Finally, the hierarchy-enabled projection view is consumed in the &lt;STRONG&gt;value help annotation&lt;/STRONG&gt;, along with the &lt;STRONG&gt;Presentation Variant qualifier&lt;/STRONG&gt;, to display employees in a hierarchical structure during value help selection.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="LiyaAjayan_7-1766391041356.png" style="width: 973px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354511iE55752D7A1DA04B8/image-size/large?v=v2&amp;amp;px=999" role="button" title="LiyaAjayan_7-1766391041356.png" alt="LiyaAjayan_7-1766391041356.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  @Consumption.valueHelpDefinition: [{ entity: { name: 'ZC_LA_EMPL', element: 'EmpID' }
  ,presentationVariantQualifier: 'HierN'
  ,useForValidation: true  }]&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;If the hierarchy is modeled correctly, Fiori Elements does the rest.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="LiyaAjayan_0-1766392201843.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/354530iEEA480C7296ECE7C/image-size/large?v=v2&amp;amp;px=999" role="button" title="LiyaAjayan_0-1766392201843.png" alt="LiyaAjayan_0-1766392201843.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Findings:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Odata V2 doesn’t support Hierarchy.&lt;/LI&gt;&lt;LI&gt;I have checked in On premise system with ABAP PLATFORM 2025 and is supported.&lt;/LI&gt;&lt;LI&gt;The recursiveHierarchy entity name is case-sensitive.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;You can explore the rest on your own and share your findings with us.&lt;span class="lia-unicode-emoji" title=":thumbs_up:"&gt;👍&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Hope you find this helpful&amp;nbsp;&lt;span class="lia-unicode-emoji" title=":smiling_face_with_smiling_eyes:"&gt;😊&lt;/span&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/welcome-corner-blog-posts/hierarchical-value-help-in-sap-fiori-elements-beyond-flat-value-help/ba-p/14295106"/>
    <published>2025-12-23T06:56:20.998000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/how-to-use-sap-extensibility-wizard-in-sap-s-4hana-clean-core/ba-p/14290385</id>
    <title>How to Use SAP Extensibility Wizard in SAP S/4HANA Clean Core</title>
    <updated>2025-12-23T07:13:48.565000+01:00</updated>
    <author>
      <name>ahmedyehia9</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/803721</uri>
    </author>
    <content>&lt;P&gt;&lt;!--         StartFragment          --&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;A Comprehensive Guide to Extending SAP S/4HANA with the SAP Extensibility Wizard — Without Compromising Your Clean Core&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;Extensibility is a critical aspect of SAP S/4HANA, enabling organizations to tailor the system to their unique business needs while maintaining stability and upgrade readiness. In this guide, we will explore the &lt;STRONG&gt;SAP Extensibility Wizard&lt;/STRONG&gt;, a powerful tool designed to help developers extend SAP S/4HANA in a clean and controlled way.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;What Is the SAP Extensibility Wizard?&lt;/U&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The &lt;STRONG&gt;SAP Extensibility Wizard&lt;/STRONG&gt; is a guided tool provided by SAP that simplifies the process of creating extensions. It ensures that developers can add custom functionality without modifying the core system, thereby preserving the &lt;EM&gt;clean core&lt;/EM&gt; principle. This approach guarantees that upgrades remain smooth and that the&amp;nbsp;system stays resilient over time.&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Availability: Public Cloud vs. Private Cloud&lt;/STRONG&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;A common question arises: &lt;EM&gt;Is the SAP Extensibility Wizard available only in the Public Cloud, or also in the Private Cloud?&lt;/EM&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Public Cloud (SAP S/4HANA Cloud – Public Edition):&lt;/STRONG&gt;&lt;BR /&gt;The wizard is primarily available here. It supports clean-core extensibility and helps organizations build safe, upgrade‑friendly extensions.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Private Cloud / On‑Premise:&lt;/STRONG&gt;&lt;BR /&gt;Extensibility is possible through other approaches such as &lt;STRONG&gt;in‑app extensibility&lt;/STRONG&gt;, &lt;STRONG&gt;ABAP Cloud&lt;/STRONG&gt;, and &lt;STRONG&gt;side‑by‑side extensions on SAP BTP&lt;/STRONG&gt;. However, the wizard itself is not provided in the same way as in the Public Cloud.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;!--         StartFragment          --&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;In summary:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Public Cloud → Wizard available.&lt;/LI&gt;&lt;LI&gt;Private Cloud / On‑Premise → Extensibility options exist, but without the wizard.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Focus of This Blog&lt;/STRONG&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;This blog will focus on the &lt;STRONG&gt;SAP Extensibility Wizard for SAP S/4HANA Cloud – Public Edition&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;!--         EndFragment          --&gt;&lt;!--         StartFragment          --&gt;&lt;/P&gt;&lt;P&gt;How to Use the Extensibility Wizard&lt;/P&gt;&lt;P&gt;With the SAP S/4HANA Cloud Public Edition extensibility wizard, developers can:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Create on‑stack extensions&lt;/STRONG&gt; such as custom fields and custom logic.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Build side‑by‑side extensions&lt;/STRONG&gt; like custom processes using &lt;STRONG&gt;SAP Build Process Automation&lt;/STRONG&gt;.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This guided approach ensures that extensions are implemented efficiently, securely, and in alignment with SAP’s clean‑core strategy.&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;The &lt;STRONG&gt;SAP Extensibility Wizard&lt;/STRONG&gt; is a key enabler for organizations running SAP S/4HANA Cloud Public Edition. By leveraging this tool, businesses can extend their systems with confidence, ensuring that customizations remain upgrade‑safe and future‑proof.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;!--         EndFragment          --&gt;&lt;/P&gt;&lt;P&gt;&lt;!--         EndFragment          --&gt;&lt;/P&gt;&lt;P&gt;&lt;!--         EndFragment          --&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;&lt;U&gt;Detailed Steps:&lt;/U&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;&lt;U&gt;Use Case :&lt;/U&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;We will create a sales order approval process .&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-30px" style="padding-left : 30px;"&gt;&lt;STRONG&gt;&lt;SPAN&gt;&lt;U&gt;1. Navigate to SAP S4/HANA Fiori Launchpad.&lt;/U&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;STRONG&gt;1.1 &lt;SPAN&gt;&lt;U&gt;Select Business Application Manage Sales Orders.&amp;nbsp;&lt;/U&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_0-1765834104246.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352339i91F62F84C5AB9BDE/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_0-1765834104246.png" alt="ahmedyehia9_0-1765834104246.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.2&amp;nbsp;&amp;nbsp;&lt;SPAN class=""&gt;Navigate to Create Extension&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_1-1765835538668.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352344i459BD0772768EF2C/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_1-1765835538668.png" alt="ahmedyehia9_1-1765835538668.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_2-1765835643824.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352345iBD182EF1112D4E2B/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_2-1765835643824.png" alt="ahmedyehia9_2-1765835643824.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.3 In this case , we will select custom process.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_3-1765835770046.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352346i9861EC014341E37E/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_3-1765835770046.png" alt="ahmedyehia9_3-1765835770046.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;The process can start based on various triggers&amp;nbsp;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.4 Select Business Event from SAP S4/HANA, that Triggers the process&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_3-1765964349459.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352986i5DF86AB2863FD894/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_3-1765964349459.png" alt="ahmedyehia9_3-1765964349459.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.5 Select Event Object&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;DIV&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_0-1766054851277.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/353528i8F3DABA18FBD5A90/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_0-1766054851277.png" alt="ahmedyehia9_0-1766054851277.png" /&gt;&lt;/span&gt;&lt;/DIV&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.6 Select the SalesOrder create event.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_6-1765836099992.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352349i6FBE6C976C5237A6/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_6-1765836099992.png" alt="ahmedyehia9_6-1765836099992.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.7 Click Preview to see all the options you selected on previous screens, and make any necessary corrections.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_7-1765836274304.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352350i7E8D51F75B7D8373/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_7-1765836274304.png" alt="ahmedyehia9_7-1765836274304.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.8 Click Create , to create the process in SAP Build.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_8-1765836432554.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352351i115237BDD9C3F187/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_8-1765836432554.png" alt="ahmedyehia9_8-1765836432554.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.9 The extension is now available and can also be opened in SAP Build.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_9-1765836549398.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352352i31CCC05F9800CFB1/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_9-1765836549398.png" alt="ahmedyehia9_9-1765836549398.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.10 When you select Open Extension, the system launches another tab that opens the process.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_10-1765836669849.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352353i1BB38AA5DD08A534/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_10-1765836669849.png" alt="ahmedyehia9_10-1765836669849.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.11 The Process Automation project overview page is now displayed. Select SalesOrder Approval.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_11-1765836836220.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352355i47B44A41CDB28FE0/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_11-1765836836220.png" alt="ahmedyehia9_11-1765836836220.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.12 Extension is now openEd in SAP Build , Start design of the process.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;The Business context is carried over from SAP S4/HANA to SAP Build .&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_0-1765874183680.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352505iF1FDFBE39F95630B/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_0-1765874183680.png" alt="ahmedyehia9_0-1765874183680.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.13 You can add an action, form , or approval . To get further details on the sales order, you need to call an action .&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_1-1765874475245.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352517iCBB3B0B64C54F079/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_1-1765874475245.png" alt="ahmedyehia9_1-1765874475245.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.14 In this use case , we will call sales order read API , to fetch the sales order details.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_2-1765874611731.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352518i440DB912AD85229E/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_2-1765874611731.png" alt="ahmedyehia9_2-1765874611731.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.15 Browse the library to search for&amp;nbsp; the relevant APIs .&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_3-1765874731152.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352519i5596679844740296/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_3-1765874731152.png" alt="ahmedyehia9_3-1765874731152.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.16 Select read sales order API to get details of the sales order, The business context and system ID were automatically pulled in from SAP S4/HANA .&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_4-1765874972943.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352522i36CE20BEFFDBCE90/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_4-1765874972943.png" alt="ahmedyehia9_4-1765874972943.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.17 The action to read the sales order has now been added . Now users can design the process according to their needs. The user now wants to initiate a workflow that sends an email to the approver for sales order approval .&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_5-1765875108309.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352524iC01561336C140883/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_5-1765875108309.png" alt="ahmedyehia9_5-1765875108309.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.18 The email will include the sales order details , allowing approver to review and approve it . we're utilizing AI to generate the process , Enter the prompt to add an approval step and send the sales order details to the approver via email.&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_6-1765875296166.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352526i795E93D5EFBDF600/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_6-1765875296166.png" alt="ahmedyehia9_6-1765875296166.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;SPAN&gt;&lt;STRONG&gt;1.19 AI has now added the process step to read the sales order and email, The sales order details to the approver .&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ahmedyehia9_0-1765896023701.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/352780iED7CB3058677CB55/image-size/medium?v=v2&amp;amp;px=400" role="button" title="ahmedyehia9_0-1765896023701.png" alt="ahmedyehia9_0-1765896023701.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&amp;nbsp;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;!--      StartFragment       --&gt;&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;The &lt;STRONG&gt;SAP Extensibility Wizard&lt;/STRONG&gt; empowers organizations running SAP S/4HANA Cloud Public Edition to extend their systems safely and efficiently, without compromising the clean core. By leveraging guided tools for custom fields, logic, and side‑by‑side processes, businesses can innovate while staying upgrade‑ready.&lt;/P&gt;&lt;P&gt;Extensibility in SAP is not just about adding features—it’s about doing so in a way that keeps your system future‑proof. With the wizard, you can confidently build the extensions your business needs today, while ensuring smooth upgrades tomorrow.&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;!--      EndFragment       --&gt;&lt;/P&gt;&lt;P class="lia-indent-padding-left-60px" style="padding-left : 60px;"&gt;&lt;!--                    StartFragment                     --&gt;&lt;/P&gt;&lt;P&gt;&lt;!--                    EndFragment                     --&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/how-to-use-sap-extensibility-wizard-in-sap-s-4hana-clean-core/ba-p/14290385"/>
    <published>2025-12-23T07:13:48.565000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/actions-in-rap-abap-in-unmanaged-bo-and-list-report-with-copy-action/ba-p/14135069</id>
    <title>Actions in RAP ABAP in Unmanaged BO and List Report with COPY Action</title>
    <updated>2025-12-23T07:30:36.953000+01:00</updated>
    <author>
      <name>BharathKumarVaddepalli</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1989797</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Introduction :&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This document explains how to implement a custom instance action (COPY) in a managed RAP (RESTful ABAP Programming Model) application. The scenario is based on a custom Product business object, where a selected product record can be copied to create a new one with adjusted values. The implementation covers the complete RAP flow: creating a custom database table, defining Interface and Composite (Projection) Views, metadata definitions, and behavior definitions. It also demonstrates how to implement the action logic in the behavior implementation class and expose the action to a SAP Fiori Elements application using annotations. Finally, the solution shows how to publish and consume the OData service and generate a List Report application in SAP Business Application Studio (BAS).&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Create a custom table (preferably, but you may use a standard table if needed) on which you will perform a series of actions or operations.&lt;/LI&gt;&lt;LI&gt;You need to create an Interface View and the Composite View.&lt;/LI&gt;&lt;LI&gt;Create the meta data definition for the Composite View.&lt;/LI&gt;&lt;LI&gt;Create behavior definitions for both the Interface and Composite Views.&lt;/LI&gt;&lt;LI&gt;You can find these steps in the following blog&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-members/crud-operations-in-rap-abap-in-managed-bo/ba-p/14134508" target="_blank"&gt;CRUD Operations in RAP ABAP in managed BO - SAP Community&lt;/A&gt;&lt;/LI&gt;&lt;LI&gt;From Here the actual Topic Starts &lt;STRONG&gt;Actions&amp;nbsp;&lt;/STRONG&gt;that are to be implemented.&lt;/LI&gt;&lt;/OL&gt;&lt;P class="lia-indent-padding-left-240px" style="padding-left : 240px;"&gt;&lt;STRONG&gt;COPY Of a Record&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Just define the action that is to be handled in your application. Here I have used the Action &lt;STRONG&gt;COPY.&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_1-1750741925006.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277948i243A58D92ECCE566/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_1-1750741925006.png" alt="BharathKumarVaddepalli_1-1750741925006.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_i_vbproduct_vw unique;
strict ( 2 );
//with draft;
define behavior for ZI_VBPRODUCT_VW alias Product
persistent table zvb_product
//draft table zvb_product_d
lock master

//total etag Localdate
authorization master ( instance )
etag master Localdate
{
  create;
  update;
  delete;
//   draft action Edit;
//    draft determine action Prepare;
//   draft action Activate;
// draft action Discard;
// draft action Resume;
//field ( readonly ) productid;
 factory action Copy[1];
  mapping for zvb_product
{
  ProductId = product_id;
  Name       = name;
  Category   = category;
  Price      = price;
  Currency   = currency;
  Discount   = discount;
  Localdate = localdate;
  createdtime = createdtime;
  CreatedBy = createdby;
}
}​&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;&amp;nbsp;Now you have to implement the method in the class that is defined in the interface Behavior definition.&lt;/LI&gt;&lt;LI&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_2-1750742102007.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277951iEB80304DE46F03C1/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_2-1750742102007.png" alt="BharathKumarVaddepalli_2-1750742102007.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_Product DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.

    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR Product RESULT result.
    METHODS copy FOR MODIFY
      IMPORTING keys FOR ACTION product~copy.

ENDCLASS.

CLASS lhc_Product IMPLEMENTATION.

  METHOD get_instance_authorizations.
  ENDMETHOD.
METHOD copy.

  DATA:
    products TYPE TABLE FOR CREATE zi_vbproduct_vw,
    lv_prod_id TYPE zi_vbproduct_vw-productid.

  " Ensure no keys with initial %cid
  READ TABLE keys WITH KEY %cid = '' INTO DATA(key_with_initial_cid).
  ASSERT key_with_initial_cid IS INITIAL.

  " Step 1: Read existing product data
  READ ENTITIES OF zi_vbproduct_vw IN LOCAL MODE
    ENTITY product
    ALL FIELDS WITH CORRESPONDING #( keys )
    RESULT DATA(product_read_result)
    FAILED failed.

  " Step 2: Determine starting product ID
  SELECT MAX( productid ) FROM zi_vbproduct_vw INTO _prod_id.

  " Step 3: Prepare new product instances
  LOOP AT product_read_result ASSIGNING FIELD-SYMBOL(&amp;lt;product&amp;gt;).

    DATA(new_product_id) = lv_prod_id + 1.
    lv_prod_id = new_product_id.

    APPEND VALUE #(
      %cid      = keys[ KEY entity %key = &amp;lt;product&amp;gt;-%key ]-%cid
*      %is_draft = keys[ KEY entity %key = &amp;lt;product&amp;gt;-%key ]-%param-%is_draft
      %data     = VALUE #(
        productid = new_product_id
        name      = &amp;lt;product&amp;gt;-name
        category  = &amp;lt;product&amp;gt;-category
        price     = &amp;lt;product&amp;gt;-price * ( 1 - ( &amp;lt;product&amp;gt;-discount / 100 ) )
        currency  = &amp;lt;product&amp;gt;-currency
        discount  = &amp;lt;product&amp;gt;-discount
        localdate = sy-datum
        createdby = sy-uname
      )
    ) TO products.

  ENDLOOP.

  " Step 4: Create new product instances
  MODIFY ENTITIES OF zi_vbproduct_vw IN LOCAL MODE
    ENTITY product
    CREATE FIELDS ( productid name category price currency discount localdate createdby )
    WITH products
    MAPPED DATA(mapped_create).

  " Step 5: Set mapped result
  mapped-product = mapped_create-product.

ENDMETHOD.

ENDCLASS.​&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;Use action in the Composite View Behaviour definition.&lt;/LI&gt;&lt;LI&gt;￼&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_3-1750742258279.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277953i5016252C716F4CD1/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_3-1750742258279.png" alt="BharathKumarVaddepalli_3-1750742258279.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );
//use draft;
define behavior for ZC_VB_PROJ_PRODUCT alias Product
implementation in class zbp_i_vbproduct_vw unique
{
  use create;
  use update;
  use delete;
//   use action Edit;
// use action Prepare;
// use action Activate;
// use action Discard;
// use action Resume;
use action Copy;
 mapping for zvb_product

{
  ProductId = product_id;
  Name       = name;
  Category   = category;
  Price      = price;
  Currency   = currency;
  Discount   = discount;
  Localdate = localdate;
  createdtime = createdtime;
  CreatedBy = createdby;
}
}​&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;&amp;nbsp;To display the button in the Fiori application you must have the following code in your metadata extension.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;{ type: #FOR_ACTION , label: 'Copy', dataAction: 'Copy'   }​&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;If you want the button in the Line-item page, you must mention the action in the&amp;nbsp;&lt;EM&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineitem&lt;/EM&gt; annotation or you need in the object page then you have to use in&amp;nbsp;&lt;EM&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification&lt;/EM&gt; annotation&lt;/LI&gt;&lt;LI&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_4-1750742523804.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277960iACBDABBC6AB38D66/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_4-1750742523804.png" alt="BharathKumarVaddepalli_4-1750742523804.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
@UI: { 

  headerInfo: { 

    typeName: 'Product', 
    typeNamePlural: 'Product', 
    title: { type: #STANDARD , label: 'Product', value: 'ProductId' } 
    
    }
    }
annotate view ZC_VB_PROJ_PRODUCT
    with 
{
      .facet: [{ id: 'product_id', purpose: #STANDARD, type: #IDENTIFICATION_REFERENCE, label: 'product_id', position: 10 }] 

  : { lineItem: [{ position: 10 },{ type: #FOR_ACTION , label: 'Copy', dataAction: 'Copy'   }] ,selectionField: [{ position: 20 }], 

  identification: [{ position: 10, label: 'Product ID' }] } 

    ProductId ; 

    : { lineItem: [{ position: 20 }], identification: [{ position: 20, label: 'Name' }], selectionField: [{ position: 30 }] } 

    Name; 

        : { lineItem: [{ position: 30 }], identification: [{ position: 30, label: 'Category' }],selectionField: [{ position: 40 }]} 

    Category; 

     : { lineItem: [{ position: 40 }], identification: [{ position: 40,label: 'Price' }],selectionField: [{ position: 50 }]} 

    Price; 

     : { lineItem: [{ position: 50}], identification: [{ position: 50, label: 'Currency' }],selectionField: [{ position: 60 }]} 

    Currency; 
    .lineItem: [{  position: 60 }]
    .identification: [{ position: 60, label: 'Discount'  }]
    .selectionField: [{  position: 70 }]
    Discount; 
     .lineItem: [{  position: 70 }]
    .identification: [{ position: 70, label: 'Created Date'  }]
    .selectionField: [{  position: 80 }]
    Localdate;
     .lineItem: [{  position: 80 }]
    .identification: [{ position: 80, label: 'Created Time'  }]
    .selectionField: [{  position: 90 }]
    createdtime;
     .lineItem: [{  position: 90 }]
    .identification: [{ position: 90, label: 'Created By'  }]
    .selectionField: [{  position: 100 }]
    CreatedBy;
    
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;6.&amp;nbsp; Finally Create a Service definition for the Consumption view and Service binding for that service definition. then activate the Service binding and publish the Service Binding for View it.&amp;nbsp;&lt;/P&gt;&lt;P&gt;Click on Preview.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_5-1750742921608.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277965i8DE71704BAAB98F8/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_5-1750742921608.png" alt="BharathKumarVaddepalli_5-1750742921608.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;Final Output&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;You can see the button here in the Fiori application&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_6-1750743033609.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277969i7E663D1E3F92AEF2/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_6-1750743033609.png" alt="BharathKumarVaddepalli_6-1750743033609.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;As it is an instance action you can see it enabled when you select the record.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_7-1750743131711.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277971i777E9A3A73BDEC00/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_7-1750743131711.png" alt="BharathKumarVaddepalli_7-1750743131711.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;When you click on the&amp;nbsp;&lt;STRONG&gt;COPY&amp;nbsp;&lt;/STRONG&gt;Button you can see the Created record in the object page.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_8-1750743247453.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277972iAFF34DB1CE662FAC/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_8-1750743247453.png" alt="BharathKumarVaddepalli_8-1750743247453.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Finally, you can see the copied record in the list report&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_9-1750743324818.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/277973i1D6254BCB4458DD4/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_9-1750743324818.png" alt="BharathKumarVaddepalli_9-1750743324818.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;USAGE OF The ODATA Service in SAP Business application Studio&lt;/P&gt;&lt;P&gt;Use the Service Binding Name to create a list report in the BAS&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_0-1750759818424.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278204i2D7508B6A6F62036/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_0-1750759818424.png" alt="BharathKumarVaddepalli_0-1750759818424.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Follow below steps to create a list report&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Open BAS&lt;/LI&gt;&lt;LI&gt;Click on SAP Fiori generator and click on Next.&amp;nbsp;&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_1-1750760083123.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278206iE6A376C30208925B/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_1-1750760083123.png" alt="BharathKumarVaddepalli_1-1750760083123.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;Click on List Report Page and Next.&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_2-1750760140813.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278207iBA3B4FAC7F852A2D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_2-1750760140813.png" alt="BharathKumarVaddepalli_2-1750760140813.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;Select the data Source, System and Service&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_3-1750760238391.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278213iC88BD21213727F6F/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_3-1750760238391.png" alt="BharathKumarVaddepalli_3-1750760238391.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;Select the Main Entity and Type and Click on Next.&amp;nbsp;&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&amp;nbsp;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_4-1750760266810.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278214i62ED59DB216259D4/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_4-1750760266810.png" alt="BharathKumarVaddepalli_4-1750760266810.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;Finally give the module name, application name and Name space if needed&lt;/LI&gt;&lt;LI&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_5-1750760464074.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278219iA78CA4A5B03A6EA9/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_5-1750760464074.png" alt="BharathKumarVaddepalli_5-1750760464074.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;After Creating the project right click on the application and preview application&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_6-1750760504358.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278220i2B4D43E62AA7CB67/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_6-1750760504358.png" alt="BharathKumarVaddepalli_6-1750760504358.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;Final Output is as follows&amp;nbsp;&lt;/LI&gt;&lt;LI&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_7-1750760581368.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/278222i66EF9D441A37D106/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_7-1750760581368.png" alt="BharathKumarVaddepalli_7-1750760581368.png" /&gt;&lt;/span&gt;&lt;P&gt;&lt;STRONG&gt;Summary&lt;/STRONG&gt;&lt;/P&gt;In this implementation, a managed RAP business object is enhanced with a COPY instance action that duplicates an existing product record. The action is defined in the Interface View behavior, implemented in the behavior handler class, and then exposed in the Composite (Projection) View. Metadata extensions are used to display the COPY button in the Fiori UI, either in the line item or object page. Once the service definition and binding are created and published, the OData service is consumed in BAS to generate a List Report application. The final result is a fully functional Fiori application where users can select a product, trigger the COPY action, and immediately see the newly created record in both the object page and the list report.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Thank You,&lt;/P&gt;&lt;P&gt;Bharath Kumar V&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/actions-in-rap-abap-in-unmanaged-bo-and-list-report-with-copy-action/ba-p/14135069"/>
    <published>2025-12-23T07:30:36.953000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/deep-insert-payload-into-a-single-table-in-rap-abap/ba-p/14175272</id>
    <title>Deep Insert Payload into a Single table in RAP ABAP</title>
    <updated>2025-12-24T06:55:42.141000+01:00</updated>
    <author>
      <name>BharathKumarVaddepalli</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1989797</uri>
    </author>
    <content>&lt;P&gt;This document demonstrates how to design and implement a &lt;STRONG&gt;RAP-based create scenario with a nested payload&lt;/STRONG&gt; using the RESTful ABAP Programming Model (RAP). The example focuses on inserting data into a single custom database table using a &lt;STRONG&gt;root entity with a composition child&lt;/STRONG&gt;, allowing a structured payload that includes both product and inventory-related information. The solution covers the full RAP flow: creating the database table, defining Interface Views and Projection Views with compositions, implementing managed behavior with an unmanaged save, handling the payload in the behavior saver class, and finally exposing the data through a service definition and service binding. The scenario is validated by consuming the OData service with a JSON payload that creates the record successfully.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Payload&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;STRONG&gt;to be passed to insert the record&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;{ 
        "ProductId" : "00000000-0000-0000-0000-000000000987", 
        "Name" : "Kumar111", 
        "to_InventoryReceipt" : 
                         {       
                              "Category" : "Transport", 
                                "Price" : 200, 
                                  "Currency" : "USD" 
                          }, 
        "Discount" : 30
} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;Here all the fields' data are from the same table.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;1. Create your table in which your payload is to be inserted.&lt;/P&gt;&lt;P&gt;2. Create Interface Views as given below.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_0-1754629443013.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298147iE74CAC24B4780503/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_0-1754629443013.png" alt="BharathKumarVaddepalli_0-1754629443013.png" /&gt;&lt;/span&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED 
@EndUserText.label: 'product root view' 
@Metadata.ignorePropagatedAnnotations: true 
define root view entity ZI_vbProduct_tmp_vw 
  as select from zvb_product_tmp as product 
composition [0..1] of ZI_InventoryReceipt_IFD_SEG as _InventoryReceipt 
{ 
  key product.product_id      as ProductId, 
      product.name           as Name, 
      product.discount       as Discount, 
      product.createdby      as CreatedBy, 
      _InventoryReceipt 
} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_1-1754629443020.png" style="width: 484px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298146i181E761913D26A24/image-dimensions/484x196?v=v2" width="484" height="196" role="button" title="BharathKumarVaddepalli_1-1754629443020.png" alt="BharathKumarVaddepalli_1-1754629443020.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]  
@AccessControl.authorizationCheck: #NOT_REQUIRED  
@EndUserText.label: 'ZI_InventoryReceipt_IFD_SEG' 
@Metadata.ignorePropagatedAnnotations: true 
@ObjectModel.usageType:{  
serviceQuality: #X,  
sizeCategory: #S,  
dataClass: #MIXED  
}  
define view entity ZI_InventoryReceipt_IFD_SEG 
  as select from zvb_product_tmp  
  association to parent ZI_vbProduct_tmp_vw as _Product 
    on $projection.ProductId = _Product.ProductId 
{ 
  key product_id   as ProductId, 
      category    as Category, 
      price       as Price, 
      currency    as Currency, 
       _Product 
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Projection Views&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Create the projection views for the Interface Views.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_2-1754629443024.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298148iFEBA12358E4D9857/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_2-1754629443024.png" alt="BharathKumarVaddepalli_2-1754629443024.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED 
@EndUserText.label: 'product projection view' 
@Metadata.ignorePropagatedAnnotations: true 
define root view entity ZP_Product as projection on ZI_vbProduct_tmp_vw 
{ 
@UI.facet: [{  
purpose: #STANDARD,  
position: 10,  
label: 'Product',  
type: #IDENTIFICATION_REFERENCE  
},  
{  
purpose: #STANDARD,  
position: 20,  
label: 'Inventory',  
type: #LINEITEM_REFERENCE,  
targetElement: '_InventoryReceipt'  
}]  
@UI.lineItem: [{ position: 10, label: 'ProductId' }]  
@UI.identification: [{ position: 10, label: 'ProductId' }]  
    key ProductId, 
    .lineItem: [{ position: 20, label: 'Name' }]  
@UI.identification: [{ position: 20, label: 'Name' }]  
    Name, 
    .lineItem: [{ position: 30, label: 'Discount' }]  
@UI.identification: [{ position: 30, label: 'Discount' }]  
    Discount, 
    .lineItem: [{ position: 40, label: 'CreatedBy' }]  
@UI.identification: [{ position: 40, label: 'CreatedBy' }]  
    CreatedBy, 
    /* Associations */ 
    _InventoryReceipt : redirected to composition child ZP_inventory 
} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_3-1754629836472.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298150i3C7C047550C9BD0C/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_3-1754629836472.png" alt="BharathKumarVaddepalli_3-1754629836472.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED 
@EndUserText.label: 'ZP_inventory' 
@Metadata.ignorePropagatedAnnotations: true 
define view entity ZP_inventory as projection on ZI_InventoryReceipt_IFD_SEG 
{ 
@UI.facet: [{  
purpose: #STANDARD,  
position: 10,  
label: 'Inventory',  
type: #IDENTIFICATION_REFERENCE  
}]  
@UI.lineItem: [{ position: 50, label: 'ProductId' }]  
@UI.identification: [{ position: 50, label: 'ProductId' }]  
    key ProductId, 
    .lineItem: [{ position: 60, label: 'Category' }]  
@UI.identification: [{ position: 60, label: 'Category' }]  
    Category, 
    .lineItem: [{ position: 70, label: 'Price' }]  
@UI.identification: [{ position: 70, label: 'Price' }]  
    Price, 
    .lineItem: [{ position: 80, label: 'Currency' }]  
@UI.identification: [{ position: 80, label: 'Currency' }]  
    Currency, 
    /* Associations */ 
    _Product   : redirected to parent ZP_Product 
} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Create Behaviour definition on Interface View.&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_4-1754629908125.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298151i0AF077AFE98DFB5D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_4-1754629908125.png" alt="BharathKumarVaddepalli_4-1754629908125.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Behaviour Definition for projection views&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_5-1754629961680.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298152iDC9166B198E01BBE/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_5-1754629961680.png" alt="BharathKumarVaddepalli_5-1754629961680.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed with unmanaged save implementation in class zbp_i_vbproduct_tmp_vw unique; 
strict ( 2 ); 
define behavior for ZI_VBPRODUCT_tmp_VW alias product_tmp 
//late numbering 
lock master 
authorization master ( instance ) 
//etag master &amp;lt;field_name&amp;gt; 
//early numbering 
{ 
  create; 
  update; 
  delete; 
  association _InventoryReceipt { create ; } 
}
define behavior for ZI_INVENTORYRECEIPT_IFD_SEG 
lock dependent by _Product 
//early numbering 
authorization dependent by _Product 
{ 
  association  _Product; 
  update; 
  delete; 
  field ( readonly ) productid; 
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_6-1754630048978.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298153i7F78BB6E8060D6F8/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_6-1754630048978.png" alt="BharathKumarVaddepalli_6-1754630048978.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection; 
strict ( 2 ); 
define behavior for ZP_Product alias Product 
{ 
  use create; 
  use update; 
  use delete; 
  use association _InventoryReceipt { create; } 
} 
define behavior for ZP_inventory alias Inventory 
{ 
  use update; 
  use delete; 
  use association _Product; 
} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;Behaviour Implementation&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_product_tmp DEFINITION INHERITING FROM cl_abap_behavior_handler. 

  PRIVATE SECTION. 
    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION 
      IMPORTING keys REQUEST requested_authorizations FOR product_tmp RESULT result. 

*          METHODS earlynumbering_create FOR NUMBERING 
*      IMPORTING entities FOR CREATE ZI_VBPRODUCT_tmp_VW. 

ENDCLASS. 

CLASS lhc_product_tmp IMPLEMENTATION. 
  METHOD get_instance_authorizations. 
  ENDMETHOD. 

*  METHOD earlynumbering_create. 
*  endmethod. 

ENDCLASS. 

CLASS lsc_ZI_VBPRODUCT_TMP_VW DEFINITION INHERITING FROM cl_abap_behavior_saver. 

  PROTECTED SECTION. 

    METHODS save_modified REDEFINITION. 
     METHODS cleanup_finalize REDEFINITION. 
ENDCLASS. 

CLASS lsc_ZI_VBPRODUCT_TMP_VW IMPLEMENTATION. 
  METHOD save_modified. 

*  create-product_tmp 

data: lt_product_tmp type table for change zi_vbproduct_tmp_vw\\product_tmp. 

data: lt_zi_inventoryreceipt_ifd_seg type table for change zi_inventoryreceipt_ifd_seg. 

data: lt_final type table of zvb_product. 
MOVE-CORRESPONDING create-product_tmp to lt_product_tmp. 
MOVE-CORRESPONDING create-zi_inventoryreceipt_ifd_seg to lt_zi_inventoryreceipt_ifd_seg. 
LOOP AT lt_product_tmp into data(ls_product). 
read TABLE lt_zi_inventoryreceipt_ifd_seg into data(ls_invent) index 1. 
append value #( product_id = cl_system_uuid=&amp;gt;create_uuid_x16_static( ) 
                name = ls_product-Name 
                Discount = ls_product-Discount 
                Category = ls_invent-Category 
                currency = ls_invent-Currency 
                price = ls_invent-Price ) to lt_final. 
endloop. 

modify zvb_product from TABLE lt_final. 
  ENDMETHOD. 
  METHOD cleanup_finalize. 
  ENDMETHOD. 
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Service Definition&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_7-1754630415803.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298155iA8C6A113E03111A8/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_7-1754630415803.png" alt="BharathKumarVaddepalli_7-1754630415803.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'SD FOR PRODUCT' 
define service ZSD_PRODUCT_TMP { 
  expose ZP_Product; 
  expose ZP_inventory; 
} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Service Binding&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_8-1754630476599.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298156i593521CC7DAEA017/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_8-1754630476599.png" alt="BharathKumarVaddepalli_8-1754630476599.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Payload&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;STRONG&gt;to be passed to insert the record&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;{ 
        "ProductId" : "00000000-0000-0000-0000-000000000987", 
        "Name" : "Kumar111", 
        "to_InventoryReceipt" : 
     { 
                                                              "Category" : "Transport", 
                                                              "Price" : 200, 
                                                              "Currency" : "USD" 
}, 
        "Discount" : 30 
 
} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;URI&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;/sap/opu/odata/sap/ZSB_PRODUCT_TEMP_V2/ZP_Product&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;OUTPUT&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="BharathKumarVaddepalli_0-1754631573555.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/298158i2CEB1239F038684D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="BharathKumarVaddepalli_0-1754631573555.png" alt="BharathKumarVaddepalli_0-1754631573555.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;By using RAP compositions and managed behavior with an unmanaged save implementation, this approach enables handling &lt;STRONG&gt;complex, nested payloads&lt;/STRONG&gt; in a clean and extensible way. Even though all fields originate from the same database table, the logical separation into a root entity and a composition child improves API design and aligns with RAP best practices. The service definition and binding expose the entities for OData consumption, making it easy to create records using a single POST request with a structured payload. This design provides flexibility for future enhancements, ensures clear separation of responsibilities, and integrates seamlessly with SAP Fiori applications and external consumers.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Thank You&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Bharath Kumar VADDEPALLI&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/deep-insert-payload-into-a-single-table-in-rap-abap/ba-p/14175272"/>
    <published>2025-12-24T06:55:42.141000+01:00</published>
  </entry>
</feed>
