<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>https://raw.githubusercontent.com/ajmaradiaga/feeds/main/scmt/topics/ABAP-RESTful-Application-Programming-Model-blog-posts.xml</id>
  <title>SAP Community - ABAP RESTful Application Programming Model</title>
  <updated>2025-11-25T00:00:06.386133+00:00</updated>
  <link href="https://community.sap.com/t5/c-khhcw49343/ABAP RESTful Application Programming Model/pd-p/7e44126e-7b27-471d-a379-df205a12b1ff" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator>
  <subtitle>ABAP RESTful Application Programming Model blog posts in SAP Community</subtitle>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/mastering-total-etag-in-rap-a-practical-guide/ba-p/14227417</id>
    <title>Mastering Total ETag in RAP , A Practical Guide.</title>
    <updated>2025-10-13T07:44:59.204000+02:00</updated>
    <author>
      <name>Pradeep555</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1451114</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;In this blog I have explained the mechanism of total etag&amp;nbsp; and also differnce between&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;E-TAG and total etag in RAP in restful abap programming model&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Introduction :&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ETAG: the etag concept ensures that&amp;nbsp; the end user of an Odata service only changes instances with the state that is displayed on the UI&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Hence , the etag prevents changes of the BO that are not noticed by the Odata consumers&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.W&lt;/SPAN&gt;&lt;SPAN&gt;ith Etag master each BO&amp;nbsp; entity can be checked independently.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;TOTAL E-TAG:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;It enables optimistic concurrency checks durig the transition from draft to active data&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;This total etag field on the database table is updated by the RAP runtime framework as soon as an active instance is changed&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Its value is compared when resuming a draft instance to ensure that the active data has not been changed after the exclusive lock has expired&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;The total E-tag is used for edit-drafts, a draft that has a corresponding active instance .&lt;/SPAN&gt;&lt;SPAN&gt;As soon as the exclusive lock expires and&amp;nbsp; an edit-draft is resumed , the total etag value of the draft is compared to the total ETAG value of the active instance&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;The total etag is compared for all entities of BO&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Total e-tag is useful when we are changing draft data to active data .&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_0-1758777107961.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319637iDB81940A0646880F/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Pradeep555_0-1758777107961.png" alt="Pradeep555_0-1758777107961.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;why total etag? and scenario&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Suppose an application is not using draft concepts ,&amp;nbsp; if it is only using e-tag then that application is also modifying the same table&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;E-tag will work whenever we are loading the data in the front end , someone else changes the data&amp;nbsp; and&amp;nbsp; unknowingly&amp;nbsp; saving the data – etag will be compered&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In&amp;nbsp; order to save the data and override we use etag&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;SCENARIO:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;When we start working on a draft table , we will put exclusive lock on active instance (say BOOKING ID-1)so that nobody can change the data.&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Active data base--&amp;gt;it will become active instance--&amp;gt; active instance to it will become draft instance&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Suppose&amp;nbsp; I&amp;nbsp; have made some changes in active instance and – forgot to save it ,&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;But it will be automatically saved in draft instance – as we are working on draft&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;Chages made will be automatically saved in draft table&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;As soon as we stop working – the exclusve lock will be removed from active instance (BOOKING ID-1)&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;So now&amp;nbsp; the I&amp;nbsp; will come again ad start working on the draft instance which&amp;nbsp; have&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Saved , again&amp;nbsp; I will put exclusive lock and make some changes in the data and save it .&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;As soon as we save – draft instance will be converted into active instance&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;What happens if we don't use total eTag?&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Suppose somebody else did some changes and those changes are not saved in draft&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;(&lt;/SPAN&gt;&lt;SPAN&gt;the app is not using draft )&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;,&lt;/SPAN&gt;&lt;SPAN&gt;And we will be overwriting those changes with our changes, since we don't exactly now&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp; w&lt;/SPAN&gt;&lt;SPAN&gt;hether someone eles has changed the data or not&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Total etag will be matched automatically based on the field &lt;/SPAN&gt;&lt;SPAN&gt;@Semantics.systemDateTime.lastChangedAt: true&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;We need to match these field in behaviour definition&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;The framework will update total etag field each time --&amp;gt; whenever we are converting draft into&amp;nbsp; active data&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Example :&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;1.create the table&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_1-1758777516837.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319638iBA50C280B96C856A/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_1-1758777516837.png" alt="Pradeep555_1-1758777516837.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;2.create a consumption view and provide the necessary annotation&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_2-1758777601278.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319639iC5FD3820E1DB68BB/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_2-1758777601278.png" alt="Pradeep555_2-1758777601278.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;3.&lt;/SPAN&gt;&lt;SPAN&gt;create behaviour definition and provide total Etag and respective field.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_3-1758777648461.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319642i24CEFCC17BCB1020/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_3-1758777648461.png" alt="Pradeep555_3-1758777648461.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;4. create draft table&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_4-1758777676405.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319643i715C25FB8A7E1322/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_4-1758777676405.png" alt="Pradeep555_4-1758777676405.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;5.&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;create service def.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_5-1758777706631.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319645i36372182CFD9F5AB/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_5-1758777706631.png" alt="Pradeep555_5-1758777706631.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;6.Create&amp;nbsp;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;service binding.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_6-1758777736935.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319646i83155EF51634578F/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_6-1758777736935.png" alt="Pradeep555_6-1758777736935.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;7.OUTPUT&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_7-1758777788413.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319647i5818315A1846CC63/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_7-1758777788413.png" alt="Pradeep555_7-1758777788413.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;8.now&amp;nbsp; user 1 opens the data&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_8-1758777841691.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319648i25DC4171796D1C7D/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_8-1758777841691.png" alt="Pradeep555_8-1758777841691.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;9.user 2 has the same data&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_9-1758777887709.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319649i6B063E5B03A49A2D/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_9-1758777887709.png" alt="Pradeep555_9-1758777887709.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;10.now user 1 starts editing the data&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_10-1758777929109.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319652i91F42FE09E418B7B/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_10-1758777929109.png" alt="Pradeep555_10-1758777929109.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;11.suppose the user 2 trying to edit the same data--&amp;gt; he will get an error&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_11-1758777971032.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319656iC79AADF91C9F4BFF/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_11-1758777971032.png" alt="Pradeep555_11-1758777971032.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_12-1758777991719.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319657i0883C4CDE67D4E2B/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_12-1758777991719.png" alt="Pradeep555_12-1758777991719.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;13.we can see the entry in the dradft table&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_13-1758778026503.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319658i44DE883A4568A852/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_13-1758778026503.png" alt="Pradeep555_13-1758778026503.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;14.now the active draft is&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_14-1758778067261.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319659i78779C02AB84DA77/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_14-1758778067261.png" alt="Pradeep555_14-1758778067261.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;15.User2&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN class=""&gt;Trying to edit active draft with different value-&amp;gt;g&lt;/SPAN&gt;&lt;SPAN class=""&gt;etting error-&amp;gt;No data found&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_15-1758778105887.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319660i1614DD58FD8874E5/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_15-1758778105887.png" alt="Pradeep555_15-1758778105887.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;16.Now user2&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN class=""&gt;trying&lt;/SPAN&gt;&lt;SPAN class=""&gt; to edit&amp;nbsp; with&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN class=""&gt;Same value-&amp;gt;updated&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pradeep555_16-1758778144031.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/319661i81539FD8305AC09E/image-size/large?v=v2&amp;amp;px=999" role="button" title="Pradeep555_16-1758778144031.png" alt="Pradeep555_16-1758778144031.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;So total etag comes into picture&amp;nbsp;!!&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Conclusion:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;lt;&amp;lt; Whenever we wil save the data&amp;nbsp; from active to draft instance – before saving I will compare total e-tag&amp;nbsp; value&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;If it matches --&amp;gt; I&amp;nbsp;shall save the data&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;If it does not match --&amp;gt; i shall not save&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Whenever we change the&amp;nbsp; active data --&amp;gt; total etag changes each time .&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;If nobody changes the data&amp;nbsp; ---&amp;gt; total etag will be matched&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;If somebody changes the data--&amp;gt; total&amp;nbsp; etag will not be matched , we need to discrad the current draft and&amp;nbsp; we need to load the current data&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;NOTE: whenever we change the draft data into active data we need total etag&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;thank you !&lt;/P&gt;&lt;P&gt;- Pradeep Ishwar Devadiga&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/mastering-total-etag-in-rap-a-practical-guide/ba-p/14227417"/>
    <published>2025-10-13T07:44:59.204000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/file-upload-for-items-in-fiori-elements-list-report/ba-p/14240957</id>
    <title>File upload for items in Fiori Elements List Report</title>
    <updated>2025-10-13T12:30:19.100000+02:00</updated>
    <author>
      <name>hironobu_nakayama</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/781777</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1633604625"&gt;1. Introduction&lt;/H1&gt;&lt;P&gt;In this blog, we'll show you how to upload, browse, and delete files on a row-by-line basis by having each row (item) have an item like an "attachment" in the SAP Fiori Elements List Report.&lt;BR /&gt;The data source for the List Report covers OData V4 services developed using the ABAP RESTful Application Programming Model (RAP) framework, and provides information about the implementation required to achieve file upload in RAP development.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1437091120"&gt;2. Key points for implementing file upload&lt;/H1&gt;&lt;P&gt;In the file upload implementation, two points are required: (1) define the table items required for file storage, and (2) provide appropriate annotations for file object storage fields and file type storage fields.&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Defining the table items required to store files&lt;P&gt;Set the following three fields in the custom table (the field names are samples).&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;File object storage field (abap.rawstring(0) if file size is not specified)&lt;UL&gt;&lt;LI&gt;example：attachment: abap.rawstring(0);&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;Field for file name&lt;UL&gt;&lt;LI&gt;example：filename: abap.char(128);&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;Field for file Type&lt;UL&gt;&lt;LI&gt;example：mimetype: abap.char(128);&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;Proper Annotation of File Object and File Type Fields in CDS View&lt;UL&gt;&lt;LI&gt;File object storage field&lt;UL&gt;&lt;LI&gt;example：&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Semantics.largeObject : {
mimeType: 'Mimetype',
fileName: 'Filename',
contentDispositionPreference: #INLINE
}​&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;UL&gt;&lt;LI&gt;Field for file Type&lt;UL&gt;&lt;LI&gt;@Semantics.mimeType: true&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/UL&gt;&lt;H1 id="toc-hId-1240577615"&gt;3. Implementation sample&lt;/H1&gt;&lt;P&gt;In this blog, we will use the RAP Generator to simplify RAP development. RAP Generator is a tool that allows you to generate RAP objects such as CDS View and Behavior Definition from custom tables using only wizard settings. When using the RAP Generator to generate a RAP object, a service is generated that supports the Managed Runtime with a draft function. Therefore, the table definition must define the required fields for drafting functions and update processing. For more information about RAP Generator, please check the following SAP Help.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/generating-rap-business-service-with-generate-abap-repository-objects-wizard" target="_blank" rel="noopener noreferrer"&gt;Generating a RAP Business Service with the Generate ABAP Repository Objects Wizards&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;This blog is an example implementation based on the &lt;SPAN&gt;SAP Help: &lt;/SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/example-rap-business-service-generation" target="_blank" rel="noopener noreferrer"&gt;Example: OData UI Service Generation Based on a Database Table&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1302229548"&gt;1. Create a package to store objects by the RAP Generator.&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="0-1760157013761.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325823iFF67EF8A7D119B10/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_0-1760157013761.png" alt="hironobu_nakayama_0-1760157013761.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1105716043"&gt;2. Create a custom table inside the package you created in 1.&lt;/H3&gt;&lt;P&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="1-1760157057491.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325824i82D4DF7B553C56CD/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_1-1760157057491.png" alt="hironobu_nakayama_1-1760157057491.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_2-1760157071905.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325825i0DDC00E4250B93BB/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_2-1760157071905.png" alt="hironobu_nakayama_2-1760157071905.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Custom Table for file upload test'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zpt_file_upload {

  key client            : abap.clnt not null;
  key customer_id       : /dmo/customer_id not null;
  first_name            : /dmo/first_name;
  last_name             : /dmo/last_name;
  title                 : /dmo/title;
  street                : /dmo/street;
  postal_code           : /dmo/postal_code;
  city                  : /dmo/city;
  country_code          : land1;
  phone_number          : /dmo/phone_number;
  email_address         : /dmo/email_address;
  attachment            : abap.rawstring(0);
  filename              : abap.char(128);
  mimetype              : abap.char(128);
  local_created_by      : abp_creation_user;
  local_created_at      : abp_creation_tstmpl;
  local_last_changed_by : abp_locinst_lastchange_user;
  local_last_changed_at : abp_locinst_lastchange_tstmpl;
  last_changed_at       : abp_lastchange_tstmpl;

}​&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-909202538"&gt;3. Run the RAP Generator and follow the wizard to configure it.&lt;/H3&gt;&lt;P&gt;Right-click on the target custom table → run it with "Generate ABAP Repository Objects..."&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="3-1760157422206.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325826iC928155A8BCFAE9E/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_3-1760157422206.png" alt="hironobu_nakayama_3-1760157422206.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Selecting a Service Type&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="4-1760157441952.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325827iF0BB085AA624F8A4/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_4-1760157441952.png" alt="hironobu_nakayama_4-1760157441952.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Selecting a package for storing generated objects&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="5-1760157464387.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325828iCA1BEBBB2C283DDC/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_5-1760157464387.png" alt="hironobu_nakayama_5-1760157464387.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Review the generated object and rename or alias it as needed&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="6-1760157482071.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325829i0F2526AA45703F9D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_6-1760157482071.png" alt="hironobu_nakayama_6-1760157482071.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_7-1760157495656.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325830i9C6952F5528E2BD6/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_7-1760157495656.png" alt="hironobu_nakayama_7-1760157495656.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-712689033"&gt;4. Add annotations for file upload to the generated data model (CDS View) and enable the CDS View.&lt;/H3&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: '##GENERATED ZPT_FILE_UPLOAD'
define root view entity ZR_PT_FILE_UPLOAD
  as select from zpt_file_upload
{
  key customer_id           as CustomerID,
      first_name            as FirstName,
      last_name             as LastName,
      title                 as Title,
      street                as Street,
      postal_code           as PostalCode,
      city                  as City,
      country_code          as CountryCode,
      phone_number          as PhoneNumber,
      email_address         as EmailAddress,
      @Semantics.largeObject : {
            mimeType: 'Mimetype',
            fileName: 'Filename',
            contentDispositionPreference: #INLINE
          }
      attachment            as Attachment,
      filename              as Filename,
      @Semantics.mimeType: true
      mimetype              as Mimetype,
      @Semantics.user.createdBy: true
      local_created_by      as LocalCreatedBy,
      @Semantics.systemDateTime.createdAt: true
      local_created_at      as LocalCreatedAt,
      @Semantics.user.localInstanceLastChangedBy: true
      local_last_changed_by as LocalLastChangedBy,
      @Semantics.systemDateTime.localInstanceLastChangedAt: true
      local_last_changed_at as LocalLastChangedAt,
      @Semantics.systemDateTime.lastChangedAt: true
      last_changed_at       as LastChangedAt

}&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-516175528"&gt;5. Publish the service binding.&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="8-1760157523686.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325831i4F5DCB4410845F5A/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_8-1760157523686.png" alt="hironobu_nakayama_8-1760157523686.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-319662023"&gt;6. Select the entity and preview it.&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="9-1760157563744.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325832iC927D9BEF8566E34/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_9-1760157563744.png" alt="hironobu_nakayama_9-1760157563744.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-123148518"&gt;7. From the "Create" button, perform data registration and file upload.&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="10-1760157593131.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325833i2D10826CA744794B/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_10-1760157593131.png" alt="hironobu_nakayama_10-1760157593131.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="11-1760157628831.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325834iCBF6028E63ADA10C/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_11-1760157628831.png" alt="hironobu_nakayama_11-1760157628831.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="12-1760157647311.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325835iC7286B9648C140C7/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_12-1760157647311.png" alt="hironobu_nakayama_12-1760157647311.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="13-1760157663896.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325836i33B8FE451D47FCBE/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_13-1760157663896.png" alt="hironobu_nakayama_13-1760157663896.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="14-1760157681275.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325837i22D13F546974AC37/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_14-1760157681275.png" alt="hironobu_nakayama_14-1760157681275.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="15-1760157702526.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325838iBABEDFAC843FB59D/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_15-1760157702526.png" alt="hironobu_nakayama_15-1760157702526.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="16-1760157721073.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325839i9A80962EABEC37F9/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_16-1760157721073.png" alt="hironobu_nakayama_16-1760157721073.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-438209658"&gt;4. Summary&lt;/H1&gt;&lt;P&gt;By implementing the above, using the OData V4 service using the ABAP RESTful Application Programming Model (RAP), you can use the "Attachment" for each row (item) in the SAP Fiori Elements List Report. It is possible to upload, read, and delete files on a line-by-line basis. Please take advantage of it.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-241696153"&gt;References&lt;/H1&gt;&lt;P&gt;SAPUI5 Document: &lt;A href="https://sapui5.hana.ondemand.com/#/topic/b236d32d48b74304887b3dd5163548c1" target="_blank" rel="noopener nofollow noreferrer"&gt;Enabling Stream Support&lt;/A&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/file-upload-for-items-in-fiori-elements-list-report/ba-p/14240957"/>
    <published>2025-10-13T12:30:19.100000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/dynamically-making-a-field-read-only-in-sap-rap/ba-p/14225542</id>
    <title>Dynamically Making a Field Read-Only in SAP RAP</title>
    <updated>2025-10-14T11:19:32.771000+02:00</updated>
    <author>
      <name>Faizan_khan1</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1451076</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;Making a field read-only or non-editable dependent on the value of another field is a frequent requirement. This blog post will explain how to use the RAP model to accomplish this.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;The scenario we'll cover is making the &lt;/SPAN&gt;&lt;SPAN&gt;VBTYP&lt;/SPAN&gt;&lt;SPAN&gt; field read-only based on the value of the &lt;/SPAN&gt;&lt;SPAN&gt;AUART&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp; field.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Setting Up the RAP Application&lt;/STRONG&gt;&amp;nbsp;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Before implementing the dynamic behavior, we need a basic RAP application structure.&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Database Table&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Data base Table for sales order'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zdemo_dt_so {
  key vbeln : vbeln_va not null;
  erdat     : erdat;
  ernam     : ernam;
  vbtyp     : vbtypl;
  auart     : auart;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp; 2 . &lt;STRONG&gt;Interface View&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Interface view for sales order'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define root view entity ZDEMO_I_SO as select from zdemo_dt_so
{
    key vbeln as Vbeln,
    erdat as Erdat,
    ernam as Ernam,
    vbtyp as Vbtyp,
    auart as Auart
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;3 .&amp;nbsp;&lt;STRONG&gt;&lt;SPAN&gt;Projection View&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Projection view for Sales order'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
@Metadata.allowExtensions: true
define root view entity ZDEMO_P_SO as projection on ZDEMO_I_SO
{
    key Vbeln,
    Erdat,
    Ernam,
    Vbtyp,
    Auart
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp; 4 .&amp;nbsp;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;STRONG&gt;Behavior Definition&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_demo_i_so unique;
strict ( 2 );
define behavior for ZDEMO_I_SO //alias &amp;lt;alias_name&amp;gt;
persistent table zdemo_dt_so
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
{
field (features : instance ) Vbtyp ;
validation vbtyp_valid on save { field Auart , Vbtyp ; }
  create;
  update;
  delete;
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );
define behavior for ZDEMO_P_SO //alias &amp;lt;alias_name&amp;gt;
{
  use create;
  use update;
  use delete;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;STRONG&gt; 5 .Service Definition and Binding&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service def SO'
define service ZDEMO_P_SO {
  expose ZDEMO_P_SO;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Faizan_khan1_1-1758626719811.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/318831i36BA6EF83B11D5D0/image-size/large?v=v2&amp;amp;px=999" role="button" title="Faizan_khan1_1-1758626719811.png" alt="Faizan_khan1_1-1758626719811.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Once you click on preview you can see the application and create a record&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Faizan_khan1_2-1758626761985.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/318832i87B00A509503C3FA/image-size/large?v=v2&amp;amp;px=999" role="button" title="Faizan_khan1_2-1758626761985.png" alt="Faizan_khan1_2-1758626761985.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Faizan_khan1_3-1758626769228.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/318833iC5D4AF65B649F8AF/image-size/large?v=v2&amp;amp;px=999" role="button" title="Faizan_khan1_3-1758626769228.png" alt="Faizan_khan1_3-1758626769228.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Implementing Dynamic Feature Control&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Our goal is to make the&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;,&lt;/SPAN&gt;&lt;SPAN&gt;VBTYP&lt;/SPAN&gt;&lt;SPAN&gt; field read-only if the &lt;/SPAN&gt;&lt;SPAN&gt;AUART&lt;/SPAN&gt;&lt;SPAN&gt; field has a specific value, like 'KA'.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;For Achieving this scenario first we need to Define a Dynamic feature control for the field 'VBTYP'&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Faizan_khan1_0-1758626860646.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/318837i82B7069BF5FA3D0E/image-size/large?v=v2&amp;amp;px=999" role="button" title="Faizan_khan1_0-1758626860646.png" alt="Faizan_khan1_0-1758626860646.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;The logic for making the field read-only&amp;nbsp; presents in the&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;get_instance_features&lt;/SPAN&gt;&lt;SPAN&gt; method of your behavior implementation class. This method is automatically created&amp;nbsp; by the RAP framework. Here's the code you'll need to write:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; METHOD get_instance_features.

  READ ENTITIES OF ZDEMO_I_SO IN LOCAL MODE
   ENTITY zdemo_i_so FIELDS ( Vbeln  Auart )
   WITH CORRESPONDING #( keys )
   RESULT data(lt_result).
        LOOP AT lt_result INTO data(ls_result).
        if ls_result-Auart = 'KA'.
        result = VALUE #(
        (
        %tky = ls_result-%tky
        %features-%field-Vbtyp = if_abap_behv=&amp;gt;fc-f-read_only
        ) ).
        ELSE.
        result = VALUE #(
        (
        %tky = ls_result-%tky
        %features-%field-Vbtyp = if_abap_behv=&amp;gt;fc-f-unrestricted
        ) ).
        ENDIF.
        ENDLOOP.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;After implementing the logic, activate your behavior implementation class. Now, when you refresh your&amp;nbsp; application, the changes will be applied&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Faizan_khan1_0-1758627133505.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/318841i9C3E65A60324E488/image-size/large?v=v2&amp;amp;px=999" role="button" title="Faizan_khan1_0-1758627133505.png" alt="Faizan_khan1_0-1758627133505.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In your application, you can create a few records with different&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;AUART&lt;/SPAN&gt;&lt;SPAN&gt; values, such as 'KA' and 'OR'. When you try to edit the record where&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;AUART&lt;/SPAN&gt;&lt;SPAN&gt; is 'KA', you will notice that the &lt;/SPAN&gt;&lt;SPAN&gt;VBTYP&lt;/SPAN&gt;&lt;SPAN&gt; field is grayed out and you are unable to change its value. However, if you edit a record where&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Faizan_khan1_1-1758627174853.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/318842iD3CAFC6AD77B3851/image-size/large?v=v2&amp;amp;px=999" role="button" title="Faizan_khan1_1-1758627174853.png" alt="Faizan_khan1_1-1758627174853.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;AUART&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt; is 'OR', the &lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;VBTYP&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt; field will remain editable, allowing you to change its value freely.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Faizan_khan1_0-1758627257369.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/318867i9986E801A5B8F789/image-size/large?v=v2&amp;amp;px=999" role="button" title="Faizan_khan1_0-1758627257369.png" alt="Faizan_khan1_0-1758627257369.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;This &lt;/SPAN&gt;&lt;SPAN class=""&gt;demonstrates&lt;/SPAN&gt;&lt;SPAN class=""&gt; how the field's behavior is dynamically controlled.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;Conclusion&amp;nbsp; :&amp;nbsp;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;The blog post effectively demonstrates how to &lt;/SPAN&gt;&lt;SPAN class=""&gt;dynamically make a field read-only&lt;/SPAN&gt;&lt;SPAN class=""&gt; within the &lt;/SPAN&gt;&lt;SPAN class=""&gt;SAP RAP.&amp;nbsp;&lt;/SPAN&gt;&amp;nbsp;&lt;SPAN class=""&gt;The core method involves using&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN class=""&gt;dynamic feature control&lt;/SPAN&gt;.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/dynamically-making-a-field-read-only-in-sap-rap/ba-p/14225542"/>
    <published>2025-10-14T11:19:32.771000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/rap-event-consume-sap-standard-event-and-trigger-custom-rap-event/ba-p/14241235</id>
    <title>RAP Event: consume SAP standard event and trigger custom RAP event</title>
    <updated>2025-10-14T18:00:00.028000+02:00</updated>
    <author>
      <name>hironobu_nakayama</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/781777</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1633627625"&gt;1. Introduction&lt;/H1&gt;&lt;P&gt;Event-driven architecture (EDA) is an integrated model that detects critical business "events" and responds to them in real time. As modern businesses seek real-time operations and flexible, responsive systems, EDA has become an essential technology.&lt;BR /&gt;Many standard RAP events are provided for the implementation of the event-driven architecture in SAP S/4HANA, but the standard event payload may not meet business requirements and require customization. In particular, there is a use case where SAP standard events are extended with Derived Events for the purpose of filtering by event data and payload completion of standard events.&lt;BR /&gt;Derived Event is available in S/4HANA Cloud, private edition &amp;amp; S/4HANA 2023 / S/4HANA Cloud, public edition Introduced in the 2308 release, this feature allows you to define new events with custom payloads based on existing SAP standard events. This allows you to reuse standard event implementations while creating events with additional fields and filtering criteria that you need for your business.&lt;BR /&gt;SAP Community Blog: &lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/derived-events-how-to-trigger-custom-event-from-an-sap-standard-event/ba-p/13955193" target="_blank"&gt;Derived Events- How to Trigger Custom Event from an SAP Standard Event&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;On the other hand, a Derived Event requires that the SAP Standard object to be extended meets the following conditions:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The business object containing the referring event must be extensible.&lt;/LI&gt;&lt;LI&gt;The referenced event must be published on the C0 and C1 released RAP BO interfaces&lt;/LI&gt;&lt;LI&gt;The CDS view entity used as the data source for the Derived Event payload must have been released in C1&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Therefore, some objects do not support extensibility with Derived Events in SAP Standard RAP BO. In this case, there may be cases where the requirements that should be solved by Derived Events cannot be realized.&lt;BR /&gt;So, in this blog, we will introduce a workaround approach that enables payload expansion with custom RAP BO for SAP standard events that cannot be extended with Derived Events.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1437114120"&gt;2. Workaround Solutions&lt;/H1&gt;&lt;P&gt;If Derived Events are not available, a workaround approach that combines Local Event Consumption with custom RAP events can be an effective approach. This approach involves consuming SAP standard events locally (custom ABAP classes) and using them as triggers to raise custom RAP events. By setting the payload of a custom event to meet your business requirements, you can use event filters.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_1-1760225484634.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/326000i65E19ECBA8BC68CD/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_1-1760225484634.png" alt="hironobu_nakayama_1-1760225484634.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1240600615"&gt;3. Implementation Sample&lt;/H1&gt;&lt;P&gt;In this blog, we will use a non-extensible r_purchaseordertp as the target object to extend the event payload for data changes in a PO document. SAP standard events have a payload of only the purchase order document number, whereas custom events have a purchase order document number and purchase order type as the payload. For more information on Event Binding and channel configuration with Event Mesh, please visit the SAP Community Blog: &lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-create-rap-business-events-in-sap-s-4hana-on-premise-2022/ba-p/13553312" target="_blank"&gt;https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-create-rap-business-events-in-sap-s-4hana-on-premise-2022/ba-p/13553312&lt;/A&gt;&lt;/SPAN&gt;&amp;nbsp;. Please note that the RAP BO in the implementation sample in this blog does not implement CRUD or save processing other than events.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1302252548"&gt;(1) Local Consumer (Custom ABAP Class for Local Event Consumption)&lt;/H3&gt;&lt;H5 id="toc-hId-1363904481"&gt;Global class: zcl_event_consump&lt;/H5&gt;&lt;P&gt;In the Global class, the definition FOR EVENTS OF r_purchaseordertp sets the standard events to be consumed.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_event_consump DEFINITION
  PUBLIC
  ABSTRACT
  FINAL
  FOR EVENTS OF r_purchaseordertp.

  PUBLIC SECTION.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.



CLASS zcl_event_consump IMPLEMENTATION.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H5 id="toc-hId-1167390976"&gt;Local class: zcl_event_consump&lt;/H5&gt;&lt;P&gt;The Local class performs additional data retrieval based on the data from the standard event payload consumed to trigger a custom RAP event.&lt;BR /&gt;It is important to note that triggering events is only possible in the RAP framework with a Save Sequence, so you must explicitly change it to Save Sequence by cl_abap_tx=&amp;gt;save( ).&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;*"* use this source file for the definition and implementation of
*"* local helper classes, interface definitions and type
*"* declarations
CLASS lcl_event_consump DEFINITION INHERITING FROM cl_abap_behavior_event_handler.
  PRIVATE SECTION.
    METHODS:
      consume_changed FOR ENTITY EVENT changed_instances FOR purchaseorder~changed.
ENDCLASS.

CLASS lcl_event_consump IMPLEMENTATION.

  METHOD consume_changed.
    cl_abap_tx=&amp;gt;save(  ).

    DATA lv_potype TYPE mm_purchaseordertype.

    CHECK changed_instances IS NOT INITIAL.

    LOOP AT changed_instances INTO DATA(changed_instance).

      SELECT SINGLE purchaseordertype
      FROM c_purchaseordertp
      INTO _potype
      WHERE purchaseorder = @changed_instance-purchaseorder.

      DATA(et_events) = VALUE zbp_i_purchseorder_test=&amp;gt;tt_events(
        (
        purchaseorder = changed_instance-purchaseorder
        purchaseordertype = lv_potype
        )
      ).

      zbp_i_purchseorder_event=&amp;gt;raise_po_changed_event( it_events = et_events ).

    ENDLOOP.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-712712033"&gt;(2) Custom RAP BO (Custom Event)&lt;/H3&gt;&lt;H5 id="toc-hId-774363966"&gt;CDS View: &lt;SPAN&gt;ZI_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;In the CDS View, I define only the purchase order.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Consume purchase order event'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
  serviceQuality: #X,
  sizeCategory: #S,
  dataClass: #MIXED
}
define root view entity ZI_purchseorder_event as select from I_PurchaseOrder
{
  key PurchaseOrder
}&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId-577850461"&gt;&amp;nbsp;&lt;/H5&gt;&lt;H5 id="toc-hId-381336956"&gt;Behavior Definition: &lt;SPAN&gt;ZI_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;Custom RAP BO for event triggers does not define the create/update/delete function.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed with unmanaged save implementation in class zbp_i_purchseorder_event unique;
strict ( 2 );

define behavior for ZI_purchseorder_event //alias &amp;lt;alias_name&amp;gt;
//persistent table ekko
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
{
  //  create;
  //  update;
  //  delete;
  event purchaseorder_changed parameter ZAB_PO_changed_event;

  field ( readonly ) PurchaseOrder;
}&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId--735379370"&gt;Behavior Implementation (Global class) : &lt;SPAN&gt;zbp_i_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;In the Global class, I define a method for triggering events.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zbp_i_purchseorder_event DEFINITION PUBLIC ABSTRACT FINAL FOR BEHAVIOR OF zi_purchseorder_event.

  TYPES tt_events TYPE TABLE FOR EVENT zi_purchseorder_event~purchaseorder_changed.

  PUBLIC SECTION.
        CLASS-METHODS raise_po_changed_event
            IMPORTING it_events TYPE tt_events.

ENDCLASS.

CLASS zbp_i_purchseorder_event IMPLEMENTATION.
METHOD raise_po_changed_event.
  lcl_event_handler=&amp;gt;on_po_changed_event( it_events ).
endmethod.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId--931892875"&gt;&amp;nbsp;&lt;/H5&gt;&lt;H5 id="toc-hId--1128406380"&gt;Behavior Implementation (Local class) : &lt;SPAN&gt;lhc_zi_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;The Local class does not implement save processing, etc., but only implements methods for triggering events.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_zi_purchseorder_event DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.

    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR zi_purchseorder_event RESULT result.

ENDCLASS.

CLASS lhc_zi_purchseorder_event IMPLEMENTATION.

  METHOD get_instance_authorizations.
  ENDMETHOD.

ENDCLASS.

CLASS lsc_zi_purchseorder_event DEFINITION INHERITING FROM cl_abap_behavior_saver.
  PROTECTED SECTION.

    METHODS save_modified REDEFINITION.

    METHODS cleanup_finalize REDEFINITION.

ENDCLASS.

CLASS lsc_zi_purchseorder_event IMPLEMENTATION.

  METHOD save_modified.
  ENDMETHOD.

  METHOD cleanup_finalize.
  ENDMETHOD.

ENDCLASS.

CLASS lcl_event_handler DEFINITION FRIENDS zbp_i_purchseorder_event.
  PUBLIC SECTION.
    CLASS-METHODS on_po_changed_event IMPORTING it_events TYPE zbp_i_purchseorder_event=&amp;gt;tt_events.
ENDCLASS.

CLASS lcl_event_handler IMPLEMENTATION.
   METHOD on_po_changed_event.

    RAISE ENTITY EVENT ZI_purchseorder_event~purchaseorder_changed FROM it_events.

   ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId--1324919885"&gt;&amp;nbsp;&lt;/H5&gt;&lt;H5 id="toc-hId--1521433390"&gt;Abstract Entity: &lt;SPAN&gt;ZAB_PO_changed_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;Abstract entity adds a purchase order document type. This results in the payload of the custom RAP event being the purchase order document number and the purchase order document type.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Abastract entity for po changed event'
define abstract entity ZAB_PO_changed_event
  //  with parameters parameter_name : parameter_type
{
  PurchaseOrderType : mm_purchaseordertype;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--544334867"&gt;4. Implementation Results&lt;/H1&gt;&lt;P&gt;Modify and save an existing purchase order document from the Manage Purchase Orders (F0842A) app.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_0-1760229645619.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/326001iA137C622300D0D19/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_0-1760229645619.png" alt="hironobu_nakayama_0-1760229645619.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;You can receive custom events triggered from S/4HANA in SAP Event Mesh.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_1-1760229707438.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/326002i776A835D573B8867/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_1-1760229707438.png" alt="hironobu_nakayama_1-1760229707438.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--740848372"&gt;5. Summary&lt;/H1&gt;&lt;P&gt;When it is not possible to scale with Derived Events in implementing an event-driven architecture, a workaround approach that combines Local Event Consumption with custom RAP events is an effective approach.&lt;BR /&gt;This approach enables custom payloads and filtering capabilities based on business requirements, providing event consumers with the data they need to optimize cross-system integration.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--937361877"&gt;References&lt;/H1&gt;&lt;P&gt;SAP Learning：&lt;SPAN&gt;&lt;A href="https://learning.sap.com/learning-journeys/discovering-event-driven-integration-with-sap-integration-suite-advanced-event-mesh/explaining-event-driven-architecture_d02a51bb-1ce4-4c2d-a25d-8b9c9198ffd2" target="_blank" rel="noopener noreferrer"&gt;Explaining Event-Driven Architecture&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;SAP Help: &lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/sap-btp-guidance-framework/integration-architecture-guide/event-driven-architecture?amp;state=PRODUCTION&amp;amp;amp;version=Cloud" target="_blank" rel="noopener noreferrer"&gt;Event-driven Architecture&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;SAP Community Blog: &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/rap-business-events-with-advanced-event-mesh-2-creating-custom-business/ba-p/13914171" target="_blank"&gt;RAP Business Events with Advanced Event Mesh [2]: Creating custom business events&lt;/A&gt;&lt;BR /&gt;SAP Community Blog: &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/rap-business-events-with-advanced-event-mesh-5-consuming-a-local-business/ba-p/13915138" target="_blank"&gt;RAP Business Events with Advanced Event Mesh [5]: Consuming a local business event&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/rap-event-consume-sap-standard-event-and-trigger-custom-rap-event/ba-p/14241235"/>
    <published>2025-10-14T18:00:00.028000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/f4-search-help-not-working-in-application-jobs-fiori-app-in-s4-hana-2023/ba-p/14244453</id>
    <title>F4 Search help not working in Application Jobs fiori app in S4/HANA 2023</title>
    <updated>2025-10-15T09:51:59.199000+02:00</updated>
    <author>
      <name>vimal</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/3165</uri>
    </author>
    <content>&lt;P&gt;If you are in S/4 HANA 2023 and working with &lt;STRONG&gt;Application jobs&lt;/STRONG&gt; fiori app and trying to put F4 search help to parameters but it's not working then make sure below notes are implemented in your system:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;3564773 - Application Jobs: Value help does not working&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;3558502 &amp;nbsp; Application Jobs: missing functionality for class based job catalogs in transaction SAPJ&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Thanks,&lt;/P&gt;&lt;P&gt;Vimal&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/f4-search-help-not-working-in-application-jobs-fiori-app-in-s4-hana-2023/ba-p/14244453"/>
    <published>2025-10-15T09:51:59.199000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/a-developer-s-guide-to-building-hybrid-transactional-fiori-apps-with-rap/ba-p/14245208</id>
    <title>A Developer’s Guide to Building Hybrid Transactional Fiori Apps with RAP and Analytical features</title>
    <updated>2025-10-16T01:11:17.894000+02:00</updated>
    <author>
      <name>VijayCR</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/38084</uri>
    </author>
    <content>&lt;P&gt;In many SAP S/4HANA implementations, particularly those involving Fiori List Reports, business users often require a unified experience that combines &lt;STRONG&gt;transactional capabilities ,&lt;/STRONG&gt;such as executing actions on records ,with &lt;STRONG&gt;analytical insights&lt;/STRONG&gt; like grouping, subtotals, and totals. This is especially relevant in operational reporting scenarios where decisions are made directly from the data view.&lt;BR /&gt;These hybrid use cases are common in operational reporting, where users need to analyze data and take immediate action within the same interface.However, when using &lt;STRONG&gt;analytical CDS views&lt;/STRONG&gt; (annotated with &lt;CODE&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/15206"&gt;@analytics&lt;/a&gt;.query: true&lt;/CODE&gt;), SAP RAP imposes architectural constraints that prevent the direct definition of &lt;STRONG&gt;actions&lt;/STRONG&gt; within the same view. This limitation can be a bottleneck when designing intelligent, user-centric applications.&lt;/P&gt;&lt;P&gt;To overcome this challenge, the following approach is recommended:&lt;/P&gt;&lt;UL class="lia-list-style-type-disc"&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Separate OData Services for Analytics and Transactions&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Analytical Service&lt;/STRONG&gt;: Built using a CDS view with &lt;CODE&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/15206"&gt;@analytics&lt;/a&gt;.query: true&lt;/CODE&gt;, enabling features like grouping, subtotals, and totals.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Transactional Service&lt;/STRONG&gt;: Developed using RAP with behavior definitions to support actions, determinations, and validations. This view excludes analytical annotations to maintain RAP compatibility.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;UI5 Extension Logic for Action Integration&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Use &lt;STRONG&gt;SAPUI5 extensions&lt;/STRONG&gt; to wire up action buttons in the Fiori List Report.&lt;/LI&gt;&lt;LI&gt;These buttons trigger transactional logic from the RAP-based service, even though the data is displayed via the analytical service.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Workaround for Filtering on Aggregated Fields&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Since analytical views often aggregate fields (e.g., total amounts), filtering directly on these fields may not work as expected.&lt;/LI&gt;&lt;LI&gt;Introduce &lt;STRONG&gt;dummy fields&lt;/STRONG&gt; or helper logic to enable meaningful filtering in the UI.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This approach allows developers to deliver &lt;STRONG&gt;intelligent Fiori applications&lt;/STRONG&gt; that combine the best of both worlds: &lt;STRONG&gt;real-time analytical insights&lt;/STRONG&gt; and &lt;STRONG&gt;direct transactional capabilities&lt;/STRONG&gt;. It supports business scenarios such as:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Mass approvals with KPI-based filtering&lt;/LI&gt;&lt;LI&gt;Sales performance analysis with direct follow-up actions&lt;/LI&gt;&lt;LI&gt;Inventory grouping with replenishment triggers&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;By decoupling analytics and actions at the service level and integrating them at the UI layer, you can build scalable, maintainable, and user-friendly applications that align with SAP’s clean core principles.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Analytical CDS View (OData V2 or V4)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;You’ve correctly defined analytical views such as:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;CODE&gt;Z_I_APPRREQ_TOTAL&lt;/CODE&gt;: Aggregates planned costs using &lt;CODE&gt;sum(bpja.wtjhr)&lt;/CODE&gt;&lt;/LI&gt;&lt;LI&gt;&lt;CODE&gt;Z_I_APPRREQ_COSTS&lt;/CODE&gt;: Joins totals with individual cost records&lt;/LI&gt;&lt;LI&gt;&lt;CODE&gt;Z_I_APPROPRIATEREQUEST&lt;/CODE&gt;: Combines investment request data with ledger and object info&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Appropriate Request Ledger Details.'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
serviceQuality: #X,
sizeCategory: #S,
dataClass: #MIXED
}
define view entity Z_I_APPRREQ_LEDGER as select from tka01
inner join tbp0l on tbp0l.waers = tka01.waers
and tbp0l.periv = tka01.lmona
{

key tka01.kokrs as Kokrs,
tbp0l.periv as Periv,
tbp0l.waers as Waers,
tbp0l.lednr as Lednr

}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Appropriate Request Costs Details.'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
serviceQuality: #X,
sizeCategory: #S,
dataClass: #MIXED
}
define view entity Z_I_APPRREQ_COSTS
as select from bpja
inner join Z_I_APPRREQ_TOTAL on Z_I_APPRREQ_TOTAL.Ledger = bpja.lednr
and Z_I_APPRREQ_TOTAL.ObjectNumber = bpja.objnr

{


key bpja.lednr as Ledger,
key bpja.objnr as ObjectNumber,
key bpja.gjahr as FiscalYear,
// @semantics.currencycode
bpja.twaer as Currency,
@Semantics.amount.currencyCode : 'Currency'
bpja.wtjhr as PlancostsYear,
Z_I_APPRREQ_TOTAL.Currency as Currency_Code,
@Semantics.amount.currencyCode : 'Currency_Code'
Z_I_APPRREQ_TOTAL.PlancostsYear as PlancostsTotal
}

where
bpja.wrttp = '40';&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Appropriate Request Costs Details.'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
serviceQuality: #X,
sizeCategory: #S,
dataClass: #MIXED
}
define view entity Z_I_APPRREQ_TOTAL as select from bpja

{

key bpja.lednr as Ledger,
key bpja.objnr as ObjectNumber,

bpja.twaer as Currency ,
@Semantics.amount.currencyCode : 'Currency'
sum(bpja.wtjhr) as PlancostsYear

}
where bpja.wrttp = '40'
group by lednr,objnr,bpja.twaer;&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'IMAK Details'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
serviceQuality: #X,
sizeCategory: #S,
dataClass: #MIXED
}
@Analytics.dataCategory: #CUBE
define view entity Z_I_APPROPRIATEREQUEST
as select from imak
association [0..1] to imakpi on imakpi.posnr = imak.posnr
association [0..1] to imakt on imakt.posnr = imak.posnr
association [0..1] to imav on imav.posnr = imak.posnr
association [0..1] to Z_I_APPRREQ_LEDGER on Z_I_APPRREQ_LEDGER.Kokrs = imak.vkokrs
{
key
cast(imak.posnr as abap.char( 12 )) as Appr_Request,
imak.abukrs as CompanyCode,
imak.gjahr as FiscalYear,
imakpi.izwek as Izwek,
imakt.txt50 as Txt50,
imav.objnr as ObjectNumber,
Z_I_APPRREQ_LEDGER.Lednr as Ledger,
concat('IQ',imak.posnr) as IQOBJNR,

erdat as Erdat

}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-2020994856"&gt;&amp;nbsp;&lt;STRONG&gt;Consumption CDS View&lt;/STRONG&gt;&lt;/H4&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;This consumption view is designed to support a &lt;STRONG&gt;Fiori List Report&lt;/STRONG&gt; that displays investment request data with:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Aggregated planned costs per fiscal year and overall&lt;/LI&gt;&lt;LI&gt;Currency semantics for proper formatting&lt;/LI&gt;&lt;LI&gt;Additional Filters for amounts as the original ones does not support in analytical views.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Bericht zur Freigabe der Maßnahmenanforderungen'

@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED

@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
serviceQuality: #X,
sizeCategory: #S,
dataClass: #MIXED
}
@UI.headerInfo.typeName: 'Freigabeliste'
@UI.headerInfo.typeNamePlural: 'Freigabeliste'


define root view entity ZAPPR_APPRLLIST_MAIL
as select from Z_I_APPROPRIATEREQUEST
association [0..1] to Z_I_APPRREQ_COSTS as Investcosts on Investcosts.Ledger = Z_I_APPROPRIATEREQUEST.Ledger
and Investcosts.ObjectNumber = Z_I_APPROPRIATEREQUEST.ObjectNumber
and Investcosts.FiscalYear = Z_I_APPROPRIATEREQUEST.FiscalYear

{
@UI.facet : [
{
id : 'AppropRequest',
purpose : #STANDARD,
type : #IDENTIFICATION_REFERENCE,
label : 'Maßnahmenanforderung',
position : 10 }
]

@UI : {
lineItem : [{position: 10} ],

identification : [{position: 10 }],
selectionField : [{position: 10}]
}
@EndUserText: { label: 'Investitionsantragsnummer'}
key Z_I_APPROPRIATEREQUEST.Appr_Request,
@UI : {
lineItem : [{position: 20}],
identification : [{ position: 20 }],
selectionField : [{position: 20}]
}
@EndUserText: { label: 'Buchungskreis'}
Z_I_APPROPRIATEREQUEST.CompanyCode,

@UI : {
lineItem : [{position: 50}],
identification : [{position: 50}],
selectionField : [{position: 50}]
}
@EndUserText: { label: 'Bezeichnung'}
Z_I_APPROPRIATEREQUEST.Txt50,



Investcosts.Currency,
@UI : {
lineItem : [{position: 60}],
identification : [{position: 60}],
selectionField : [{position: 60}] }
@EndUserText: { label: 'Geplante Kosten [aktuelles GJ] in EUR'}
@Semantics.amount.currencyCode : 'Currency'
@Aggregation.default : #SUM
Investcosts.PlancostsYear as TotalPlancostsYear,
@UI : {
// lineItem : [{position: 70}],
identification : [{position: 70}],
selectionField : [{position: 70}] }
@EndUserText: { label: 'Geplante Kosten [aktuelles GJ] in EUR '}
@Semantics.amount.currencyCode : 'Currency'

Investcosts.PlancostsYear as TotalPlancostsYear1,


Investcosts.Currency_Code,
@UI : {
lineItem : [{position: 80}],
identification : [{position: 80}],
selectionField : [{position: 80}] }
@Semantics.amount.currencyCode : 'Currency_Code'
@EndUserText: { label: 'Geplante Kosten [GESAMT] in EUR'}
@Aggregation.default : #SUM
Investcosts.PlancostsTotal as PlancostsTotalSum,
@UI : {

identification : [{position: 90}],
selectionField : [{position: 90}] }
@Semantics.amount.currencyCode : 'Currency_Code'
@EndUserText: { label: 'Geplante Kosten [GESAMT] in EUR '}

Investcosts.PlancostsTotal as PlancostsTotalSum1,
@UI : {
selectionField : [{position: 100}] }
@Consumption.filter.selectionType: #INTERVAL

Z_I_APPROPRIATEREQUEST.Erdat

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Once done create a Service Behaviour and Definition for the above CDS Entity .&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;CDS entity with Action Service&lt;/STRONG&gt;&lt;BR /&gt;RAP-Based CDS View with Behavior Definition with Action&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_appr_appremail unique;
strict ( 1 );

define behavior for ZAPPR_APPREMAIL //alias &amp;lt;alias_name&amp;gt;
persistent table ZAPPR_APPREMAIL
lock master
authorization master ( instance )

{
action Email parameter Z_APPROVER3 result [1] $self;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Abstract entity for the comments&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Approval 3 Input Details'
define abstract entity Z_APPROVER3
// with parameters parameter_name : parameter_type
{
comments : char255;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Behavior Definition code:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_zappr_appremail DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.
    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR zappr_appremail RESULT result.
    METHODS email FOR MODIFY
      IMPORTING keys FOR ACTION zappr_appremail~email RESULT result.
ENDCLASS.

CLASS lhc_zappr_appremail IMPLEMENTATION.
  METHOD get_instance_authorizations.
  ENDMETHOD.
  METHOD email.
 READ ENTITIES OF zappr_appremail IN LOCAL MODE
  ENTITY zappr_appremail
    FIELDS ( appr_request )
  WITH CORRESPONDING #( keys )
  RESULT DATA(lt_app_data).
    DATA: lv_recipient TYPE adr6-smtp_addr.
    DATA: lv_subject TYPE string.
    DATA: lv_content TYPE string.
    DATA : email_template_name TYPE smtg_tmpl_id VALUE 'ZEMAIL_APPROVAL'.
    DATA(email_api) =
  cl_smtg_email_api=&amp;gt;get_instance(
          iv_template_id = email_template_name  ).
    DATA(lv_html_text) = VALUE string( ).

    DATA(i_cds_key) = VALUE if_smtg_email_template=&amp;gt;ty_gt_data_key( ).
  " Get the RawHTML Content and Replace the palceholder with the INV Details in the email
    email_api-&amp;gt;render( EXPORTING
                                iv_language = sy-langu
                                  it_data_key =  i_cds_key
                              IMPORTING
                                ev_subject = DATA(lv_subject_tmp)
                                ev_body_html = DATA(lv_body_html) ).

    LOOP AT keys INTO DATA(appdetails) .
   lv_content = |{ appdetails-%param-comments }|.
    exit.
  endloop.

REPLACE 'ZCOMMENTS' WITH lv_content INTO lv_body_html.
lv_subject = lv_subject_tmp.
 DATA(lv_body_html_soli) = cl_bcs_convert=&amp;gt;string_to_soli( lv_body_html ).  " Build HTML for Sending
    DATA(lo_multipart_ref) = NEW cl_gbt_multirelated_service( ).
    lo_multipart_ref-&amp;gt;set_main_html(
        EXPORTING
          content     = lv_body_html_soli
          description = '' ).


TRY.

DATA(o_document) = cl_document_bcs=&amp;gt;create_document( i_type    = 'HTM'
 i_text    = lv_body_html_soli
 i_subject = CONV so_obj_des( lv_subject ) ).
* Sendrequest erzeugen
        DATA(o_send_request) = cl_bcs=&amp;gt;create_persistent( ).
* Email-Subject festlegen, ip_subject ist vom Typ String
        o_send_request-&amp;gt;set_message_subject( ip_subject = lv_subject ).
* Die Mail an den Sendrequest hängen
        o_send_request-&amp;gt;set_document( o_document ).
        o_send_request-&amp;gt;set_sender( o_sender ).
        DATA o_recipient TYPE REF TO cl_cam_address_bcs .
        LOOP AT recipients ASSIGNING FIELD-SYMBOL(&amp;lt;fs_email_recipient&amp;gt;).
          o_send_request-&amp;gt;add_recipient( i_recipient  = cl_cam_address_bcs=&amp;gt;create_internet_address( &amp;lt;fs_email_recipient&amp;gt;-email ) i_express = abap_true ).
        ENDLOOP.
* Sofort senden
        o_send_request-&amp;gt;set_send_immediately( abap_true ).
* Dokument senden
        IF o_send_request-&amp;gt;send( i_with_error_screen = abap_true ) = abap_true.
        ELSE.
        ENDIF.
      CATCH cx_root INTO DATA(e_text).
    ENDTRY.
  ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Now create CDS Entity with Annotation for action to Trigger transactional actions (e.g., sending approval emails) directly from the report&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Bericht zur Freigabe der Maßnahmenanforderungen'

@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED

@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
serviceQuality: #X,
sizeCategory: #S,
dataClass: #MIXED
}
@UI.headerInfo.typeName: 'Freigabeliste'
@UI.headerInfo.typeNamePlural: 'Freigabeliste'
define root view entity ZAPPR_APPREMAIL
as select from Z_I_APPROPRIATEREQUEST
association [0..1] to Z_I_APPRREQ_COSTS as Investcosts on Investcosts.Ledger = Z_I_APPROPRIATEREQUEST.Ledger
and Investcosts.ObjectNumber = Z_I_APPROPRIATEREQUEST.ObjectNumber
and Investcosts.FiscalYear = Z_I_APPROPRIATEREQUEST.FiscalYear
association [0..1] to Z_I_APPRREQ_STATUS as ApprStatus on ApprStatus.Objnr = Z_I_APPROPRIATEREQUEST.IQOBJNR
and ApprStatus.spras = $session.system_language

{
@UI.facet : [
{
id : 'AppropRequest',
purpose : #STANDARD,
type : #IDENTIFICATION_REFERENCE,
label : 'Maßnahmenanforderung',
position : 10 }
]

@UI : {
lineItem : [{position: 10} ,{ type: #FOR_ACTION , dataAction: 'Email' ,label: 'FraigabeListe Email Senden' , invocationGrouping: #CHANGE_SET
}],

identification : [{position: 10 }],
selectionField : [{position: 10}]
}
@EndUserText: { label: 'Investitionsantragsnummer'}
key Z_I_APPROPRIATEREQUEST.Appr_Request,
@UI : {
lineItem : [{position: 20}],
identification : [{ position: 20 }],
selectionField : [{position: 20}]
}
@EndUserText: { label: 'Buchungskreis'}
Z_I_APPROPRIATEREQUEST.CompanyCode,



@UI : {
lineItem : [{position: 30}],
identification : [{position: 50}],
selectionField : [{position: 50}]
}
@EndUserText: { label: 'Bezeichnung'}
Z_I_APPROPRIATEREQUEST.Txt50,

@UI : {
lineItem : [{position: 40}],
identification : [{position: 40}],
selectionField : [{position: 40}] }
@EndUserText: { label: 'Status'}
ApprStatus.txt30 as Statustext,

Investcosts.Currency,
@UI : {
lineItem : [{position: 50}],
identification : [{position: 50}],
selectionField : [{position: 50}] }
@EndUserText: { label: 'Geplante Kosten [aktuelles GJ] in EUR'}
@Semantics.amount.currencyCode : 'Currency'
// @DefaultAggregation: #SUM
Investcosts.PlancostsYear as TotalPlancostsYear,
Investcosts.Currency_Code,
@UI : {
lineItem : [{position: 60}],
identification : [{position: 60}],
selectionField : [{position: 60}] }
@Semantics.amount.currencyCode : 'Currency_Code'
@EndUserText: { label: 'Geplante Kosten [GESAMT] in EUR'}
// @Aggregation.default : #SUM
Investcosts.PlancostsTotal as PlancostsTotalSum,
@UI : {
selectionField : [{position: 70}] }
Z_I_APPROPRIATEREQUEST.Erdat

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Now genrate the Service definition and service&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1695398632"&gt;&lt;STRONG&gt;Create the Fiori List Report App&lt;/STRONG&gt;&lt;/H3&gt;&lt;H4 id="toc-hId-1627967846"&gt;In SAP Business Application Studio:&lt;/H4&gt;&lt;OL&gt;&lt;LI&gt;&lt;UL&gt;&lt;LI&gt;Create a new project from template&amp;nbsp;&lt;/LI&gt;&lt;LI&gt;Select &lt;STRONG&gt;List Report Object Page&lt;/STRONG&gt;&amp;nbsp; with &lt;STRONG&gt;analytical table&lt;/STRONG&gt; and select the Odata entity generated from the &lt;STRONG&gt;aggregated Service&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;In the Manifest.json add additional Odata Service or use guided development&amp;nbsp;&amp;nbsp;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P class="lia-align-right" style="text-align : right;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-left" image-alt="VijayCR_0-1760567958925.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328101i733541505FD7047B/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="VijayCR_0-1760567958925.png" alt="VijayCR_0-1760567958925.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P class="lia-align-left" style="text-align : left;"&gt;&amp;nbsp;&lt;/P&gt;&lt;P class="lia-align-left" style="text-align : left;"&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Using the&amp;nbsp;guided development&amp;nbsp; add a action as shwon below .&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="VijayCR_1-1760568663616.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328106i00D01431AC68CC78/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="VijayCR_1-1760568663616.png" alt="VijayCR_1-1760568663616.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;&amp;lt;core:FragmentDefinition xmlns:core='sap.ui.core'
    xmlns='sap.m'&amp;gt;

 &amp;lt;Dialog class="sapUiSizeCompact"
        xmlns="sap.m"
        xmlns:ca="sap.ca.ui"
        xmlns:layout="sap.ui.layout"
        xmlns:form="sap.ui.layout.form"
        xmlns:core="sap.ui.core"
        xmlns:unified="sap.ui.unified" title="{i18n&amp;gt;remarks}" contentWidth="200px" id="idremarks"&amp;gt;
        &amp;lt;content &amp;gt;
            &amp;lt;form:SimpleForm columnsL="1" columnsM="1" maxContainerCols="1" layout="ResponsiveGridLayout" id="formexlstat" editable="true"&amp;gt;
                &amp;lt;form:content &amp;gt;
                    &amp;lt;Label id="remarkslabel" text="{i18n&amp;gt;remarks}"/&amp;gt;
                    &amp;lt;Input id="idremarksinput" type="Text"/&amp;gt;
                &amp;lt;/form:content&amp;gt;
            &amp;lt;/form:SimpleForm&amp;gt;
        &amp;lt;/content&amp;gt;
        &amp;lt;beginButton &amp;gt;
            &amp;lt;Button text="{i18n&amp;gt;idEmail}" press="._onSend" id="idEmail"/&amp;gt;
        &amp;lt;/beginButton&amp;gt;
        &amp;lt;endButton&amp;gt;
            &amp;lt;Button text="{i18n&amp;gt;Cancel}" press="._onCancel" id="idcancelbtn"/&amp;gt;
        &amp;lt;/endButton&amp;gt;
    &amp;lt;/Dialog&amp;gt;
&amp;lt;/core:FragmentDefinition&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Handle the action using the below controller code&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;sap.ui.define([
    "sap/m/MessageToast"
], function(MessageToast) {
    'use strict';
    return {
        onInit: function(){
           this.loadDialogFragment();
            this.AnalyticalTable = this.getView().byId('apprsendemail::sap.suite.ui.generic.template.ListReport.view.ListReport::apprListEmail--analyticalTable') 
            //this.getView(this.getView().getContent()[0].getContent().getItems()[0].getId())
        },
            _onCancel: function(oEvent){
        
            var oModel = this.getView().getModel();
            this._oDialog.close();
            if (this._oDialog) {
                this._oDialog.destroy();
                this._oDialog = null; // Important to nullify the reference
            }
          
          
               
        },
        _onSend: function (oEvent) {
            //var oInput = this.byId("inputParam");
           // var sValue = oInput.getValue();
        
            // Get selected items from the Analytical List Table
            var oTable = this.getView().byId("apprsendemail::sap.suite.ui.generic.template.ListReport.view.ListReport::apprListEmail--analyticalTable"); // Replace with your table ID
            var aSelectedIndices = oTable._getSelectionPlugin().getSelectedIndices();
            var aSelectedItems = [];
        
            aSelectedIndices.forEach(function (iIndex) {
                var oContext = oTable.getContextByIndex(iIndex);
                aSelectedItems.push(oContext.getObject());
            });
        
            // Call the backend action with the selected items and parameter
            this._callBackendAction(aSelectedItems);
            oTable.getModel().refresh(true);
            // Close the dialog
            this._oDialog.close();
            if (this._oDialog) {
                this._oDialog.destroy();
                this._oDialog = null; // Important to nullify the reference
            }
        },
        sendEmailList: function(oEvent) {
 //            MessageToast.show("Custom handler invoked.");
            if (!this._oDialog) {
                this._oDialog = sap.ui.xmlfragment("apprsendemail.ext.fragment.EmailListDialog", this);
                this.getView().addDependent(this._oDialog);
            }
            this._oDialog.open();
        },
        loadDialogFragment: function(){
            if (!this.ReleaseListDialog) {
                this.oDialog = this.loadFragment({
                    name: "apprsendemail.ext.fragment.EmailListDialog",
                    controller: this
                });
            }
        },
        _callBackendAction:  async function (aSelectedItems) {
            var oModel = this.getOwnerComponent().getModel("emailAction");

            var sPath = "/Email"; // Adjust the path as needed
            var mParameters = {
                batchGroupId: "myChangeset",
                changeSetId: "myChangeset"
            };
           
            var comments =     sap.ui.getCore().byId("idremarksinput").getValue();
            // Example of calling the backend for each selected item
            aSelectedItems.forEach(function (oItem) {
                oModel.callFunction(sPath, {
                    method: "POST",
                    mParameters: mParameters,
                    urlParameters: {
                        "Appr_Request": oItem.Appr_Request,
                        "comments" : comments,
                    },
                  
                });
            });
            //Submitting the function import batch call
oModel.submitChanges({
	batchGroupId: "myChangeset", //Same as the batch group id used previously

    success: function (oData) {
  
//      var  oTable = this.getView().byId("releaseapprreq::sap.suite.ui.generic.template.ListReport.view.ListReport::appropriatelist--analyticalTable");
 //       oTable._getSelectionPlugin().getModel().refresh(true);
        // Handle success
        MessageToast.show("E-Mail erfolgreich gesendet");
    }.bind(this),
    error: function (oError) {
        // Handle error
        MessageToast.show("E-Mail wurde nicht erfolgreich gesendet");
    }

});
        },
        
    };
});
    &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Once done deploy the app and this will be available in the Workzone and you see the app showing totals and also actions as shown below :&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="VijayCR_2-1760569240360.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328109iC19213226438FE29/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="VijayCR_2-1760569240360.png" alt="VijayCR_2-1760569240360.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="VijayCR_3-1760569271440.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328110i8A0D61FCD51356BE/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="VijayCR_3-1760569271440.png" alt="VijayCR_3-1760569271440.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The approach outlined in this guide demonstrates how to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Leverage CDS view annotations for &lt;STRONG&gt;grouping, subtotals, and totals&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Integrate &lt;STRONG&gt;status tracking&lt;/STRONG&gt; and multilingual support&lt;/LI&gt;&lt;LI&gt;Enable &lt;STRONG&gt;transactional actions&lt;/STRONG&gt; like sending approval emails via RAP behavior&lt;/LI&gt;&lt;LI&gt;Maintain a clean architecture by &lt;STRONG&gt;decoupling analytics and actions&lt;/STRONG&gt; at the service level and integrating them at the UI layer&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This design not only enhances &lt;STRONG&gt;user productivity&lt;/STRONG&gt; but also aligns with SAP’s &lt;STRONG&gt;clean core principles&lt;/STRONG&gt;, ensuring scalability, maintainability, and future readiness of your S/4HANA applications.&lt;/P&gt;&lt;P class="lia-align-right" style="text-align : right;"&gt;&amp;nbsp;&lt;/P&gt;&lt;P class="lia-align-right" style="text-align : right;"&gt;&amp;nbsp;&lt;/P&gt;&lt;P class="lia-align-right" style="text-align : right;"&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/a-developer-s-guide-to-building-hybrid-transactional-fiori-apps-with-rap/ba-p/14245208"/>
    <published>2025-10-16T01:11:17.894000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/fiori-elements-list-report%E3%81%A7%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89/ba-p/14240934</id>
    <title>Fiori Elements List Reportでのファイルアップロード</title>
    <updated>2025-10-17T18:00:00.031000+02:00</updated>
    <author>
      <name>hironobu_nakayama</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/781777</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1633604560"&gt;1. はじめに&lt;/H1&gt;&lt;P&gt;このブログでは、SAP Fiori ElementsのList Reportで、各行（アイテム）に対して“添付ファイル“のような項目を持たせ、行単位でファイルのアップロード・参照・削除の実現方法を紹介します。&lt;BR /&gt;List Reportのデータソースは、ABAP RESTful Application Programming Model（RAP）フレームワークを使用して開発したOData V4サービスを対象とし、RAP開発においてファイルアップロードを実現するために必要な実装についての内容となっています。&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1437091055"&gt;2. ファイルアップロード実装のポイント&lt;/H1&gt;&lt;P&gt;ファイルアップロード実装においては、①ファイル格納に必要なテーブル項目の定義、および、②ファイルオブジェクト格納用項目とファイルタイプ格納用項目への適切なアノテーション付与の2点が必要となります。&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;ファイル格納に必要なテーブル項目の定義&lt;P&gt;カスタムテーブルに以下の3つの項目を設定します（項目名は、サンプルです。）&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;ファイルオブジェクト格納用項目（ファイルサイズを指定しない場合、abap.rawstring(0)とする）&lt;UL&gt;&lt;LI&gt;例：attachment: abap.rawstring(0);&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;ファイル名格納用項目&lt;UL&gt;&lt;LI&gt;例：filename: abap.char(128);&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;ファイルタイプ格納用項目&lt;UL&gt;&lt;LI&gt;例：mimetype: abap.char(128);&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;CDS Viewでのファイルオブジェクト格納用項目とファイルタイプ格納用項目への適切なアノテーション付与&lt;UL&gt;&lt;LI&gt;ファイルオブジェクト格納用項目&lt;UL&gt;&lt;LI&gt;例：&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Semantics.largeObject : {
mimeType: 'Mimetype',
fileName: 'Filename',
contentDispositionPreference: #INLINE
}​&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;UL&gt;&lt;LI&gt;ファイルタイプ格納用項目&lt;UL&gt;&lt;LI&gt;@Semantics.mimeType: true&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/UL&gt;&lt;H1 id="toc-hId-1240577550"&gt;3. 実装例&lt;/H1&gt;&lt;P&gt;本ブログでは、RAP開発の簡略化のため、RAP Generatorを使用します。RAP Generatorは、カスタムテーブルからCDS ViewやBehavior Definition等のRAP オブジェクト群をウィザードによる設定のみで生成可能なツールです。RAP Generator を利用して RAP オブジェクトを生成する場合、ドラフト機能を持つ更新処理（Managed Runtime）に対応したサービスが生成されます。そのため、テーブル定義にドラフト機能や更新処理に利用するための必須項目を定義している必要があります。RAP Generatorについては、以下のSAP Helpをご確認ください。&lt;/P&gt;&lt;P&gt;SAP Help: &lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/generating-rap-business-service-with-generate-abap-repository-objects-wizard" target="_blank" rel="noopener noreferrer"&gt;Generating a RAP Business Service with the Generate ABAP Repository Objects Wizards&lt;/A&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;以下の実装手順は、&lt;SPAN&gt;SAP Help: &lt;/SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/example-rap-business-service-generation" target="_blank" rel="noopener noreferrer"&gt;Example: OData UI Service Generation Based on a Database Table&lt;/A&gt;のサンプルをベースとした実装例となります。&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1302229483"&gt;1. RAP Generatorによるオブジェクトを格納するためのパッケージを作成します。&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_0-1760157013761.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325823iFF67EF8A7D119B10/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_0-1760157013761.png" alt="hironobu_nakayama_0-1760157013761.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1105715978"&gt;2. １で作成したパッケージ内にカスタムテーブルを作成します。&lt;/H3&gt;&lt;P&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_1-1760157057491.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325824i82D4DF7B553C56CD/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_1-1760157057491.png" alt="hironobu_nakayama_1-1760157057491.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_2-1760157071905.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325825i0DDC00E4250B93BB/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_2-1760157071905.png" alt="hironobu_nakayama_2-1760157071905.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Custom Table for file upload test'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zpt_file_upload {

  key client            : abap.clnt not null;
  key customer_id       : /dmo/customer_id not null;
  first_name            : /dmo/first_name;
  last_name             : /dmo/last_name;
  title                 : /dmo/title;
  street                : /dmo/street;
  postal_code           : /dmo/postal_code;
  city                  : /dmo/city;
  country_code          : land1;
  phone_number          : /dmo/phone_number;
  email_address         : /dmo/email_address;
  attachment            : abap.rawstring(0);
  filename              : abap.char(128);
  mimetype              : abap.char(128);
  local_created_by      : abp_creation_user;
  local_created_at      : abp_creation_tstmpl;
  local_last_changed_by : abp_locinst_lastchange_user;
  local_last_changed_at : abp_locinst_lastchange_tstmpl;
  last_changed_at       : abp_lastchange_tstmpl;

}​&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-909202473"&gt;3. RAP Generatorを実行し、ウィザードに沿って設定します。&lt;/H3&gt;&lt;P&gt;対象のカスタムテーブルを右クリック→”Generate ABAP Repository Objects…” で実行&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_3-1760157422206.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325826iC928155A8BCFAE9E/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_3-1760157422206.png" alt="hironobu_nakayama_3-1760157422206.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;サービスタイプの選択&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_4-1760157441952.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325827iF0BB085AA624F8A4/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_4-1760157441952.png" alt="hironobu_nakayama_4-1760157441952.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;生成オブジェクト格納用パッケージの選択&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_5-1760157464387.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325828iCA1BEBBB2C283DDC/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_5-1760157464387.png" alt="hironobu_nakayama_5-1760157464387.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;生成されるオブジェクトを確認し、必要に応じて名称変更やエイリアス名を設定&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_6-1760157482071.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325829i0F2526AA45703F9D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_6-1760157482071.png" alt="hironobu_nakayama_6-1760157482071.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_7-1760157495656.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325830i9C6952F5528E2BD6/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_7-1760157495656.png" alt="hironobu_nakayama_7-1760157495656.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-712688968"&gt;4. 生成されたデータモデル（CDS View）へファイルアップロードのためのアノテーションを追加し、有効化します。&lt;/H3&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: '##GENERATED ZPT_FILE_UPLOAD'
define root view entity ZR_PT_FILE_UPLOAD
  as select from zpt_file_upload
{
  key customer_id           as CustomerID,
      first_name            as FirstName,
      last_name             as LastName,
      title                 as Title,
      street                as Street,
      postal_code           as PostalCode,
      city                  as City,
      country_code          as CountryCode,
      phone_number          as PhoneNumber,
      email_address         as EmailAddress,
      @Semantics.largeObject : {
            mimeType: 'Mimetype',
            fileName: 'Filename',
            contentDispositionPreference: #INLINE
          }
      attachment            as Attachment,
      filename              as Filename,
      @Semantics.mimeType: true
      mimetype              as Mimetype,
      @Semantics.user.createdBy: true
      local_created_by      as LocalCreatedBy,
      @Semantics.systemDateTime.createdAt: true
      local_created_at      as LocalCreatedAt,
      @Semantics.user.localInstanceLastChangedBy: true
      local_last_changed_by as LocalLastChangedBy,
      @Semantics.systemDateTime.localInstanceLastChangedAt: true
      local_last_changed_at as LocalLastChangedAt,
      @Semantics.systemDateTime.lastChangedAt: true
      last_changed_at       as LastChangedAt

}&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-516175463"&gt;5. サービスバインディングを公開します。&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_8-1760157523686.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325831i4F5DCB4410845F5A/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_8-1760157523686.png" alt="hironobu_nakayama_8-1760157523686.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-319661958"&gt;6. エンティティを選択して、プレビューします。&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_9-1760157563744.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325832iC927D9BEF8566E34/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_9-1760157563744.png" alt="hironobu_nakayama_9-1760157563744.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-123148453"&gt;7. “Create”ボタンからデータの登録およびファイルのアップロードを実行します。&lt;/H3&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_10-1760157593131.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325833i2D10826CA744794B/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_10-1760157593131.png" alt="hironobu_nakayama_10-1760157593131.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_11-1760157628831.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325834iCBF6028E63ADA10C/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_11-1760157628831.png" alt="hironobu_nakayama_11-1760157628831.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_12-1760157647311.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325835iC7286B9648C140C7/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_12-1760157647311.png" alt="hironobu_nakayama_12-1760157647311.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_13-1760157663896.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325836i33B8FE451D47FCBE/image-size/medium?v=v2&amp;amp;px=400" role="button" title="hironobu_nakayama_13-1760157663896.png" alt="hironobu_nakayama_13-1760157663896.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_14-1760157681275.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325837i22D13F546974AC37/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_14-1760157681275.png" alt="hironobu_nakayama_14-1760157681275.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_15-1760157702526.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325838iBABEDFAC843FB59D/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_15-1760157702526.png" alt="hironobu_nakayama_15-1760157702526.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_16-1760157721073.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/325839i9A80962EABEC37F9/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_16-1760157721073.png" alt="hironobu_nakayama_16-1760157721073.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-438209593"&gt;4. まとめ&lt;/H1&gt;&lt;P&gt;上記の実装により、ABAP RESTful Application Programming Model（RAP）を用いたOData V4サービスを利用し、SAP Fiori ElementsのList Reportで各行（アイテム）ごとに“添付ファイル”項目を持たせ、行単位でファイルのアップロード・参照・削除を実現することが可能です。是非ご活用下さい。&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-241696088"&gt;参考情報&lt;/H1&gt;&lt;P&gt;SAPUI5 Document: &lt;A href="https://sapui5.hana.ondemand.com/#/topic/b236d32d48b74304887b3dd5163548c1" target="_blank" rel="noopener nofollow noreferrer"&gt;Enabling Stream Support&lt;/A&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/fiori-elements-list-report%E3%81%A7%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89/ba-p/14240934"/>
    <published>2025-10-17T18:00:00.031000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/rap%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88-sap%E6%A8%99%E6%BA%96%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%81%AE%E6%B6%88%E8%B2%BB%E3%81%A8%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0rap%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%81%AE%E3%83%88%E3%83%AA%E3%82%AC%E3%83%BC/ba-p/14241240</id>
    <title>RAPイベント：SAP標準イベントの消費とカスタムRAPイベントのトリガー</title>
    <updated>2025-10-18T18:00:00.033000+02:00</updated>
    <author>
      <name>hironobu_nakayama</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/781777</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1633627651"&gt;1. はじめに&lt;/H1&gt;&lt;P&gt;イベント駆動アーキテクチャ（&lt;SPAN&gt;EDA&lt;/SPAN&gt;）は、ビジネスにおける重要な“イベント”を検出し、リアルタイムで対応する統合モデルです。現代の企業がリアルタイム運用と柔軟で応答性の高いシステムを求める中で、&lt;SPAN&gt;EDA&lt;/SPAN&gt;は不可欠な技術となっています。&lt;BR /&gt;SAP S/4HANAにおけるイベント駆動アーキテクチャの実装において、標準&lt;SPAN&gt;RAP&lt;/SPAN&gt;イベントが多数提供されていますが、標準イベントのペイロードでは、業務要件に対応できず、カスタマイズが必要となる場合があります。特に、イベントデータによるフィルタリングや標準イベントのペイロード補完を目的として、&lt;SPAN&gt;SAP&lt;/SPAN&gt;標準イベントを&lt;SPAN&gt;Derived Event&lt;/SPAN&gt;により拡張するユースケースがございます。&lt;BR /&gt;Derived Eventは、&lt;SPAN&gt;S/4HANA Cloud, private edition &amp;amp; S/4HANA 2023 / S/4HANA Cloud, public edition 2308&lt;/SPAN&gt;リリースで導入された機能で、既存の&lt;SPAN&gt;SAP&lt;/SPAN&gt;標準イベントをベースに、カスタムペイロードを持つ新しいイベントを定義できる機能です。これにより、標準イベントの実装を再利用しながら、業務に必要な追加フィールドやフィルタリング条件を適用したイベントを作成することが可能になります。&lt;BR /&gt;SAP Community Blog: &lt;SPAN&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/derived-events-how-to-trigger-custom-event-from-an-sap-standard-event/ba-p/13955193" target="_blank"&gt;Derived Events- How to Trigger Custom Event from an SAP Standard Event&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;一方、&lt;SPAN&gt;Derived Event&lt;/SPAN&gt;は、拡張対象の&lt;SPAN&gt;SAP&lt;/SPAN&gt;標準オブジェクトが以下の条件を満たしている必要があります。&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;参照元イベントを含むビジネスオブジェクトが拡張可能&lt;SPAN&gt;(extensible)&lt;/SPAN&gt;であること&lt;/LI&gt;&lt;LI&gt;参照されるイベントが&lt;SPAN&gt;C0&lt;/SPAN&gt;および&lt;SPAN&gt;C1&lt;/SPAN&gt;リリースされた&lt;SPAN&gt;RAP BO&lt;/SPAN&gt;インターフェースで公開されている必要があること&lt;/LI&gt;&lt;LI&gt;Derived Eventのペイロードのデータソースとして使用される&lt;SPAN&gt;CDS&lt;/SPAN&gt;ビューエンティティが&lt;SPAN&gt;C1&lt;/SPAN&gt;リリースされている必要があること&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;そのため、&lt;SPAN&gt;SAP&lt;/SPAN&gt;標準&lt;SPAN&gt;RAP BO&lt;/SPAN&gt;では、&lt;SPAN&gt;Derived Event&lt;/SPAN&gt;による拡張に対応していないオブジェクトも存在します。この場合、本来であれば&lt;SPAN&gt;Derived Event&lt;/SPAN&gt;で解決できるはずの要件が実現できないケースが発生します。&lt;BR /&gt;そこで本ブログでは、&lt;SPAN&gt;Derived Event&lt;/SPAN&gt;による拡張が不可能な&lt;SPAN&gt;SAP&lt;/SPAN&gt;標準イベントに対して、カスタム&lt;SPAN&gt;RAP BO&lt;/SPAN&gt;によるペイロードの拡張を実現するワークアラウンドアプローチについて紹介します。&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1437114146"&gt;2. ワークアラウンドソリューション&lt;/H1&gt;&lt;P&gt;Derived Eventが使用できない場合、&lt;SPAN&gt;Local Event Consumption&lt;/SPAN&gt;とカスタム&lt;SPAN&gt;RAP&lt;/SPAN&gt;イベントを組み合わせたワークアラウンドアプローチが有効な手段となります。このアプローチは、&lt;SPAN&gt;SAP&lt;/SPAN&gt;標準イベントをローカル（カスタム&lt;SPAN&gt;ABAP&lt;/SPAN&gt;クラス）で消費し、それをトリガーとしてカスタム&lt;SPAN&gt;RAP&lt;/SPAN&gt;イベントを発生させる手法です。カスタムイベントのペイロードを業務要件に合わせたペイロードとすることで、イベントフィルタの利用等が可能となります。&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_1-1760225484634.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/326000i65E19ECBA8BC68CD/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_1-1760225484634.png" alt="hironobu_nakayama_1-1760225484634.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-1240600641"&gt;3. 実装サンプル&lt;/H1&gt;&lt;P&gt;本ブログでは、拡張不可な&lt;SPAN&gt;r_purchaseordertp&lt;/SPAN&gt;を対象オブジェクトとし、購買発注伝票のデータ変更に対するイベントペイロードの拡張を実現します。&lt;SPAN&gt;SAP&lt;/SPAN&gt;標準イベントでは、購買発注伝票番号のみのペイロードあるのに対し、カスタムイベントでは、購買発注伝票番号と購買発注伝票タイプをペイロードとします。Event Bindingおよび&lt;SPAN&gt;Event Mesh&lt;/SPAN&gt;とのチャンネル設定等は、&lt;SPAN&gt;SAP Community Blog: &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-create-rap-business-events-in-sap-s-4hana-on-premise-2022/ba-p/13553312" target="_blank"&gt;https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-create-rap-business-events-in-sap-s-4hana-on-premise-2022/ba-p/13553312&lt;/A&gt; &lt;/SPAN&gt;をご確認ください。本ブログの実装サンプルでの&lt;SPAN&gt;RAP BO&lt;/SPAN&gt;では、イベント以外の&lt;SPAN&gt;CRUD&lt;/SPAN&gt;や保存等の処理は、実装していない点にご注意ください。&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1302252574"&gt;(1) Local Consumer (ローカルイベントハンドリングのためのカスタムABAPクラス)&lt;/H3&gt;&lt;H5 id="toc-hId-1363904507"&gt;グローバルクラス: zcl_event_consump&lt;/H5&gt;&lt;P&gt;グローバルクラスでは、&lt;SPAN&gt;FOR EVENTS OF r_purchaseordertp&lt;/SPAN&gt;の定義により、消費する標準イベントを設定します。&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_event_consump DEFINITION
  PUBLIC
  ABSTRACT
  FINAL
  FOR EVENTS OF r_purchaseordertp.

  PUBLIC SECTION.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.



CLASS zcl_event_consump IMPLEMENTATION.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H5 id="toc-hId-1167391002"&gt;ローカルクラス: zcl_event_consump&lt;/H5&gt;&lt;P&gt;ローカルクラスでは、消費した標準イベントのペイロードのデータをもとに追加のデータ取得を行い、カスタム&lt;SPAN&gt;RAP&lt;/SPAN&gt;イベントをトリガーします。イベントのトリガーは、&lt;SPAN&gt;RAP&lt;/SPAN&gt;フレームワークにおいて、&lt;SPAN&gt;Save Sequence&lt;/SPAN&gt;でのみ可能なため、&lt;SPAN&gt;cl_abap_tx=&amp;gt;save(&amp;nbsp; ). &lt;/SPAN&gt;により、明示的に&lt;SPAN&gt;Save Sequence&lt;/SPAN&gt;に変更する必要がある点に注意が必要です。&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;*"* use this source file for the definition and implementation of
*"* local helper classes, interface definitions and type
*"* declarations
CLASS lcl_event_consump DEFINITION INHERITING FROM cl_abap_behavior_event_handler.
  PRIVATE SECTION.
    METHODS:
      consume_changed FOR ENTITY EVENT changed_instances FOR purchaseorder~changed.
ENDCLASS.

CLASS lcl_event_consump IMPLEMENTATION.

  METHOD consume_changed.
    cl_abap_tx=&amp;gt;save(  ).

    DATA lv_potype TYPE mm_purchaseordertype.

    CHECK changed_instances IS NOT INITIAL.

    LOOP AT changed_instances INTO DATA(changed_instance).

      SELECT SINGLE purchaseordertype
      FROM c_purchaseordertp
      INTO _potype
      WHERE purchaseorder = @changed_instance-purchaseorder.

      DATA(et_events) = VALUE zbp_i_purchseorder_test=&amp;gt;tt_events(
        (
        purchaseorder = changed_instance-purchaseorder
        purchaseordertype = lv_potype
        )
      ).

      zbp_i_purchseorder_event=&amp;gt;raise_po_changed_event( it_events = et_events ).

    ENDLOOP.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-712712059"&gt;(2) Custom RAP BO (Custom Event)&lt;/H3&gt;&lt;H5 id="toc-hId-774363992"&gt;CDS View: &lt;SPAN&gt;ZI_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;CDS Viewでは、購買発注伝票番号のみ定義しています。&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Consume purchase order event'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
  serviceQuality: #X,
  sizeCategory: #S,
  dataClass: #MIXED
}
define root view entity ZI_purchseorder_event as select from I_PurchaseOrder
{
  key PurchaseOrder
}&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId-577850487"&gt;&amp;nbsp;&lt;/H5&gt;&lt;H5 id="toc-hId-381336982"&gt;Behavior Definition: &lt;SPAN&gt;ZI_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;イベントトリガのためのカスタム&lt;SPAN&gt;RAP&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;BO&lt;/SPAN&gt;では、&lt;SPAN&gt;create / update / delete &lt;/SPAN&gt;機能を定義していません。&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed with unmanaged save implementation in class zbp_i_purchseorder_event unique;
strict ( 2 );

define behavior for ZI_purchseorder_event //alias &amp;lt;alias_name&amp;gt;
//persistent table ekko
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
{
  //  create;
  //  update;
  //  delete;
  event purchaseorder_changed parameter ZAB_PO_changed_event;

  field ( readonly ) PurchaseOrder;
}&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId--735379344"&gt;Behavior Implementation (Global class) : &lt;SPAN&gt;zbp_i_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;グローバルクラスでは、イベントトリガー用のメソッドを定義します。&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zbp_i_purchseorder_event DEFINITION PUBLIC ABSTRACT FINAL FOR BEHAVIOR OF zi_purchseorder_event.

  TYPES tt_events TYPE TABLE FOR EVENT zi_purchseorder_event~purchaseorder_changed.

  PUBLIC SECTION.
        CLASS-METHODS raise_po_changed_event
            IMPORTING it_events TYPE tt_events.

ENDCLASS.

CLASS zbp_i_purchseorder_event IMPLEMENTATION.
METHOD raise_po_changed_event.
  lcl_event_handler=&amp;gt;on_po_changed_event( it_events ).
endmethod.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId--931892849"&gt;&amp;nbsp;&lt;/H5&gt;&lt;H5 id="toc-hId--1128406354"&gt;Behavior Implementation (Local class) : &lt;SPAN&gt;lhc_zi_purchseorder_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;ローカルクラスでは、保存処理等は実装せず、イベントトリガー用のメソッドのみ実装しています。&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_zi_purchseorder_event DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.

    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR zi_purchseorder_event RESULT result.

ENDCLASS.

CLASS lhc_zi_purchseorder_event IMPLEMENTATION.

  METHOD get_instance_authorizations.
  ENDMETHOD.

ENDCLASS.

CLASS lsc_zi_purchseorder_event DEFINITION INHERITING FROM cl_abap_behavior_saver.
  PROTECTED SECTION.

    METHODS save_modified REDEFINITION.

    METHODS cleanup_finalize REDEFINITION.

ENDCLASS.

CLASS lsc_zi_purchseorder_event IMPLEMENTATION.

  METHOD save_modified.
  ENDMETHOD.

  METHOD cleanup_finalize.
  ENDMETHOD.

ENDCLASS.

CLASS lcl_event_handler DEFINITION FRIENDS zbp_i_purchseorder_event.
  PUBLIC SECTION.
    CLASS-METHODS on_po_changed_event IMPORTING it_events TYPE zbp_i_purchseorder_event=&amp;gt;tt_events.
ENDCLASS.

CLASS lcl_event_handler IMPLEMENTATION.
   METHOD on_po_changed_event.

    RAISE ENTITY EVENT ZI_purchseorder_event~purchaseorder_changed FROM it_events.

   ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;H5 id="toc-hId--1324919859"&gt;&amp;nbsp;&lt;/H5&gt;&lt;H5 id="toc-hId--1521433364"&gt;Abstract Entity: &lt;SPAN&gt;ZAB_PO_changed_event&lt;/SPAN&gt;&lt;/H5&gt;&lt;P&gt;Abstract entityにより、購買発注伝票タイプを追加しています。これにより、カスタムRAPイベントのペイロードは、購買発注伝票番号と購買発注伝票タイプとなります。&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Abastract entity for po changed event'
define abstract entity ZAB_PO_changed_event
  //  with parameters parameter_name : parameter_type
{
  PurchaseOrderType : mm_purchaseordertype;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--544334841"&gt;4. 実装結果&lt;/H1&gt;&lt;P&gt;Manage Purchase Orders (F0842A) アプリから既存の購買発注伝票を変更して、保存します。&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_0-1760229645619.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/326001iA137C622300D0D19/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_0-1760229645619.png" alt="hironobu_nakayama_0-1760229645619.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;SAP Event Meshで&lt;SPAN&gt;S/4HANA&lt;/SPAN&gt;からトリガされたカスタムイベントを受け取ることができます。&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="hironobu_nakayama_1-1760229707438.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/326002i776A835D573B8867/image-size/large?v=v2&amp;amp;px=999" role="button" title="hironobu_nakayama_1-1760229707438.png" alt="hironobu_nakayama_1-1760229707438.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--740848346"&gt;5. まとめ&lt;/H1&gt;&lt;P&gt;イベント駆動アーキテクチャの実現において、&lt;SPAN&gt;Derived Event&lt;/SPAN&gt;による拡張が不可能な場合、&lt;SPAN&gt;Local Event Consumption&lt;/SPAN&gt;とカスタム&lt;SPAN&gt;RAP&lt;/SPAN&gt;イベントを組み合わせたワークアラウンドアプローチが有効な手段となります。&lt;BR /&gt;こちらのアプローチにより、業務要件に応じたカスタムペイロードとフィルタリング機能を実現することで、必要なデータをイベントコンシューマに提供し、システム間連携の最適化を図ることが可能です。&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--937361851"&gt;参考情報&lt;/H1&gt;&lt;P&gt;SAP Learning：&lt;SPAN&gt;&lt;A href="https://learning.sap.com/learning-journeys/discovering-event-driven-integration-with-sap-integration-suite-advanced-event-mesh/explaining-event-driven-architecture_d02a51bb-1ce4-4c2d-a25d-8b9c9198ffd2" target="_blank" rel="noopener noreferrer"&gt;Explaining Event-Driven Architecture&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;SAP Help: &lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/sap-btp-guidance-framework/integration-architecture-guide/event-driven-architecture?amp;state=PRODUCTION&amp;amp;amp;version=Cloud" target="_blank" rel="noopener noreferrer"&gt;Event-driven Architecture&lt;/A&gt;&lt;/SPAN&gt;&lt;BR /&gt;SAP Community Blog: &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/rap-business-events-with-advanced-event-mesh-2-creating-custom-business/ba-p/13914171" target="_blank"&gt;RAP Business Events with Advanced Event Mesh [2]: Creating custom business events&lt;/A&gt;&lt;BR /&gt;SAP Community Blog: &lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/rap-business-events-with-advanced-event-mesh-5-consuming-a-local-business/ba-p/13915138" target="_blank"&gt;RAP Business Events with Advanced Event Mesh [5]: Consuming a local business event&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/rap%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88-sap%E6%A8%99%E6%BA%96%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%81%AE%E6%B6%88%E8%B2%BB%E3%81%A8%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0rap%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%81%AE%E3%83%88%E3%83%AA%E3%82%AC%E3%83%BC/ba-p/14241240"/>
    <published>2025-10-18T18:00:00.033000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/download-smart-form-as-pdf-using-rap-action-in-on-premises/ba-p/14244826</id>
    <title>Download Smart form as PDF using RAP action in On-premises</title>
    <updated>2025-10-22T07:43:37.130000+02:00</updated>
    <author>
      <name>chandana9269</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1470141</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In this blog I need to demonstrate the process of enabling a smart form PDF download within a RAP application using a custom action button in an on-premises setup.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;This is a common requirement for generating and downloading documents like invoices, Purchase orders etc., from a Fiori elements app.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;In classic ABAP, generating and downloading files was often done using methods like GUI_DOWNLOAD, but this approach is not compatible with RAP.&amp;nbsp;&lt;BR /&gt;In RAP, the recommended way to implement download functionality is by using streams, combined with additional logic to handle the pdf generation and delivery to the front-end.&lt;STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&amp;nbsp;Step 1 :&amp;nbsp; Create Database Tables &amp;nbsp;&lt;BR /&gt;&lt;/STRONG&gt;First we will be creating a database table to store the sales header(ZCH_DT_SALES_HED) and sales item (ZCH_DT_SALES_IT)data.&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'sales header table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zch_dt_sales_hed 
{
  key sid         : abap.char(10) not null;
  created_on      : abap.dats;
  document_type   : abap.char(4);
  customer        : abap.char(10);
  attachment      : abap.rawstring(0);
  mimetype        : abap.char(128);
  filename        : abap.char(128);
  last_changed_at : abp_lastchange_tstmpl;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Item table&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'sales item table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zch_dt_sales_it 
{
  key sid       : abap.char(10) not null;
  key sdoc_item : abap.numc(6) not null;
  material_no   : abap.char(40);
  @Semantics.quantity.unitOfMeasure : 'zch_dt_sales_it.unit'
  quantity      : abap.quan(15,3);
  unit          : abap.unit(3);
  @Semantics.amount.currencyCode : 'zch_dt_sales_it.currency'
  net_value     : abap.curr(15,2);
  currency      : abap.cuky;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step &lt;/SPAN&gt;&lt;SPAN class=""&gt;2 :&lt;/SPAN&gt;&lt;SPAN class=""&gt; Define Interface view on top of Sales Header and item tables&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'base view for sales header'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define root view entity zch_i_saleshed
  as select from zch_dt_sales_hed
  composition [0..*] of zch_i_salesit as _sitem
{
  key sid             as Sid,
      created_on      as CreatedOn,
      document_type   as DocumentType,
      customer        as Customer,
      @Semantics.largeObject : { fileName: 'filename' , mimeType: 'Mimetype' , 
      contentDispositionPreference: #ATTACHMENT}
      attachment      as Attachment,
      @Semantics.mimeType: true
      mimetype        as Mimetype,
      filename        as Filename,
      last_changed_at as LastChangedAt,
      _sitem
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'base view for sales item'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define view entity zch_i_salesit as select from zch_dt_sales_it
association to parent zch_i_saleshed as _sheader on $projection.Sid = _sheader.Sid
{
    key sid as Sid,
    key sdoc_item as SdocItem,
    material_no as MaterialNo,
    @Semantics.quantity.unitOfMeasure : 'Unit'
    quantity as Quantity,
    unit as Unit,
    @Semantics.amount.currencyCode : 'Currency'
    net_value as NetValue,
    currency as Currency,
    _sheader
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step &lt;/SPAN&gt;&lt;SPAN class=""&gt;3 :&lt;/SPAN&gt;&lt;SPAN class=""&gt; Define Consumption view on top of &lt;/SPAN&gt;&lt;SPAN class=""&gt;header and item &lt;/SPAN&gt;&lt;SPAN class=""&gt;interface views&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'projection view for sales header'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity zch_c_saleshed
  provider contract transactional_query
  as projection on zch_i_saleshed
{
  key Sid,
      CreatedOn,
      DocumentType,
      Customer,
      @Semantics.largeObject : { fileName: 'filename' , mimeType: 'Mimetype' , 
      contentDispositionPreference: #ATTACHMENT}
      Attachment,
      @Semantics.mimeType: true
      Mimetype,
      Filename,
      LastChangedAt,
      /* Associations */
      _sitem : redirected to composition child zch_c_salesit
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'projection view for sales item'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define view entity zch_c_salesit 
as  projection on  zch_i_salesit
{
    key Sid,
    key SdocItem,
    MaterialNo,
    @Semantics.quantity.unitOfMeasure : 'unit'
    Quantity,
    Unit,
    @Semantics.amount.currencyCode: 'Currency'
    NetValue,
    Currency,
    /* Associations */
    _sheader : redirected to parent zch_c_saleshed
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step &lt;/SPAN&gt;&lt;SPAN class=""&gt;4 :&lt;/SPAN&gt;&lt;SPAN class=""&gt; Define &lt;/SPAN&gt;&lt;SPAN class=""&gt;Metadata Extension for Header and item data&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer:#CORE
annotate entity zch_c_saleshed
    with 
{
     .facet: [
    {
      id:       'SalesDocHeader',
      purpose:  #STANDARD,
      position: 10,
      label:    'Header',
      type:     #IDENTIFICATION_REFERENCE
    },
    {
      id:            'SalesDocItem',
      purpose:       #STANDARD,
      type:          #LINEITEM_REFERENCE,
      label:         'Items',
      position:      20,
      targetElement: '_sitem'
    }
  ]
     : { lineItem: [{position: 10 , label: 'Salesorder Id' }],
    identification: [{ position: 10 ,label :'Salesorder Id' },
    { type: #FOR_ACTION, position:10 ,dataAction: 'download', label: 'Download Invoice' }] } 
    Sid;
     : { lineItem: [{position: 20 , label: 'Created on' }], 
    identification: [{ position: 20 ,label :'Created on' }] } 
    CreatedOn;
     : { lineItem: [{position: 30 , label: 'Document type' }], 
    identification: [{ position: 30 ,label :'Document type' }] } 
    DocumentType;
     : { lineItem: [{position: 40 , label: 'Customer id' }], 
    identification: [{ position: 40 ,label :'Customer id' }] } 
    Customer;
    .identification: [
    { position: 60, label: 'Attachment'   }
    ]
    Attachment;
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
annotate entity zch_c_salesit
    with 
{
    .facet: [
    {
      id:       'SalesDocItem',
      purpose:  #STANDARD,
      position: 10,
      label:    'Header',
      type:     #IDENTIFICATION_REFERENCE
    }]
@UI : { lineItem: [{position: 10 , label: 'Salesorder Id' }], 
     identification: [{ position: 10 , label :'Salesorder Id' }] } 
    Sid;
     : { lineItem: [{position: 20 , label: 'Sales Document Item' }], 
identification: [{ position: 20 ,label :'Sales Document Item' }] } 
    SdocItem;
     : { lineItem: [{position: 30 , label: 'Material no' }], 
identification: [{ position: 30 ,label :'Material no' }] } 
    MaterialNo;
     : { lineItem: [{position: 40 , label: 'Quantity' }], 
identification: [{ position: 40 ,label :'Quantity' }] } 
    Quantity;
     : { lineItem: [{position: 50 , label: 'Unit' }], 
identification: [{ position: 50 ,label :'Unit' }] } 
    Unit;
     : { lineItem: [{position: 60 , label: 'Net value' }], 
identification: [{ position: 60 ,label :'Net value' }] } 
    NetValue;
     : { lineItem: [{position: 70 , label: 'Currency' }], 
identification: [{ position: 70 ,label :'Currency' }] } 
    Currency;    
    
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step 5: Define &lt;/SPAN&gt;&lt;SPAN class=""&gt;Behavior Definitions&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;W&lt;/SPAN&gt;&lt;SPAN class=""&gt;e&lt;/SPAN&gt;&lt;SPAN class=""&gt; nee&lt;/SPAN&gt;&lt;SPAN class=""&gt;d to define the behavior &lt;/SPAN&gt;&lt;SPAN class=""&gt;definition &lt;/SPAN&gt;&lt;SPAN class=""&gt;for &lt;/SPAN&gt;&lt;SPAN class=""&gt;sales order &lt;/SPAN&gt;&lt;SPAN class=""&gt;header&lt;/SPAN&gt;&lt;SPAN class=""&gt; and &lt;/SPAN&gt;&lt;SPAN class=""&gt;item&lt;/SPAN&gt;&lt;SPAN class=""&gt;. &lt;/SPAN&gt;&lt;SPAN class=""&gt;This includes setting up &lt;/SPAN&gt;&lt;SPAN class=""&gt;the managed implementation, defining standard CRUD &lt;/SPAN&gt;&lt;SPAN class=""&gt;operations, defining early numbering for header and item&lt;/SPAN&gt; &lt;SPAN class=""&gt;key&lt;/SPAN&gt;&lt;SPAN class=""&gt;s&lt;/SPAN&gt; &lt;SPAN class=""&gt;and defining the Download action&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;*Here Download action button returns the abstract entity instead of sales order &lt;/SPAN&gt;&lt;SPAN class=""&gt;itself. This&lt;/SPAN&gt;&lt;SPAN class=""&gt; abstract entity is used only &lt;/SPAN&gt;&lt;SPAN class=""&gt;for transferring the file back to the UI.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_ch_i_saleshed unique;
strict ( 2 );

define behavior for zch_i_saleshed //alias salesheader
persistent table zch_dt_sales_hed
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
early numbering
{
  create;
  update;
  delete;
  action download result [1]  zch_download_file;
  side effects { action download affects $self ;}
  association _sitem { create; }
  field ( readonly ) Sid,Attachment, Mimetype, Filename;

  mapping for zch_dt_sales_hed
  {
    Sid = sid;
    CreatedOn = created_on;
    DocumentType = document_type;
    Customer = customer;
    Filename = filename;
    Mimetype = mimetype;
    Attachment = attachment;
    LastChangedAt = last_changed_at;
  }
}

define behavior for zch_i_salesit //alias salesitem
persistent table zch_dt_sales_it
lock dependent by _sheader
authorization dependent by _sheader
//etag master &amp;lt;field_name&amp;gt;
early numbering
{
  update;
  delete;
  field ( readonly ) sid,SdocItem ;
  association _sheader;

  mapping for zch_dt_sales_it
  {
    Sid = sid;
    SdocItem = sdoc_item;
    MaterialNo = material_no;
    Quantity = quantity;
    Unit = unit;
    NetValue = net_value;
    Currency = currency;
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Abstract Entity :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'abstract entity for file download'
define root abstract entity Zch_Download_File
{
  @Semantics.largeObject : { fileName: 'filename' , mimeType: 'Mimetype' , 
  contentDispositionPreference: #ATTACHMENT }
  attachment      : abap.rawstring(0);
  @Semantics.mimeType: true
  mimetype        : abap.char(128);
  filename        : abap.char(128);
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define behavior definition on top of projection view&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );

define behavior for zch_c_saleshed //alias &amp;lt;alias_name&amp;gt;
{
  use create;
  use update;
  use delete;

  use action download ;
  use association _sitem { create; }
}

define behavior for zch_c_salesit //alias &amp;lt;alias_name&amp;gt;
{
  use update;
  use delete;

  use association _sheader;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step 6: &lt;/SPAN&gt;&lt;SPAN class=""&gt;I&lt;/SPAN&gt;&lt;SPAN class=""&gt;mplement the &lt;/SPAN&gt;&lt;SPAN class=""&gt;Be&lt;/SPAN&gt;&lt;SPAN class=""&gt;havior handler class &lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;In this step we will be implementing the behavior handler for our sales order &lt;/SPAN&gt;&lt;SPAN class=""&gt;RAP BO.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;This class takes care of early numbering as well as the download action which generates and s&lt;/SPAN&gt;&lt;SPAN class=""&gt;treams the invoice pdf back to UI.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_zch_i_saleshed DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.

    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR zch_i_saleshed RESULT result.
    METHODS download FOR MODIFY
      IMPORTING keys FOR ACTION zch_i_saleshed~download RESULT result.
    METHODS earlynumbering_cba_sitem FOR NUMBERING
      IMPORTING entities FOR CREATE zch_i_saleshed\_sitem.
    METHODS earlynumbering_create FOR NUMBERING
      IMPORTING entities FOR CREATE zch_i_saleshed.

ENDCLASS.

CLASS lhc_zch_i_saleshed IMPLEMENTATION.

  METHOD get_instance_authorizations.
  ENDMETHOD.

  METHOD earlynumbering_create.
    select max( sid ) from zch_dt_sales_hed
    into (lv_max_id).
    data(lv_num) = CONV numc08( lv_max_id ).
    if lv_num is initial.
        lv_max_id = 'SO00000001'.
    else.
        lv_num += 1.
        lv_max_id = |SO{ lv_num }|.
    ENDIF.

data(ls_entity) = entities[ 1 ].
APPEND VALUE #( %cid = ls_entity-%cid
                sid = lv_max_id ) to mapped-zch_i_saleshed.
  ENDMETHOD.

  METHOD earlynumbering_cba_Sitem.
              data lv_number(6) type n.

  select max( sdoc_item ) from zch_dt_sales_it
  into (lv_max_id).
  if sy-subrc = 0.
    lv_number = lv_max_id + 1.
  else.
    lv_number = 1.
  ENDIF.
  loop at entities into data(ls_entities).
    loop at ls_entities-%target ASSIGNING FIELD-SYMBOL(&amp;lt;fs_target&amp;gt;).
   APPEND CORRESPONDING #( &amp;lt;fS_target&amp;gt; ) to mapped-zch_i_salesit ASSIGNING FIELD-SYMBOL(&amp;lt;ls_item&amp;gt;).
   &amp;lt;ls_item&amp;gt;-SdocItem = lv_number.
   ENDLOOP.
  ENDLOOP.
  ENDMETHOD.

  METHOD download.
   data: lt_salesi type ZCH_T_SALESI.

  loop at keys into data(ls_keys).
   READ ENTITIES OF zch_i_saleshed IN LOCAL MODE
      ENTITY zch_i_saleshed
        ALL FIELDS WITH CORRESPONDING #( keys )
      RESULT DATA(lt_sales_header).

   data(ls_salesh) = CORRESPONDING zch_i_saleshed( lt_sales_header[ 1 ] ).

   READ ENTITIES OF zch_i_saleshed IN LOCAL MODE
      ENTITY zch_i_saleshed by \_sitem
       ALL FIELDS WITH CORRESPONDING #( keys )
      RESULT DATA(lt_sales_item).

   LOOP AT lt_sales_item INTO DATA(ls_item).
      APPEND CORRESPONDING zch_i_salesit( ls_item ) TO lt_salesi.
    ENDLOOP.

   DATA(lv_pdf_xstring) = NEW ZCL_CH_HELPER_CLS( )-&amp;gt;generate_form(
                                                   is_sales_header = ls_salesh
                                                   it_sales_items  = lt_salesi ).

APPEND VALUE #(
      %tky              = ls_keys-%tky
      %param-attachment = lv_pdf_xstring
      %param-mimetype   = 'application/pdf'
      %param-filename   = |Invoice_{ ls_salesh-sid }.pdf|
    ) TO result.

  ENDLOOP.
  
  MODIFY ENTITY IN LOCAL MODE zch_i_saleshed
   UPDATE FIELDS  (  Attachment Mimetype Filename )
   WITH value #( (  %key = ls_keys-%key
                    Attachment = lv_pdf_xstring
                    Filename = |Invoice_{ ls_salesh-sid }.pdf|
                    Mimetype = 'application/pdf' ) )
                    REPORTED reported
                    FAILED failed.
 ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;The following helper&lt;/SPAN&gt; &lt;SPAN class=""&gt;class&lt;/SPAN&gt; &lt;SPAN class=""&gt;generates the&lt;/SPAN&gt; &lt;SPAN class=""&gt;Smart form &lt;/SPAN&gt;&lt;SPAN class=""&gt;output &lt;/SPAN&gt;&lt;SPAN class=""&gt;as&lt;/SPAN&gt;&lt;SPAN class=""&gt; an&lt;/SPAN&gt; &lt;SPAN class=""&gt;X&lt;/SPAN&gt;&lt;SPAN class=""&gt;STRING .&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_ch_helper_cls DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    TYPES: ty_sales_items_tt TYPE STANDARD TABLE OF zch_i_salesit.

    METHODS generate_form
      IMPORTING
        is_sales_header TYPE zch_i_saleshed
        it_sales_items  TYPE ty_sales_items_tt
      RETURNING
        VALUE(rv_pdf)   TYPE xstring.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.


CLASS zcl_ch_helper_cls IMPLEMENTATION.
  METHOD generate_form.

    data : lv_fm_name type RS38L_FNAM,
       lv_ctr_par type ssfctrlop,
       lv_output_options type SSFCOMPOP,
       lv_job_output type SSFCRESCL,
       Gt_pdf_lines type table of tline,
       lv_size type i,
       lv_pdf_xstring type xstring.


CALL FUNCTION 'SSF_FUNCTION_MODULE_NAME'
  EXPORTING
    formname                 = 'ZCH_INVOICE'
*   VARIANT                  = ' '
*   DIRECT_CALL              = ' '
 IMPORTING
   FM_NAME                  =  lv_fm_name
 EXCEPTIONS
   NO_FORM                  = 1
   NO_FUNCTION_MODULE       = 2
   OTHERS                   = 3
          .

lv_ctr_par-no_dialog = 'X'.
lv_ctr_par-preview = 'X'.
lv_ctr_par-getotf = 'X'.
lv_output_options-TDDEST = 'LP01'.

CALL FUNCTION lv_fm_name
  EXPORTING
   CONTROL_PARAMETERS         = lv_ctr_par
   OUTPUT_OPTIONS             = lv_output_options
   USER_SETTINGS              = ''
    im_sales                   = is_sales_header-Sid
 IMPORTING
   JOB_OUTPUT_INFO            = lv_job_output
 EXCEPTIONS
   FORMATTING_ERROR           = 1
   INTERNAL_ERROR             = 2
   SEND_ERROR                 = 3
   USER_CANCELED              = 4
   OTHERS                     = 5
          .

CALL FUNCTION 'CONVERT_OTF'
 EXPORTING
   FORMAT                      = 'PDF'
 IMPORTING
    bin_filesize          = lv_size
    bin_file              = lv_pdf_xstring
  TABLES
    otf                         = lv_job_output-otfdata
    lines                       = Gt_pdf_lines
 EXCEPTIONS
   ERR_MAX_LINEWIDTH           = 1
   ERR_FORMAT                  = 2

   ERR_CONV_NOT_POSSIBLE       = 3
   ERR_BAD_OTF                 = 4
   OTHERS                      = 5.
          
 rv_pdf = lv_pdf_xstring.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define Service definition&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service definition for sales header' 

define service Zch_srv_saleshed { 

expose zch_c_saleshed; 

expose zch_c_salesit; 

} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define Service &lt;/SPAN&gt;&lt;SPAN class=""&gt;binding&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN class=""&gt; and&lt;/SPAN&gt;&lt;SPAN class=""&gt; preview the application&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_0-1760687945765.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328880i6F009A4D9C91932C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_0-1760687945765.png" alt="chandana9269_0-1760687945765.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Create Sales Header data&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_1-1760688020461.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328881i46F0EDB66AD5B776/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_1-1760688020461.png" alt="chandana9269_1-1760688020461.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Cr&lt;/SPAN&gt;&lt;SPAN class=""&gt;e&lt;/SPAN&gt;&lt;SPAN class=""&gt;ate item data&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_2-1760688059366.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328883i3F157670405C85CD/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_2-1760688059366.png" alt="chandana9269_2-1760688059366.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Click on the Download invoice button and refresh&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_3-1760688089159.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328884i930843A5CF426181/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_3-1760688089159.png" alt="chandana9269_3-1760688089159.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Now Click on Open &lt;/SPAN&gt;&lt;SPAN class=""&gt;file ,the&lt;/SPAN&gt;&lt;SPAN class=""&gt; form will be downloaded&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_4-1760688126961.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328885iF31635F0E2B884F4/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_4-1760688126961.png" alt="chandana9269_4-1760688126961.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_5-1760688144980.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328886iED3E9E4EA4389C97/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_5-1760688144980.png" alt="chandana9269_5-1760688144980.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion :&amp;nbsp;&lt;BR /&gt;&lt;/STRONG&gt;This approach enables seamless Smart Form PDF generation and download within RAP, combining classic ABAP capabilities with modern Fiori user experience in an on-premise setup.&lt;STRONG&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/download-smart-form-as-pdf-using-rap-action-in-on-premises/ba-p/14244826"/>
    <published>2025-10-22T07:43:37.130000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/writable-entity-in-cds/ba-p/14249189</id>
    <title>Writable Entity in CDS</title>
    <updated>2025-10-22T07:56:59.929000+02:00</updated>
    <author>
      <name>kalmesh</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1490139</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction to writable CDS Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;CDS provides a powerful way to define and consume data models.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Traditionally, CDS views were read-only, used primarily for data retrieval.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;However, with the evolution of SAP's ABAP platform, Writable CDS Entities were introduced to enable direct data manipulation (Update, modify).&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Types of Writable CDS Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp; &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;1.Writable CDS View Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; - Wrap DDIC tables for direct writing access.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp; 2.Writable External Entities &lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;- Enable write access to eternal database.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In this blog, we are going to focus on CDS Writable Entities. I will walk you through the concept step-by-step, using a practical example to demonstrate how it works and what operations—such as&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt; INSERT&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; and &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;UPDATE&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;—we can perform using a writable entity. Let's dive into the example.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Create a Table&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_0-1761035674723.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330139i0E91AC394DB0288C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_0-1761035674723.png" alt="kalmesh_0-1761035674723.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Next, we will create a writable CDS entity on top of the database table &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;ZTRL_T_AIRPORT, &lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Using the writable CDS entity, we can perform &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;update &lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;operations directly, and we can also &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;insert&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; new records by using the &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;MODIFY&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; statement. We will explore how to implement these operations in the upcoming steps.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_1-1761035762682.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330140i8F18A3F4D2C62746/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_1-1761035762682.png" alt="kalmesh_1-1761035762682.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;In the next step, we will create a class to perform all the required operations. We will use standard interface methods to execute these operations and display the output in the console for better visibility and testing.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_2-1761035834570.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330141i6A6F1BD2A833069C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_2-1761035834570.png" alt="kalmesh_2-1761035834570.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Let’s&lt;/SPAN&gt;&lt;SPAN class=""&gt; insert some data into the database table. Since we cannot perform insert operation directly through a writable CDS entity, I will &lt;/SPAN&gt;&lt;SPAN class=""&gt;proceed&lt;/SPAN&gt;&lt;SPAN class=""&gt; with inserting data into the underlying database &lt;/SPAN&gt;&lt;SPAN class=""&gt;table.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_3-1761035898193.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330142i477E22022DB56E99/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_3-1761035898193.png" alt="kalmesh_3-1761035898193.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Fetch &lt;/SPAN&gt;&lt;SPAN class=""&gt;the data from the database table to verify whether the records were successfully inserted, as performed in the &lt;/SPAN&gt;&lt;SPAN class=""&gt;p&lt;/SPAN&gt;&lt;SPAN class=""&gt;revious&lt;/SPAN&gt; &lt;SPAN class=""&gt;step.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_4-1761035941906.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330143i0ADEFA20BA444649/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_4-1761035941906.png" alt="kalmesh_4-1761035941906.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;UPDATE&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Now, let’s perform an update operation using the writable CDS entity (&lt;STRONG&gt;ZTRL&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;STRONG&gt;_I_WRENT_DEMO&lt;/STRONG&gt;)&lt;SPAN&gt;. In this example, we will update the name field to demonstrate how data can be modified through the entity.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_5-1761036054229.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330145i4019B9CCE92DA46E/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_5-1761036054229.png" alt="kalmesh_5-1761036054229.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;INSERT&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;We will insert a new record by using the &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;MODIFY&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; statement, which allows us to perform insert operations through the writable CDS entity.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_6-1761036103280.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330146iF60E2A1020E11868/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_6-1761036103280.png" alt="kalmesh_6-1761036103280.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;DELETE&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Direct delete operations are not supported through writable CDS entities. If attempted, the system will raise an error, as shown below.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_7-1761036149147.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330147i142A233FDCF4405F/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_7-1761036149147.png" alt="kalmesh_7-1761036149147.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_8-1761036170936.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330148i289A85701DAF27DC/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_8-1761036170936.png" alt="kalmesh_8-1761036170936.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Conclusion&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Writable CDS Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; offer a powerful and flexible way to interact with database tables in SAP. Through these entities, we can perform &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;update operations &lt;/SPAN&gt;&lt;/STRONG&gt;and&lt;SPAN&gt;&amp;nbsp;even &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;insert new records&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; using the &lt;/SPAN&gt;&lt;SPAN&gt;MODIFY&lt;/SPAN&gt;&lt;SPAN&gt; statement.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Keep experimenting, keep learning—and happy coding! &lt;span class="lia-unicode-emoji" title=":rocket:"&gt;🚀&lt;/span&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/writable-entity-in-cds/ba-p/14249189"/>
    <published>2025-10-22T07:56:59.929000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/outbound-integration-from-sap-btp-abap-to-sap-s-4hana-cloud-via-service/ba-p/14255149</id>
    <title>Outbound Integration from SAP BTP, ABAP to SAP S/4HANA Cloud via Service Consumption Model</title>
    <updated>2025-10-28T13:17:53.803000+01:00</updated>
    <author>
      <name>Pramathesh_t_s</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1455465</uri>
    </author>
    <content>&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;This blog post will describe the Service Consumption Model for OData. I will describe its benefits, provide a description of the model, take a look at the OData Client Proxy at runtime and also dive into the ABAP cross trace integration as well.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;If you want to receive or send data to an OData V2 or V4 service within SAP BTP, ABAP Environment or SAP S/4HANA ABAP Environment, you can use the "Service Consumption Model" for OData. As of release 2311, it is possible to&amp;nbsp;consume Complex Types, Complex Collection, Action (bound) and Functions (bound).&amp;nbsp;Of course, the consumption of Entity Types and Entity Sets is also possible.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Use case&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;If you have an SAP BTP, ABAP Environment or SAP S/4HANA Cloud, ABAP Environment system you can use the Service Consumption Model for OData. From here you can connect to a Cloud or an on-premises system.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_0-1761650653791.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333359iE20CBBCBB983B936/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Pramathesh_t_s_0-1761650653791.png" alt="Pramathesh_t_s_0-1761650653791.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;In my scenario I am consuming the &lt;EM&gt;API - API_WAREHOUSE_ORDER_TASK_2&lt;/EM&gt; from another Cloud system. A call to the Entity Set&amp;nbsp;&lt;EM&gt;Warehouse Task&lt;/EM&gt;&amp;nbsp;returns the following data:&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_0-1761650980033.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333361i9FE0B730525AE6E9/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_0-1761650980033.png" alt="Pramathesh_t_s_0-1761650980033.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Service Consumption Model for OData&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Select&amp;nbsp;&lt;EM&gt;File&lt;/EM&gt;&amp;nbsp;--&amp;gt;&amp;nbsp;&amp;nbsp;&lt;EM&gt;New&lt;/EM&gt;&amp;nbsp;--&amp;gt;&amp;nbsp;&lt;EM&gt;Service Consumption Model&lt;/EM&gt;&amp;nbsp;and choose&amp;nbsp;&lt;EM&gt;OData&lt;/EM&gt;&amp;nbsp;as&amp;nbsp;&lt;EM&gt;Consumption mode&lt;/EM&gt;&amp;nbsp;in ADT.&lt;/P&gt;&lt;P&gt;The consumption system requires a representation of the remote service. This knowledge is used to create the URL, write and read the JSON form the HTTP requests and responses. Therefore, the wizard needs the EDMX file (a service metadata document that describes the data model exposed by the service as an HTTP endpoint). OData uses EDMX as the format for this description of the remote service. You can get this by adding&amp;nbsp;&lt;EM&gt;$metadata&lt;/EM&gt;&amp;nbsp;to the end of the service document, in my case it is the following URL -&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;GET /sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/$metadata&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Save this file locally to use it in the below shown wizard. In addition, chose the appropriate class name. This class is the model representation and will contain all the types.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_1-1761651074160.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333362i4E220282FA77C500/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_1-1761651074160.png" alt="Pramathesh_t_s_1-1761651074160.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Finally, we get the Service Consumption model for OData. Create an outbound service object using wizard, which models the outbound call that will be implemented. The outbound service will be part of a custom communication scenario.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_2-1761651128515.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333363i2D6DC05E2B6D119C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_2-1761651128515.png" alt="Pramathesh_t_s_2-1761651128515.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Create a communication scenario and assign the outbound service to it. This will be the basis for the outbound communication arrangement, which will be configured by an administrator at a later point. Keep in mind that the developer defines which authentication methods are supported, while the administrator decides which authentication method is ultimately used at runtime.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_3-1761651467132.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333364i2B0D21F02F7C5AD2/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_3-1761651467132.png" alt="Pramathesh_t_s_3-1761651467132.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Consuming an Odata Service via&amp;nbsp;Service Consumption Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;You can use the generated code snippet of the SRVC in and ABAP class, pass the name of the communication scenario and if required, the name of the communication system and the outbound service to CREATE_BY_COMM_ARRANGEMENT&amp;nbsp;method, and perform the service call.&lt;/P&gt;&lt;P&gt;The following code is generated by the SRVC for the create operation of the OData service Warehouse Task.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_4-1761651617495.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333371i8D265D6053BE92E8/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_4-1761651617495.png" alt="Pramathesh_t_s_4-1761651617495.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Support for Actions and Functions&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;To call an OData action or function, the necessary structures and tables for the parameters are generated in the Service Consumption Model. With the 2311 release, however, the ADT (ABAP Development Tools) integration for OData V4 actions is still missing.&lt;/P&gt;&lt;P&gt;Consequently, I cannot yet select a bound action, an action import, a bound function, or a function import and directly generate the code snippet using the ADT tool. Despite this missing feature, the required parameter structure is available, and I can use it at runtime to call the operation.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":hammer_and_wrench:"&gt;🛠&lt;/span&gt;️ Code Example: CancelWarehouseTask Action&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Let's look at how to perform the CancelWarehouseTask action. Before implementing this using the Service Consumption Model, we'll verify the steps using the SAP Gateway Client.&lt;/P&gt;&lt;P&gt;For any standard SAP API, you should always consult the SAP API Business Hub to determine the correct syntax, required URL, and mandatory parameters for any action or function. The sample link confirms that the following details are required to execute this action:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Key Parameters:&lt;/STRONG&gt;&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;Warehouse Number (EWMWarehouse)&lt;/LI&gt;&lt;LI&gt;Warehouse Task Number (WarehouseTask)&lt;/LI&gt;&lt;LI&gt;Warehouse Task Item Number (WarehouseTaskItem)&lt;/LI&gt;&lt;/UL&gt;&lt;LI&gt;Concurrency Control: The ETag value is also required for conditional updates/actions.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The full API request URL for the action is:&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;POST /sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/WarehouseTask(EWMWarehouse='{EWMWarehouse}',WarehouseTask='{WarehouseTask}',WarehouseTaskItem='{WarehouseTaskItem}')/SAP__self.CancelWarehouseTask?sap-client=&amp;lt;client&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":gear:"&gt;⚙️&lt;/span&gt; Steps to Prepare the Details using SAP Gateway Client&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;To successfully execute the action, you first need to retrieve the current ETag and key parameters for the warehouse task.&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Perform a GET Call to Retrieve the Task Details and ETag.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Execute a GET request to the WarehouseTask entity set using the relevant warehouse and order numbers to retrieve the task details.&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;/sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/WarehouseOrder(EWMWarehouse='0880',WarehouseOrder='9748')/_WarehouseTask&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;The response payload will contain the Warehouse Number, Warehouse Task Number, Warehouse Task Item, and the &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.etag property for the required task.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_5-1761652886181.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333391i08D1764058C2AAB8/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_5-1761652886181.png" alt="Pramathesh_t_s_5-1761652886181.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 2. Perform the POST Call for the Action.&lt;/P&gt;&lt;P&gt;Perform a POST request for the CancelWarehouseTask action using the details (parameters) obtained in the previous step. Crucially, you must also include the ETag value in the If-Match HTTP header.&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;Post /sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/WarehouseTask(EWMWarehouse='{EWMWarehouse}',WarehouseTask='{WarehouseTask}',WarehouseTaskItem='{WarehouseTaskItem}')/SAP__self.CancelWarehouseTask&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Required Header - If-Match: W/"&amp;lt;ETag_Value_From_Step_1&amp;gt;"&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_6-1761653556921.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333394iDA3D6A690FB64A59/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_6-1761653556921.png" alt="Pramathesh_t_s_6-1761653556921.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":laptop_computer:"&gt;💻&lt;/span&gt; 1. Retrieving ETag and Key Parameters via Service Consumption Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The first step is to read the entity to obtain its current ETag and key properties, which are required for the subsequent action call.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TRY.
    " -----------------------------------------------------------
    " 1. Create HTTP Client and Client Proxy
    " -----------------------------------------------------------
    " Create HTTP destination using Communication Arrangement details
    DATA(lo_destination) = cl_http_destination_provider=&amp;gt;create_by_comm_arrangement(
        comm_scenario  = lv_commscetask
        comm_system_id = lv_commsystem
        service_id     = lv_serviceid_task ).

    lo_http_client  = cl_web_http_client_manager=&amp;gt;create_by_http_destination( lo_destination ).
    
    " Create the OData V4 client proxy
    lo_client_proxy = /iwbep/cl_cp_factory_remote=&amp;gt;create_v4_remote_proxy(
        EXPORTING
            is_proxy_model_key       = VALUE #( repository_id       = lv_repid
                                                  proxy_model_id      = lv_proxymodelid
                                                  proxy_model_version = lv_proxymodlever )
            io_http_client             = lo_http_client
            iv_relative_service_root   = lv_servicerootwh ).

    ASSERT lo_http_client IS BOUND.
    
    " -----------------------------------------------------------
    " 2. Navigate to the Resource and Read Data (GET)
    " -----------------------------------------------------------
    " Create a request for the read operation on the WAREHOUSE_TASK entity set
    lo_request = lo_client_proxy-&amp;gt;create_resource_for_entity_set( 'WAREHOUSE_TASK' )-&amp;gt;create_request_for_read( ).
    
    " Apply filter condition for the Warehouse Task
    lo_filter_factory = lo_request-&amp;gt;create_filter_factory( ).
    CLEAR lt_range_warehousetask.
    
    " Populate range table (assuming &amp;lt;ls_keys&amp;gt; holds the task number)
    lt_range_warehousetask =  VALUE #( ( sign  = 'I' option = 'EQ' low    = &amp;lt;ls_keys&amp;gt;-warehousetask ) ).
    
    " Create filter node by range on the WAREHOUSE_TASK property
    lo_filter_node_1 = lo_filter_factory-&amp;gt;create_by_range( iv_property_path = 'WAREHOUSE_TASK'
                                                          it_range         = lt_range_warehousetask ).
                                                          
    lo_request-&amp;gt;set_filter( lo_filter_node_1 ).
    
    " -----------------------------------------------------------
    " 3. Execute Request and Process Response
    " -----------------------------------------------------------
    lo_response = lo_request-&amp;gt;execute( ).
    
    " Retrieve the business data (ETag is implicitly available in the internal structure)
    lo_response-&amp;gt;get_business_data( IMPORTING et_business_data = lt_business_data ).

CATCH cx_root INTO DATA(lo_err).
    DATA(lv_text) = lo_err-&amp;gt;get_text( ).
    
    " Error handling and logging (omitted for brevity, based on your original code)
    APPEND VALUE #( warehousetask = &amp;lt;ls_keys&amp;gt;-warehousetask
                    %msg          = new_message( ... v2       = lv_text )
                  ) TO reported-zn5_dl_c_createmon_task.
    APPEND VALUE #( warehousetask = &amp;lt;ls_keys&amp;gt;-warehousetask ) TO failed-zn5_dl_c_createmon_task.
    lv_flag = abap_true.
ENDTRY.

" -----------------------------------------------------------
" 4. Extract ETag from Read Results
" -----------------------------------------------------------
" Assuming you are looping through tasks, the loop structure is missing, but extracting the ETag is done here:
READ TABLE lt_business_data ASSIGNING FIELD-SYMBOL(&amp;lt;ls_business_data&amp;gt;) WITH KEY warehouse_task = ls_task-warehousetask.

IF sy-subrc = 0.
    " The etag field is automatically mapped in the generated structure
    ls_task-etag = &amp;lt;ls_business_data&amp;gt;-etag.
ENDIF.

IF lv_flag = abap_false.
    APPEND ls_task TO lt_task.
    CLEAR ls_task.
ENDIF.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":rocket:"&gt;🚀&lt;/span&gt; 2. Performing the CancelWarehouseTask Action&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;As previously noted, as of the 2311 release, the ADT integration for generating code snippets for OData V4 actions is still pending. Therefore, we must implement the action call manually.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Implementation Details:&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Bound Action Method&lt;/STRONG&gt;: The method that triggers the bound action in the Service Consumption Model is typically named bound_action('ACTION_NAME') on the resource object. Here, the action name must be passed as a string literal: 'CANCEL_WAREHOUSE_TASK'.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_7-1761653664347.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333395i8E713F1F8DED25B7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_7-1761653664347.png" alt="Pramathesh_t_s_7-1761653664347.png" /&gt;&lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 2.&amp;nbsp;&lt;STRONG&gt;Concurrency Control:&lt;/STRONG&gt; Since CancelWarehouseTask is a state-changing operation, it requires the ETag for optimistic locking. This is set using the set_if_match( etag_value ) method on the request object.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TRY.
    " -----------------------------------------------------------
    " 1. Create HTTP Client and Client Proxy (using a different variable set, e.g., lo_client_proxy1)
    " -----------------------------------------------------------
    DATA(lo_destination1) = cl_http_destination_provider=&amp;gt;create_by_comm_arrangement(
        comm_scenario  = lv_commscetask
        comm_system_id = lv_commsystem
        service_id     = lv_serviceid_task ).

    lo_http_client1  = cl_web_http_client_manager=&amp;gt;create_by_http_destination( lo_destination1 ).
    
    lo_client_proxy1 = /iwbep/cl_cp_factory_remote=&amp;gt;create_v4_remote_proxy(
        EXPORTING
            is_proxy_model_key       = VALUE #( repository_id       = lv_repid
                                                  proxy_model_id      = lv_proxymodelid
                                                  proxy_model_version = lv_proxymodlever )
            io_http_client             = lo_http_client1
            iv_relative_service_root   = lv_servicerootwh ).
            
    ASSERT lo_http_client1 IS BOUND.

    " -----------------------------------------------------------
    " 2. Navigate to Entity and Bind Action
    " -----------------------------------------------------------
    " Construct the key for the specific WAREHOUSE_TASK entity
    DATA(ls_entity_key1) = VALUE #(
        ewmwarehouse        = lv_ewmwarehouse
        warehouse_task      = &amp;lt;ls_task&amp;gt;-warehousetask
        warehouse_task_item = '0' " Assuming the item is '0' for the action context
    ).
    
    " Navigate to the specific entity instance using its key
    DATA(lo_entity1) = lo_client_proxy1-&amp;gt;create_resource_for_entity_set( 'WAREHOUSE_TASK'
    )-&amp;gt;navigate_with_key( ls_entity_key1 ).
    
    " Bind the CANCEL_WAREHOUSE_TASK action to the entity resource
    DATA(lo_resource1) = lo_entity1-&amp;gt;bind_action( 'CANCEL_WAREHOUSE_TASK' ).
    
    " -----------------------------------------------------------
    " 3. Create Request, Set ETag, and Execute
    " -----------------------------------------------------------
    DATA(lo_request1) = lo_resource1-&amp;gt;create_request( ).
    
    " Set the ETag (If-Match header) using the ETag retrieved in step 1
    lo_request1-&amp;gt;set_if_match( &amp;lt;ls_task&amp;gt;-etag ).
    
    " Execute the action (POST request)
    DATA(lo_response1) = lo_request1-&amp;gt;execute( ).
    
    " Action successful, continue with status handling...

CATCH cx_root INTO DATA(lo_obj).
    DATA(lv_text) = lo_obj-&amp;gt;get_text( ).

    " Error handling and logging (omitted for brevity, based on your original code)
    APPEND VALUE #( warehousetask = &amp;lt;ls_task&amp;gt;-warehousetask
                    %msg          = new_message( ... v2       = lv_text )
                  ) TO reported-zn5_dl_c_createmon_task.
    APPEND VALUE #( warehousetask = &amp;lt;ls_task&amp;gt;-warehousetask ) TO failed-zn5_dl_c_createmon_task.
    lv_flag = abap_true.
ENDTRY.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion: Seamless Outbound Integration with OData Service Consumption Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This post demonstrated a complete, robust approach to Outbound Integration from the SAP BTP, ABAP Environment (or S/4HANA Cloud, ABAP Environment) to an external OData API, specifically the API_WAREHOUSE_ORDER_TASK_2 in a cloud-to-cloud scenario.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/outbound-integration-from-sap-btp-abap-to-sap-s-4hana-cloud-via-service/ba-p/14255149"/>
    <published>2025-10-28T13:17:53.803000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/survey-abap-naming-conventions/ba-p/14257743</id>
    <title>📢  Survey: ABAP Naming Conventions</title>
    <updated>2025-11-03T10:18:02.968000+01:00</updated>
    <author>
      <name>kilian_kilger</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/204709</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1634734726"&gt;How should a holistic naming convention store look?&lt;/H1&gt;&lt;P&gt;Names are everywhere!&lt;/P&gt;&lt;P&gt;Most customers have specific naming conventions for their development artifacts. Many customers have them in rule books or use ATC to check them, by using the well-known &lt;STRONG&gt;ATC check&lt;/STRONG&gt; for naming conventions.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="kilian_kilger_0-1761906261309.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334634i885400410D2F3A78/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="kilian_kilger_0-1761906261309.png" alt="kilian_kilger_0-1761906261309.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;STRONG&gt;Naming Convention ATC Check&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The existing ATC check is very limited, though, as it has no broad coverage of &lt;STRONG&gt;CDS&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Today, we also have new requirements through the use of AI and Generators. When using &lt;STRONG&gt;Joule for Developers,&lt;/STRONG&gt; for example, customers expect that their naming conventions are automatically applied. This also holds true when using generators like the &lt;STRONG&gt;RAP generator&lt;/STRONG&gt;.&amp;nbsp;&lt;/P&gt;&lt;P&gt;But how would you expect a naming convention store to look?&lt;/P&gt;&lt;H2 id="toc-hId-1567303940"&gt;1. Option: A central naming convention store&lt;/H2&gt;&lt;P&gt;This could be a Fiori app in a central system where the naming conventions are stored. These can then be maintained globally. The ATC check and different tools like generators and AI could connect to that system.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Pros:&lt;/STRONG&gt;&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- central maintenance, probably by a central team&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- central excemption process and governance&lt;BR /&gt;&lt;STRONG&gt;Cons:&lt;/STRONG&gt;&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- Differing rules, according to package and/or system, would be difficult to model&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- The check would come quite late in the development process, i.e. no check by the compiler&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- Excemptions create organizational overhead&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1370790435"&gt;&lt;BR /&gt;&lt;SPAN&gt;2. Option: Naming convention as source artifact&lt;/SPAN&gt;&lt;/H2&gt;&lt;P&gt;&lt;SPAN&gt;Store the naming convention as part of the source code, referencing the package and its subpackages.&lt;BR /&gt;&lt;STRONG&gt;&lt;BR /&gt;Pros:&lt;BR /&gt;&lt;/STRONG&gt;&amp;nbsp; - Naming convention near the source code, which could even be checked by the compiler&lt;BR /&gt;&amp;nbsp; - Excemptions could be handled locally in the naming convention&lt;BR /&gt;&amp;nbsp;&lt;STRONG&gt;Cons:&lt;BR /&gt;&amp;nbsp;&amp;nbsp;&lt;/STRONG&gt;- No central maintenance, probably much more effort to maintain&lt;BR /&gt;&amp;nbsp; - No central governance&lt;BR /&gt;&lt;BR /&gt;The answer probably also depends upon which persona maintains such a naming convention in your company. Is it some central architect or governance team or just the developers?&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;What do you think?&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;I am happy to hear your thoughts in the comments. &lt;STRONG&gt;You can also vote for the comments of others.&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Disclaimer&lt;/STRONG&gt;: this blog post does not imply that SAP will build any product related to naming conventions in the future.&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/survey-abap-naming-conventions/ba-p/14257743"/>
    <published>2025-11-03T10:18:02.968000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/behind-the-design-how-we-transformed-the-abap-development-tools/ba-p/14258121</id>
    <title>Behind the Design: How We Transformed the ABAP Development Tools Architecture to Support More IDEs</title>
    <updated>2025-11-04T17:00:00.118000+01:00</updated>
    <author>
      <name>thomasalexander_ritter</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/185696</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Currently, official ABAP tool support exists for SAP GUI and Eclipse. For years, users have asked us to bring this support to additional IDEs. Based on the user survey results from 2023 and 2025, the most requested development environment is &lt;STRONG&gt;Visual Studio Code (VS Code)&lt;/STRONG&gt;. However, many users have also expressed interest in other environments such as JetBrains IDEs, Neovim, or even Zed. In short, our user base wants more flexibility when choosing their development environment.&lt;/P&gt;&lt;P&gt;See related article:&amp;nbsp;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-development-tools-for-vs-code-everything-you-need-to-know/ba-p/14258129" target="_self"&gt;ABAP Development Tools for VS Code: Everything You Need to Know&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;How Do We Transform the ABAP Development Tools Architecture to Offer More Choice?&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;When analyzing the challenge, we identified two major issues that needed to be addressed:&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;1. The Client/Server Architecture&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;ABAP tools follow a client/server architecture. For each new development environment, a client layer implementation is required. This layer contains all the code needed to communicate with an ABAP server, including complex wrappers for existing ABAP development tools REST APIs. It ensures compatibility with system releases as far back as SAP NetWeaver 7.3 EHP1 SP04 and higher and implements client-side tool logic such as the debugger, test runner, ATC, tracing, and more.&lt;BR /&gt;Overall, the client UI-independent (IDE independent) codebase consists of &lt;STRONG&gt;2.9 million lines of code&lt;/STRONG&gt;!&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;2. Object Type Editors&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;ABAP relies heavily on object type editors. For the SAP BTP ABAP development environment alone, &lt;STRONG&gt;88 unique editors&lt;/STRONG&gt; need to be supported as of 2025. For comparison, CAP only requires one unique editor (CDS), and Java tooling only needs editors for classes, interfaces and enumerations.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Solution 1: Reusing Our Client Codebase as a Language Server&lt;/STRONG&gt;&lt;BR /&gt;Modern development environments support language servers through the &lt;A href="https://microsoft.github.io/language-server-protocol/" target="_self" rel="nofollow noopener noreferrer"&gt;Language Server Protocol (LSP)&lt;/A&gt;, which defines a standardized interface between the development tool and the language server.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="lsp_example_diagram.png" style="width: 740px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334818iEF95CE78093087A7/image-dimensions/740x343/is-moderation-mode/true?v=v2" width="740" height="343" role="button" title="lsp_example_diagram.png" alt="lsp_example_diagram.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;(Image &lt;A href="https://code.visualstudio.com/api/language-extensions/language-server-extension-guide" target="_self" rel="nofollow noopener noreferrer"&gt;source&lt;/A&gt;)&lt;/P&gt;&lt;P&gt;This means a language server can be written in any programming language and reused across multiple development environments.&lt;/P&gt;&lt;P&gt;We began exploring this approach in 2018, considering a TypeScript based language server to re-implement the client component—similar to community ABAP VS Code extensions. While functional, this approach was not ideal for us because it required rebuilding the entire client layer from scratch and maintaining two separate implementations. This is simply not a viable solution in the long run.&lt;/P&gt;&lt;P&gt;Fortunately, we discovered the &lt;A href="https://github.com/redhat-developer/vscode-java" target="_self" rel="nofollow noopener noreferrer"&gt;Java VS Code extension&lt;/A&gt;, which provided a clever solution: they "wrapped" the Eclipse Java development tools with a language server.&lt;/P&gt;&lt;P&gt;This approach allowed them to reuse the existing JDT codebase. Interestingly, most Java developers don’t realize that the VS Code Java extension is essentially Eclipse running inside VS Code!&lt;BR /&gt;This concept solved our problem: we can potentially reuse &lt;STRONG&gt;2.9 million lines of our client non-ui code&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="potential_reuse.png" style="width: 716px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334820i387FA14354C9E2B3/image-dimensions/716x445/is-moderation-mode/true?v=v2" width="716" height="445" role="button" title="potential_reuse.png" alt="potential_reuse.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;It also means we can maintain and support Eclipse and VS Code using the same codebase. Even better, users can connect to any ABAP server release supported by Eclipse through the VS Code extension.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Solution 2: Making Object Types Reusable via Server-Driven Development and Client-Based Renderers&lt;/STRONG&gt;&lt;BR /&gt;Initially, when building the Eclipse plug-in, we implemented new object type editors by adding persistence logic on the server in ABAP and the UI on the client side in Java. In 2018, when the SAP BTP ABAP Environment was launched and we decided to only support ABAP Development Tools for Eclipse for ABAP Cloud development, we had to add many missing object types quickly. During this process, we realized our architecture did not scale well. Using two programming languages was too complex and slow.&lt;/P&gt;&lt;P&gt;Learning from past experiences, we looked at the server-side Dynpro and SAP Fiori Elements programming models, which allow the implementation of ABAP-based UIs using only ABAP code and a client-side rendering engine based on UI models.&lt;BR /&gt;Adopting this approach solved our scalability problem: we only need &lt;STRONG&gt;two rendering engines&lt;/STRONG&gt; for tool support—one for form-based tools and one for source-based tools.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="server_driven_before_after.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334819iC5951153882F0337/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="server_driven_before_after.png" alt="server_driven_before_after.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;In 2020, we released editor support for number range objects—our first server-driven object type. Today, all new object types are built using our server-driven development framework.&lt;/P&gt;&lt;P&gt;Thanks to this shift, offering ABAP tool support in another development environment no longer requires 88 separate editors. It only requires two:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;One editor for form-based objects&lt;/LI&gt;&lt;LI&gt;One editor for source-based objects&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;For years, we wanted to bring ABAP tools to more development environments, but the previous architecture made this impossible. Over the past six years, we have invested significant effort into re-architecting our tools. Thanks to this work, we can now bring ABAP tools to additional IDEs—starting with &lt;STRONG&gt;VS Code in 2026&lt;/STRONG&gt;!&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/behind-the-design-how-we-transformed-the-abap-development-tools/ba-p/14258121"/>
    <published>2025-11-04T17:00:00.118000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/abap-development-tools-for-vs-code-everything-you-need-to-know/ba-p/14258129</id>
    <title>ABAP Development Tools for VS Code: Everything You Need to Know</title>
    <updated>2025-11-04T17:00:00.119000+01:00</updated>
    <author>
      <name>thomasalexander_ritter</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/185696</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We are excited to announce that we have started working on a VS Code extension for ABAP. We understand that the community has high expectations, and we want to communicate transparently about what you can expect from ABAP Development Tools for VS Code. In this article, we will share details about the scope of the first release and what’s planned for the future.&lt;/P&gt;&lt;P&gt;See related article:&amp;nbsp;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/behind-the-design-how-we-transformed-the-abap-development-tools/ba-p/14258121" target="_self"&gt;Behind the Design: How We Transformed the ABAP Development Tools Architecture to Support More IDEs&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Primary focus will be support for the ABAP Cloud Development Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The goal is to fully support all developer flows related to the ABAP Cloud development model. It is not planned to support classic programming models such as Dynpro or Web Dynpro.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Scope of the First Release: Focus on RAP UI Services&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The primary focus of the initial release is the development of RAP UI services. One of the biggest requests from our users has been to bring SAP Fiori frontend development and RAP UI service development into the same tool. We know this group of developers will benefit the most when all development tasks can be performed within VS Code. That’s why this is the starting point.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;First Release Targeted at Early Adopters&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The initial set of object types will include everything needed to build a RAP UI service from scratch, along with the basic develop/test/debug flow that VS Code supports. This includes editors for classes and interfaces. We plan to ship around 12+ object types. However, for many tasks outside of development flows for creating RAP UI services, developers will still need to switch between ABAP Development Tools for Eclipse and ABAP Development Tools for VS Code.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;ABAP developer tools for VS Code will gradually catch up with ABAP developer tools for Eclipse one Client Release at a Time&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;It took us 16 years to reach the current feature scope of the Eclipse plug-in. The technical implementation of our VS Code extension uses an architecture that allows us to reuse much of the existing Eclipse codebase. However, we must migrate all existing tools to the Language Server Protocol and design/build the necessary UIs on the VS Code side. While we expect a much faster development timeline, this transition will not happen overnight but gradually with each new client release.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Same Backend Support as ABAP Development Tools for Eclipse&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Since we are reusing our existing codebase, all features available for a given release in Eclipse can potentially be offered in VS Code. We plan to support all releases down to SAP NetWeaver 7.3 EHP1 SP04.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Early Release Means You Can Help Shape the Roadmap&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Just like the Eclipse plug-in, which was not feature-complete when we started, we will actively engage with the ABAP developer community to help us prioritize the features you miss the most.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;File-based development first&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;As the name already implies Visual Studio Code is a code editor optimized for editing source code files. Additionally, all AI tools work best in a file-based environment. In order, to ensure that ABAP developers get the most out of VS Code in combination with AI tools all object type editing is completely file based utilizing the &lt;A href="https://github.com/SAP/abap-file-formats" target="_self" rel="nofollow noopener noreferrer"&gt;ABAP file formats&lt;/A&gt;.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;SAP Joule for Developers Features Coming to VS Code&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We are planning to bring the Joule for developers features to VS Code, including predictive code completion and other intelligent development capabilities.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;ABAP Development Tools for VS Code Unlock Access to Cutting-Edge AI Tools&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;One of the reasons ABAP in VS Code is so appealing is that most cutting-edge AI development innovations happen in VS Code. Thanks to the new extension, you can leverage the available AI VS Code extensions. Please note that ABAP development objects are still stored on the server side. The file system had to be implemented using the “virtual workspace” technology. Not all AI tools currently support this file system, so compatibility may vary.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-development-tools-for-vs-code-everything-you-need-to-know/ba-p/14258129"/>
    <published>2025-11-04T17:00:00.119000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/how-to-use-reserved-words-as-property-names-in-your-odata-service/ba-p/14264772</id>
    <title>How to use reserved words as property names in your OData service?</title>
    <updated>2025-11-10T20:10:12.697000+01:00</updated>
    <author>
      <name>Andre_Fischer</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/55</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1635568966"&gt;Introduction&lt;/H1&gt;&lt;P&gt;Sometimes&lt;/P&gt;&lt;P&gt;there is the requirement to use field names that are reserved words such as &lt;STRONG&gt;&lt;FONT face="courier new,courier"&gt;Number&lt;/FONT&gt;&lt;/STRONG&gt;, &lt;STRONG&gt;&lt;FONT face="courier new,courier"&gt;Begin&lt;/FONT&gt;&lt;/STRONG&gt; or other reserved words as a propery property name of your OData service, e.g. to fill the value of a dynamic tile.&lt;/P&gt;&lt;H1 id="toc-hId-1439055461"&gt;Implementation&lt;/H1&gt;&lt;P&gt;When trying to set this name as an alias in your CDS view this fails with the error message:&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;NUMBER is a reserved word (choose another field name)&amp;nbsp;&lt;/STRONG&gt;.&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Products'

define view entity ZI_VH_PRODUCT
  as select from zproducts
{
  key product       as Product,
      producttext   as Producttext,
      productgroup  as ProductGroup,
      price         as Price,
      currency      as Currency,
      baseunit      as BaseUnit,
      numberinstock as Number
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Andre_Fischer_0-1762799005531.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/338261iD530D701CB62D7EA/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Andre_Fischer_0-1762799005531.png" alt="Andre_Fischer_0-1762799005531.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H1 id="toc-hId-1242541956"&gt;&lt;SPAN&gt;Solution&lt;/SPAN&gt;&lt;/H1&gt;&lt;P&gt;&lt;SPAN&gt;Using the annotation &lt;STRONG&gt;&lt;FONT face="courier new,courier"&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.property.name&lt;/FONT&gt;&lt;/STRONG&gt;&amp;nbsp;this can be achieved for RAP based OData services.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;In the CDS view that is used by your OData service it is possible to add the following annotation&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.property.name: 'Number' &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;to the source code of the CDS view.&amp;nbsp; &amp;nbsp;&lt;/P&gt;&lt;P&gt;This way the name of the CDS view property can be such that it does comply to the validations of the CDS editor, but at the same time the name of this field in the OData Service would be set to Number.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Test'
@ObjectModel.query.implementedBy: 'ABAP:ZCL_VH_PRODUCTS'

define view entity ZI_VH_PRODUCT
  as select from zproducts
{
  key product       as Product,
      producttext   as Producttext,
      productgroup  as ProductGroup,
      price         as Price,
      currency      as Currency,
      baseunit      as BaseUnit,
      &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.property.name: 'Number'
      numberinstock as NumberInStock
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;As a result you will get the following result in the &lt;STRONG&gt;$metadata&lt;/STRONG&gt; call.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;&amp;lt;EntityType Name="Product2Type"&amp;gt;
&amp;lt;Key&amp;gt;
&amp;lt;PropertyRef Name="Product"/&amp;gt;
&amp;lt;/Key&amp;gt;
&amp;lt;Property Name="Product" Type="Edm.String" Nullable="false" MaxLength="40"/&amp;gt;
&amp;lt;Property Name="Producttext" Type="Edm.String" Nullable="false" MaxLength="40"/&amp;gt;
&amp;lt;Property Name="ProductGroup" Type="Edm.String" Nullable="false" MaxLength="40"/&amp;gt;
&amp;lt;Property Name="Price" Type="Edm.Decimal" Nullable="false" Precision="15" Scale="variable"/&amp;gt;
&amp;lt;Property Name="Currency" Type="Edm.String" Nullable="false" MaxLength="5"/&amp;gt;
&amp;lt;Property Name="BaseUnit" Type="Edm.String" Nullable="false" MaxLength="3"/&amp;gt;
&amp;lt;Property Name="Number" Type="Edm.String" Nullable="false" MaxLength="3"/&amp;gt;
&amp;lt;/EntityType&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Also the Fiori Elements Preview shows the wished result:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Andre_Fischer_1-1762801704959.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/338290iD2AC0862ECAD80F8/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Andre_Fischer_1-1762801704959.png" alt="Andre_Fischer_1-1762801704959.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/how-to-use-reserved-words-as-property-names-in-your-odata-service/ba-p/14264772"/>
    <published>2025-11-10T20:10:12.697000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/cloud-native-with-abap-cloud-the-transactional-outbox-pattern/ba-p/14267118</id>
    <title>Cloud-Native with ABAP Cloud – The Transactional Outbox Pattern</title>
    <updated>2025-11-12T16:48:29.446000+01:00</updated>
    <author>
      <name>fabianfellhauer</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/354017</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1635652393"&gt;Cloud-Native with ABAP Cloud – The Transactional Outbox Pattern&lt;/H1&gt;&lt;P&gt;Cheers ABAP folks!&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;In modern, distributed system landscapes, ensuring &lt;STRONG&gt;data consistency&lt;/STRONG&gt; between a database and a message broker is a common challenge – especially when it comes to the integration of S/4HANA Cloud with Side-by-Side extensions built on the SAP Business Technology Platform (e.g. SAP BTP ABAP Environment, aka. Steampunk) or any other microservice-based architecture.&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;How do you guarantee that a database update (“Order created”) and a corresponding message (like "Request a shipping of the order") are never out of sync? The answer lies in the &lt;STRONG&gt;Transactional Outbox Pattern&lt;/STRONG&gt;. This elegant solution ensures that these two critical operations are treated as a single, atomic unit, which is vital for maintaining data integrity and building robust, event-driven architectures atop SAP's core business processes.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1568221607"&gt;The Logical Unit of Work&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The Logical Unit of Work (LUW) in ABAP represents a series of database operations that are treated as a single, indivisible transaction. All changes made within an LUW, whether updates, insertions, or deletions, must either be &lt;STRONG&gt;committed&lt;/STRONG&gt; to the database successfully &lt;STRONG&gt;or rolled back&lt;/STRONG&gt; &lt;STRONG&gt;entirely&lt;/STRONG&gt; if an error occurs, ensuring transactional consistency. This "all or nothing" principle is managed by the ABAP transaction service, typically involving database commits to finalize the changes. In standard ABAP programming, a database LUW ends when a program executes a COMMIT&amp;nbsp;WORK or ROLLBACK&amp;nbsp;WORK statement, or when a dialog transaction concludes. However, transactional consistency can only be ensured within the same database system. There are plenty of alternatives, when it comes to cloud-native architecture and micro service design. However, a well-established approach is to apply the paradigm of eventual consistency.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1371708102"&gt;Eventual Consistency&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;Eventual consistency is a &lt;STRONG&gt;relaxed consistency model&lt;/STRONG&gt; in distributed systems where updates are not instantly propagated, meaning different replicas might temporarily show conflicting data. However, given enough time and the assumption that no further updates occur, the system guarantees that all data will reach a consistent state (soon).&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1175194597"&gt;The Transactional Outbox Pattern&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The transactional outbox pattern directly supports eventual consistency by &lt;STRONG&gt;decoupling&lt;/STRONG&gt; the &lt;STRONG&gt;primary data write&lt;/STRONG&gt; from the &lt;STRONG&gt;external message emission&lt;/STRONG&gt;. It ensures the message has been reliably persisted within the same database transaction as the data change, guaranteeing that the required event will &lt;EM&gt;only&lt;/EM&gt; be sent and consumed by other services, if the main transaction succeeded. Due to the defer of the message emission the micro service is much more robust against spontaneous outages.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 1: Unstable microservice design. Depending on the execution sequence, the transactional data or the status reflected to the remote system might be inconsistent, if the microservice is affected by an outage in between." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339615i02D3C12A1120C068/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="bgpf-1.png" alt="Figure 1: Unstable microservice design. Depending on the execution sequence, the transactional data or the status reflected to the remote system might be inconsistent, if the microservice is affected by an outage in between." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 1: Unstable microservice design. Depending on the execution sequence, the transactional data or the status reflected to the remote system might be inconsistent, if the microservice is affected by an outage in between.&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 2: More robust microservice design. The message is only emitted, if the transactional data and the outbox, which acts as trigger for the publisher, was successfully committed." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339616i5B1DAB380CEDD86F/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="bgpf-2.png" alt="Figure 2: More robust microservice design. The message is only emitted, if the transactional data and the outbox, which acts as trigger for the publisher, was successfully committed." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 2: More robust microservice design. The message is only emitted, if the transactional data and the outbox, which acts as trigger for the publisher, was successfully committed.&lt;/span&gt;&lt;/span&gt;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-978681092"&gt;Implementing a Transactional Outbox in ABAP Cloud&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;In ABAP Cloud there is the &lt;STRONG&gt;background processing framework&lt;/STRONG&gt; (bgPF) available, which can seamlessly be integrated in the transactional processing of an ABAP application built with the RESTful Application Programming model (RAP).&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The clue: Instead of directly emitting outbound messages in the save sequence of your transaction, a handler can be registered, which is executed asynchronously in the background, once the RAP framework successfully complemented the database commit. This custom handler grants &lt;STRONG&gt;additional flexibility&lt;/STRONG&gt; on top of the transactional outbox pattern, allowing the ABAP application to control how a certain message should be handled (emitted to an external system, processed internally, etc.).&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 3: Implementation of the &amp;quot;Transactional Outbox Pattern&amp;quot; in ABAP Cloud." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339618iE4B4FAB6592C11DD/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="bgpf-3.png" alt="Figure 3: Implementation of the &amp;quot;Transactional Outbox Pattern&amp;quot; in ABAP Cloud." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 3: Implementation of the "Transactional Outbox Pattern" in ABAP Cloud.&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;This setup involves only two components, everything else is handled by the RAP runtime out-of-the-box:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The definition of a bgPF handler, which implements the actual message (e.g. external system call) emission. The handler needs to implement the interface IF_BGMC_OP_SINGLE.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;class zcl_rap_bgpf_request_shipping definition
  public
  final
  create private.
  public section.

    class-methods create_instance
      importing
        is_order           type zr_order000
      returning
        value(ro_instance) type ref to if_bgmc_op_single.

    interfaces if_bgmc_op_single.

  protected section.
  private section.

    methods constructor
      importing
        is_order type zr_order000.
    data ms_order type zr_order000.

endclass.
class zcl_rap_bgpf_request_shipping implementation.

  method if_bgmc_op_single~execute.
    "implement outbound call or system local processing
    modify entity zr_shippingrequest
      create
        set fields auto fill cid
          with value #(
            ( %data = value #(
              OrderReference = ms_order-uuid
              ShippingStatus = 'Ordered' )
            )
          )
   mapped data(mapped)
   failed data(failed)
   reported data(reported).
  endmethod.

  method create_instance.
    return new zcl_rap_bgpf_request_shipping( is_order ).
  endmethod.

  method constructor.
    ms_order = is_order.
  endmethod.

endclass.
​&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;The registration of the handler within the save sequence of the RAP business object.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;method save_modified.
  "...
  data(lo_factory) = cl_bgmc_process_factory=&amp;gt;get_default( ).
  data(lo_process) = lo_factory-&amp;gt;create( ).
  lo_process-&amp;gt;set_name( 'Request shipping' )-&amp;gt;set_operation(
    zcl_rap_bgpf_request_shipping=&amp;gt;create_instance(
      is_order = corresponding #( &amp;lt;ls_order&amp;gt; )
    )
  ).
  lo_process-&amp;gt;save_for_execution( ).
  "...
endmethod.
​&lt;/code&gt;&lt;/pre&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;By that, the RAP runtime ensures that the persisted order data is always in sync with the status reflected to the dependent application. If the main process is affected by an outage, the transactional data, as well as the registration for the message emission will be rolled-back. By that, the actual message will never be emitted.&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-782167587"&gt;Process Monitoring&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The background processing framework (bgPF) in ABAP Cloud is technically based on bgRFC processes, which can be monitored via the Fiori app “Monitor bgRFC Queues”. The app displays scheduled, running and aborted processes and provides manual restart capabilities. Important to know: bgPF is one of multiple inbound destinations for bgRFC queues. A queue consists again out of multiple processing units – one of those is our registered handler.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 4: Aborted bgPF process (simulated via assert violations) and its restart capabilities." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339620i41BA4763A96295F7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Monitor bgRFC Queues.png" alt="Figure 4: Aborted bgPF process (simulated via assert violations) and its restart capabilities." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 4: Aborted bgPF process (simulated via assert violations) and its restart capabilities.&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-585654082"&gt;Additional Information&lt;/H2&gt;&lt;P&gt;Check out some more details on the bgPF in general:&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/introducing-the-background-processing-framework/ba-p/13579056" target="_blank"&gt;https://community.sap.com/t5/technology-blog-posts-by-sap/introducing-the-background-processing-framework/ba-p/13579056&lt;/A&gt;&lt;/P&gt;&lt;P&gt;Official documentation:&lt;BR /&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-concepts/background-processing-framework" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/abap-cloud/abap-concepts/background-processing-framework&lt;/A&gt;&lt;/P&gt;&lt;P&gt;Complete example in GitHub:&lt;BR /&gt;&lt;A href="https://github.com/SAP-samples/abap-platform-rap-transactional-outbox-with-bgpf" target="_blank" rel="noopener nofollow noreferrer"&gt;https://github.com/SAP-samples/abap-platform-rap-transactional-outbox-with-bgpf&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;Stay tuned for further cloud native design patterns in ABAP Cloud!&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;Cheerio ABAP Folks!&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/cloud-native-with-abap-cloud-the-transactional-outbox-pattern/ba-p/14267118"/>
    <published>2025-11-12T16:48:29.446000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/rap-excel-upload-and-download-excel-using-rap-only/ba-p/14247979</id>
    <title>Rap: Excel Upload and Download Excel using Rap only</title>
    <updated>2025-11-13T05:19:33.199000+01:00</updated>
    <author>
      <name>Vivek_raj153</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1795253</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;In this blog, we’ll create a simple app to&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;upload and download Excel files&lt;/STRONG&gt;&lt;SPAN&gt;, manage their statuses, and update child entities automatically&amp;nbsp; all in one flow.&amp;nbsp;We’ll learn how to store, process, and manage Excel data seamlessly within SAP&amp;nbsp; using CDS views, behavior definitions, and XCO APIs.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;This blog documents the implementation of a RAP-based app that supports&amp;nbsp;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Excel file upload with validation and parsing&lt;/LI&gt;&lt;LI&gt;Template download for structured data entry&lt;/LI&gt;&lt;LI&gt;Dynamic status management and UI control&lt;/LI&gt;&lt;LI&gt;Association handling between parent and child entities&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;To enable file uploads in RAP, the following annotation is crucial:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; @Semantics.largeObject : {
      mimeType: 'Mimetype',
      fileName: 'Filename',
      acceptableMimeTypes: [ 'application/vnd.ms excel',
     'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],
      contentDispositionPreference: #ATTACHMENT
      }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Here's the link to code walkthrough&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;A title="Rap Excel download/Upload file" href="https://www.youtube.com/playlist?list=PLIw7p7i4ySlDBkBSr5abXOPVVmGAd3O8p" target="_blank" rel="noopener nofollow noreferrer"&gt;Rap Excel upload and download Excel &lt;/A&gt;&lt;/P&gt;&lt;P&gt;Lets Dive in the detailed steps :&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;1.&amp;nbsp; Create Database&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Parent Database table : ZT2123_USER&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;This table stores attachment file details&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'User Data'
@AbapCatalog.enhancement.category : #EXTENSIBLE_ANY
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #ALLOWED
define table zt2123_user {
  key client            : abap.clnt not null;
  key emp_id            : abap.numc(8) not null;
  key dev_id            : abap.char(30) not null;
  dev_description       : abap.char(100);
  attachment            : abap.rawstring(0);
  mimetype              : abap.char(128);
  filename              : abap.char(128);
  file_status           : abap.char(50);
  template_status       : abap.char(50);
  local_created_by      : abp_creation_user;
  local_created_at      : abp_creation_tstmpl;
  local_last_changed_by : abp_locinst_lastchange_user;
  local_last_changed_at : abp_locinst_lastchange_tstmpl;
  last_changed_at       : abp_lastchange_tstmpl;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Child Database table : ZT2123_USER_DEV&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'user development objects'
@AbapCatalog.enhancement.category : #EXTENSIBLE_ANY
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #ALLOWED
define table zt2123_user_dev {
  key client    : abap.clnt not null;
  key emp_id    : abap.numc(8) not null;
  key dev_id    : abap.char(30) not null;
  key serial_no : abap.int4 not null;
  object_type   : abap.char(50) not null;
  object_name   : abap.char(80);
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;FONT size="6"&gt;CDS objects&amp;nbsp;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;FONT size="5"&gt;2. Creating Interface View&amp;nbsp;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Parent Interface View&lt;/STRONG&gt; : ZI_2123_USER&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user details'
@Metadata.ignorePropagatedAnnotations: true
define root view entity zi_2123_user
  as select from zt2123_user
  composition [0..*] of ZI_2123_user_dev as _UserDev
{
  key emp_id                as EmpId,
  key dev_id                as DevId,
      dev_description       as DevDescription,
      attachment            as Attachment,
      mimetype              as Mimetype,
      filename              as Filename,
      file_status           as FileStatus,
      template_status       as TemplateStatus,
      // to give color coding to file status
      case file_status
      when 'File Selected' then 2
      when 'Excel Uploaded' then 3
      when 'File not Selected' then 1
      else 0
      end                   as Criticality,
      case template_status
      when 'Present' then 3
      when 'Absent'  then 1
      else 0
      end                   as TemplateCrticality,
      @Semantics.user.createdBy: true
      local_created_by      as LocalCreatedBy,
      @Semantics.systemDateTime.createdAt: true
      local_created_at      as LocalCreatedAt,
      @Semantics.user.lastChangedBy: true
      local_last_changed_by as LocalLastChangedBy,
      @Semantics.systemDateTime.localInstanceLastChangedAt: true
      local_last_changed_at as LocalLastChangedAt,
      @Semantics.systemDateTime.lastChangedAt: true
      last_changed_at       as LastChangedAt,
      _UserDev 
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Child Interface View&lt;/STRONG&gt; : ZI_2123_USER_DEV&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user devlopment details'
@Metadata.ignorePropagatedAnnotations: true
define view entity ZI_2123_user_dev
  as select from zt2123_user_dev
  association to parent zi_2123_user as _User on  $projection.EmpId = _User.EmpId
                                              and $projection.DevId = _User.DevId
{
  key emp_id      as EmpId,
  key dev_id      as DevId,
  key serial_no   as SerialNo,
      object_type as ObjectType,
      object_name as ObjectName,
      _User 
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;3. Consumption view / Projection View&lt;/STRONG&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Note&lt;/STRONG&gt;: &lt;FONT color="#FF0000"&gt;Don't forget to link the relation between parent and child view and enable metadata extension annotation&lt;/FONT&gt;.&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Parent View&lt;/STRONG&gt;&lt;/FONT&gt; : ZC_2123_USER&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user projection view'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity ZC_2123_USER
  as projection on zi_2123_user
{
  key EmpId,
  key DevId,
      DevDescription,
      @Semantics.largeObject : {
      mimeType: 'Mimetype',
      fileName: 'Filename',
      acceptableMimeTypes: [ 'application/vnd.ms-excel','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],
      contentDispositionPreference: #ATTACHMENT
      }
      Attachment,
      @Semantics.mimeType: true
      Mimetype,
      Filename,
      FileStatus,
      Criticality,
      TemplateStatus,
      TemplateCrticality,
      LocalCreatedBy,
      LocalCreatedAt,
      LocalLastChangedBy,
      LocalLastChangedAt,
      LastChangedAt,
      /* Associations */
      _UserDev : redirected to composition child ZC_2123_USER_DEV
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Child View&lt;/STRONG&gt; :&amp;nbsp; ZC_2123_USER_DEV&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user development details'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define view entity ZC_2123_USER_DEV
  as projection on ZI_2123_user_dev
{
  key EmpId,
  key DevId,
  key SerialNo,
      ObjectType,
      ObjectName,
      _User : redirected to parent ZC_2123_USER
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;4. Metadata Extensions on top of Consumption view&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&amp;nbsp;we will define metadata extension to change the look and feel of our app.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Parent View&lt;/STRONG&gt; : ZME_2123_USER&lt;/P&gt;&lt;P&gt;&lt;FONT color="#FF0000"&gt;&lt;STRONG&gt;Note: two action buttons have been defined here one for Upload and download Excel&amp;nbsp;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;identification: [{ type: #FOR_ACTION, label: 'Upload Data', dataAction: 'uploadExcelData' },
              { type: #FOR_ACTION, label: 'Download Excel', dataAction: 'DownloadExcel' },&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Complete Metadata extension&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
@UI.headerInfo:{
typeName: 'User',
typeNamePlural: 'Users',
title:{
   type: #STANDARD,
   value: 'EmpId' },
   description:{ value: 'DevId' }

    }
annotate entity ZC_2123_USER with
{
  .facet: [
  {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 10,
    targetQualifier: 'description'

  },
    {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 20,
    targetQualifier: 'fileStatus'

  },
     {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 25,
    targetQualifier: 'templateStatus'

  },
      {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 30,
    targetQualifier: 'fileChanged'

  },
  {
  // this is a collection facet
   purpose: #STANDARD,
   type: #COLLECTION ,
   label: 'General Info',
   position: 10,
   id : 'idBasic'
  },
  {
  purpose: #STANDARD,
  type: #IDENTIFICATION_REFERENCE ,
  label: 'User Info',
  position: 10,
  id : 'idUser',
  parentId: 'idBasic'
  },
  {
  purpose: #STANDARD,
  type: #FIELDGROUP_REFERENCE ,
  label: 'Log Details',
  position: 20,
  id : 'idlogs',
  parentId: 'idBasic',
  targetQualifier: 'logs'
  },
  {
  purpose: #STANDARD,
  type: #LINEITEM_REFERENCE ,
  label: 'Developed Objects',
  position: 20,
  id : 'idDevObj',
  targetElement: '_UserDev'
  }
  ]
  :{lineItem: [{position: 10,importance: #HIGH , label: 'User Id'} ],
                 identification: [{ type: #FOR_ACTION, label: 'Upload Data', dataAction: 'uploadExcelData' },
                               { type: #FOR_ACTION, label: 'Download Excel', dataAction: 'DownloadExcel' },
                { position: 10,  label: 'User Id' }],
                selectionField: [{ position: 10}]
    }
  @EndUserText.label: 'User Id'
  EmpId;
  :{lineItem: [{position: 20,importance: #HIGH , label: 'Development Id'} ],
   selectionField: [{ position: 20 }],
    identification: [{ position: 20 , label: 'Development Id'}]
  }
  @EndUserText.label: 'Development Id'
  DevId;
  :{lineItem: [{position: 30,importance: #HIGH , label: 'Development Description'} ],
        dataPoint :{ qualifier: 'description' , title: 'Development Description'},
       identification: [{ position: 30 , label: 'Development Description'}]
  }
  DevDescription;
  .identification: [{ position: 40 , label: 'Choose Excel File'}]
  Attachment;
  :{lineItem: [{position: 55,importance: #HIGH , label: 'Template Status', criticality: 'TemplateCrticality'} ] ,
  dataPoint :{ qualifier: 'templateStatus' , title: 'Template Status',criticality: 'TemplateCrticality'}}
  TemplateStatus;
  :{lineItem: [{position: 40,importance: #HIGH , label: 'Excel Filename'} ]}
  Filename;
  :{lineItem: [{position: 50,importance: #HIGH , label: 'File Status', criticality: 'Criticality'} ] ,
   dataPoint :{ qualifier: 'fileStatus' , title: 'File Status',criticality: 'Criticality'}}
  FileStatus;
  :{lineItem: [{position: 60,importance: #HIGH , label: 'Last Changed At'} ],
  fieldGroup: [{ qualifier: 'logs', label: 'Last Changed At' , position: 20 }],
  dataPoint :{ qualifier: 'fileChanged' , title: 'Last Changed At'} }
  LocalLastChangedAt;
  :{lineItem: [{position: 70,importance: #HIGH , label: 'Created By'} ],
  fieldGroup: [{ qualifier: 'logs', label: 'Created By' , position: 10 }] }
  LocalCreatedBy;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Child View&lt;/STRONG&gt; : ZME_2123_USER_DEV&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
@UI.headerInfo : {
 typeName: 'Developed Object',
 typeNamePlural: 'Developed Objects',
 title: {
        type: #STANDARD,
        label: 'Development Id',
        value: 'DevId' // this will display as Header title
    },
 description : { value: 'ObjectName' } //this will be dispalyed below header title
}
annotate view ZC_2123_USER_DEV with
{

  .facet: [
   {
   purpose: #STANDARD,
   type: #IDENTIFICATION_REFERENCE ,
   label: 'Developed Objects',
   position: 10
   }]

  .hidden: true
  :{
   identification: [{ position: 10 , label: 'Employee Id'}]
  }
  EmpId;
  :{lineItem: [{position: 10,importance: #HIGH , label: 'Development Id' } ],
  identification: [{ position: 20 , label: 'Development Id'}]
    }
  DevId;
  :{lineItem: [{position: 1,importance: #HIGH , label: 'Serial No'} ]}
  SerialNo;
  :{lineItem: [{position: 20,importance: #HIGH , label: 'Object Type'} ],
  identification: [{ position: 30 , label: 'Object Type'}]
    }
  ObjectType;
  :{lineItem: [{position: 30,importance: #HIGH , label: 'Object Name'} ],
  identification: [{ position: 40 , label: 'Object Name'}]
    }
  ObjectName;
  .hidden: true
  _User;


}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;5. Create Service binding and service definition .&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;Note : I have created OData V2 - UI&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 143439.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329592i8DB4DFF5E69F5AA1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 143439.png" alt="Screenshot 2025-10-19 143439.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Preview the application and&amp;nbsp; we can see our application .&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 143955.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329593i6D9126321E10C29B/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 143955.png" alt="Screenshot 2025-10-19 143955.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;since we don't have any records for now , so&lt;STRONG&gt; No data found&lt;/STRONG&gt; is being displayed here.&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;&amp;nbsp;6. Behavior definition on Parent Interface view.&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_i_2123_user unique;
strict ( 2 );
define behavior for zi_2123_user alias User
persistent table zt2123_user
lock master
authorization master ( instance )
etag master LocalLastChangedAt
{
  create ( authorization : global );
  update;
  delete;
  field ( readonly : update ) EmpId, DevId;
  field ( readonly ) LocalCreatedBy, LocalLastChangedAt;
  field ( mandatory : create ) EmpId, DevId, DevDescription;
  association _UserDev { create ( features : instance ); }
  // Logic to read excel data into associated entity ZI_2123_User_Dev
  action ( features : instance ) uploadExcelData result [1] $self;
   action ( features : instance ) DownloadExcel result [1] $self;
  // Change File Status During Creation of new record
  determination FillFileStatus on modify { field EmpId, DevId; }
  // Change File Status When file is selected
  determination FillSelectedStatus on modify { field Attachment; }
  // for reloading ui after data has been uploaded
  side effects
  {
    field Attachment affects field FileStatus  ;
    action uploadExcelData affects $self, field _UserDev.*;
  }

mapping for zt2123_user
    {
      EmpId              = emp_id;
      DevId              = dev_id;
      DevDescription     = dev_description;
      Filename           = filename;
      Attachment         = attachment;
      Mimetype           = mimetype;
      FileStatus         = file_status;
      TemplateStatus     = template_status;
      LocalCreatedBy     = local_created_by;
      LocalCreatedAt     = local_created_at;
      LastChangedAt      = last_changed_at;
      LocalLastChangedAt = local_last_changed_at;
      LocalLastChangedBy = local_last_changed_by;
    }
}

define behavior for ZI_2123_user_dev alias UserDev
persistent table zt2123_user_dev
lock dependent by _User
authorization dependent by _User
//etag master
{
  update;
  delete;
  field ( readonly ) EmpId, DevId, SerialNo;
//  field ( readonly : update ) ObjectType , ObjectName ;
//  field ( mandatory : create ) ObjectName, ObjectType;
  association _User;
  mapping for zt2123_user_dev
    {
      EmpId      = emp_id;
      DevId      = dev_id;
      SerialNo   = serial_no;
      ObjectType = object_type;
      ObjectName = object_name;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Lets Break down the behavior definition.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Action buttons defined for Upload and download&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="2"&gt;&lt;STRONG&gt;&lt;EM&gt;feature instances as we want the button to be displayed dynamically .&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; // Logic to read excel data into associated entity ZI_2123_User_Dev
  action ( features : instance ) uploadExcelData result [1] $self;
// To download excel 
  action ( features : instance ) DownloadExcel result [1] $self;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Determination to change file status, file selection status and template status&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;// Change File Status During Creation of new record
  determination FillFileStatus on modify { field EmpId, DevId; }
  // Change File Status When file is selected
  determination FillSelectedStatus on modify { field Attachment; }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Side effects to reflect uploaded data simultaneously when upload button is pressed.&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  // for reloading ui after data has been uploaded
  side effects
  {
    field Attachment affects field FileStatus  ;
    action uploadExcelData affects $self, field _UserDev.*;
  }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;7. Behavior definition on Parent Consumption View&amp;nbsp;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );
use side effects;
define behavior for ZC_2123_USER alias User
{
  use create;
  use update;
  use delete;
  use action uploadExcelData;
  //  use  action UploadExcel;
  use action DownloadExcel;
//  use action TemplateDownload;
  use association _UserDev { create; }
}

define behavior for ZC_2123_USER_DEV alias UserDev
{
  use update;
  use delete;

  use association _User;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;8. Implementation class&lt;/STRONG&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Global behavior class&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zbp_i_2123_user DEFINITION PUBLIC ABSTRACT FINAL FOR BEHAVIOR OF zi_2123_user.
  PUBLIC SECTION.
    TYPES: BEGIN OF gty_exl_file,
             emp_id    TYPE string,
             dev_id    TYPE string,
             dev_desc  TYPE string,
             obj_type  TYPE string,
             obj_name  TYPE string,
             serial_no TYPE string,
           END OF gty_exl_file.
ENDCLASS.

CLASS zbp_i_2123_user IMPLEMENTATION.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Local handler class&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_User DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.

    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR User RESULT result.

    METHODS get_global_authorizations FOR GLOBAL AUTHORIZATION
      IMPORTING REQUEST requested_authorizations FOR User RESULT result.
    METHODS uploadExcelData FOR MODIFY
      IMPORTING keys FOR ACTION User~uploadExcelData RESULT result.
    METHODS get_instance_features FOR INSTANCE FEATURES
      IMPORTING keys REQUEST requested_features FOR User RESULT result.
    METHODS fillselectedstatus FOR DETERMINE ON MODIFY
      IMPORTING keys FOR user~fillselectedstatus.
    METHODS fillfilestatus FOR DETERMINE ON MODIFY
      IMPORTING keys FOR user~fillfilestatus.
    METHODS downloadexcel FOR MODIFY
      IMPORTING keys FOR ACTION user~downloadexcel RESULT result.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;FONT size="5"&gt;Method Implementation&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Download Excel&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; METHOD DownloadExcel.
    DATA: lt_template        TYPE STANDARD TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file.

    DATA(lo_write_access) = xco_cp_xlsx=&amp;gt;document-&amp;gt;empty( )-&amp;gt;write_access( ).
    DATA(lo_worksheet) = lo_write_access-&amp;gt;get_workbook(
        )-&amp;gt;worksheet-&amp;gt;at_position( 1 ).

    DATA(lo_selection_pattern) = xco_cp_xlsx_selection=&amp;gt;pattern_builder-&amp;gt;simple_from_to(
                               )-&amp;gt;from_column( xco_cp_xlsx=&amp;gt;coordinate-&amp;gt;for_alphabetic_value( 'A' )
                               )-&amp;gt;to_column( xco_cp_xlsx=&amp;gt;coordinate-&amp;gt;for_alphabetic_value( 'M' )
                               )-&amp;gt;from_row( xco_cp_xlsx=&amp;gt;coordinate-&amp;gt;for_numeric_value( 1 )
                               )-&amp;gt;get_pattern( ).

    lt_template = VALUE #( (
    emp_id = 'User Id'
    dev_id = 'Development Id'
    dev_desc = 'Development Description'
    obj_type = 'Object Type'
    obj_name = 'Object Name'
    ) ).

    lo_worksheet-&amp;gt;select( lo_selection_pattern
        )-&amp;gt;row_stream(
        )-&amp;gt;operation-&amp;gt;write_from( REF #( lt_template )
        )-&amp;gt;execute( ).

    DATA(lv_file_content) = lo_write_access-&amp;gt;get_file_content( ).

*  "Modify Root Entity
    MODIFY ENTITIES OF zi_2123_user IN LOCAL MODE
    ENTITY User
    UPDATE FROM VALUE #( FOR ls_key IN keys
       (
       EmpId      = ls_key-EmpId
       DevId      = ls_key-DevId
       Attachment = lv_file_content
       Filename   = 'template.xlsx'
       Mimetype   = 'application/vnd.ms-excel'
       %control-Attachment  = if_abap_behv=&amp;gt;mk-on
       %control-Filename   = if_abap_behv=&amp;gt;mk-on
       %control-Mimetype  = if_abap_behv=&amp;gt;mk-on
       ) )
    MAPPED DATA(ls_mapped_update)
    REPORTED DATA(ls_reported_update)
    FAILED DATA(ls_failed_update).

*    "Read Updated Entry
    READ ENTITIES OF zi_2123_user IN LOCAL MODE
    ENTITY  User
    ALL FIELDS WITH
    CORRESPONDING #( Keys )
    RESULT DATA(lt_User).
*    "Update File Status
    LOOP AT lt_User INTO DATA(ls_user).
      MODIFY ENTITIES OF ZI_2123_user IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( FileStatus TemplateStatus )
      WITH VALUE #( (
          %tky                  = ls_user-%tky
          %data-FileStatus      = 'File not Selected'
          %data-TemplateStatus      = 'Present'
          %control-FileStatus   = if_abap_behv=&amp;gt;mk-on
          %control-TemplateStatus   = if_abap_behv=&amp;gt;mk-on
          ) )
          MAPPED DATA(ls_mapped_status)
    REPORTED DATA(ls_reported_status)
    FAILED DATA(ls_failed_status).
    ENDLOOP.


    "Send Status back to front end
    result = VALUE #( FOR ls_upd_user IN lt_User
                      ( %tky   = ls_upd_user-%tky
                        %param = ls_upd_user
                        ) ).

    IF ls_failed_update IS INITIAL.
   reported = VALUE #( BASE reported user = VALUE #( ( %tky = keys[ 1 ]-%tky
    %msg = new_message_with_text( severity =                                                   if_abap_behv_message=&amp;gt;severity-success
                     text = 'Template Available.' )

                                                                    ) )  ).
    ENDIF.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Upload Excel Data&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD uploadExcelData.
    DATA: lt_rows         TYPE STANDARD TABLE OF string,
          lv_content      TYPE string,
          lo_table_descr  TYPE REF TO cl_abap_tabledescr,
          lo_struct_descr TYPE REF TO cl_abap_structdescr,
          lt_excel        TYPE STANDARD TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file,
          lt_excel_temp   TYPE STANDARD TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file,
          lt_excel_filter TYPE SORTED TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file WITH UNIQUE KEY emp_id dev_id,
          lt_data         TYPE TABLE FOR CREATE zi_2123_user\_UserDev,
          lv_index        TYPE sy-index.


    FIELD-SYMBOLS: &amp;lt;lfs_col_header&amp;gt; TYPE string.

    DATA(lv_user) = cl_abap_context_info=&amp;gt;get_user_technical_name( ).

    READ ENTITIES OF zi_2123_user IN LOCAL MODE
    ENTITY User
    ALL FIELDS WITH CORRESPONDING #( keys )
    RESULT DATA(lt_file_entity).

    DATA(lv_attachment) = lt_file_entity[ 1 ]-attachment.
    CHECK lv_attachment IS NOT INITIAL.

    "Move Excel Data to Internal Table
    DATA(lo_xlsx)      = xco_cp_xlsx=&amp;gt;document-&amp;gt;for_file_content( iv_file_content = lv_attachment )-&amp;gt;read_access( ).
    DATA(lo_worksheet) = lo_xlsx-&amp;gt;get_workbook( )-&amp;gt;worksheet-&amp;gt;at_position( 1 ).
    DATA(lo_selection_pattern) = xco_cp_xlsx_selection=&amp;gt;pattern_builder-&amp;gt;simple_from_to( )-&amp;gt;get_pattern( ).
    DATA(lo_execute) = lo_worksheet-&amp;gt;select( lo_selection_pattern )-&amp;gt;row_stream( )-&amp;gt;operation-&amp;gt;write_to(
                                                                                   REF #( lt_excel_temp ) ).
    lo_execute-&amp;gt;set_value_transformation(
        xco_cp_xlsx_read_access=&amp;gt;value_transformation-&amp;gt;string_value )-&amp;gt;if_xco_xlsx_ra_operation~execute( ).

    " Get number of columns in upload file for validation
    TRY.
        lo_table_descr ?= cl_abap_tabledescr=&amp;gt;describe_by_data( p_data = lt_excel_temp ).
        lo_struct_descr ?= lo_table_descr-&amp;gt;get_table_line_type( ).
        DATA(lv_no_of_cols) = lines( lo_struct_descr-&amp;gt;components ).
      CATCH cx_sy_move_cast_error.
        "Implement error handling
    ENDTRY.

    "Validate Header record
    DATA(ls_excel) = VALUE #( lt_excel_temp[ 1 ] OPTIONAL ).
    IF ls_excel IS NOT INITIAL.
      DO lv_no_of_cols TIMES.
        lv_index = sy-index.
        ASSIGN COMPONENT lv_index OF STRUCTURE ls_excel TO &amp;lt;lfs_col_header&amp;gt;.
        CHECK &amp;lt;lfs_col_header&amp;gt; IS ASSIGNED.
        DATA(lv_value) =  to_upper(  &amp;lt;lfs_col_header&amp;gt; ) .
        DATA(lv_has_error) = abap_false.
        CASE lv_index.
          WHEN 1.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'USER ID' THEN abap_true ELSE lv_has_error ).
          WHEN 2.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'DEVELOPMENT ID' THEN abap_true ELSE lv_has_error ).
          WHEN 3.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'DEVELOPMENT DESCRIPTION' THEN abap_true ELSE lv_has_error ).
          WHEN 4.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'OBJECT TYPE' THEN abap_true ELSE lv_has_error ).
          WHEN 5.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'OBJECT NAME' THEN abap_true ELSE lv_has_error ).
          WHEN 9. "More than 7 columns (error)
            lv_has_error = abap_true.
        ENDCASE.
        IF lv_has_error = abap_true.
          APPEND VALUE #( %tky = lt_file_entity[ 1 ]-%tky ) TO failed-user.
          APPEND VALUE #(
            %tky = lt_file_entity[ 1 ]-%tky
            %msg = new_message_with_text(
                     severity = if_abap_behv_message=&amp;gt;severity-error
                     text     = 'One or more heading is incorrect !!' )
          ) TO reported-user.
          UNASSIGN &amp;lt;lfs_col_header&amp;gt;.
          EXIT.
        ENDIF.
        UNASSIGN &amp;lt;lfs_col_header&amp;gt;.
      ENDDO.
    ENDIF.
    CHECK lv_has_error = abap_false.

    DELETE lt_excel_temp INDEX 1.
    DELETE lt_excel_temp WHERE emp_id  IS INITIAL AND dev_id IS INITIAL.
    " Filter with current dev id details
    lt_excel_filter = VALUE #( ( emp_id = keys[ 1 ]-EmpId dev_id = keys[ 1 ]-DevId ) ).
    " excel data with  current dev id details
    lt_excel = FILTER #( lt_excel_temp IN lt_excel_filter WHERE emp_id = emp_id AND dev_id = dev_id ).
    IF lt_excel IS  INITIAL.

      reported = VALUE #( BASE reported user = VALUE #( ( %tky = keys[ 1 ]-%tky
                                                                        %msg = new_message_with_text( severity =
                                                                        if_abap_behv_message=&amp;gt;severity-error
                                                                        text = 'Trying to insert Invalid /Blank Values.' )
                                                                      ) )  ).
    ELSE.
      "Fill serial number
      LOOP AT lt_excel ASSIGNING FIELD-SYMBOL(&amp;lt;lfs_excel&amp;gt;).
        &amp;lt;lfs_excel&amp;gt;-serial_no = sy-tabix.
      ENDLOOP.

      "Prepare Data for  Child Entity (UserDev)
      lt_data = VALUE #(
          (   %cid_ref  = keys[ 1 ]-%cid_ref
              EmpId   = keys[ 1 ]-EmpId
              DevId    = keys[ 1 ]-DevId
              %target   = VALUE #(
                               FOR lwa_excel IN lt_excel (
                                    %cid         = keys[ 1 ]-%cid_ref
                                    %data = VALUE #(
                                                     EmpId = keys[ 1 ]-EmpId
                                                     DevId = keys[ 1 ]-DevId
                                                     SerialNo = lwa_excel-serial_no
                                                     ObjectType = lwa_excel-obj_type
                                                     ObjectName = lwa_excel-obj_name
                                                  )
                                     %control = VALUE #(
                                                     EmpId = if_abap_behv=&amp;gt;mk-on
                                                     DevId = if_abap_behv=&amp;gt;mk-on
                                                     SerialNo = if_abap_behv=&amp;gt;mk-on
                                                     ObjectType = if_abap_behv=&amp;gt;mk-on
                                                     ObjectName = if_abap_behv=&amp;gt;mk-on

                                        )
                      ) ) ) ).

      "Delete Existing entry for user if any
      READ ENTITIES OF zi_2123_user IN LOCAL MODE
      ENTITY User BY \_UserDev
      ALL FIELDS WITH CORRESPONDING #( keys )
      RESULT DATA(lt_existing_UserDev).

      IF lt_existing_UserDev IS NOT INITIAL.
        MODIFY ENTITIES OF zi_2123_user IN LOCAL MODE
        ENTITY UserDev DELETE FROM VALUE #(
          FOR lwa_data IN lt_existing_UserDev (
            %key        = lwa_data-%key
          )
        )
        MAPPED DATA(lt_del_mapped)
        REPORTED DATA(lt_del_reported)
        FAILED DATA(lt_del_failed).
      ENDIF.

      "Add New Entry for XLData (association)
      MODIFY ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User CREATE BY \_UserDev
      AUTO FILL CID WITH lt_data.

*    "Modify Status
      MODIFY ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User
      UPDATE FROM VALUE #(  (
          %tky        = lt_file_entity[ 1 ]-%tky "keys[ 1 ]-%tky
          FileStatus  = 'Excel Uploaded'
          %control-FileStatus = if_abap_behv=&amp;gt;mk-on ) )
      MAPPED DATA(lt_upd_mapped)
      FAILED DATA(lt_upd_failed)
      REPORTED DATA(lt_upd_reported).

      "Read Updated Entry
      READ ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User ALL FIELDS WITH CORRESPONDING #( Keys )
      RESULT DATA(lt_updated_User).

      "Send Status back to front end
      result = VALUE #(
        FOR lwa_upd_head IN lt_updated_User (
          %tky    = lwa_upd_head-%tky
          %param  = lwa_upd_head
        )
      ).
      IF lt_upd_failed IS INITIAL.
   reported = VALUE #( BASE reported user = VALUE #( ( %tky = keys[ 1 ]-%tky
 %msg = new_message_with_text( severity =                                                                 if_abap_behv_message=&amp;gt;severity-success
                       text = 'Excel Uploaded Successfully.' )
  ) )  ).
      ENDIF.
    ENDIF.
  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;File status&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD FillFileStatus.
    "Read the data to be modified
    READ ENTITIES OF ZI_2123_User IN LOCAL MODE
    ENTITY User FIELDS ( EmpId DevId FileStatus )
    WITH CORRESPONDING #( keys )
    RESULT DATA(lt_user).

    "Update File Status
    LOOP AT lt_user INTO DATA(ls_user).
      MODIFY ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( FileStatus TemplateStatus )
      WITH VALUE #( (
          %tky                  = ls_user-%tky
          %data-FileStatus      = 'File not Selected'
          %data-TemplateStatus      = 'Absent'
          %control-FileStatus   = if_abap_behv=&amp;gt;mk-on
           %control-TemplateStatus   = if_abap_behv=&amp;gt;mk-on
          ) ).
    ENDLOOP.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;File selection status&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD FillSelectedStatus.
    "Read XL_Head Entities and change file status
    READ ENTITIES OF ZI_2123_user IN LOCAL MODE
    ENTITY User ALL FIELDS WITH CORRESPONDING #( keys )
    RESULT DATA(lt_User).

    "Update File Status
    LOOP AT lt_User INTO DATA(ls_user).
      MODIFY ENTITIES OF ZI_2123_user IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( FileStatus TemplateStatus  )
      WITH VALUE #( (
          %tky                  = ls_user-%tky
          %data-FileStatus      = COND #(
                                    WHEN ls_user-Attachment IS INITIAL
                                    THEN 'File not Selected'
                                    ELSE 'File Selected' )
          %control-FileStatus   = if_abap_behv=&amp;gt;mk-on
          ) ).
    ENDLOOP.

    READ ENTITIES OF ZI_2123_user IN LOCAL MODE
  ENTITY User ALL FIELDS WITH CORRESPONDING #( keys )
  RESULT DATA(lt_User_updated).
    "Update template Status
    LOOP AT lt_User_updated INTO DATA(ls_user_updated).
      MODIFY ENTITIES OF ZI_2123_user IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( TemplateStatus  )
      WITH VALUE #( (
                    %tky                = ls_user-%tky
                    %data-TemplateStatus = COND #(
                                    WHEN ls_user-Attachment IS NOT INITIAL
                                    THEN COND #( WHEN ls_user-FileStatus = 'File Selected' THEN ' ' )
                                    ELSE 'Absent'

                                     )
          %control-TemplateStatus   = if_abap_behv=&amp;gt;mk-on

          ) ).
    ENDLOOP.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Global Feature Instance&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;to enable upload / download and create buttons dynamically&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; METHOD get_instance_features.
    READ ENTITIES OF zi_2123_user IN LOCAL MODE ENTITY User
    FIELDS ( EmpId DevId FileStatus TemplateStatus ) WITH CORRESPONDING #( keys )
    RESULT DATA(lt_users) FAILED failed.


    result = VALUE #( FOR user IN lt_users
                      LET uploadBtn = COND #( WHEN user-FileStatus = 'File Selected'
                                             THEN if_abap_behv=&amp;gt;fc-o-enabled
                                             ELSE if_abap_behv=&amp;gt;fc-o-disabled )
                         DownloadTemplate = COND #( WHEN user-TemplateStatus = 'Absent'
                                             THEN if_abap_behv=&amp;gt;fc-o-enabled
                                             ELSE if_abap_behv=&amp;gt;fc-o-disabled )
                      IN
                                            ( %tky = user-%tky
                                             %assoc-_UserDev = if_abap_behv=&amp;gt;fc-o-disabled
                                             %action-uploadExcelData = uploadBtn
                                             %action-DownloadExcel = DownloadTemplate
                                            ) ).

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;now our app is ready . Lets create one record and see&lt;/P&gt;&lt;P&gt;we can see initially that Template is absent&amp;nbsp; &amp;nbsp;and no file is selected.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 144043.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329595iE407722AC288D1A6/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 144043.png" alt="Screenshot 2025-10-19 144043.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Lets Download Template . We can see &lt;EM&gt;&lt;STRONG&gt;template.xlsx&lt;/STRONG&gt;&lt;/EM&gt;&amp;nbsp; now exists in attachment and template status changes to &lt;STRONG&gt;Present&lt;/STRONG&gt; and &lt;STRONG&gt;download excel&lt;/STRONG&gt; button disappears as template exist .&amp;nbsp; Remove the the template and you can see &lt;STRONG&gt;download button&lt;/STRONG&gt; again .&lt;BR /&gt;Also &lt;STRONG&gt;file not selected&lt;/STRONG&gt; as this is empty file . If you remove and upload it again , status will change to &lt;STRONG&gt;File selected.&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 151444.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329604i304DAEB536CB8C73/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 151444.png" alt="Screenshot 2025-10-19 151444.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Download Template with predefined header&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 151519.png" style="width: 898px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329597iAE0485F25F14E0F2/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 151519.png" alt="Screenshot 2025-10-19 151519.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;Fill the excel . Make sure&lt;STRONG&gt; user id&lt;/STRONG&gt; and &lt;STRONG&gt;development id&lt;/STRONG&gt;&amp;nbsp;should match with the record where you will upload data. Other wise it will throw error.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 151659.png" style="width: 892px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329598iAEE3C1D8888BD294/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 151659.png" alt="Screenshot 2025-10-19 151659.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Choose the filled&amp;nbsp; file and you can see &lt;STRONG&gt;upload excel&lt;/STRONG&gt; button appears.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-10-19 152348.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329601iFB309DD519F9D33A/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 152348.png" alt="Screenshot 2025-10-19 152348.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Press upload and data will be reflected.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 152502.jpg" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329603i5A2933FF9512FD61/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 152502.jpg" alt="Screenshot 2025-10-19 152502.jpg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Hope this will be helpful.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/rap-excel-upload-and-download-excel-using-rap-only/ba-p/14247979"/>
    <published>2025-11-13T05:19:33.199000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/creating-custom-scalar-functions-in-abap-cds/ba-p/14263349</id>
    <title>Creating custom Scalar functions in ABAP CDS</title>
    <updated>2025-11-13T06:19:30.582000+01:00</updated>
    <author>
      <name>sanjay22</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1535416</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;A CDS Scalar function &lt;/SPAN&gt;&lt;SPAN class=""&gt;( This&lt;/SPAN&gt;&lt;SPAN class=""&gt; feature is supported as of SAP S/4HANA 2023 FPS &lt;/SPAN&gt;&lt;SPAN class=""&gt;00 )&lt;/SPAN&gt;&lt;SPAN class=""&gt; allows us to define a custom function directly on SAP HANA database using SQLSCRIPT and then reuse it in CDS view entities.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;There are 3 parts in CDS scalar function -&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;A CDS scalar function definition — this defines the Definition of Scalar function i.e, in and out parameters.&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp; &amp;nbsp;&lt;/SPAN&gt;There will be one or many input parameters and exactly one output parameter.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_0-1762586702308.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337448iB9A97E1C37CEA0F2/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_0-1762586702308.png" alt="sanjay22_0-1762586702308.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_1-1762586730253.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337449i061B6EB8E6B8F0F7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_1-1762586730253.png" alt="sanjay22_1-1762586730253.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_2-1762586746025.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337450i008B4102C9E0D3CF/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_2-1762586746025.png" alt="sanjay22_2-1762586746025.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Let's&lt;/SPAN&gt;&lt;SPAN class=""&gt; make this a &lt;/SPAN&gt;&lt;SPAN class=""&gt;CDS&lt;/SPAN&gt;&lt;SPAN class=""&gt; scalar function which will accept a date and returns respective weekday value( Mon, Tue, Wed, Thu, Fri, Sat ).&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_3-1762586767578.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337451i03AB4B8609C7EEB7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_3-1762586767578.png" alt="sanjay22_3-1762586767578.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;2.&amp;nbsp;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define the CDS scalar function implementation reference. &lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;This refer to an AMDP class and method having the logic. This part &lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;won’t&lt;/SPAN&gt;&lt;SPAN class=""&gt; have actual implementation.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;It follows the scalar function name followed by _SQL&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_4-1762586821706.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337452iEB5071D3E90AA03C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_4-1762586821706.png" alt="sanjay22_4-1762586821706.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_5-1762586853274.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337453i2070C133A1BB7391/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_5-1762586853274.png" alt="sanjay22_5-1762586853274.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Click on next and provide an AMDP class and its method which will hold the implementation logic.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_6-1762586876531.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337454i5F14FBEC0B12D29D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_6-1762586876531.png" alt="sanjay22_6-1762586876531.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;3) Next,&lt;/SPAN&gt; &lt;SPAN class=""&gt;lets&lt;/SPAN&gt; &lt;SPAN class=""&gt;create our AMDP class (ZCL_AMDP_SF) and a static method (&lt;/SPAN&gt;&lt;SPAN class=""&gt;get_weekday&lt;/SPAN&gt;&lt;SPAN class=""&gt;).&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_7-1762586902712.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337455i386F37ACEE4523FF/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_7-1762586902712.png" alt="sanjay22_7-1762586902712.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Here below is the code for AMDP class and method.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_amdp_sf DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    INTERFACES if_amdp_marker_hdb.
    CLASS-METHODS get_weekday FOR SCALAR FUNCTION zcds_scalar_func.

  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.



CLASS zcl_amdp_sf IMPLEMENTATION.
  METHOD get_weekday BY DATABASE FUNCTION FOR HDB LANGUAGE SQLSCRIPT OPTIONS READ-ONLY.

    declare weekday_num int;
    weekday_num := weekday( input_Date );
    IF :weekday_num = 0 THEN result = 'MON'; END if;
    IF :weekday_num = 1 THEN result = 'TUE'; END if;
    IF :weekday_num = 2 THEN result = 'WED'; END if;
    IF :weekday_num = 3 THEN result = 'THU'; END if;
    IF :weekday_num = 4 THEN result = 'FRI'; END if;
    IF :weekday_num = 5 THEN result = 'SAT'; END if;
    IF :weekday_num = 6 THEN result = 'SUN'; END if;
  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;In the &lt;/SPAN&gt;&lt;SPAN class=""&gt;implementation ,&lt;/SPAN&gt;&lt;SPAN class=""&gt; we have added logic to find the number as per input date and using if else &lt;/SPAN&gt;&lt;SPAN class=""&gt;logic ,&lt;/SPAN&gt;&lt;SPAN class=""&gt; we are providing 3 char weekday &lt;/SPAN&gt;&lt;SPAN class=""&gt;name&lt;/SPAN&gt;&lt;SPAN class=""&gt; for same.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;To test this, we &lt;/SPAN&gt;&lt;SPAN class=""&gt;have to&lt;/SPAN&gt;&lt;SPAN class=""&gt; create another CDS view which will call this CDS scalar function.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_0-1762754576253.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337709iC3A67657FD3255A1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_0-1762754576253.png" alt="sanjay22_0-1762754576253.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Let’s&lt;/SPAN&gt;&lt;SPAN class=""&gt; execute the CDS view to get output of Scalar function.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_9-1762587008893.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337457iE9C022146B005E9F/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_9-1762587008893.png" alt="sanjay22_9-1762587008893.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/creating-custom-scalar-functions-in-abap-cds/ba-p/14263349"/>
    <published>2025-11-13T06:19:30.582000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/creating-sales-orders-in-s-4hana-using-rap-bo-amp-eml-step-by-step-guide/ba-p/14267675</id>
    <title>Creating Sales Orders in S/4HANA Using RAP BO &amp; EML – Step-by-Step Guide</title>
    <updated>2025-11-18T06:33:37.546000+01:00</updated>
    <author>
      <name>Sudhanshu07</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1675459</uri>
    </author>
    <content>&lt;P&gt;In modern SAP landscapes, integration plays a key role. Businesses often need to create &lt;STRONG&gt;Sales Orders&lt;/STRONG&gt; automatically from external systems like &lt;STRONG&gt;e-commerce platforms, mobile apps, or middleware (CPI/PO)&lt;/STRONG&gt; — without manual effort in transactions like &lt;STRONG&gt;VA01&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Traditionally, developers used &lt;STRONG&gt;BAPIs (e.g., BAPI_SALESORDER_CREATEFROMDAT2)&lt;/STRONG&gt; or custom RFCs to achieve this. While functional, these approaches are &lt;STRONG&gt;not clean-core compliant&lt;/STRONG&gt;, hard to maintain, and don’t align with &lt;STRONG&gt;SAP’s future-ready development model&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;In this blog, we’ll see how to achieve the same goal — &lt;STRONG&gt;create Sales Orders programmatically&lt;/STRONG&gt; — but in a &lt;STRONG&gt;modern and upgrade-safe way&lt;/STRONG&gt; using:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;RAP BO (Business Object)&lt;/STRONG&gt; for clean-core, model-driven design&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;EML (Entity Manipulation Language)&lt;/STRONG&gt; for easy create/update operations&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;REST Framework&lt;/STRONG&gt; to expose our logic as a lightweight, consumable API&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Why we are doing this:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;To allow &lt;STRONG&gt;external systems&lt;/STRONG&gt; to create Sales Orders directly in SAP via an API&lt;/LI&gt;&lt;LI&gt;To follow &lt;STRONG&gt;SAP Clean Core&lt;/STRONG&gt; principles — no direct DB or BAPI calls&lt;/LI&gt;&lt;LI&gt;To enable &lt;STRONG&gt;reusable, testable, and upgrade-safe&lt;/STRONG&gt; backend logic&lt;/LI&gt;&lt;LI&gt;To demonstrate how &lt;STRONG&gt;RAP and EML&lt;/STRONG&gt; can replace traditional coding patterns&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Benefits:&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&amp;nbsp;Fully &lt;STRONG&gt;OData/REST compliant&lt;/STRONG&gt; and can be consumed by any system&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&lt;STRONG&gt;Clean-core compatible&lt;/STRONG&gt; – future-proof against upgrades&lt;BR /&gt;&amp;nbsp;Uses &lt;STRONG&gt;standard RAP BO (I_SalesOrderTP)&lt;/STRONG&gt; – minimal custom logic&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&lt;STRONG&gt;Lightweight &amp;amp; fast&lt;/STRONG&gt; – no heavy RFC/BAPI dependency&lt;BR /&gt;&amp;nbsp;Easy to extend – can include partners, pricing, schedule lines later&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&amp;nbsp;&lt;STRONG&gt;Note:&lt;/STRONG&gt;&lt;BR /&gt;SAP provides standard Sales Order APIs in the &lt;STRONG&gt;SAP Business Accelerator Hub&lt;/STRONG&gt;, but here we’ll focus on &lt;STRONG&gt;building our own&lt;/STRONG&gt; lightweight API using &lt;STRONG&gt;RAP BO and EML&lt;/STRONG&gt;, purely for learning and flexibility.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Prerequisites&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Before you begin, ensure:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;You have access to an &lt;STRONG&gt;S/4HANA system&lt;/STRONG&gt; (2020+ recommended)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;RAP model&lt;/STRONG&gt; and &lt;STRONG&gt;Service Binding&lt;/STRONG&gt; are configured&lt;/LI&gt;&lt;LI&gt;The service endpoint is &lt;STRONG&gt;active and reachable&lt;/STRONG&gt; in /IWFND/MAINT_SERVICE&lt;/LI&gt;&lt;LI&gt;You understand basic &lt;STRONG&gt;ABAP classes and interfaces&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;What We’ll Build&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We’ll create:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;A &lt;STRONG&gt;REST API&lt;/STRONG&gt; to trigger Sales Order creation&lt;/LI&gt;&lt;LI&gt;Backend logic that uses &lt;STRONG&gt;RAP BO&lt;/STRONG&gt; and &lt;STRONG&gt;EML&lt;/STRONG&gt; to insert data&lt;/LI&gt;&lt;LI&gt;A &lt;STRONG&gt;JSON payload/response&lt;/STRONG&gt; for easy integration with other systems&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;RAP BO Used&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;I_SalesOrderTP&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Object Directory Entries Created&lt;/STRONG&gt;&lt;/P&gt;&lt;TABLE&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;&lt;STRONG&gt;Object Name&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;&lt;STRONG&gt;Type&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;&lt;STRONG&gt;Description&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;ZS4CL_DEMO_SO_HANDLE&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Class&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;HTTP Handler (API entry point)&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;ZS4CL_DEMO_SO_RESOURCE&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Class&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Resource class containing business logic&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;REST API&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Service&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Endpoint exposed for external consumption&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Step 1 – Create HTTP Handler Class: ZS4CL_DEMO_SO_HANDLE&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This class will handle all incoming API requests and route them to our main business logic class.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Implementation&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zs4cl_demo_so_handle DEFINITION PUBLIC INHERITING FROM cl_rest_http_handler.

  PUBLIC SECTION.

    METHODS if_rest_http_handler~get_root_handler REDEFINITION.

ENDCLASS.



CLASS zs4cl_demo_so_handle IMPLEMENTATION.

  METHOD if_rest_http_handler~get_root_handler.

    DATA(lo_router) = NEW cl_rest_router( ).

    lo_router-&amp;gt;attach(

      iv_template = space

      iv_handler_class = 'ZS4CL_DEMO_SO_RESOURCE'

    ).

    ro_root_handler = lo_router.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;What this does:&lt;/STRONG&gt;&lt;BR /&gt;This class doesn’t perform any business logic itself — it simply routes incoming API calls to the &lt;STRONG&gt;resource class&lt;/STRONG&gt;, where we’ll handle them.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Step 2 – Create Resource Class: ZS4CL_DEMO_SO_RESOURCE&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This is where all the fun happens!&lt;BR /&gt;We’ll redefine two methods:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;IF_REST_RESOURCE~GET → Get call for CSRF token ( no code required )&lt;/LI&gt;&lt;LI&gt;IF_REST_RESOURCE~POST → Our main logic for creating the Sales Order&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Define the Data Structures&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We’ll define a local structure to hold the JSON request data:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TYPES: BEGIN OF ty_so_create_rap_bo,

         SalesOrderHeader             TYPE I_SalesOrderTP,

         SalesOrderItem               TYPE I_SalesOrderItemTP,

       END OF ty_so_create_rap_bo.



DATA: BEGIN OF ls_response,

        status     TYPE string,

        salesOrder TYPE I_SalesOrderTP-salesorder,

        message    TYPE string,

      END OF ls_response.

 Deserialize Incoming JSON Request

When the API is called, it will send data in JSON format.
We’ll read and convert that JSON into an ABAP structure:

DATA(lv_request_serialize) = mo_request-&amp;gt;get_entity( )-&amp;gt;get_string_data( ).



/ui2/cl_json=&amp;gt;deserialize(

  EXPORTING json = lv_request_serialize

  CHANGING  data = ls_sales_order_payload_rap_bo

).&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Create Sales Order Using EML&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Here we use &lt;STRONG&gt;EML (Entity Manipulation Language)&lt;/STRONG&gt; to insert a Sales Order and its item in one go.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;MODIFY ENTITIES OF i_salesordertp

  ENTITY salesorder

  CREATE FIELDS ( salesordertype salesorganization distributionchannel organizationdivision soldtoparty )

  WITH VALUE #( ( %cid = 'H001'

                  %data = VALUE #(

                    salesordertype        = ls_so_header-salesordertype

                    salesorganization     = ls_so_header-salesorganization

                    distributionchannel   = ls_so_header-distributionchannel

                    organizationdivision  = ls_so_header-organizationdivision

                    soldtoparty           = ls_so_header-soldtoparty

                  ) ) )



  CREATE BY item

  FIELDS ( product requestedquantity )

  WITH VALUE #( ( %cid_ref = 'H001'

                  %target = VALUE #( ( %cid = 'I001'

                                       product = ls_so_item-product

                                       requestedquantity = ls_so_item-requestedquantity ) ) ) )



  MAPPED DATA(ls_mapped)

  FAILED DATA(ls_failed)

  REPORTED DATA(ls_reported_modify).

 Commit and Return Response

Once the Sales Order is created successfully, we commit the entities and send a response back to the API caller.

COMMIT ENTITIES BEGIN

  RESPONSE OF i_salesordertp

  FAILED DATA(ls_save_failed)

  REPORTED DATA(ls_save_reported).



IF ls_save_failed-salesorder IS INITIAL.

  ls_response-message = 'Order Created'.

  ls_response-salesorder = ls_mapped-salesorderitem[ 1 ]-salesorder.

  io_entity-&amp;gt;set_header_field( iv_name = 'status' iv_value = '200' ).

ELSE.

  ls_response-message = 'Failed due to data issue'.

  io_entity-&amp;gt;set_header_field( iv_name = 'status' iv_value = '400' ).

ENDIF.



COMMIT ENTITIES END.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Finally, send a JSON response:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;DATA(json_response) = /ui2/cl_json=&amp;gt;serialize( data = ls_response ).

mo_response-&amp;gt;create_entity( )-&amp;gt;set_string_data( json_response ).

mo_response-&amp;gt;set_header_field(

  iv_name  = 'Content-Type',

  iv_value = 'application/json'

).&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Sample JSON Payload&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Here’s what your external system (like Postman or CPI) will send:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;{

  "SalesOrderHeader": {

    "SalesOrderType": "ZBV1",

    "SalesOrganization": "0700",

    "DistributionChannel": "B1",

    "OrganizationDivision": "00",

    "SoldToParty": "0004100648",

    "RequestedDeliveryDate": "20250923"

  },

  "SalesOrderItem": {

    "Product": "000000000000040078",

    "RequestedQuantity": "1"

  }

}

Sample Response

Success:

{

  "status": "200",

  "salesOrder": "0000123456",

  "message": "Order Created"

}

Failure:

{

  "status": "400",

  "message": "Failed due to data issue"

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":direct_hit:"&gt;🎯&lt;/span&gt;Summary&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In this blog, we learned how to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Create a &lt;STRONG&gt;custom REST API&lt;/STRONG&gt; for Sales Order creation&lt;/LI&gt;&lt;LI&gt;Use &lt;STRONG&gt;RAP BO (I_SalesOrderTP)&lt;/STRONG&gt; and &lt;STRONG&gt;EML&lt;/STRONG&gt; for clean-core logic&lt;/LI&gt;&lt;LI&gt;Handle &lt;STRONG&gt;JSON serialization/deserialization&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Return structured &lt;STRONG&gt;HTTP responses&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This approach is &lt;STRONG&gt;clean-core compliant&lt;/STRONG&gt;, &lt;STRONG&gt;future-proof&lt;/STRONG&gt;, and easily &lt;STRONG&gt;extendable&lt;/STRONG&gt; for real-world business needs.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":wrench:"&gt;🔧&lt;/span&gt;Next Steps&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;If you want to take this further:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Add authentication (e.g., OAuth 2.0 or Basic Auth)&lt;/LI&gt;&lt;LI&gt;Extend your RAP BO to include &lt;STRONG&gt;partners, pricing, schedule lines&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Add &lt;STRONG&gt;error handling&lt;/STRONG&gt; and detailed &lt;STRONG&gt;logging&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Expose this API securely to &lt;STRONG&gt;SAP BTP&lt;/STRONG&gt; or &lt;STRONG&gt;external systems&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Using RAP and EML, we can build lightweight, modern, and scalable APIs directly in S/4HANA — without breaking the clean-core principle.&lt;BR /&gt;This approach bridges traditional ABAP development with modern REST API design, giving us flexibility and control.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/creating-sales-orders-in-s-4hana-using-rap-bo-amp-eml-step-by-step-guide/ba-p/14267675"/>
    <published>2025-11-18T06:33:37.546000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-1/ba-p/14271885</id>
    <title>Collective Value Helps in RAP: V2 and V4 Implementation Guide - Part 1</title>
    <updated>2025-11-18T15:16:20.147000+01:00</updated>
    <author>
      <name>Abhinav_Roy</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1109</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Collective Search Helps&lt;/STRONG&gt; in RAP have gained attention in recent community discussions. This comprehensive &lt;STRONG&gt;two-part series&lt;/STRONG&gt; explores collective search helps across both V2 and V4 service expositions, highlighting critical implementation differences and architectural considerations. &lt;STRONG&gt;Part 2&lt;/STRONG&gt; introduces an advanced hierarchical collective search help pattern for complex business scenarios—a solution not adequately documented yet in the SAP ecosystem.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Watch the demonstration video below to see collective search helps in action&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; - including template switching, multi-criteria search, and nested value help scenarios. The video showcases how users can seamlessly switch between different search templates (Technical Object Data, Maintenance Data, Asset Data, Address Data) and demonstrates the nested collective value help pattern where one value help (Equipment) utilizes another (Functional Location) within its selection fields.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;A &lt;STRONG&gt;Collective Value Help&lt;/STRONG&gt; is a reusable model that groups&amp;nbsp;multiple&amp;nbsp;elementary value helps. If assigned as a value help provider, it allows the end user to search for values for a particular field in an application, across different search templates and select one or multiple values in the process. This pattern is particularly powerful for complex business objects requiring multi-criteria search capabilities. These are the RAP equivalent of traditional collective search helps in the SAPGUI world.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This article uses master data artifacts from Asset Management area—specifically Technical Objects, which comprise Equipment and Functional Locations. This scenario is ideal for collective search helps because users often need to search technical objects using different criteria: by object attributes, maintenance data, asset classification, or address information.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Below are the screenshots demonstrating the Collective Value Help UI from a simple working application that we’ll build in this article:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Technical Object search with multiple search template options" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342301iE18100A70E009319/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1763468984182.png" alt="Technical Object search with multiple search template options" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Technical Object search with multiple search template options&lt;/span&gt;&lt;/span&gt;&amp;nbsp; &amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Technical Object Data template" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342300i852CFC4493993F42/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1763468984194.png" alt="Search by Technical Object Data template" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Technical Object Data template&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Functional Location template" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342302i6BB3914B67BB4385/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1763468984206.png" alt="Search by Functional Location template" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Functional Location template&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Equipment template" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342303i2185DE933E96EBFE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_3-1763468984217.png" alt="Search by Equipment template" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Equipment template&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Notice how users can switch between different search templates (Technical Object Data, Maintenance Data, Asset Data, Address Data) to find the right technical object using various criteria. This multi-dimensional search capability is the core value proposition of collective search helps.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Collective Value Help within a Collective Value Help (watch out later in the blog)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342305i92FD53F40DF44D03/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_4-1763468984239.png" alt="Collective Value Help within a Collective Value Help (watch out later in the blog)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Collective Value Help within a Collective Value Help (watch out later in the blog)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Watch how collective search helps work across business objects, including nested value help scenarios:&lt;BR /&gt;&lt;BR /&gt;&lt;div class="video-embed-center video-embed"&gt;&lt;iframe class="embedly-embed" src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FjT6KRMYH4eI%3Ffeature%3Doembed&amp;amp;display_name=YouTube&amp;amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DjT6KRMYH4eI&amp;amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FjT6KRMYH4eI%2Fhqdefault.jpg&amp;amp;type=text%2Fhtml&amp;amp;schema=youtube" width="400" height="225" scrolling="no" title="CDS based Collective Value Helps in SAP ABAP" frameborder="0" allow="autoplay; fullscreen; encrypted-media; picture-in-picture;" allowfullscreen="true"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;U&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Implementation&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;Since, CDS View &lt;STRONG&gt;I_TechnicalObject&lt;/STRONG&gt; consists of both Equipment and Functional Locations in the system, we’ll utilise the same to create a small application to showcase the usage of Collective Value Help.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;Start with the I-View:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="I-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342304i3F79F074EA7267E3/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_5-1763468984248.png" alt="I-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;I-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;This is to be utilised in a C-View for SADL layer exposure:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View" style="width: 684px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342307i8416A468CC34DB8B/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_6-1763468984253.png" alt="C-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Observe the Metadata Extension of the Consumption View and the usage of the Collective Value Helps;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Metadata Extension of C-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342308i7F48548D9E2180D4/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_7-1763468984265.png" alt="Metadata Extension of C-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Metadata Extension of C-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;Let’s have a detailed look at the Collective Value Helps' definition and content.&lt;/P&gt;&lt;P&gt;&lt;U&gt;Technical Objects:&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_8-1763468984268.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342306i79C7FA91BCDA9A0C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_8-1763468984268.png" alt="Abhinav_Roy_8-1763468984268.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_9-1763468984273.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342310i83A2153FB58B7B25/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_9-1763468984273.png" alt="Abhinav_Roy_9-1763468984273.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;U&gt;Equipment&lt;/U&gt;:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_10-1763468984275.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342309i44EAB8AA312EA5AE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_10-1763468984275.png" alt="Abhinav_Roy_10-1763468984275.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_11-1763468984282.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342311i6D77E6CB69906D55/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_11-1763468984282.png" alt="Abhinav_Roy_11-1763468984282.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;U&gt;Functional Location:&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_12-1763468984285.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342312iAFD584D17B3D000C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_12-1763468984285.png" alt="Abhinav_Roy_12-1763468984285.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_13-1763468984290.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342314iCBA987F26E4478E4/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_13-1763468984290.png" alt="Abhinav_Roy_13-1763468984290.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Now, have a look at the above screenshots carefully. All the Collective Value Helps are essentially abstract entities, which consist of a bunch of Elementary Value Helps, each assigned a distinct qualifier. However, each of these CVHs has one template (elementary value help) which has no qualifier and becomes the default search template and thus, the provider of Fuzzy search capabilities, if provisioned in that CDS.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Metadata Extension of an elementary value help used in the demo" style="width: 688px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342313i460B66D29690DB0C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_14-1763468984298.png" alt="Metadata Extension of an elementary value help used in the demo" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Metadata Extension of an elementary value help used in the demo&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="The data definition of the elementary value help" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342316iF29FFED1EA65F999/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_15-1763468984313.png" alt="The data definition of the elementary value help" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;The data definition of the elementary value help&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Now, this is purely a read only application which doesn’t require any business logic and thus is not created as a ROOT entity. We’ll simply create a Service Definition and Service Binding on top of the consumption View to enable projection at the SADL layer.:&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Definition" style="width: 670px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342315i8CBB3223C06ED2E8/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_16-1763468984315.png" alt="Service Definition" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Definition&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;U&gt;&lt;STRONG&gt;Critical Difference: V2 vs V4 Service Binding&lt;/STRONG&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;The Service Definition can now be used to create both an OData V2 and an OData V4 Service binding. But there’s a crucial difference w.r.t. the entity sets and associations exposed in the bindings:&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding (OData V4)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342317i4C69CF42409032A1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_17-1763468984322.png" alt="Service Binding (OData V4)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding (OData V4)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding (OData V2)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342320i8DB925CDD89010C3/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_18-1763468984332.png" alt="Service Binding (OData V2)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding (OData V2)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding (OData V2)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342318iE8BE4C8657573D1E/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_19-1763468984341.png" alt="Service Binding (OData V2)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding (OData V2)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;From the screenshots, it’s quite clear that for OData V2 - UI, all the internal Value Helps, including the collective Value helps are projected as end points along with the main entity ZAR_C_TechnicalObject. Whereas, in Odata V4 – UI, only the leading entity is projected. This is important for design considerations.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;FONT size="5"&gt;&lt;U&gt;Key Concepts &amp;amp; Considerations&lt;/U&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;SPAN&gt;:&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-disc"&gt;&lt;LI&gt;The collective value help can only define the included elementary value helps and the necessary field name bindings. Thus, only the following annotations can be leveraged:&lt;BR /&gt;&lt;BR /&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.entity.name&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.entity.element&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.additionalBinding.localElement&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.additionalBinding.element&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.qualifier&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.label&lt;/EM&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;If a collective value help is assigned to the field as value help provider&amp;nbsp;@Consumption.valueHelpDefinition... no further value helps should be assigned to this field. i.e., all required elementary value helps must be included in the collective value help.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;The collective value help must be annotated with @ObjectModel.collectiveValueHelp.for.element pointing to the field, for which the collective value help is defined.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;The field referenced by @ObjectModel.collectiveValueHelp.for.element must be assigned at least a single elementary value help by its annotation @Consumption.valueHelpDefinition.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;The consumer view of the collective value help must define the same fields, that are used in the collective value help definition&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Collective value helps can only be used in SADL based ODATA services, both V2 and V4&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;A CDS abstract entity is to be used as a representative for the collective value help carrying the grouping information and&amp;nbsp;enable its assignment like an elementary value help&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;U&gt;&lt;STRONG&gt;Constraints&lt;/STRONG&gt;&lt;/U&gt;&lt;/FONT&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Collective value helps should not define parameters.&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Collective value helps should not be used as "elementary value helps" of other collective value helps (i.e. the collective value helps may not be nested, more on this below)&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1692417"&gt;@search&lt;/a&gt;..., i.e. search capabilities are not defined by the collective value&amp;nbsp;help, but by its referenced elementary value helps only (the default value help template takes precedence)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;&lt;FONT size="5"&gt;Workaround for Nested Collective Value Helps&lt;/FONT&gt;&lt;/U&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;As per the restrictions outlined above, &lt;STRONG&gt;Collective Value Helps cannot be nested&lt;/STRONG&gt;, i.e., a collective value help cannot utilise another CVH as an elementary Value Help. Having said that, each elementary value help in a CVH can have its own selection fields, where one might feel the need to incorporate multiple search templates, such as the case below:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Functional Location template in Equipment CVH" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342319iD1111169AAA5126D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_20-1763468984348.png" alt="Search by Functional Location template in Equipment CVH" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Functional Location template in Equipment CVH&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Here, an Equipment CVH has a search template &lt;STRONG&gt;&lt;EM&gt;Search by Functional Location&lt;/EM&gt;&lt;/STRONG&gt;, which again has a selection field for Functional Location field, where in a user can feel the need to plug in multiple search templates. However, they may not be able to use the Functional Location CVH directly as direct nesting is not allowed. In that case, one can still create a collective value help, but without utilising an abstract entity:&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" style="width: 805px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342321iB111DBF0F4D253BE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_21-1763468984354.png" alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" style="width: 840px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342322iDA575A8B3AB35BBD/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_22-1763468984362.png" alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Collective search helps in RAP provide a powerful, user-centric approach to value help management by enabling multi-dimensional search capabilities through a single, reusable model. This article has demonstrated how to implement collective search helps across both OData V2 and V4 service expositions, highlighting the critical architectural differences between these versions.&lt;/P&gt;&lt;P&gt;Key takeaways from this implementation guide:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Service Binding Differences Matter:&lt;/STRONG&gt; V2 exposes all value help entities as separate endpoints, while V4 embeds them within the main entity—an important consideration for service design and integration scenarios.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Abstract Entities as CVH Carriers:&lt;/STRONG&gt; CDS abstract entities serve as the structural foundation for grouping elementary value helps, enabling clean separation of concerns and reusability.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Nested Workarounds:&lt;/STRONG&gt; While direct nesting of collective value helps is restricted, inline value help definitions provide a practical alternative for complex scenarios.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;SADL Layer Compatibility:&lt;/STRONG&gt; Collective search helps work seamlessly across both V2 and V4 SADL-based OData services, making them a versatile pattern for modern RAP applications.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;U&gt;&lt;STRONG&gt;Coming in Part 2: Hierarchical Collective Search Helps&lt;/STRONG&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Part 2&lt;/STRONG&gt; will introduce &lt;STRONG&gt;hierarchical collective search helps&lt;/STRONG&gt;—an advanced pattern enabling parent-child relationship visualization within value help dialogs. This advanced implementation addresses complex business scenarios requiring hierarchical data navigation, showcasing the full potential of RAP's value help framework.&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;div class="lia-spoiler-container"&gt;&lt;a class="lia-spoiler-link" href="#" rel="nofollow noopener noreferrer"&gt;Spoiler&lt;/a&gt;&lt;noscript&gt; (Highlight to read)&lt;/noscript&gt;&lt;div class="lia-spoiler-border"&gt;&lt;div class="lia-spoiler-content"&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;Sneak peek....&lt;/EM&gt;&lt;/FONT&gt;&lt;/div&gt;&lt;noscript&gt;&lt;div class="lia-spoiler-noscript-container"&gt;&lt;div class="lia-spoiler-noscript-content"&gt;Sneak peek....&lt;/div&gt;&lt;/div&gt;&lt;/noscript&gt;&lt;/div&gt;&lt;/div&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchical value help" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342323iD3008580179648A1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_23-1763468984373.png" alt="Hierarchical value help" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchical value help&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-1/ba-p/14271885"/>
    <published>2025-11-18T15:16:20.147000+01:00</published>
  </entry>
</feed>
