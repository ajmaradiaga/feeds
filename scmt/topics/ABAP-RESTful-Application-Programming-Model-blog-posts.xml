<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>https://raw.githubusercontent.com/ajmaradiaga/feeds/main/scmt/topics/ABAP-RESTful-Application-Programming-Model-blog-posts.xml</id>
  <title>SAP Community - ABAP RESTful Application Programming Model</title>
  <updated>2025-12-09T15:00:06.076747+00:00</updated>
  <link href="https://community.sap.com/t5/c-khhcw49343/ABAP RESTful Application Programming Model/pd-p/7e44126e-7b27-471d-a379-df205a12b1ff" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator>
  <subtitle>ABAP RESTful Application Programming Model blog posts in SAP Community</subtitle>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/download-smart-form-as-pdf-using-rap-action-in-on-premises/ba-p/14244826</id>
    <title>Download Smart form as PDF using RAP action in On-premises</title>
    <updated>2025-10-22T07:43:37.130000+02:00</updated>
    <author>
      <name>chandana9269</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1470141</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In this blog I need to demonstrate the process of enabling a smart form PDF download within a RAP application using a custom action button in an on-premises setup.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;This is a common requirement for generating and downloading documents like invoices, Purchase orders etc., from a Fiori elements app.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;In classic ABAP, generating and downloading files was often done using methods like GUI_DOWNLOAD, but this approach is not compatible with RAP.&amp;nbsp;&lt;BR /&gt;In RAP, the recommended way to implement download functionality is by using streams, combined with additional logic to handle the pdf generation and delivery to the front-end.&lt;STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&amp;nbsp;Step 1 :&amp;nbsp; Create Database Tables &amp;nbsp;&lt;BR /&gt;&lt;/STRONG&gt;First we will be creating a database table to store the sales header(ZCH_DT_SALES_HED) and sales item (ZCH_DT_SALES_IT)data.&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'sales header table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zch_dt_sales_hed 
{
  key sid         : abap.char(10) not null;
  created_on      : abap.dats;
  document_type   : abap.char(4);
  customer        : abap.char(10);
  attachment      : abap.rawstring(0);
  mimetype        : abap.char(128);
  filename        : abap.char(128);
  last_changed_at : abp_lastchange_tstmpl;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Item table&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'sales item table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zch_dt_sales_it 
{
  key sid       : abap.char(10) not null;
  key sdoc_item : abap.numc(6) not null;
  material_no   : abap.char(40);
  @Semantics.quantity.unitOfMeasure : 'zch_dt_sales_it.unit'
  quantity      : abap.quan(15,3);
  unit          : abap.unit(3);
  @Semantics.amount.currencyCode : 'zch_dt_sales_it.currency'
  net_value     : abap.curr(15,2);
  currency      : abap.cuky;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step &lt;/SPAN&gt;&lt;SPAN class=""&gt;2 :&lt;/SPAN&gt;&lt;SPAN class=""&gt; Define Interface view on top of Sales Header and item tables&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'base view for sales header'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define root view entity zch_i_saleshed
  as select from zch_dt_sales_hed
  composition [0..*] of zch_i_salesit as _sitem
{
  key sid             as Sid,
      created_on      as CreatedOn,
      document_type   as DocumentType,
      customer        as Customer,
      @Semantics.largeObject : { fileName: 'filename' , mimeType: 'Mimetype' , 
      contentDispositionPreference: #ATTACHMENT}
      attachment      as Attachment,
      @Semantics.mimeType: true
      mimetype        as Mimetype,
      filename        as Filename,
      last_changed_at as LastChangedAt,
      _sitem
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'base view for sales item'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define view entity zch_i_salesit as select from zch_dt_sales_it
association to parent zch_i_saleshed as _sheader on $projection.Sid = _sheader.Sid
{
    key sid as Sid,
    key sdoc_item as SdocItem,
    material_no as MaterialNo,
    @Semantics.quantity.unitOfMeasure : 'Unit'
    quantity as Quantity,
    unit as Unit,
    @Semantics.amount.currencyCode : 'Currency'
    net_value as NetValue,
    currency as Currency,
    _sheader
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step &lt;/SPAN&gt;&lt;SPAN class=""&gt;3 :&lt;/SPAN&gt;&lt;SPAN class=""&gt; Define Consumption view on top of &lt;/SPAN&gt;&lt;SPAN class=""&gt;header and item &lt;/SPAN&gt;&lt;SPAN class=""&gt;interface views&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'projection view for sales header'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity zch_c_saleshed
  provider contract transactional_query
  as projection on zch_i_saleshed
{
  key Sid,
      CreatedOn,
      DocumentType,
      Customer,
      @Semantics.largeObject : { fileName: 'filename' , mimeType: 'Mimetype' , 
      contentDispositionPreference: #ATTACHMENT}
      Attachment,
      @Semantics.mimeType: true
      Mimetype,
      Filename,
      LastChangedAt,
      /* Associations */
      _sitem : redirected to composition child zch_c_salesit
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'projection view for sales item'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define view entity zch_c_salesit 
as  projection on  zch_i_salesit
{
    key Sid,
    key SdocItem,
    MaterialNo,
    @Semantics.quantity.unitOfMeasure : 'unit'
    Quantity,
    Unit,
    @Semantics.amount.currencyCode: 'Currency'
    NetValue,
    Currency,
    /* Associations */
    _sheader : redirected to parent zch_c_saleshed
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step &lt;/SPAN&gt;&lt;SPAN class=""&gt;4 :&lt;/SPAN&gt;&lt;SPAN class=""&gt; Define &lt;/SPAN&gt;&lt;SPAN class=""&gt;Metadata Extension for Header and item data&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer:#CORE
annotate entity zch_c_saleshed
    with 
{
     .facet: [
    {
      id:       'SalesDocHeader',
      purpose:  #STANDARD,
      position: 10,
      label:    'Header',
      type:     #IDENTIFICATION_REFERENCE
    },
    {
      id:            'SalesDocItem',
      purpose:       #STANDARD,
      type:          #LINEITEM_REFERENCE,
      label:         'Items',
      position:      20,
      targetElement: '_sitem'
    }
  ]
     : { lineItem: [{position: 10 , label: 'Salesorder Id' }],
    identification: [{ position: 10 ,label :'Salesorder Id' },
    { type: #FOR_ACTION, position:10 ,dataAction: 'download', label: 'Download Invoice' }] } 
    Sid;
     : { lineItem: [{position: 20 , label: 'Created on' }], 
    identification: [{ position: 20 ,label :'Created on' }] } 
    CreatedOn;
     : { lineItem: [{position: 30 , label: 'Document type' }], 
    identification: [{ position: 30 ,label :'Document type' }] } 
    DocumentType;
     : { lineItem: [{position: 40 , label: 'Customer id' }], 
    identification: [{ position: 40 ,label :'Customer id' }] } 
    Customer;
    .identification: [
    { position: 60, label: 'Attachment'   }
    ]
    Attachment;
}&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
annotate entity zch_c_salesit
    with 
{
    .facet: [
    {
      id:       'SalesDocItem',
      purpose:  #STANDARD,
      position: 10,
      label:    'Header',
      type:     #IDENTIFICATION_REFERENCE
    }]
@UI : { lineItem: [{position: 10 , label: 'Salesorder Id' }], 
     identification: [{ position: 10 , label :'Salesorder Id' }] } 
    Sid;
     : { lineItem: [{position: 20 , label: 'Sales Document Item' }], 
identification: [{ position: 20 ,label :'Sales Document Item' }] } 
    SdocItem;
     : { lineItem: [{position: 30 , label: 'Material no' }], 
identification: [{ position: 30 ,label :'Material no' }] } 
    MaterialNo;
     : { lineItem: [{position: 40 , label: 'Quantity' }], 
identification: [{ position: 40 ,label :'Quantity' }] } 
    Quantity;
     : { lineItem: [{position: 50 , label: 'Unit' }], 
identification: [{ position: 50 ,label :'Unit' }] } 
    Unit;
     : { lineItem: [{position: 60 , label: 'Net value' }], 
identification: [{ position: 60 ,label :'Net value' }] } 
    NetValue;
     : { lineItem: [{position: 70 , label: 'Currency' }], 
identification: [{ position: 70 ,label :'Currency' }] } 
    Currency;    
    
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step 5: Define &lt;/SPAN&gt;&lt;SPAN class=""&gt;Behavior Definitions&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;W&lt;/SPAN&gt;&lt;SPAN class=""&gt;e&lt;/SPAN&gt;&lt;SPAN class=""&gt; nee&lt;/SPAN&gt;&lt;SPAN class=""&gt;d to define the behavior &lt;/SPAN&gt;&lt;SPAN class=""&gt;definition &lt;/SPAN&gt;&lt;SPAN class=""&gt;for &lt;/SPAN&gt;&lt;SPAN class=""&gt;sales order &lt;/SPAN&gt;&lt;SPAN class=""&gt;header&lt;/SPAN&gt;&lt;SPAN class=""&gt; and &lt;/SPAN&gt;&lt;SPAN class=""&gt;item&lt;/SPAN&gt;&lt;SPAN class=""&gt;. &lt;/SPAN&gt;&lt;SPAN class=""&gt;This includes setting up &lt;/SPAN&gt;&lt;SPAN class=""&gt;the managed implementation, defining standard CRUD &lt;/SPAN&gt;&lt;SPAN class=""&gt;operations, defining early numbering for header and item&lt;/SPAN&gt; &lt;SPAN class=""&gt;key&lt;/SPAN&gt;&lt;SPAN class=""&gt;s&lt;/SPAN&gt; &lt;SPAN class=""&gt;and defining the Download action&lt;/SPAN&gt;&lt;SPAN class=""&gt;.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;*Here Download action button returns the abstract entity instead of sales order &lt;/SPAN&gt;&lt;SPAN class=""&gt;itself. This&lt;/SPAN&gt;&lt;SPAN class=""&gt; abstract entity is used only &lt;/SPAN&gt;&lt;SPAN class=""&gt;for transferring the file back to the UI.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_ch_i_saleshed unique;
strict ( 2 );

define behavior for zch_i_saleshed //alias salesheader
persistent table zch_dt_sales_hed
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
early numbering
{
  create;
  update;
  delete;
  action download result [1]  zch_download_file;
  side effects { action download affects $self ;}
  association _sitem { create; }
  field ( readonly ) Sid,Attachment, Mimetype, Filename;

  mapping for zch_dt_sales_hed
  {
    Sid = sid;
    CreatedOn = created_on;
    DocumentType = document_type;
    Customer = customer;
    Filename = filename;
    Mimetype = mimetype;
    Attachment = attachment;
    LastChangedAt = last_changed_at;
  }
}

define behavior for zch_i_salesit //alias salesitem
persistent table zch_dt_sales_it
lock dependent by _sheader
authorization dependent by _sheader
//etag master &amp;lt;field_name&amp;gt;
early numbering
{
  update;
  delete;
  field ( readonly ) sid,SdocItem ;
  association _sheader;

  mapping for zch_dt_sales_it
  {
    Sid = sid;
    SdocItem = sdoc_item;
    MaterialNo = material_no;
    Quantity = quantity;
    Unit = unit;
    NetValue = net_value;
    Currency = currency;
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Abstract Entity :&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'abstract entity for file download'
define root abstract entity Zch_Download_File
{
  @Semantics.largeObject : { fileName: 'filename' , mimeType: 'Mimetype' , 
  contentDispositionPreference: #ATTACHMENT }
  attachment      : abap.rawstring(0);
  @Semantics.mimeType: true
  mimetype        : abap.char(128);
  filename        : abap.char(128);
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define behavior definition on top of projection view&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );

define behavior for zch_c_saleshed //alias &amp;lt;alias_name&amp;gt;
{
  use create;
  use update;
  use delete;

  use action download ;
  use association _sitem { create; }
}

define behavior for zch_c_salesit //alias &amp;lt;alias_name&amp;gt;
{
  use update;
  use delete;

  use association _sheader;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Step 6: &lt;/SPAN&gt;&lt;SPAN class=""&gt;I&lt;/SPAN&gt;&lt;SPAN class=""&gt;mplement the &lt;/SPAN&gt;&lt;SPAN class=""&gt;Be&lt;/SPAN&gt;&lt;SPAN class=""&gt;havior handler class &lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;In this step we will be implementing the behavior handler for our sales order &lt;/SPAN&gt;&lt;SPAN class=""&gt;RAP BO.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;This class takes care of early numbering as well as the download action which generates and s&lt;/SPAN&gt;&lt;SPAN class=""&gt;treams the invoice pdf back to UI.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_zch_i_saleshed DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.

    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR zch_i_saleshed RESULT result.
    METHODS download FOR MODIFY
      IMPORTING keys FOR ACTION zch_i_saleshed~download RESULT result.
    METHODS earlynumbering_cba_sitem FOR NUMBERING
      IMPORTING entities FOR CREATE zch_i_saleshed\_sitem.
    METHODS earlynumbering_create FOR NUMBERING
      IMPORTING entities FOR CREATE zch_i_saleshed.

ENDCLASS.

CLASS lhc_zch_i_saleshed IMPLEMENTATION.

  METHOD get_instance_authorizations.
  ENDMETHOD.

  METHOD earlynumbering_create.
    select max( sid ) from zch_dt_sales_hed
    into (lv_max_id).
    data(lv_num) = CONV numc08( lv_max_id ).
    if lv_num is initial.
        lv_max_id = 'SO00000001'.
    else.
        lv_num += 1.
        lv_max_id = |SO{ lv_num }|.
    ENDIF.

data(ls_entity) = entities[ 1 ].
APPEND VALUE #( %cid = ls_entity-%cid
                sid = lv_max_id ) to mapped-zch_i_saleshed.
  ENDMETHOD.

  METHOD earlynumbering_cba_Sitem.
              data lv_number(6) type n.

  select max( sdoc_item ) from zch_dt_sales_it
  into (lv_max_id).
  if sy-subrc = 0.
    lv_number = lv_max_id + 1.
  else.
    lv_number = 1.
  ENDIF.
  loop at entities into data(ls_entities).
    loop at ls_entities-%target ASSIGNING FIELD-SYMBOL(&amp;lt;fs_target&amp;gt;).
   APPEND CORRESPONDING #( &amp;lt;fS_target&amp;gt; ) to mapped-zch_i_salesit ASSIGNING FIELD-SYMBOL(&amp;lt;ls_item&amp;gt;).
   &amp;lt;ls_item&amp;gt;-SdocItem = lv_number.
   ENDLOOP.
  ENDLOOP.
  ENDMETHOD.

  METHOD download.
   data: lt_salesi type ZCH_T_SALESI.

  loop at keys into data(ls_keys).
   READ ENTITIES OF zch_i_saleshed IN LOCAL MODE
      ENTITY zch_i_saleshed
        ALL FIELDS WITH CORRESPONDING #( keys )
      RESULT DATA(lt_sales_header).

   data(ls_salesh) = CORRESPONDING zch_i_saleshed( lt_sales_header[ 1 ] ).

   READ ENTITIES OF zch_i_saleshed IN LOCAL MODE
      ENTITY zch_i_saleshed by \_sitem
       ALL FIELDS WITH CORRESPONDING #( keys )
      RESULT DATA(lt_sales_item).

   LOOP AT lt_sales_item INTO DATA(ls_item).
      APPEND CORRESPONDING zch_i_salesit( ls_item ) TO lt_salesi.
    ENDLOOP.

   DATA(lv_pdf_xstring) = NEW ZCL_CH_HELPER_CLS( )-&amp;gt;generate_form(
                                                   is_sales_header = ls_salesh
                                                   it_sales_items  = lt_salesi ).

APPEND VALUE #(
      %tky              = ls_keys-%tky
      %param-attachment = lv_pdf_xstring
      %param-mimetype   = 'application/pdf'
      %param-filename   = |Invoice_{ ls_salesh-sid }.pdf|
    ) TO result.

  ENDLOOP.
  
  MODIFY ENTITY IN LOCAL MODE zch_i_saleshed
   UPDATE FIELDS  (  Attachment Mimetype Filename )
   WITH value #( (  %key = ls_keys-%key
                    Attachment = lv_pdf_xstring
                    Filename = |Invoice_{ ls_salesh-sid }.pdf|
                    Mimetype = 'application/pdf' ) )
                    REPORTED reported
                    FAILED failed.
 ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;The following helper&lt;/SPAN&gt; &lt;SPAN class=""&gt;class&lt;/SPAN&gt; &lt;SPAN class=""&gt;generates the&lt;/SPAN&gt; &lt;SPAN class=""&gt;Smart form &lt;/SPAN&gt;&lt;SPAN class=""&gt;output &lt;/SPAN&gt;&lt;SPAN class=""&gt;as&lt;/SPAN&gt;&lt;SPAN class=""&gt; an&lt;/SPAN&gt; &lt;SPAN class=""&gt;X&lt;/SPAN&gt;&lt;SPAN class=""&gt;STRING .&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_ch_helper_cls DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    TYPES: ty_sales_items_tt TYPE STANDARD TABLE OF zch_i_salesit.

    METHODS generate_form
      IMPORTING
        is_sales_header TYPE zch_i_saleshed
        it_sales_items  TYPE ty_sales_items_tt
      RETURNING
        VALUE(rv_pdf)   TYPE xstring.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.


CLASS zcl_ch_helper_cls IMPLEMENTATION.
  METHOD generate_form.

    data : lv_fm_name type RS38L_FNAM,
       lv_ctr_par type ssfctrlop,
       lv_output_options type SSFCOMPOP,
       lv_job_output type SSFCRESCL,
       Gt_pdf_lines type table of tline,
       lv_size type i,
       lv_pdf_xstring type xstring.


CALL FUNCTION 'SSF_FUNCTION_MODULE_NAME'
  EXPORTING
    formname                 = 'ZCH_INVOICE'
*   VARIANT                  = ' '
*   DIRECT_CALL              = ' '
 IMPORTING
   FM_NAME                  =  lv_fm_name
 EXCEPTIONS
   NO_FORM                  = 1
   NO_FUNCTION_MODULE       = 2
   OTHERS                   = 3
          .

lv_ctr_par-no_dialog = 'X'.
lv_ctr_par-preview = 'X'.
lv_ctr_par-getotf = 'X'.
lv_output_options-TDDEST = 'LP01'.

CALL FUNCTION lv_fm_name
  EXPORTING
   CONTROL_PARAMETERS         = lv_ctr_par
   OUTPUT_OPTIONS             = lv_output_options
   USER_SETTINGS              = ''
    im_sales                   = is_sales_header-Sid
 IMPORTING
   JOB_OUTPUT_INFO            = lv_job_output
 EXCEPTIONS
   FORMATTING_ERROR           = 1
   INTERNAL_ERROR             = 2
   SEND_ERROR                 = 3
   USER_CANCELED              = 4
   OTHERS                     = 5
          .

CALL FUNCTION 'CONVERT_OTF'
 EXPORTING
   FORMAT                      = 'PDF'
 IMPORTING
    bin_filesize          = lv_size
    bin_file              = lv_pdf_xstring
  TABLES
    otf                         = lv_job_output-otfdata
    lines                       = Gt_pdf_lines
 EXCEPTIONS
   ERR_MAX_LINEWIDTH           = 1
   ERR_FORMAT                  = 2

   ERR_CONV_NOT_POSSIBLE       = 3
   ERR_BAD_OTF                 = 4
   OTHERS                      = 5.
          
 rv_pdf = lv_pdf_xstring.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define Service definition&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service definition for sales header' 

define service Zch_srv_saleshed { 

expose zch_c_saleshed; 

expose zch_c_salesit; 

} &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define Service &lt;/SPAN&gt;&lt;SPAN class=""&gt;binding&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN class=""&gt; and&lt;/SPAN&gt;&lt;SPAN class=""&gt; preview the application&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_0-1760687945765.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328880i6F009A4D9C91932C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_0-1760687945765.png" alt="chandana9269_0-1760687945765.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Create Sales Header data&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_1-1760688020461.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328881i46F0EDB66AD5B776/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_1-1760688020461.png" alt="chandana9269_1-1760688020461.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Cr&lt;/SPAN&gt;&lt;SPAN class=""&gt;e&lt;/SPAN&gt;&lt;SPAN class=""&gt;ate item data&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_2-1760688059366.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328883i3F157670405C85CD/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_2-1760688059366.png" alt="chandana9269_2-1760688059366.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Click on the Download invoice button and refresh&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_3-1760688089159.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328884i930843A5CF426181/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_3-1760688089159.png" alt="chandana9269_3-1760688089159.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Now Click on Open &lt;/SPAN&gt;&lt;SPAN class=""&gt;file ,the&lt;/SPAN&gt;&lt;SPAN class=""&gt; form will be downloaded&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_4-1760688126961.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328885iF31635F0E2B884F4/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_4-1760688126961.png" alt="chandana9269_4-1760688126961.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="chandana9269_5-1760688144980.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/328886iED3E9E4EA4389C97/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="chandana9269_5-1760688144980.png" alt="chandana9269_5-1760688144980.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion :&amp;nbsp;&lt;BR /&gt;&lt;/STRONG&gt;This approach enables seamless Smart Form PDF generation and download within RAP, combining classic ABAP capabilities with modern Fiori user experience in an on-premise setup.&lt;STRONG&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/download-smart-form-as-pdf-using-rap-action-in-on-premises/ba-p/14244826"/>
    <published>2025-10-22T07:43:37.130000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/writable-entity-in-cds/ba-p/14249189</id>
    <title>Writable Entity in CDS</title>
    <updated>2025-10-22T07:56:59.929000+02:00</updated>
    <author>
      <name>kalmesh</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1490139</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction to writable CDS Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;CDS provides a powerful way to define and consume data models.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Traditionally, CDS views were read-only, used primarily for data retrieval.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;However, with the evolution of SAP's ABAP platform, Writable CDS Entities were introduced to enable direct data manipulation (Update, modify).&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Types of Writable CDS Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp; &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;1.Writable CDS View Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; - Wrap DDIC tables for direct writing access.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp; 2.Writable External Entities &lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;- Enable write access to eternal database.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In this blog, we are going to focus on CDS Writable Entities. I will walk you through the concept step-by-step, using a practical example to demonstrate how it works and what operations‚Äîsuch as&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt; INSERT&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; and &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;UPDATE&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;‚Äîwe can perform using a writable entity. Let's dive into the example.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Create a Table&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_0-1761035674723.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330139i0E91AC394DB0288C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_0-1761035674723.png" alt="kalmesh_0-1761035674723.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Next, we will create a writable CDS entity on top of the database table &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;ZTRL_T_AIRPORT, &lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Using the writable CDS entity, we can perform &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;update &lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;operations directly, and we can also &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;insert&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; new records by using the &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;MODIFY&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; statement. We will explore how to implement these operations in the upcoming steps.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_1-1761035762682.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330140i8F18A3F4D2C62746/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_1-1761035762682.png" alt="kalmesh_1-1761035762682.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;In the next step, we will create a class to perform all the required operations. We will use standard interface methods to execute these operations and display the output in the console for better visibility and testing.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_2-1761035834570.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330141i6A6F1BD2A833069C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_2-1761035834570.png" alt="kalmesh_2-1761035834570.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Let‚Äôs&lt;/SPAN&gt;&lt;SPAN class=""&gt; insert some data into the database table. Since we cannot perform insert operation directly through a writable CDS entity, I will &lt;/SPAN&gt;&lt;SPAN class=""&gt;proceed&lt;/SPAN&gt;&lt;SPAN class=""&gt; with inserting data into the underlying database &lt;/SPAN&gt;&lt;SPAN class=""&gt;table.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_3-1761035898193.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330142i477E22022DB56E99/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_3-1761035898193.png" alt="kalmesh_3-1761035898193.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Fetch &lt;/SPAN&gt;&lt;SPAN class=""&gt;the data from the database table to verify whether the records were successfully inserted, as performed in the &lt;/SPAN&gt;&lt;SPAN class=""&gt;p&lt;/SPAN&gt;&lt;SPAN class=""&gt;revious&lt;/SPAN&gt; &lt;SPAN class=""&gt;step.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_4-1761035941906.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330143i0ADEFA20BA444649/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_4-1761035941906.png" alt="kalmesh_4-1761035941906.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;UPDATE&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Now, let‚Äôs perform an update operation using the writable CDS entity (&lt;STRONG&gt;ZTRL&lt;/STRONG&gt;&lt;/SPAN&gt;&lt;STRONG&gt;_I_WRENT_DEMO&lt;/STRONG&gt;)&lt;SPAN&gt;. In this example, we will update the name field to demonstrate how data can be modified through the entity.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_5-1761036054229.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330145i4019B9CCE92DA46E/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_5-1761036054229.png" alt="kalmesh_5-1761036054229.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;INSERT&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;We will insert a new record by using the &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;MODIFY&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; statement, which allows us to perform insert operations through the writable CDS entity.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_6-1761036103280.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330146iF60E2A1020E11868/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_6-1761036103280.png" alt="kalmesh_6-1761036103280.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;DELETE&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Direct delete operations are not supported through writable CDS entities. If attempted, the system will raise an error, as shown below.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_7-1761036149147.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330147i142A233FDCF4405F/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_7-1761036149147.png" alt="kalmesh_7-1761036149147.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="kalmesh_8-1761036170936.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/330148i289A85701DAF27DC/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="kalmesh_8-1761036170936.png" alt="kalmesh_8-1761036170936.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Conclusion&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Writable CDS Entities&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; offer a powerful and flexible way to interact with database tables in SAP. Through these entities, we can perform &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;update operations &lt;/SPAN&gt;&lt;/STRONG&gt;and&lt;SPAN&gt;&amp;nbsp;even &lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;insert new records&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; using the &lt;/SPAN&gt;&lt;SPAN&gt;MODIFY&lt;/SPAN&gt;&lt;SPAN&gt; statement.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Keep experimenting, keep learning‚Äîand happy coding! &lt;span class="lia-unicode-emoji" title=":rocket:"&gt;üöÄ&lt;/span&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/writable-entity-in-cds/ba-p/14249189"/>
    <published>2025-10-22T07:56:59.929000+02:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/outbound-integration-from-sap-btp-abap-to-sap-s-4hana-cloud-via-service/ba-p/14255149</id>
    <title>Outbound Integration from SAP BTP, ABAP to SAP S/4HANA Cloud via Service Consumption Model</title>
    <updated>2025-10-28T13:17:53.803000+01:00</updated>
    <author>
      <name>Pramathesh_t_s</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1455465</uri>
    </author>
    <content>&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;This blog post will describe the Service Consumption Model for OData. I will describe its benefits, provide a description of the model, take a look at the OData Client Proxy at runtime and also dive into the ABAP cross trace integration as well.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;If you want to receive or send data to an OData V2 or V4 service within SAP BTP, ABAP Environment or SAP S/4HANA ABAP Environment, you can use the "Service Consumption Model" for OData. As of release 2311, it is possible to&amp;nbsp;consume Complex Types, Complex Collection, Action (bound) and Functions (bound).&amp;nbsp;Of course, the consumption of Entity Types and Entity Sets is also possible.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Use case&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;If you have an SAP BTP, ABAP Environment or SAP S/4HANA Cloud, ABAP Environment system you can use the Service Consumption Model for OData. From here you can connect to a Cloud or an on-premises system.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_0-1761650653791.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333359iE20CBBCBB983B936/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Pramathesh_t_s_0-1761650653791.png" alt="Pramathesh_t_s_0-1761650653791.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;In my scenario I am consuming the &lt;EM&gt;API - API_WAREHOUSE_ORDER_TASK_2&lt;/EM&gt; from another Cloud system. A call to the Entity Set&amp;nbsp;&lt;EM&gt;Warehouse Task&lt;/EM&gt;&amp;nbsp;returns the following data:&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_0-1761650980033.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333361i9FE0B730525AE6E9/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_0-1761650980033.png" alt="Pramathesh_t_s_0-1761650980033.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Service Consumption Model for OData&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Select&amp;nbsp;&lt;EM&gt;File&lt;/EM&gt;&amp;nbsp;--&amp;gt;&amp;nbsp;&amp;nbsp;&lt;EM&gt;New&lt;/EM&gt;&amp;nbsp;--&amp;gt;&amp;nbsp;&lt;EM&gt;Service Consumption Model&lt;/EM&gt;&amp;nbsp;and choose&amp;nbsp;&lt;EM&gt;OData&lt;/EM&gt;&amp;nbsp;as&amp;nbsp;&lt;EM&gt;Consumption mode&lt;/EM&gt;&amp;nbsp;in ADT.&lt;/P&gt;&lt;P&gt;The consumption system requires a representation of the remote service. This knowledge is used to create the URL, write and read the JSON form the HTTP requests and responses. Therefore, the wizard needs the EDMX file (a service metadata document that describes the data model exposed by the service as an HTTP endpoint). OData uses EDMX as the format for this description of the remote service. You can get this by adding&amp;nbsp;&lt;EM&gt;$metadata&lt;/EM&gt;&amp;nbsp;to the end of the service document, in my case it is the following URL -&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;GET /sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/$metadata&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Save this file locally to use it in the below shown wizard. In addition, chose the appropriate class name. This class is the model representation and will contain all the types.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_1-1761651074160.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333362i4E220282FA77C500/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_1-1761651074160.png" alt="Pramathesh_t_s_1-1761651074160.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Finally, we get the Service Consumption model for OData. Create an outbound service object using wizard, which models the outbound call that will be implemented. The outbound service will be part of a custom communication scenario.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_2-1761651128515.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333363i2D6DC05E2B6D119C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_2-1761651128515.png" alt="Pramathesh_t_s_2-1761651128515.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Create a communication scenario and assign the outbound service to it. This will be the basis for the outbound communication arrangement, which will be configured by an administrator at a later point. Keep in mind that the developer defines which authentication methods are supported, while the administrator decides which authentication method is ultimately used at runtime.&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_3-1761651467132.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333364i2B0D21F02F7C5AD2/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_3-1761651467132.png" alt="Pramathesh_t_s_3-1761651467132.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Consuming an Odata Service via&amp;nbsp;Service Consumption Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;You can use the generated code snippet of the SRVC in and ABAP class, pass the name of the communication scenario and if required, the name of the communication system and the outbound service to CREATE_BY_COMM_ARRANGEMENT&amp;nbsp;method, and perform the service call.&lt;/P&gt;&lt;P&gt;The following code is generated by the SRVC for the create operation of the OData service Warehouse Task.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_4-1761651617495.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333371i8D265D6053BE92E8/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_4-1761651617495.png" alt="Pramathesh_t_s_4-1761651617495.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Support for Actions and Functions&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;To call an OData action or function, the necessary structures and tables for the parameters are generated in the Service Consumption Model. With the 2311 release, however, the ADT (ABAP Development Tools) integration for OData V4 actions is still missing.&lt;/P&gt;&lt;P&gt;Consequently, I cannot yet select a bound action, an action import, a bound function, or a function import and directly generate the code snippet using the ADT tool. Despite this missing feature, the required parameter structure is available, and I can use it at runtime to call the operation.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":hammer_and_wrench:"&gt;üõ†&lt;/span&gt;Ô∏è Code Example: CancelWarehouseTask Action&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Let's look at how to perform the CancelWarehouseTask action. Before implementing this using the Service Consumption Model, we'll verify the steps using the SAP Gateway Client.&lt;/P&gt;&lt;P&gt;For any standard SAP API, you should always consult the SAP API Business Hub to determine the correct syntax, required URL, and mandatory parameters for any action or function. The sample link confirms that the following details are required to execute this action:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Key Parameters:&lt;/STRONG&gt;&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;Warehouse Number (EWMWarehouse)&lt;/LI&gt;&lt;LI&gt;Warehouse Task Number (WarehouseTask)&lt;/LI&gt;&lt;LI&gt;Warehouse Task Item Number (WarehouseTaskItem)&lt;/LI&gt;&lt;/UL&gt;&lt;LI&gt;Concurrency Control: The ETag value is also required for conditional updates/actions.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The full API request URL for the action is:&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;POST /sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/WarehouseTask(EWMWarehouse='{EWMWarehouse}',WarehouseTask='{WarehouseTask}',WarehouseTaskItem='{WarehouseTaskItem}')/SAP__self.CancelWarehouseTask?sap-client=&amp;lt;client&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":gear:"&gt;‚öôÔ∏è&lt;/span&gt; Steps to Prepare the Details using SAP Gateway Client&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;To successfully execute the action, you first need to retrieve the current ETag and key parameters for the warehouse task.&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Perform a GET Call to Retrieve the Task Details and ETag.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Execute a GET request to the WarehouseTask entity set using the relevant warehouse and order numbers to retrieve the task details.&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;/sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/WarehouseOrder(EWMWarehouse='0880',WarehouseOrder='9748')/_WarehouseTask&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;The response payload will contain the Warehouse Number, Warehouse Task Number, Warehouse Task Item, and the &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.etag property for the required task.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_5-1761652886181.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333391i08D1764058C2AAB8/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_5-1761652886181.png" alt="Pramathesh_t_s_5-1761652886181.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 2. Perform the POST Call for the Action.&lt;/P&gt;&lt;P&gt;Perform a POST request for the CancelWarehouseTask action using the details (parameters) obtained in the previous step. Crucially, you must also include the ETag value in the If-Match HTTP header.&lt;/P&gt;&lt;pre class="lia-code-sample language-markup"&gt;&lt;code&gt;Post /sap/opu/odata4/sap/api_warehouse_order_task_2/srvd_a2x/sap/warehouseorder/0001/WarehouseTask(EWMWarehouse='{EWMWarehouse}',WarehouseTask='{WarehouseTask}',WarehouseTaskItem='{WarehouseTaskItem}')/SAP__self.CancelWarehouseTask&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Required Header - If-Match: W/"&amp;lt;ETag_Value_From_Step_1&amp;gt;"&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_6-1761653556921.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333394iDA3D6A690FB64A59/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_6-1761653556921.png" alt="Pramathesh_t_s_6-1761653556921.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":laptop_computer:"&gt;üíª&lt;/span&gt; 1. Retrieving ETag and Key Parameters via Service Consumption Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The first step is to read the entity to obtain its current ETag and key properties, which are required for the subsequent action call.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TRY.
    " -----------------------------------------------------------
    " 1. Create HTTP Client and Client Proxy
    " -----------------------------------------------------------
    " Create HTTP destination using Communication Arrangement details
    DATA(lo_destination) = cl_http_destination_provider=&amp;gt;create_by_comm_arrangement(
        comm_scenario  = lv_commscetask
        comm_system_id = lv_commsystem
        service_id     = lv_serviceid_task ).

    lo_http_client  = cl_web_http_client_manager=&amp;gt;create_by_http_destination( lo_destination ).
    
    " Create the OData V4 client proxy
    lo_client_proxy = /iwbep/cl_cp_factory_remote=&amp;gt;create_v4_remote_proxy(
        EXPORTING
            is_proxy_model_key       = VALUE #( repository_id       = lv_repid
                                                  proxy_model_id      = lv_proxymodelid
                                                  proxy_model_version = lv_proxymodlever )
            io_http_client             = lo_http_client
            iv_relative_service_root   = lv_servicerootwh ).

    ASSERT lo_http_client IS BOUND.
    
    " -----------------------------------------------------------
    " 2. Navigate to the Resource and Read Data (GET)
    " -----------------------------------------------------------
    " Create a request for the read operation on the WAREHOUSE_TASK entity set
    lo_request = lo_client_proxy-&amp;gt;create_resource_for_entity_set( 'WAREHOUSE_TASK' )-&amp;gt;create_request_for_read( ).
    
    " Apply filter condition for the Warehouse Task
    lo_filter_factory = lo_request-&amp;gt;create_filter_factory( ).
    CLEAR lt_range_warehousetask.
    
    " Populate range table (assuming &amp;lt;ls_keys&amp;gt; holds the task number)
    lt_range_warehousetask =  VALUE #( ( sign  = 'I' option = 'EQ' low    = &amp;lt;ls_keys&amp;gt;-warehousetask ) ).
    
    " Create filter node by range on the WAREHOUSE_TASK property
    lo_filter_node_1 = lo_filter_factory-&amp;gt;create_by_range( iv_property_path = 'WAREHOUSE_TASK'
                                                          it_range         = lt_range_warehousetask ).
                                                          
    lo_request-&amp;gt;set_filter( lo_filter_node_1 ).
    
    " -----------------------------------------------------------
    " 3. Execute Request and Process Response
    " -----------------------------------------------------------
    lo_response = lo_request-&amp;gt;execute( ).
    
    " Retrieve the business data (ETag is implicitly available in the internal structure)
    lo_response-&amp;gt;get_business_data( IMPORTING et_business_data = lt_business_data ).

CATCH cx_root INTO DATA(lo_err).
    DATA(lv_text) = lo_err-&amp;gt;get_text( ).
    
    " Error handling and logging (omitted for brevity, based on your original code)
    APPEND VALUE #( warehousetask = &amp;lt;ls_keys&amp;gt;-warehousetask
                    %msg          = new_message( ... v2       = lv_text )
                  ) TO reported-zn5_dl_c_createmon_task.
    APPEND VALUE #( warehousetask = &amp;lt;ls_keys&amp;gt;-warehousetask ) TO failed-zn5_dl_c_createmon_task.
    lv_flag = abap_true.
ENDTRY.

" -----------------------------------------------------------
" 4. Extract ETag from Read Results
" -----------------------------------------------------------
" Assuming you are looping through tasks, the loop structure is missing, but extracting the ETag is done here:
READ TABLE lt_business_data ASSIGNING FIELD-SYMBOL(&amp;lt;ls_business_data&amp;gt;) WITH KEY warehouse_task = ls_task-warehousetask.

IF sy-subrc = 0.
    " The etag field is automatically mapped in the generated structure
    ls_task-etag = &amp;lt;ls_business_data&amp;gt;-etag.
ENDIF.

IF lv_flag = abap_false.
    APPEND ls_task TO lt_task.
    CLEAR ls_task.
ENDIF.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":rocket:"&gt;üöÄ&lt;/span&gt; 2. Performing the CancelWarehouseTask Action&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;As previously noted, as of the 2311 release, the ADT integration for generating code snippets for OData V4 actions is still pending. Therefore, we must implement the action call manually.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Implementation Details:&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Bound Action Method&lt;/STRONG&gt;: The method that triggers the bound action in the Service Consumption Model is typically named bound_action('ACTION_NAME') on the resource object. Here, the action name must be passed as a string literal: 'CANCEL_WAREHOUSE_TASK'.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Pramathesh_t_s_7-1761653664347.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/333395i8E713F1F8DED25B7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Pramathesh_t_s_7-1761653664347.png" alt="Pramathesh_t_s_7-1761653664347.png" /&gt;&lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 2.&amp;nbsp;&lt;STRONG&gt;Concurrency Control:&lt;/STRONG&gt; Since CancelWarehouseTask is a state-changing operation, it requires the ETag for optimistic locking. This is set using the set_if_match( etag_value ) method on the request object.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TRY.
    " -----------------------------------------------------------
    " 1. Create HTTP Client and Client Proxy (using a different variable set, e.g., lo_client_proxy1)
    " -----------------------------------------------------------
    DATA(lo_destination1) = cl_http_destination_provider=&amp;gt;create_by_comm_arrangement(
        comm_scenario  = lv_commscetask
        comm_system_id = lv_commsystem
        service_id     = lv_serviceid_task ).

    lo_http_client1  = cl_web_http_client_manager=&amp;gt;create_by_http_destination( lo_destination1 ).
    
    lo_client_proxy1 = /iwbep/cl_cp_factory_remote=&amp;gt;create_v4_remote_proxy(
        EXPORTING
            is_proxy_model_key       = VALUE #( repository_id       = lv_repid
                                                  proxy_model_id      = lv_proxymodelid
                                                  proxy_model_version = lv_proxymodlever )
            io_http_client             = lo_http_client1
            iv_relative_service_root   = lv_servicerootwh ).
            
    ASSERT lo_http_client1 IS BOUND.

    " -----------------------------------------------------------
    " 2. Navigate to Entity and Bind Action
    " -----------------------------------------------------------
    " Construct the key for the specific WAREHOUSE_TASK entity
    DATA(ls_entity_key1) = VALUE #(
        ewmwarehouse        = lv_ewmwarehouse
        warehouse_task      = &amp;lt;ls_task&amp;gt;-warehousetask
        warehouse_task_item = '0' " Assuming the item is '0' for the action context
    ).
    
    " Navigate to the specific entity instance using its key
    DATA(lo_entity1) = lo_client_proxy1-&amp;gt;create_resource_for_entity_set( 'WAREHOUSE_TASK'
    )-&amp;gt;navigate_with_key( ls_entity_key1 ).
    
    " Bind the CANCEL_WAREHOUSE_TASK action to the entity resource
    DATA(lo_resource1) = lo_entity1-&amp;gt;bind_action( 'CANCEL_WAREHOUSE_TASK' ).
    
    " -----------------------------------------------------------
    " 3. Create Request, Set ETag, and Execute
    " -----------------------------------------------------------
    DATA(lo_request1) = lo_resource1-&amp;gt;create_request( ).
    
    " Set the ETag (If-Match header) using the ETag retrieved in step 1
    lo_request1-&amp;gt;set_if_match( &amp;lt;ls_task&amp;gt;-etag ).
    
    " Execute the action (POST request)
    DATA(lo_response1) = lo_request1-&amp;gt;execute( ).
    
    " Action successful, continue with status handling...

CATCH cx_root INTO DATA(lo_obj).
    DATA(lv_text) = lo_obj-&amp;gt;get_text( ).

    " Error handling and logging (omitted for brevity, based on your original code)
    APPEND VALUE #( warehousetask = &amp;lt;ls_task&amp;gt;-warehousetask
                    %msg          = new_message( ... v2       = lv_text )
                  ) TO reported-zn5_dl_c_createmon_task.
    APPEND VALUE #( warehousetask = &amp;lt;ls_task&amp;gt;-warehousetask ) TO failed-zn5_dl_c_createmon_task.
    lv_flag = abap_true.
ENDTRY.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion: Seamless Outbound Integration with OData Service Consumption Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This post demonstrated a complete, robust approach to Outbound Integration from the SAP BTP, ABAP Environment (or S/4HANA Cloud, ABAP Environment) to an external OData API, specifically the API_WAREHOUSE_ORDER_TASK_2 in a cloud-to-cloud scenario.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/outbound-integration-from-sap-btp-abap-to-sap-s-4hana-cloud-via-service/ba-p/14255149"/>
    <published>2025-10-28T13:17:53.803000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/survey-abap-naming-conventions/ba-p/14257743</id>
    <title>üì¢  Survey: ABAP Naming Conventions</title>
    <updated>2025-11-03T10:18:02.968000+01:00</updated>
    <author>
      <name>kilian_kilger</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/204709</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1634734726"&gt;How should a holistic naming convention store look?&lt;/H1&gt;&lt;P&gt;Names are everywhere!&lt;/P&gt;&lt;P&gt;Most customers have specific naming conventions for their development artifacts. Many customers have them in rule books or use ATC to check them, by using the well-known &lt;STRONG&gt;ATC check&lt;/STRONG&gt; for naming conventions.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="kilian_kilger_0-1761906261309.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334634i885400410D2F3A78/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="kilian_kilger_0-1761906261309.png" alt="kilian_kilger_0-1761906261309.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class="lia-align-center" style="text-align: center;"&gt;&lt;STRONG&gt;Naming Convention ATC Check&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The existing ATC check is very limited, though, as it has no broad coverage of &lt;STRONG&gt;CDS&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Today, we also have new requirements through the use of AI and Generators. When using &lt;STRONG&gt;Joule for Developers,&lt;/STRONG&gt; for example, customers expect that their naming conventions are automatically applied. This also holds true when using generators like the &lt;STRONG&gt;RAP generator&lt;/STRONG&gt;.&amp;nbsp;&lt;/P&gt;&lt;P&gt;But how would you expect a naming convention store to look?&lt;/P&gt;&lt;H2 id="toc-hId-1567303940"&gt;1. Option: A central naming convention store&lt;/H2&gt;&lt;P&gt;This could be a Fiori app in a central system where the naming conventions are stored. These can then be maintained globally. The ATC check and different tools like generators and AI could connect to that system.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Pros:&lt;/STRONG&gt;&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- central maintenance, probably by a central team&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- central excemption process and governance&lt;BR /&gt;&lt;STRONG&gt;Cons:&lt;/STRONG&gt;&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- Differing rules, according to package and/or system, would be difficult to model&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- The check would come quite late in the development process, i.e. no check by the compiler&lt;BR /&gt;&amp;nbsp; &amp;nbsp;- Excemptions create organizational overhead&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1370790435"&gt;&lt;BR /&gt;&lt;SPAN&gt;2. Option: Naming convention as source artifact&lt;/SPAN&gt;&lt;/H2&gt;&lt;P&gt;&lt;SPAN&gt;Store the naming convention as part of the source code, referencing the package and its subpackages.&lt;BR /&gt;&lt;STRONG&gt;&lt;BR /&gt;Pros:&lt;BR /&gt;&lt;/STRONG&gt;&amp;nbsp; - Naming convention near the source code, which could even be checked by the compiler&lt;BR /&gt;&amp;nbsp; - Excemptions could be handled locally in the naming convention&lt;BR /&gt;&amp;nbsp;&lt;STRONG&gt;Cons:&lt;BR /&gt;&amp;nbsp;&amp;nbsp;&lt;/STRONG&gt;- No central maintenance, probably much more effort to maintain&lt;BR /&gt;&amp;nbsp; - No central governance&lt;BR /&gt;&lt;BR /&gt;The answer probably also depends upon which persona maintains such a naming convention in your company. Is it some central architect or governance team or just the developers?&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;What do you think?&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;I am happy to hear your thoughts in the comments. &lt;STRONG&gt;You can also vote for the comments of others.&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Disclaimer&lt;/STRONG&gt;: this blog post does not imply that SAP will build any product related to naming conventions in the future.&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/survey-abap-naming-conventions/ba-p/14257743"/>
    <published>2025-11-03T10:18:02.968000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/behind-the-design-how-we-transformed-the-abap-development-tools/ba-p/14258121</id>
    <title>Behind the Design: How We Transformed the ABAP Development Tools Architecture to Support More IDEs</title>
    <updated>2025-11-04T17:00:00.118000+01:00</updated>
    <author>
      <name>thomasalexander_ritter</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/185696</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Currently, official ABAP tool support exists for SAP GUI and Eclipse. For years, users have asked us to bring this support to additional IDEs. Based on the user survey results from 2023 and 2025, the most requested development environment is &lt;STRONG&gt;Visual Studio Code (VS Code)&lt;/STRONG&gt;. However, many users have also expressed interest in other environments such as JetBrains IDEs, Neovim, or even Zed. In short, our user base wants more flexibility when choosing their development environment.&lt;/P&gt;&lt;P&gt;See related article:&amp;nbsp;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-development-tools-for-vs-code-everything-you-need-to-know/ba-p/14258129" target="_self"&gt;ABAP Development Tools for VS Code: Everything You Need to Know&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;How Do We Transform the ABAP Development Tools Architecture to Offer More Choice?&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;When analyzing the challenge, we identified two major issues that needed to be addressed:&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;1. The Client/Server Architecture&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;ABAP tools follow a client/server architecture. For each new development environment, a client layer implementation is required. This layer contains all the code needed to communicate with an ABAP server, including complex wrappers for existing ABAP development tools REST APIs. It ensures compatibility with system releases as far back as SAP NetWeaver 7.3 EHP1 SP04 and higher and implements client-side tool logic such as the debugger, test runner, ATC, tracing, and more.&lt;BR /&gt;Overall, the client UI-independent (IDE independent) codebase consists of &lt;STRONG&gt;2.9 million lines of code&lt;/STRONG&gt;!&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;2. Object Type Editors&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;ABAP relies heavily on object type editors. For the SAP BTP ABAP development environment alone, &lt;STRONG&gt;88 unique editors&lt;/STRONG&gt; need to be supported as of 2025. For comparison, CAP only requires one unique editor (CDS), and Java tooling only needs editors for classes, interfaces and enumerations.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Solution 1: Reusing Our Client Codebase as a Language Server&lt;/STRONG&gt;&lt;BR /&gt;Modern development environments support language servers through the &lt;A href="https://microsoft.github.io/language-server-protocol/" target="_self" rel="nofollow noopener noreferrer"&gt;Language Server Protocol (LSP)&lt;/A&gt;, which defines a standardized interface between the development tool and the language server.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="lsp_example_diagram.png" style="width: 740px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334818iEF95CE78093087A7/image-dimensions/740x343/is-moderation-mode/true?v=v2" width="740" height="343" role="button" title="lsp_example_diagram.png" alt="lsp_example_diagram.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;(Image &lt;A href="https://code.visualstudio.com/api/language-extensions/language-server-extension-guide" target="_self" rel="nofollow noopener noreferrer"&gt;source&lt;/A&gt;)&lt;/P&gt;&lt;P&gt;This means a language server can be written in any programming language and reused across multiple development environments.&lt;/P&gt;&lt;P&gt;We began exploring this approach in 2018, considering a TypeScript based language server to re-implement the client component‚Äîsimilar to community ABAP VS Code extensions. While functional, this approach was not ideal for us because it required rebuilding the entire client layer from scratch and maintaining two separate implementations. This is simply not a viable solution in the long run.&lt;/P&gt;&lt;P&gt;Fortunately, we discovered the &lt;A href="https://github.com/redhat-developer/vscode-java" target="_self" rel="nofollow noopener noreferrer"&gt;Java VS Code extension&lt;/A&gt;, which provided a clever solution: they "wrapped" the Eclipse Java development tools with a language server.&lt;/P&gt;&lt;P&gt;This approach allowed them to reuse the existing JDT codebase. Interestingly, most Java developers don‚Äôt realize that the VS Code Java extension is essentially Eclipse running inside VS Code!&lt;BR /&gt;This concept solved our problem: we can potentially reuse &lt;STRONG&gt;2.9 million lines of our client non-ui code&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="potential_reuse.png" style="width: 716px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334820i387FA14354C9E2B3/image-dimensions/716x445/is-moderation-mode/true?v=v2" width="716" height="445" role="button" title="potential_reuse.png" alt="potential_reuse.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;It also means we can maintain and support Eclipse and VS Code using the same codebase. Even better, users can connect to any ABAP server release supported by Eclipse through the VS Code extension.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Solution 2: Making Object Types Reusable via Server-Driven Development and Client-Based Renderers&lt;/STRONG&gt;&lt;BR /&gt;Initially, when building the Eclipse plug-in, we implemented new object type editors by adding persistence logic on the server in ABAP and the UI on the client side in Java. In 2018, when the SAP BTP ABAP Environment was launched and we decided to only support ABAP Development Tools for Eclipse for ABAP Cloud development, we had to add many missing object types quickly. During this process, we realized our architecture did not scale well. Using two programming languages was too complex and slow.&lt;/P&gt;&lt;P&gt;Learning from past experiences, we looked at the server-side Dynpro and SAP Fiori Elements programming models, which allow the implementation of ABAP-based UIs using only ABAP code and a client-side rendering engine based on UI models.&lt;BR /&gt;Adopting this approach solved our scalability problem: we only need &lt;STRONG&gt;two rendering engines&lt;/STRONG&gt; for tool support‚Äîone for form-based tools and one for source-based tools.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="server_driven_before_after.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/334819iC5951153882F0337/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="server_driven_before_after.png" alt="server_driven_before_after.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;In 2020, we released editor support for number range objects‚Äîour first server-driven object type. Today, all new object types are built using our server-driven development framework.&lt;/P&gt;&lt;P&gt;Thanks to this shift, offering ABAP tool support in another development environment no longer requires 88 separate editors. It only requires two:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;One editor for form-based objects&lt;/LI&gt;&lt;LI&gt;One editor for source-based objects&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;For years, we wanted to bring ABAP tools to more development environments, but the previous architecture made this impossible. Over the past six years, we have invested significant effort into re-architecting our tools. Thanks to this work, we can now bring ABAP tools to additional IDEs‚Äîstarting with &lt;STRONG&gt;VS Code in 2026&lt;/STRONG&gt;!&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/behind-the-design-how-we-transformed-the-abap-development-tools/ba-p/14258121"/>
    <published>2025-11-04T17:00:00.118000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/abap-development-tools-for-vs-code-everything-you-need-to-know/ba-p/14258129</id>
    <title>ABAP Development Tools for VS Code: Everything You Need to Know</title>
    <updated>2025-11-04T17:00:00.119000+01:00</updated>
    <author>
      <name>thomasalexander_ritter</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/185696</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We are excited to announce that we have started working on a VS Code extension for ABAP. We understand that the community has high expectations, and we want to communicate transparently about what you can expect from ABAP Development Tools for VS Code. In this article, we will share details about the scope of the first release and what‚Äôs planned for the future.&lt;/P&gt;&lt;P&gt;See related article:&amp;nbsp;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/behind-the-design-how-we-transformed-the-abap-development-tools/ba-p/14258121" target="_self"&gt;Behind the Design: How We Transformed the ABAP Development Tools Architecture to Support More IDEs&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Primary focus will be support for the ABAP Cloud Development Model&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The goal is to fully support all developer flows related to the ABAP Cloud development model. It is not planned to support classic programming models such as Dynpro or Web Dynpro.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Scope of the First Release: Focus on RAP UI Services&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The primary focus of the initial release is the development of RAP UI services. One of the biggest requests from our users has been to bring SAP Fiori frontend development and RAP UI service development into the same tool. We know this group of developers will benefit the most when all development tasks can be performed within VS Code. That‚Äôs why this is the starting point.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;First Release Targeted at Early Adopters&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The initial set of object types will include everything needed to build a RAP UI service from scratch, along with the basic develop/test/debug flow that VS Code supports. This includes editors for classes and interfaces. We plan to ship around 12+ object types. However, for many tasks outside of development flows for creating RAP UI services, developers will still need to switch between ABAP Development Tools for Eclipse and ABAP Development Tools for VS Code.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;ABAP developer tools for VS Code will gradually catch up with ABAP developer tools for Eclipse one Client Release at a Time&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;It took us 16 years to reach the current feature scope of the Eclipse plug-in. The technical implementation of our VS Code extension uses an architecture that allows us to reuse much of the existing Eclipse codebase. However, we must migrate all existing tools to the Language Server Protocol and design/build the necessary UIs on the VS Code side. While we expect a much faster development timeline, this transition will not happen overnight but gradually with each new client release.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Same Backend Support as ABAP Development Tools for Eclipse&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Since we are reusing our existing codebase, all features available for a given release in Eclipse can potentially be offered in VS Code. We plan to support all releases down to SAP NetWeaver 7.3 EHP1 SP04.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Early Release Means You Can Help Shape the Roadmap&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Just like the Eclipse plug-in, which was not feature-complete when we started, we will actively engage with the ABAP developer community to help us prioritize the features you miss the most.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;File-based development first&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;As the name already implies Visual Studio Code is a code editor optimized for editing source code files. Additionally, all AI tools work best in a file-based environment. In order, to ensure that ABAP developers get the most out of VS Code in combination with AI tools all object type editing is completely file based utilizing the &lt;A href="https://github.com/SAP/abap-file-formats" target="_self" rel="nofollow noopener noreferrer"&gt;ABAP file formats&lt;/A&gt;.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;SAP Joule for Developers Features Coming to VS Code&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We are planning to bring the Joule for developers features to VS Code, including predictive code completion and other intelligent development capabilities.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;ABAP Development Tools for VS Code Unlock Access to Cutting-Edge AI Tools&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;One of the reasons ABAP in VS Code is so appealing is that most cutting-edge AI development innovations happen in VS Code. Thanks to the new extension, you can leverage the available AI VS Code extensions. Please note that ABAP development objects are still stored on the server side. The file system had to be implemented using the ‚Äúvirtual workspace‚Äù technology. Not all AI tools currently support this file system, so compatibility may vary.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/abap-development-tools-for-vs-code-everything-you-need-to-know/ba-p/14258129"/>
    <published>2025-11-04T17:00:00.119000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/how-to-use-reserved-words-as-property-names-in-your-odata-service/ba-p/14264772</id>
    <title>How to use reserved words as property names in your OData service?</title>
    <updated>2025-11-10T20:10:12.697000+01:00</updated>
    <author>
      <name>Andre_Fischer</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/55</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1635568966"&gt;Introduction&lt;/H1&gt;&lt;P&gt;Sometimes&lt;/P&gt;&lt;P&gt;there is the requirement to use field names that are reserved words such as &lt;STRONG&gt;&lt;FONT face="courier new,courier"&gt;Number&lt;/FONT&gt;&lt;/STRONG&gt;, &lt;STRONG&gt;&lt;FONT face="courier new,courier"&gt;Begin&lt;/FONT&gt;&lt;/STRONG&gt; or other reserved words as a propery property name of your OData service, e.g. to fill the value of a dynamic tile.&lt;/P&gt;&lt;H1 id="toc-hId-1439055461"&gt;Implementation&lt;/H1&gt;&lt;P&gt;When trying to set this name as an alias in your CDS view this fails with the error message:&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;NUMBER is a reserved word (choose another field name)&amp;nbsp;&lt;/STRONG&gt;.&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Products'

define view entity ZI_VH_PRODUCT
  as select from zproducts
{
  key product       as Product,
      producttext   as Producttext,
      productgroup  as ProductGroup,
      price         as Price,
      currency      as Currency,
      baseunit      as BaseUnit,
      numberinstock as Number
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Andre_Fischer_0-1762799005531.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/338261iD530D701CB62D7EA/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Andre_Fischer_0-1762799005531.png" alt="Andre_Fischer_0-1762799005531.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H1 id="toc-hId-1242541956"&gt;&lt;SPAN&gt;Solution&lt;/SPAN&gt;&lt;/H1&gt;&lt;P&gt;&lt;SPAN&gt;Using the annotation &lt;STRONG&gt;&lt;FONT face="courier new,courier"&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.property.name&lt;/FONT&gt;&lt;/STRONG&gt;&amp;nbsp;this can be achieved for RAP based OData services.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;In the CDS view that is used by your OData service it is possible to add the following annotation&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.property.name: 'Number' &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;to the source code of the CDS view.&amp;nbsp; &amp;nbsp;&lt;/P&gt;&lt;P&gt;This way the name of the CDS view property can be such that it does comply to the validations of the CDS editor, but at the same time the name of this field in the OData Service would be set to Number.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Test'
@ObjectModel.query.implementedBy: 'ABAP:ZCL_VH_PRODUCTS'

define view entity ZI_VH_PRODUCT
  as select from zproducts
{
  key product       as Product,
      producttext   as Producttext,
      productgroup  as ProductGroup,
      price         as Price,
      currency      as Currency,
      baseunit      as BaseUnit,
      &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.property.name: 'Number'
      numberinstock as NumberInStock
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;As a result you will get the following result in the &lt;STRONG&gt;$metadata&lt;/STRONG&gt; call.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;&amp;lt;EntityType Name="Product2Type"&amp;gt;
&amp;lt;Key&amp;gt;
&amp;lt;PropertyRef Name="Product"/&amp;gt;
&amp;lt;/Key&amp;gt;
&amp;lt;Property Name="Product" Type="Edm.String" Nullable="false" MaxLength="40"/&amp;gt;
&amp;lt;Property Name="Producttext" Type="Edm.String" Nullable="false" MaxLength="40"/&amp;gt;
&amp;lt;Property Name="ProductGroup" Type="Edm.String" Nullable="false" MaxLength="40"/&amp;gt;
&amp;lt;Property Name="Price" Type="Edm.Decimal" Nullable="false" Precision="15" Scale="variable"/&amp;gt;
&amp;lt;Property Name="Currency" Type="Edm.String" Nullable="false" MaxLength="5"/&amp;gt;
&amp;lt;Property Name="BaseUnit" Type="Edm.String" Nullable="false" MaxLength="3"/&amp;gt;
&amp;lt;Property Name="Number" Type="Edm.String" Nullable="false" MaxLength="3"/&amp;gt;
&amp;lt;/EntityType&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Also the Fiori Elements Preview shows the wished result:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Andre_Fischer_1-1762801704959.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/338290iD2AC0862ECAD80F8/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Andre_Fischer_1-1762801704959.png" alt="Andre_Fischer_1-1762801704959.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/how-to-use-reserved-words-as-property-names-in-your-odata-service/ba-p/14264772"/>
    <published>2025-11-10T20:10:12.697000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/cloud-native-with-abap-cloud-the-transactional-outbox-pattern/ba-p/14267118</id>
    <title>Cloud-Native with ABAP Cloud ‚Äì The Transactional Outbox Pattern</title>
    <updated>2025-11-12T16:48:29.446000+01:00</updated>
    <author>
      <name>fabianfellhauer</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/354017</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1635652393"&gt;Cloud-Native with ABAP Cloud ‚Äì The Transactional Outbox Pattern&lt;/H1&gt;&lt;P&gt;Cheers ABAP folks!&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;In modern, distributed system landscapes, ensuring &lt;STRONG&gt;data consistency&lt;/STRONG&gt; between a database and a message broker is a common challenge ‚Äì especially when it comes to the integration of S/4HANA Cloud with Side-by-Side extensions built on the SAP Business Technology Platform (e.g. SAP BTP ABAP Environment, aka. Steampunk) or any other microservice-based architecture.&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;How do you guarantee that a database update (‚ÄúOrder created‚Äù) and a corresponding message (like "Request a shipping of the order") are never out of sync? The answer lies in the &lt;STRONG&gt;Transactional Outbox Pattern&lt;/STRONG&gt;. This elegant solution ensures that these two critical operations are treated as a single, atomic unit, which is vital for maintaining data integrity and building robust, event-driven architectures atop SAP's core business processes.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1568221607"&gt;The Logical Unit of Work&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The Logical Unit of Work (LUW) in ABAP represents a series of database operations that are treated as a single, indivisible transaction. All changes made within an LUW, whether updates, insertions, or deletions, must either be &lt;STRONG&gt;committed&lt;/STRONG&gt; to the database successfully &lt;STRONG&gt;or rolled back&lt;/STRONG&gt; &lt;STRONG&gt;entirely&lt;/STRONG&gt; if an error occurs, ensuring transactional consistency. This "all or nothing" principle is managed by the ABAP transaction service, typically involving database commits to finalize the changes. In standard ABAP programming, a database LUW ends when a program executes a COMMIT&amp;nbsp;WORK or ROLLBACK&amp;nbsp;WORK statement, or when a dialog transaction concludes. However, transactional consistency can only be ensured within the same database system. There are plenty of alternatives, when it comes to cloud-native architecture and micro service design. However, a well-established approach is to apply the paradigm of eventual consistency.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1371708102"&gt;Eventual Consistency&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;Eventual consistency is a &lt;STRONG&gt;relaxed consistency model&lt;/STRONG&gt; in distributed systems where updates are not instantly propagated, meaning different replicas might temporarily show conflicting data. However, given enough time and the assumption that no further updates occur, the system guarantees that all data will reach a consistent state (soon).&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1175194597"&gt;The Transactional Outbox Pattern&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The transactional outbox pattern directly supports eventual consistency by &lt;STRONG&gt;decoupling&lt;/STRONG&gt; the &lt;STRONG&gt;primary data write&lt;/STRONG&gt; from the &lt;STRONG&gt;external message emission&lt;/STRONG&gt;. It ensures the message has been reliably persisted within the same database transaction as the data change, guaranteeing that the required event will &lt;EM&gt;only&lt;/EM&gt; be sent and consumed by other services, if the main transaction succeeded. Due to the defer of the message emission the micro service is much more robust against spontaneous outages.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 1: Unstable microservice design. Depending on the execution sequence, the transactional data or the status reflected to the remote system might be inconsistent, if the microservice is affected by an outage in between." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339615i02D3C12A1120C068/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="bgpf-1.png" alt="Figure 1: Unstable microservice design. Depending on the execution sequence, the transactional data or the status reflected to the remote system might be inconsistent, if the microservice is affected by an outage in between." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 1: Unstable microservice design. Depending on the execution sequence, the transactional data or the status reflected to the remote system might be inconsistent, if the microservice is affected by an outage in between.&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 2: More robust microservice design. The message is only emitted, if the transactional data and the outbox, which acts as trigger for the publisher, was successfully committed." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339616i5B1DAB380CEDD86F/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="bgpf-2.png" alt="Figure 2: More robust microservice design. The message is only emitted, if the transactional data and the outbox, which acts as trigger for the publisher, was successfully committed." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 2: More robust microservice design. The message is only emitted, if the transactional data and the outbox, which acts as trigger for the publisher, was successfully committed.&lt;/span&gt;&lt;/span&gt;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-978681092"&gt;Implementing a Transactional Outbox in ABAP Cloud&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;In ABAP Cloud there is the &lt;STRONG&gt;background processing framework&lt;/STRONG&gt; (bgPF) available, which can seamlessly be integrated in the transactional processing of an ABAP application built with the RESTful Application Programming model (RAP).&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The clue: Instead of directly emitting outbound messages in the save sequence of your transaction, a handler can be registered, which is executed asynchronously in the background, once the RAP framework successfully complemented the database commit. This custom handler grants &lt;STRONG&gt;additional flexibility&lt;/STRONG&gt; on top of the transactional outbox pattern, allowing the ABAP application to control how a certain message should be handled (emitted to an external system, processed internally, etc.).&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 3: Implementation of the &amp;quot;Transactional Outbox Pattern&amp;quot; in ABAP Cloud." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339618iE4B4FAB6592C11DD/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="bgpf-3.png" alt="Figure 3: Implementation of the &amp;quot;Transactional Outbox Pattern&amp;quot; in ABAP Cloud." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 3: Implementation of the "Transactional Outbox Pattern" in ABAP Cloud.&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;This setup involves only two components, everything else is handled by the RAP runtime out-of-the-box:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The definition of a bgPF handler, which implements the actual message (e.g. external system call) emission. The handler needs to implement the interface IF_BGMC_OP_SINGLE.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;class zcl_rap_bgpf_request_shipping definition
  public
  final
  create private.
  public section.

    class-methods create_instance
      importing
        is_order           type zr_order000
      returning
        value(ro_instance) type ref to if_bgmc_op_single.

    interfaces if_bgmc_op_single.

  protected section.
  private section.

    methods constructor
      importing
        is_order type zr_order000.
    data ms_order type zr_order000.

endclass.
class zcl_rap_bgpf_request_shipping implementation.

  method if_bgmc_op_single~execute.
    "implement outbound call or system local processing
    modify entity zr_shippingrequest
      create
        set fields auto fill cid
          with value #(
            ( %data = value #(
              OrderReference = ms_order-uuid
              ShippingStatus = 'Ordered' )
            )
          )
   mapped data(mapped)
   failed data(failed)
   reported data(reported).
  endmethod.

  method create_instance.
    return new zcl_rap_bgpf_request_shipping( is_order ).
  endmethod.

  method constructor.
    ms_order = is_order.
  endmethod.

endclass.
‚Äã&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;The registration of the handler within the save sequence of the RAP business object.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;method save_modified.
  "...
  data(lo_factory) = cl_bgmc_process_factory=&amp;gt;get_default( ).
  data(lo_process) = lo_factory-&amp;gt;create( ).
  lo_process-&amp;gt;set_name( 'Request shipping' )-&amp;gt;set_operation(
    zcl_rap_bgpf_request_shipping=&amp;gt;create_instance(
      is_order = corresponding #( &amp;lt;ls_order&amp;gt; )
    )
  ).
  lo_process-&amp;gt;save_for_execution( ).
  "...
endmethod.
‚Äã&lt;/code&gt;&lt;/pre&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;By that, the RAP runtime ensures that the persisted order data is always in sync with the status reflected to the dependent application. If the main process is affected by an outage, the transactional data, as well as the registration for the message emission will be rolled-back. By that, the actual message will never be emitted.&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-782167587"&gt;Process Monitoring&lt;/H2&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;The background processing framework (bgPF) in ABAP Cloud is technically based on bgRFC processes, which can be monitored via the Fiori app ‚ÄúMonitor bgRFC Queues‚Äù. The app displays scheduled, running and aborted processes and provides manual restart capabilities. Important to know: bgPF is one of multiple inbound destinations for bgRFC queues. A queue consists again out of multiple processing units ‚Äì one of those is our registered handler.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Figure 4: Aborted bgPF process (simulated via assert violations) and its restart capabilities." style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339620i41BA4763A96295F7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Monitor bgRFC Queues.png" alt="Figure 4: Aborted bgPF process (simulated via assert violations) and its restart capabilities." /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Figure 4: Aborted bgPF process (simulated via assert violations) and its restart capabilities.&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-585654082"&gt;Additional Information&lt;/H2&gt;&lt;P&gt;Check out some more details on the bgPF in general:&lt;BR /&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/introducing-the-background-processing-framework/ba-p/13579056" target="_blank"&gt;https://community.sap.com/t5/technology-blog-posts-by-sap/introducing-the-background-processing-framework/ba-p/13579056&lt;/A&gt;&lt;/P&gt;&lt;P&gt;Official documentation:&lt;BR /&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-concepts/background-processing-framework" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/abap-cloud/abap-concepts/background-processing-framework&lt;/A&gt;&lt;/P&gt;&lt;P&gt;Complete example in GitHub:&lt;BR /&gt;&lt;A href="https://github.com/SAP-samples/abap-platform-rap-transactional-outbox-with-bgpf" target="_blank" rel="noopener nofollow noreferrer"&gt;https://github.com/SAP-samples/abap-platform-rap-transactional-outbox-with-bgpf&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;Stay tuned for further cloud native design patterns in ABAP Cloud!&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;Cheerio ABAP Folks!&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/cloud-native-with-abap-cloud-the-transactional-outbox-pattern/ba-p/14267118"/>
    <published>2025-11-12T16:48:29.446000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/rap-excel-upload-and-download-excel-using-rap-only/ba-p/14247979</id>
    <title>Rap: Excel Upload and Download Excel using Rap only</title>
    <updated>2025-11-13T05:19:33.199000+01:00</updated>
    <author>
      <name>Vivek_raj153</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1795253</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;In this blog, we‚Äôll create a simple app to&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;upload and download Excel files&lt;/STRONG&gt;&lt;SPAN&gt;, manage their statuses, and update child entities automatically&amp;nbsp; all in one flow.&amp;nbsp;We‚Äôll learn how to store, process, and manage Excel data seamlessly within SAP&amp;nbsp; using CDS views, behavior definitions, and XCO APIs.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;This blog documents the implementation of a RAP-based app that supports&amp;nbsp;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Excel file upload with validation and parsing&lt;/LI&gt;&lt;LI&gt;Template download for structured data entry&lt;/LI&gt;&lt;LI&gt;Dynamic status management and UI control&lt;/LI&gt;&lt;LI&gt;Association handling between parent and child entities&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;To enable file uploads in RAP, the following annotation is crucial:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; @Semantics.largeObject : {
      mimeType: 'Mimetype',
      fileName: 'Filename',
      acceptableMimeTypes: [ 'application/vnd.ms excel',
     'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],
      contentDispositionPreference: #ATTACHMENT
      }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Here's the link to code walkthrough&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;A title="Rap Excel download/Upload file" href="https://www.youtube.com/playlist?list=PLIw7p7i4ySlDBkBSr5abXOPVVmGAd3O8p" target="_blank" rel="noopener nofollow noreferrer"&gt;Rap Excel upload and download Excel &lt;/A&gt;&lt;/P&gt;&lt;P&gt;Lets Dive in the detailed steps :&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;1.&amp;nbsp; Create Database&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Parent Database table : ZT2123_USER&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;This table stores attachment file details&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'User Data'
@AbapCatalog.enhancement.category : #EXTENSIBLE_ANY
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #ALLOWED
define table zt2123_user {
  key client            : abap.clnt not null;
  key emp_id            : abap.numc(8) not null;
  key dev_id            : abap.char(30) not null;
  dev_description       : abap.char(100);
  attachment            : abap.rawstring(0);
  mimetype              : abap.char(128);
  filename              : abap.char(128);
  file_status           : abap.char(50);
  template_status       : abap.char(50);
  local_created_by      : abp_creation_user;
  local_created_at      : abp_creation_tstmpl;
  local_last_changed_by : abp_locinst_lastchange_user;
  local_last_changed_at : abp_locinst_lastchange_tstmpl;
  last_changed_at       : abp_lastchange_tstmpl;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Child Database table : ZT2123_USER_DEV&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'user development objects'
@AbapCatalog.enhancement.category : #EXTENSIBLE_ANY
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #ALLOWED
define table zt2123_user_dev {
  key client    : abap.clnt not null;
  key emp_id    : abap.numc(8) not null;
  key dev_id    : abap.char(30) not null;
  key serial_no : abap.int4 not null;
  object_type   : abap.char(50) not null;
  object_name   : abap.char(80);
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;FONT size="6"&gt;CDS objects&amp;nbsp;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;FONT size="5"&gt;2. Creating Interface View&amp;nbsp;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Parent Interface View&lt;/STRONG&gt; : ZI_2123_USER&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user details'
@Metadata.ignorePropagatedAnnotations: true
define root view entity zi_2123_user
  as select from zt2123_user
  composition [0..*] of ZI_2123_user_dev as _UserDev
{
  key emp_id                as EmpId,
  key dev_id                as DevId,
      dev_description       as DevDescription,
      attachment            as Attachment,
      mimetype              as Mimetype,
      filename              as Filename,
      file_status           as FileStatus,
      template_status       as TemplateStatus,
      // to give color coding to file status
      case file_status
      when 'File Selected' then 2
      when 'Excel Uploaded' then 3
      when 'File not Selected' then 1
      else 0
      end                   as Criticality,
      case template_status
      when 'Present' then 3
      when 'Absent'  then 1
      else 0
      end                   as TemplateCrticality,
      @Semantics.user.createdBy: true
      local_created_by      as LocalCreatedBy,
      @Semantics.systemDateTime.createdAt: true
      local_created_at      as LocalCreatedAt,
      @Semantics.user.lastChangedBy: true
      local_last_changed_by as LocalLastChangedBy,
      @Semantics.systemDateTime.localInstanceLastChangedAt: true
      local_last_changed_at as LocalLastChangedAt,
      @Semantics.systemDateTime.lastChangedAt: true
      last_changed_at       as LastChangedAt,
      _UserDev 
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Child Interface View&lt;/STRONG&gt; : ZI_2123_USER_DEV&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user devlopment details'
@Metadata.ignorePropagatedAnnotations: true
define view entity ZI_2123_user_dev
  as select from zt2123_user_dev
  association to parent zi_2123_user as _User on  $projection.EmpId = _User.EmpId
                                              and $projection.DevId = _User.DevId
{
  key emp_id      as EmpId,
  key dev_id      as DevId,
  key serial_no   as SerialNo,
      object_type as ObjectType,
      object_name as ObjectName,
      _User 
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;3. Consumption view / Projection View&lt;/STRONG&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Note&lt;/STRONG&gt;: &lt;FONT color="#FF0000"&gt;Don't forget to link the relation between parent and child view and enable metadata extension annotation&lt;/FONT&gt;.&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Parent View&lt;/STRONG&gt;&lt;/FONT&gt; : ZC_2123_USER&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user projection view'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity ZC_2123_USER
  as projection on zi_2123_user
{
  key EmpId,
  key DevId,
      DevDescription,
      @Semantics.largeObject : {
      mimeType: 'Mimetype',
      fileName: 'Filename',
      acceptableMimeTypes: [ 'application/vnd.ms-excel','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],
      contentDispositionPreference: #ATTACHMENT
      }
      Attachment,
      @Semantics.mimeType: true
      Mimetype,
      Filename,
      FileStatus,
      Criticality,
      TemplateStatus,
      TemplateCrticality,
      LocalCreatedBy,
      LocalCreatedAt,
      LocalLastChangedBy,
      LocalLastChangedAt,
      LastChangedAt,
      /* Associations */
      _UserDev : redirected to composition child ZC_2123_USER_DEV
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Child View&lt;/STRONG&gt; :&amp;nbsp; ZC_2123_USER_DEV&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'user development details'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define view entity ZC_2123_USER_DEV
  as projection on ZI_2123_user_dev
{
  key EmpId,
  key DevId,
  key SerialNo,
      ObjectType,
      ObjectName,
      _User : redirected to parent ZC_2123_USER
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;4. Metadata Extensions on top of Consumption view&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;&amp;nbsp;we will define metadata extension to change the look and feel of our app.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Parent View&lt;/STRONG&gt; : ZME_2123_USER&lt;/P&gt;&lt;P&gt;&lt;FONT color="#FF0000"&gt;&lt;STRONG&gt;Note: two action buttons have been defined here one for Upload and download Excel&amp;nbsp;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;identification: [{ type: #FOR_ACTION, label: 'Upload Data', dataAction: 'uploadExcelData' },
              { type: #FOR_ACTION, label: 'Download Excel', dataAction: 'DownloadExcel' },&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Complete Metadata extension&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
@UI.headerInfo:{
typeName: 'User',
typeNamePlural: 'Users',
title:{
   type: #STANDARD,
   value: 'EmpId' },
   description:{ value: 'DevId' }

    }
annotate entity ZC_2123_USER with
{
  .facet: [
  {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 10,
    targetQualifier: 'description'

  },
    {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 20,
    targetQualifier: 'fileStatus'

  },
     {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 25,
    targetQualifier: 'templateStatus'

  },
      {
  purpose: #HEADER,
    type: #DATAPOINT_REFERENCE,
    position: 30,
    targetQualifier: 'fileChanged'

  },
  {
  // this is a collection facet
   purpose: #STANDARD,
   type: #COLLECTION ,
   label: 'General Info',
   position: 10,
   id : 'idBasic'
  },
  {
  purpose: #STANDARD,
  type: #IDENTIFICATION_REFERENCE ,
  label: 'User Info',
  position: 10,
  id : 'idUser',
  parentId: 'idBasic'
  },
  {
  purpose: #STANDARD,
  type: #FIELDGROUP_REFERENCE ,
  label: 'Log Details',
  position: 20,
  id : 'idlogs',
  parentId: 'idBasic',
  targetQualifier: 'logs'
  },
  {
  purpose: #STANDARD,
  type: #LINEITEM_REFERENCE ,
  label: 'Developed Objects',
  position: 20,
  id : 'idDevObj',
  targetElement: '_UserDev'
  }
  ]
  :{lineItem: [{position: 10,importance: #HIGH , label: 'User Id'} ],
                 identification: [{ type: #FOR_ACTION, label: 'Upload Data', dataAction: 'uploadExcelData' },
                               { type: #FOR_ACTION, label: 'Download Excel', dataAction: 'DownloadExcel' },
                { position: 10,  label: 'User Id' }],
                selectionField: [{ position: 10}]
    }
  @EndUserText.label: 'User Id'
  EmpId;
  :{lineItem: [{position: 20,importance: #HIGH , label: 'Development Id'} ],
   selectionField: [{ position: 20 }],
    identification: [{ position: 20 , label: 'Development Id'}]
  }
  @EndUserText.label: 'Development Id'
  DevId;
  :{lineItem: [{position: 30,importance: #HIGH , label: 'Development Description'} ],
        dataPoint :{ qualifier: 'description' , title: 'Development Description'},
       identification: [{ position: 30 , label: 'Development Description'}]
  }
  DevDescription;
  .identification: [{ position: 40 , label: 'Choose Excel File'}]
  Attachment;
  :{lineItem: [{position: 55,importance: #HIGH , label: 'Template Status', criticality: 'TemplateCrticality'} ] ,
  dataPoint :{ qualifier: 'templateStatus' , title: 'Template Status',criticality: 'TemplateCrticality'}}
  TemplateStatus;
  :{lineItem: [{position: 40,importance: #HIGH , label: 'Excel Filename'} ]}
  Filename;
  :{lineItem: [{position: 50,importance: #HIGH , label: 'File Status', criticality: 'Criticality'} ] ,
   dataPoint :{ qualifier: 'fileStatus' , title: 'File Status',criticality: 'Criticality'}}
  FileStatus;
  :{lineItem: [{position: 60,importance: #HIGH , label: 'Last Changed At'} ],
  fieldGroup: [{ qualifier: 'logs', label: 'Last Changed At' , position: 20 }],
  dataPoint :{ qualifier: 'fileChanged' , title: 'Last Changed At'} }
  LocalLastChangedAt;
  :{lineItem: [{position: 70,importance: #HIGH , label: 'Created By'} ],
  fieldGroup: [{ qualifier: 'logs', label: 'Created By' , position: 10 }] }
  LocalCreatedBy;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Child View&lt;/STRONG&gt; : ZME_2123_USER_DEV&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
@UI.headerInfo : {
 typeName: 'Developed Object',
 typeNamePlural: 'Developed Objects',
 title: {
        type: #STANDARD,
        label: 'Development Id',
        value: 'DevId' // this will display as Header title
    },
 description : { value: 'ObjectName' } //this will be dispalyed below header title
}
annotate view ZC_2123_USER_DEV with
{

  .facet: [
   {
   purpose: #STANDARD,
   type: #IDENTIFICATION_REFERENCE ,
   label: 'Developed Objects',
   position: 10
   }]

  .hidden: true
  :{
   identification: [{ position: 10 , label: 'Employee Id'}]
  }
  EmpId;
  :{lineItem: [{position: 10,importance: #HIGH , label: 'Development Id' } ],
  identification: [{ position: 20 , label: 'Development Id'}]
    }
  DevId;
  :{lineItem: [{position: 1,importance: #HIGH , label: 'Serial No'} ]}
  SerialNo;
  :{lineItem: [{position: 20,importance: #HIGH , label: 'Object Type'} ],
  identification: [{ position: 30 , label: 'Object Type'}]
    }
  ObjectType;
  :{lineItem: [{position: 30,importance: #HIGH , label: 'Object Name'} ],
  identification: [{ position: 40 , label: 'Object Name'}]
    }
  ObjectName;
  .hidden: true
  _User;


}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;5. Create Service binding and service definition .&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;Note : I have created OData V2 - UI&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 143439.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329592i8DB4DFF5E69F5AA1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 143439.png" alt="Screenshot 2025-10-19 143439.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Preview the application and&amp;nbsp; we can see our application .&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 143955.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329593i6D9126321E10C29B/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 143955.png" alt="Screenshot 2025-10-19 143955.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;since we don't have any records for now , so&lt;STRONG&gt; No data found&lt;/STRONG&gt; is being displayed here.&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;&amp;nbsp;6. Behavior definition on Parent Interface view.&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_i_2123_user unique;
strict ( 2 );
define behavior for zi_2123_user alias User
persistent table zt2123_user
lock master
authorization master ( instance )
etag master LocalLastChangedAt
{
  create ( authorization : global );
  update;
  delete;
  field ( readonly : update ) EmpId, DevId;
  field ( readonly ) LocalCreatedBy, LocalLastChangedAt;
  field ( mandatory : create ) EmpId, DevId, DevDescription;
  association _UserDev { create ( features : instance ); }
  // Logic to read excel data into associated entity ZI_2123_User_Dev
  action ( features : instance ) uploadExcelData result [1] $self;
   action ( features : instance ) DownloadExcel result [1] $self;
  // Change File Status During Creation of new record
  determination FillFileStatus on modify { field EmpId, DevId; }
  // Change File Status When file is selected
  determination FillSelectedStatus on modify { field Attachment; }
  // for reloading ui after data has been uploaded
  side effects
  {
    field Attachment affects field FileStatus  ;
    action uploadExcelData affects $self, field _UserDev.*;
  }

mapping for zt2123_user
    {
      EmpId              = emp_id;
      DevId              = dev_id;
      DevDescription     = dev_description;
      Filename           = filename;
      Attachment         = attachment;
      Mimetype           = mimetype;
      FileStatus         = file_status;
      TemplateStatus     = template_status;
      LocalCreatedBy     = local_created_by;
      LocalCreatedAt     = local_created_at;
      LastChangedAt      = last_changed_at;
      LocalLastChangedAt = local_last_changed_at;
      LocalLastChangedBy = local_last_changed_by;
    }
}

define behavior for ZI_2123_user_dev alias UserDev
persistent table zt2123_user_dev
lock dependent by _User
authorization dependent by _User
//etag master
{
  update;
  delete;
  field ( readonly ) EmpId, DevId, SerialNo;
//  field ( readonly : update ) ObjectType , ObjectName ;
//  field ( mandatory : create ) ObjectName, ObjectType;
  association _User;
  mapping for zt2123_user_dev
    {
      EmpId      = emp_id;
      DevId      = dev_id;
      SerialNo   = serial_no;
      ObjectType = object_type;
      ObjectName = object_name;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Lets Break down the behavior definition.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Action buttons defined for Upload and download&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="2"&gt;&lt;STRONG&gt;&lt;EM&gt;feature instances as we want the button to be displayed dynamically .&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; // Logic to read excel data into associated entity ZI_2123_User_Dev
  action ( features : instance ) uploadExcelData result [1] $self;
// To download excel 
  action ( features : instance ) DownloadExcel result [1] $self;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Determination to change file status, file selection status and template status&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;// Change File Status During Creation of new record
  determination FillFileStatus on modify { field EmpId, DevId; }
  // Change File Status When file is selected
  determination FillSelectedStatus on modify { field Attachment; }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Side effects to reflect uploaded data simultaneously when upload button is pressed.&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  // for reloading ui after data has been uploaded
  side effects
  {
    field Attachment affects field FileStatus  ;
    action uploadExcelData affects $self, field _UserDev.*;
  }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;7. Behavior definition on Parent Consumption View&amp;nbsp;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );
use side effects;
define behavior for ZC_2123_USER alias User
{
  use create;
  use update;
  use delete;
  use action uploadExcelData;
  //  use  action UploadExcel;
  use action DownloadExcel;
//  use action TemplateDownload;
  use association _UserDev { create; }
}

define behavior for ZC_2123_USER_DEV alias UserDev
{
  use update;
  use delete;

  use association _User;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;8. Implementation class&lt;/STRONG&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Global behavior class&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zbp_i_2123_user DEFINITION PUBLIC ABSTRACT FINAL FOR BEHAVIOR OF zi_2123_user.
  PUBLIC SECTION.
    TYPES: BEGIN OF gty_exl_file,
             emp_id    TYPE string,
             dev_id    TYPE string,
             dev_desc  TYPE string,
             obj_type  TYPE string,
             obj_name  TYPE string,
             serial_no TYPE string,
           END OF gty_exl_file.
ENDCLASS.

CLASS zbp_i_2123_user IMPLEMENTATION.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Local handler class&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS lhc_User DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.

    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR User RESULT result.

    METHODS get_global_authorizations FOR GLOBAL AUTHORIZATION
      IMPORTING REQUEST requested_authorizations FOR User RESULT result.
    METHODS uploadExcelData FOR MODIFY
      IMPORTING keys FOR ACTION User~uploadExcelData RESULT result.
    METHODS get_instance_features FOR INSTANCE FEATURES
      IMPORTING keys REQUEST requested_features FOR User RESULT result.
    METHODS fillselectedstatus FOR DETERMINE ON MODIFY
      IMPORTING keys FOR user~fillselectedstatus.
    METHODS fillfilestatus FOR DETERMINE ON MODIFY
      IMPORTING keys FOR user~fillfilestatus.
    METHODS downloadexcel FOR MODIFY
      IMPORTING keys FOR ACTION user~downloadexcel RESULT result.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;FONT size="5"&gt;Method Implementation&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Download Excel&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; METHOD DownloadExcel.
    DATA: lt_template        TYPE STANDARD TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file.

    DATA(lo_write_access) = xco_cp_xlsx=&amp;gt;document-&amp;gt;empty( )-&amp;gt;write_access( ).
    DATA(lo_worksheet) = lo_write_access-&amp;gt;get_workbook(
        )-&amp;gt;worksheet-&amp;gt;at_position( 1 ).

    DATA(lo_selection_pattern) = xco_cp_xlsx_selection=&amp;gt;pattern_builder-&amp;gt;simple_from_to(
                               )-&amp;gt;from_column( xco_cp_xlsx=&amp;gt;coordinate-&amp;gt;for_alphabetic_value( 'A' )
                               )-&amp;gt;to_column( xco_cp_xlsx=&amp;gt;coordinate-&amp;gt;for_alphabetic_value( 'M' )
                               )-&amp;gt;from_row( xco_cp_xlsx=&amp;gt;coordinate-&amp;gt;for_numeric_value( 1 )
                               )-&amp;gt;get_pattern( ).

    lt_template = VALUE #( (
    emp_id = 'User Id'
    dev_id = 'Development Id'
    dev_desc = 'Development Description'
    obj_type = 'Object Type'
    obj_name = 'Object Name'
    ) ).

    lo_worksheet-&amp;gt;select( lo_selection_pattern
        )-&amp;gt;row_stream(
        )-&amp;gt;operation-&amp;gt;write_from( REF #( lt_template )
        )-&amp;gt;execute( ).

    DATA(lv_file_content) = lo_write_access-&amp;gt;get_file_content( ).

*  "Modify Root Entity
    MODIFY ENTITIES OF zi_2123_user IN LOCAL MODE
    ENTITY User
    UPDATE FROM VALUE #( FOR ls_key IN keys
       (
       EmpId      = ls_key-EmpId
       DevId      = ls_key-DevId
       Attachment = lv_file_content
       Filename   = 'template.xlsx'
       Mimetype   = 'application/vnd.ms-excel'
       %control-Attachment  = if_abap_behv=&amp;gt;mk-on
       %control-Filename   = if_abap_behv=&amp;gt;mk-on
       %control-Mimetype  = if_abap_behv=&amp;gt;mk-on
       ) )
    MAPPED DATA(ls_mapped_update)
    REPORTED DATA(ls_reported_update)
    FAILED DATA(ls_failed_update).

*    "Read Updated Entry
    READ ENTITIES OF zi_2123_user IN LOCAL MODE
    ENTITY  User
    ALL FIELDS WITH
    CORRESPONDING #( Keys )
    RESULT DATA(lt_User).
*    "Update File Status
    LOOP AT lt_User INTO DATA(ls_user).
      MODIFY ENTITIES OF ZI_2123_user IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( FileStatus TemplateStatus )
      WITH VALUE #( (
          %tky                  = ls_user-%tky
          %data-FileStatus      = 'File not Selected'
          %data-TemplateStatus      = 'Present'
          %control-FileStatus   = if_abap_behv=&amp;gt;mk-on
          %control-TemplateStatus   = if_abap_behv=&amp;gt;mk-on
          ) )
          MAPPED DATA(ls_mapped_status)
    REPORTED DATA(ls_reported_status)
    FAILED DATA(ls_failed_status).
    ENDLOOP.


    "Send Status back to front end
    result = VALUE #( FOR ls_upd_user IN lt_User
                      ( %tky   = ls_upd_user-%tky
                        %param = ls_upd_user
                        ) ).

    IF ls_failed_update IS INITIAL.
   reported = VALUE #( BASE reported user = VALUE #( ( %tky = keys[ 1 ]-%tky
    %msg = new_message_with_text( severity =                                                   if_abap_behv_message=&amp;gt;severity-success
                     text = 'Template Available.' )

                                                                    ) )  ).
    ENDIF.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Upload Excel Data&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD uploadExcelData.
    DATA: lt_rows         TYPE STANDARD TABLE OF string,
          lv_content      TYPE string,
          lo_table_descr  TYPE REF TO cl_abap_tabledescr,
          lo_struct_descr TYPE REF TO cl_abap_structdescr,
          lt_excel        TYPE STANDARD TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file,
          lt_excel_temp   TYPE STANDARD TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file,
          lt_excel_filter TYPE SORTED TABLE OF zbp_i_2123_user=&amp;gt;gty_exl_file WITH UNIQUE KEY emp_id dev_id,
          lt_data         TYPE TABLE FOR CREATE zi_2123_user\_UserDev,
          lv_index        TYPE sy-index.


    FIELD-SYMBOLS: &amp;lt;lfs_col_header&amp;gt; TYPE string.

    DATA(lv_user) = cl_abap_context_info=&amp;gt;get_user_technical_name( ).

    READ ENTITIES OF zi_2123_user IN LOCAL MODE
    ENTITY User
    ALL FIELDS WITH CORRESPONDING #( keys )
    RESULT DATA(lt_file_entity).

    DATA(lv_attachment) = lt_file_entity[ 1 ]-attachment.
    CHECK lv_attachment IS NOT INITIAL.

    "Move Excel Data to Internal Table
    DATA(lo_xlsx)      = xco_cp_xlsx=&amp;gt;document-&amp;gt;for_file_content( iv_file_content = lv_attachment )-&amp;gt;read_access( ).
    DATA(lo_worksheet) = lo_xlsx-&amp;gt;get_workbook( )-&amp;gt;worksheet-&amp;gt;at_position( 1 ).
    DATA(lo_selection_pattern) = xco_cp_xlsx_selection=&amp;gt;pattern_builder-&amp;gt;simple_from_to( )-&amp;gt;get_pattern( ).
    DATA(lo_execute) = lo_worksheet-&amp;gt;select( lo_selection_pattern )-&amp;gt;row_stream( )-&amp;gt;operation-&amp;gt;write_to(
                                                                                   REF #( lt_excel_temp ) ).
    lo_execute-&amp;gt;set_value_transformation(
        xco_cp_xlsx_read_access=&amp;gt;value_transformation-&amp;gt;string_value )-&amp;gt;if_xco_xlsx_ra_operation~execute( ).

    " Get number of columns in upload file for validation
    TRY.
        lo_table_descr ?= cl_abap_tabledescr=&amp;gt;describe_by_data( p_data = lt_excel_temp ).
        lo_struct_descr ?= lo_table_descr-&amp;gt;get_table_line_type( ).
        DATA(lv_no_of_cols) = lines( lo_struct_descr-&amp;gt;components ).
      CATCH cx_sy_move_cast_error.
        "Implement error handling
    ENDTRY.

    "Validate Header record
    DATA(ls_excel) = VALUE #( lt_excel_temp[ 1 ] OPTIONAL ).
    IF ls_excel IS NOT INITIAL.
      DO lv_no_of_cols TIMES.
        lv_index = sy-index.
        ASSIGN COMPONENT lv_index OF STRUCTURE ls_excel TO &amp;lt;lfs_col_header&amp;gt;.
        CHECK &amp;lt;lfs_col_header&amp;gt; IS ASSIGNED.
        DATA(lv_value) =  to_upper(  &amp;lt;lfs_col_header&amp;gt; ) .
        DATA(lv_has_error) = abap_false.
        CASE lv_index.
          WHEN 1.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'USER ID' THEN abap_true ELSE lv_has_error ).
          WHEN 2.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'DEVELOPMENT ID' THEN abap_true ELSE lv_has_error ).
          WHEN 3.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'DEVELOPMENT DESCRIPTION' THEN abap_true ELSE lv_has_error ).
          WHEN 4.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'OBJECT TYPE' THEN abap_true ELSE lv_has_error ).
          WHEN 5.
            lv_has_error = COND #( WHEN lv_value &amp;lt;&amp;gt; 'OBJECT NAME' THEN abap_true ELSE lv_has_error ).
          WHEN 9. "More than 7 columns (error)
            lv_has_error = abap_true.
        ENDCASE.
        IF lv_has_error = abap_true.
          APPEND VALUE #( %tky = lt_file_entity[ 1 ]-%tky ) TO failed-user.
          APPEND VALUE #(
            %tky = lt_file_entity[ 1 ]-%tky
            %msg = new_message_with_text(
                     severity = if_abap_behv_message=&amp;gt;severity-error
                     text     = 'One or more heading is incorrect !!' )
          ) TO reported-user.
          UNASSIGN &amp;lt;lfs_col_header&amp;gt;.
          EXIT.
        ENDIF.
        UNASSIGN &amp;lt;lfs_col_header&amp;gt;.
      ENDDO.
    ENDIF.
    CHECK lv_has_error = abap_false.

    DELETE lt_excel_temp INDEX 1.
    DELETE lt_excel_temp WHERE emp_id  IS INITIAL AND dev_id IS INITIAL.
    " Filter with current dev id details
    lt_excel_filter = VALUE #( ( emp_id = keys[ 1 ]-EmpId dev_id = keys[ 1 ]-DevId ) ).
    " excel data with  current dev id details
    lt_excel = FILTER #( lt_excel_temp IN lt_excel_filter WHERE emp_id = emp_id AND dev_id = dev_id ).
    IF lt_excel IS  INITIAL.

      reported = VALUE #( BASE reported user = VALUE #( ( %tky = keys[ 1 ]-%tky
                                                                        %msg = new_message_with_text( severity =
                                                                        if_abap_behv_message=&amp;gt;severity-error
                                                                        text = 'Trying to insert Invalid /Blank Values.' )
                                                                      ) )  ).
    ELSE.
      "Fill serial number
      LOOP AT lt_excel ASSIGNING FIELD-SYMBOL(&amp;lt;lfs_excel&amp;gt;).
        &amp;lt;lfs_excel&amp;gt;-serial_no = sy-tabix.
      ENDLOOP.

      "Prepare Data for  Child Entity (UserDev)
      lt_data = VALUE #(
          (   %cid_ref  = keys[ 1 ]-%cid_ref
              EmpId   = keys[ 1 ]-EmpId
              DevId    = keys[ 1 ]-DevId
              %target   = VALUE #(
                               FOR lwa_excel IN lt_excel (
                                    %cid         = keys[ 1 ]-%cid_ref
                                    %data = VALUE #(
                                                     EmpId = keys[ 1 ]-EmpId
                                                     DevId = keys[ 1 ]-DevId
                                                     SerialNo = lwa_excel-serial_no
                                                     ObjectType = lwa_excel-obj_type
                                                     ObjectName = lwa_excel-obj_name
                                                  )
                                     %control = VALUE #(
                                                     EmpId = if_abap_behv=&amp;gt;mk-on
                                                     DevId = if_abap_behv=&amp;gt;mk-on
                                                     SerialNo = if_abap_behv=&amp;gt;mk-on
                                                     ObjectType = if_abap_behv=&amp;gt;mk-on
                                                     ObjectName = if_abap_behv=&amp;gt;mk-on

                                        )
                      ) ) ) ).

      "Delete Existing entry for user if any
      READ ENTITIES OF zi_2123_user IN LOCAL MODE
      ENTITY User BY \_UserDev
      ALL FIELDS WITH CORRESPONDING #( keys )
      RESULT DATA(lt_existing_UserDev).

      IF lt_existing_UserDev IS NOT INITIAL.
        MODIFY ENTITIES OF zi_2123_user IN LOCAL MODE
        ENTITY UserDev DELETE FROM VALUE #(
          FOR lwa_data IN lt_existing_UserDev (
            %key        = lwa_data-%key
          )
        )
        MAPPED DATA(lt_del_mapped)
        REPORTED DATA(lt_del_reported)
        FAILED DATA(lt_del_failed).
      ENDIF.

      "Add New Entry for XLData (association)
      MODIFY ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User CREATE BY \_UserDev
      AUTO FILL CID WITH lt_data.

*    "Modify Status
      MODIFY ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User
      UPDATE FROM VALUE #(  (
          %tky        = lt_file_entity[ 1 ]-%tky "keys[ 1 ]-%tky
          FileStatus  = 'Excel Uploaded'
          %control-FileStatus = if_abap_behv=&amp;gt;mk-on ) )
      MAPPED DATA(lt_upd_mapped)
      FAILED DATA(lt_upd_failed)
      REPORTED DATA(lt_upd_reported).

      "Read Updated Entry
      READ ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User ALL FIELDS WITH CORRESPONDING #( Keys )
      RESULT DATA(lt_updated_User).

      "Send Status back to front end
      result = VALUE #(
        FOR lwa_upd_head IN lt_updated_User (
          %tky    = lwa_upd_head-%tky
          %param  = lwa_upd_head
        )
      ).
      IF lt_upd_failed IS INITIAL.
   reported = VALUE #( BASE reported user = VALUE #( ( %tky = keys[ 1 ]-%tky
 %msg = new_message_with_text( severity =                                                                 if_abap_behv_message=&amp;gt;severity-success
                       text = 'Excel Uploaded Successfully.' )
  ) )  ).
      ENDIF.
    ENDIF.
  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;File status&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD FillFileStatus.
    "Read the data to be modified
    READ ENTITIES OF ZI_2123_User IN LOCAL MODE
    ENTITY User FIELDS ( EmpId DevId FileStatus )
    WITH CORRESPONDING #( keys )
    RESULT DATA(lt_user).

    "Update File Status
    LOOP AT lt_user INTO DATA(ls_user).
      MODIFY ENTITIES OF ZI_2123_User IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( FileStatus TemplateStatus )
      WITH VALUE #( (
          %tky                  = ls_user-%tky
          %data-FileStatus      = 'File not Selected'
          %data-TemplateStatus      = 'Absent'
          %control-FileStatus   = if_abap_behv=&amp;gt;mk-on
           %control-TemplateStatus   = if_abap_behv=&amp;gt;mk-on
          ) ).
    ENDLOOP.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;File selection status&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD FillSelectedStatus.
    "Read XL_Head Entities and change file status
    READ ENTITIES OF ZI_2123_user IN LOCAL MODE
    ENTITY User ALL FIELDS WITH CORRESPONDING #( keys )
    RESULT DATA(lt_User).

    "Update File Status
    LOOP AT lt_User INTO DATA(ls_user).
      MODIFY ENTITIES OF ZI_2123_user IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( FileStatus TemplateStatus  )
      WITH VALUE #( (
          %tky                  = ls_user-%tky
          %data-FileStatus      = COND #(
                                    WHEN ls_user-Attachment IS INITIAL
                                    THEN 'File not Selected'
                                    ELSE 'File Selected' )
          %control-FileStatus   = if_abap_behv=&amp;gt;mk-on
          ) ).
    ENDLOOP.

    READ ENTITIES OF ZI_2123_user IN LOCAL MODE
  ENTITY User ALL FIELDS WITH CORRESPONDING #( keys )
  RESULT DATA(lt_User_updated).
    "Update template Status
    LOOP AT lt_User_updated INTO DATA(ls_user_updated).
      MODIFY ENTITIES OF ZI_2123_user IN LOCAL MODE
      ENTITY User
      UPDATE FIELDS ( TemplateStatus  )
      WITH VALUE #( (
                    %tky                = ls_user-%tky
                    %data-TemplateStatus = COND #(
                                    WHEN ls_user-Attachment IS NOT INITIAL
                                    THEN COND #( WHEN ls_user-FileStatus = 'File Selected' THEN ' ' )
                                    ELSE 'Absent'

                                     )
          %control-TemplateStatus   = if_abap_behv=&amp;gt;mk-on

          ) ).
    ENDLOOP.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Global Feature Instance&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;to enable upload / download and create buttons dynamically&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; METHOD get_instance_features.
    READ ENTITIES OF zi_2123_user IN LOCAL MODE ENTITY User
    FIELDS ( EmpId DevId FileStatus TemplateStatus ) WITH CORRESPONDING #( keys )
    RESULT DATA(lt_users) FAILED failed.


    result = VALUE #( FOR user IN lt_users
                      LET uploadBtn = COND #( WHEN user-FileStatus = 'File Selected'
                                             THEN if_abap_behv=&amp;gt;fc-o-enabled
                                             ELSE if_abap_behv=&amp;gt;fc-o-disabled )
                         DownloadTemplate = COND #( WHEN user-TemplateStatus = 'Absent'
                                             THEN if_abap_behv=&amp;gt;fc-o-enabled
                                             ELSE if_abap_behv=&amp;gt;fc-o-disabled )
                      IN
                                            ( %tky = user-%tky
                                             %assoc-_UserDev = if_abap_behv=&amp;gt;fc-o-disabled
                                             %action-uploadExcelData = uploadBtn
                                             %action-DownloadExcel = DownloadTemplate
                                            ) ).

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;now our app is ready . Lets create one record and see&lt;/P&gt;&lt;P&gt;we can see initially that Template is absent&amp;nbsp; &amp;nbsp;and no file is selected.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 144043.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329595iE407722AC288D1A6/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 144043.png" alt="Screenshot 2025-10-19 144043.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Lets Download Template . We can see &lt;EM&gt;&lt;STRONG&gt;template.xlsx&lt;/STRONG&gt;&lt;/EM&gt;&amp;nbsp; now exists in attachment and template status changes to &lt;STRONG&gt;Present&lt;/STRONG&gt; and &lt;STRONG&gt;download excel&lt;/STRONG&gt; button disappears as template exist .&amp;nbsp; Remove the the template and you can see &lt;STRONG&gt;download button&lt;/STRONG&gt; again .&lt;BR /&gt;Also &lt;STRONG&gt;file not selected&lt;/STRONG&gt; as this is empty file . If you remove and upload it again , status will change to &lt;STRONG&gt;File selected.&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 151444.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329604i304DAEB536CB8C73/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 151444.png" alt="Screenshot 2025-10-19 151444.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Download Template with predefined header&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 151519.png" style="width: 898px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329597iAE0485F25F14E0F2/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 151519.png" alt="Screenshot 2025-10-19 151519.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;Fill the excel . Make sure&lt;STRONG&gt; user id&lt;/STRONG&gt; and &lt;STRONG&gt;development id&lt;/STRONG&gt;&amp;nbsp;should match with the record where you will upload data. Other wise it will throw error.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 151659.png" style="width: 892px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329598iAEE3C1D8888BD294/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 151659.png" alt="Screenshot 2025-10-19 151659.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Choose the filled&amp;nbsp; file and you can see &lt;STRONG&gt;upload excel&lt;/STRONG&gt; button appears.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Screenshot 2025-10-19 152348.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329601iFB309DD519F9D33A/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 152348.png" alt="Screenshot 2025-10-19 152348.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Press upload and data will be reflected.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="Screenshot 2025-10-19 152502.jpg" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/329603i5A2933FF9512FD61/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Screenshot 2025-10-19 152502.jpg" alt="Screenshot 2025-10-19 152502.jpg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Hope this will be helpful.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/rap-excel-upload-and-download-excel-using-rap-only/ba-p/14247979"/>
    <published>2025-11-13T05:19:33.199000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/creating-custom-scalar-functions-in-abap-cds/ba-p/14263349</id>
    <title>Creating custom Scalar functions in ABAP CDS</title>
    <updated>2025-11-13T06:19:30.582000+01:00</updated>
    <author>
      <name>sanjay22</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1535416</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;A CDS Scalar function &lt;/SPAN&gt;&lt;SPAN class=""&gt;( This&lt;/SPAN&gt;&lt;SPAN class=""&gt; feature is supported as of SAP S/4HANA 2023 FPS &lt;/SPAN&gt;&lt;SPAN class=""&gt;00 )&lt;/SPAN&gt;&lt;SPAN class=""&gt; allows us to define a custom function directly on SAP HANA database using SQLSCRIPT and then reuse it in CDS view entities.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;There are 3 parts in CDS scalar function -&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;A CDS scalar function definition ‚Äî this defines the Definition of Scalar function i.e, in and out parameters.&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp; &amp;nbsp;&lt;/SPAN&gt;There will be one or many input parameters and exactly one output parameter.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_0-1762586702308.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337448iB9A97E1C37CEA0F2/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_0-1762586702308.png" alt="sanjay22_0-1762586702308.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_1-1762586730253.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337449i061B6EB8E6B8F0F7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_1-1762586730253.png" alt="sanjay22_1-1762586730253.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_2-1762586746025.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337450i008B4102C9E0D3CF/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_2-1762586746025.png" alt="sanjay22_2-1762586746025.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Let's&lt;/SPAN&gt;&lt;SPAN class=""&gt; make this a &lt;/SPAN&gt;&lt;SPAN class=""&gt;CDS&lt;/SPAN&gt;&lt;SPAN class=""&gt; scalar function which will accept a date and returns respective weekday value( Mon, Tue, Wed, Thu, Fri, Sat ).&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_3-1762586767578.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337451i03AB4B8609C7EEB7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_3-1762586767578.png" alt="sanjay22_3-1762586767578.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;2.&amp;nbsp;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Define the CDS scalar function implementation reference. &lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;This refer to an AMDP class and method having the logic. This part &lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;won‚Äôt&lt;/SPAN&gt;&lt;SPAN class=""&gt; have actual implementation.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;It follows the scalar function name followed by _SQL&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_4-1762586821706.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337452iEB5071D3E90AA03C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_4-1762586821706.png" alt="sanjay22_4-1762586821706.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_5-1762586853274.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337453i2070C133A1BB7391/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_5-1762586853274.png" alt="sanjay22_5-1762586853274.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Click on next and provide an AMDP class and its method which will hold the implementation logic.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_6-1762586876531.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337454i5F14FBEC0B12D29D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_6-1762586876531.png" alt="sanjay22_6-1762586876531.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;3) Next,&lt;/SPAN&gt; &lt;SPAN class=""&gt;lets&lt;/SPAN&gt; &lt;SPAN class=""&gt;create our AMDP class (ZCL_AMDP_SF) and a static method (&lt;/SPAN&gt;&lt;SPAN class=""&gt;get_weekday&lt;/SPAN&gt;&lt;SPAN class=""&gt;).&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_7-1762586902712.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337455i386F37ACEE4523FF/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_7-1762586902712.png" alt="sanjay22_7-1762586902712.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Here below is the code for AMDP class and method.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_amdp_sf DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    INTERFACES if_amdp_marker_hdb.
    CLASS-METHODS get_weekday FOR SCALAR FUNCTION zcds_scalar_func.

  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.



CLASS zcl_amdp_sf IMPLEMENTATION.
  METHOD get_weekday BY DATABASE FUNCTION FOR HDB LANGUAGE SQLSCRIPT OPTIONS READ-ONLY.

    declare weekday_num int;
    weekday_num := weekday( input_Date );
    IF :weekday_num = 0 THEN result = 'MON'; END if;
    IF :weekday_num = 1 THEN result = 'TUE'; END if;
    IF :weekday_num = 2 THEN result = 'WED'; END if;
    IF :weekday_num = 3 THEN result = 'THU'; END if;
    IF :weekday_num = 4 THEN result = 'FRI'; END if;
    IF :weekday_num = 5 THEN result = 'SAT'; END if;
    IF :weekday_num = 6 THEN result = 'SUN'; END if;
  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;In the &lt;/SPAN&gt;&lt;SPAN class=""&gt;implementation ,&lt;/SPAN&gt;&lt;SPAN class=""&gt; we have added logic to find the number as per input date and using if else &lt;/SPAN&gt;&lt;SPAN class=""&gt;logic ,&lt;/SPAN&gt;&lt;SPAN class=""&gt; we are providing 3 char weekday &lt;/SPAN&gt;&lt;SPAN class=""&gt;name&lt;/SPAN&gt;&lt;SPAN class=""&gt; for same.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;To test this, we &lt;/SPAN&gt;&lt;SPAN class=""&gt;have to&lt;/SPAN&gt;&lt;SPAN class=""&gt; create another CDS view which will call this CDS scalar function.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_0-1762754576253.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337709iC3A67657FD3255A1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_0-1762754576253.png" alt="sanjay22_0-1762754576253.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Let‚Äôs&lt;/SPAN&gt;&lt;SPAN class=""&gt; execute the CDS view to get output of Scalar function.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sanjay22_9-1762587008893.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/337457iE9C022146B005E9F/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="sanjay22_9-1762587008893.png" alt="sanjay22_9-1762587008893.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/creating-custom-scalar-functions-in-abap-cds/ba-p/14263349"/>
    <published>2025-11-13T06:19:30.582000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/creating-sales-orders-in-s-4hana-using-rap-bo-amp-eml-step-by-step-guide/ba-p/14267675</id>
    <title>Creating Sales Orders in S/4HANA Using RAP BO &amp; EML ‚Äì Step-by-Step Guide</title>
    <updated>2025-11-18T06:33:37.546000+01:00</updated>
    <author>
      <name>Sudhanshu07</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1675459</uri>
    </author>
    <content>&lt;P&gt;In modern SAP landscapes, integration plays a key role. Businesses often need to create &lt;STRONG&gt;Sales Orders&lt;/STRONG&gt; automatically from external systems like &lt;STRONG&gt;e-commerce platforms, mobile apps, or middleware (CPI/PO)&lt;/STRONG&gt; ‚Äî without manual effort in transactions like &lt;STRONG&gt;VA01&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Traditionally, developers used &lt;STRONG&gt;BAPIs (e.g., BAPI_SALESORDER_CREATEFROMDAT2)&lt;/STRONG&gt; or custom RFCs to achieve this. While functional, these approaches are &lt;STRONG&gt;not clean-core compliant&lt;/STRONG&gt;, hard to maintain, and don‚Äôt align with &lt;STRONG&gt;SAP‚Äôs future-ready development model&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;In this blog, we‚Äôll see how to achieve the same goal ‚Äî &lt;STRONG&gt;create Sales Orders programmatically&lt;/STRONG&gt; ‚Äî but in a &lt;STRONG&gt;modern and upgrade-safe way&lt;/STRONG&gt; using:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;RAP BO (Business Object)&lt;/STRONG&gt; for clean-core, model-driven design&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;EML (Entity Manipulation Language)&lt;/STRONG&gt; for easy create/update operations&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;REST Framework&lt;/STRONG&gt; to expose our logic as a lightweight, consumable API&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Why we are doing this:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;To allow &lt;STRONG&gt;external systems&lt;/STRONG&gt; to create Sales Orders directly in SAP via an API&lt;/LI&gt;&lt;LI&gt;To follow &lt;STRONG&gt;SAP Clean Core&lt;/STRONG&gt; principles ‚Äî no direct DB or BAPI calls&lt;/LI&gt;&lt;LI&gt;To enable &lt;STRONG&gt;reusable, testable, and upgrade-safe&lt;/STRONG&gt; backend logic&lt;/LI&gt;&lt;LI&gt;To demonstrate how &lt;STRONG&gt;RAP and EML&lt;/STRONG&gt; can replace traditional coding patterns&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Benefits:&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&amp;nbsp;Fully &lt;STRONG&gt;OData/REST compliant&lt;/STRONG&gt; and can be consumed by any system&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&lt;STRONG&gt;Clean-core compatible&lt;/STRONG&gt; ‚Äì future-proof against upgrades&lt;BR /&gt;&amp;nbsp;Uses &lt;STRONG&gt;standard RAP BO (I_SalesOrderTP)&lt;/STRONG&gt; ‚Äì minimal custom logic&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&lt;STRONG&gt;Lightweight &amp;amp; fast&lt;/STRONG&gt; ‚Äì no heavy RFC/BAPI dependency&lt;BR /&gt;&amp;nbsp;Easy to extend ‚Äì can include partners, pricing, schedule lines later&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&amp;nbsp;&lt;STRONG&gt;Note:&lt;/STRONG&gt;&lt;BR /&gt;SAP provides standard Sales Order APIs in the &lt;STRONG&gt;SAP Business Accelerator Hub&lt;/STRONG&gt;, but here we‚Äôll focus on &lt;STRONG&gt;building our own&lt;/STRONG&gt; lightweight API using &lt;STRONG&gt;RAP BO and EML&lt;/STRONG&gt;, purely for learning and flexibility.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Prerequisites&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Before you begin, ensure:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;You have access to an &lt;STRONG&gt;S/4HANA system&lt;/STRONG&gt; (2020+ recommended)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;RAP model&lt;/STRONG&gt; and &lt;STRONG&gt;Service Binding&lt;/STRONG&gt; are configured&lt;/LI&gt;&lt;LI&gt;The service endpoint is &lt;STRONG&gt;active and reachable&lt;/STRONG&gt; in /IWFND/MAINT_SERVICE&lt;/LI&gt;&lt;LI&gt;You understand basic &lt;STRONG&gt;ABAP classes and interfaces&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;What We‚Äôll Build&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We‚Äôll create:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;A &lt;STRONG&gt;REST API&lt;/STRONG&gt; to trigger Sales Order creation&lt;/LI&gt;&lt;LI&gt;Backend logic that uses &lt;STRONG&gt;RAP BO&lt;/STRONG&gt; and &lt;STRONG&gt;EML&lt;/STRONG&gt; to insert data&lt;/LI&gt;&lt;LI&gt;A &lt;STRONG&gt;JSON payload/response&lt;/STRONG&gt; for easy integration with other systems&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;RAP BO Used&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;I_SalesOrderTP&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Object Directory Entries Created&lt;/STRONG&gt;&lt;/P&gt;&lt;TABLE&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;&lt;STRONG&gt;Object Name&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;&lt;STRONG&gt;Type&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;&lt;STRONG&gt;Description&lt;/STRONG&gt;&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;ZS4CL_DEMO_SO_HANDLE&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Class&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;HTTP Handler (API entry point)&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;ZS4CL_DEMO_SO_RESOURCE&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Class&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Resource class containing business logic&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;P&gt;REST API&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Service&lt;/P&gt;&lt;/TD&gt;&lt;TD&gt;&lt;P&gt;Endpoint exposed for external consumption&lt;/P&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Step 1 ‚Äì Create HTTP Handler Class: ZS4CL_DEMO_SO_HANDLE&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This class will handle all incoming API requests and route them to our main business logic class.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Implementation&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zs4cl_demo_so_handle DEFINITION PUBLIC INHERITING FROM cl_rest_http_handler.

  PUBLIC SECTION.

    METHODS if_rest_http_handler~get_root_handler REDEFINITION.

ENDCLASS.



CLASS zs4cl_demo_so_handle IMPLEMENTATION.

  METHOD if_rest_http_handler~get_root_handler.

    DATA(lo_router) = NEW cl_rest_router( ).

    lo_router-&amp;gt;attach(

      iv_template = space

      iv_handler_class = 'ZS4CL_DEMO_SO_RESOURCE'

    ).

    ro_root_handler = lo_router.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;What this does:&lt;/STRONG&gt;&lt;BR /&gt;This class doesn‚Äôt perform any business logic itself ‚Äî it simply routes incoming API calls to the &lt;STRONG&gt;resource class&lt;/STRONG&gt;, where we‚Äôll handle them.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Step 2 ‚Äì Create Resource Class: ZS4CL_DEMO_SO_RESOURCE&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This is where all the fun happens!&lt;BR /&gt;We‚Äôll redefine two methods:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;IF_REST_RESOURCE~GET ‚Üí Get call for CSRF token ( no code required )&lt;/LI&gt;&lt;LI&gt;IF_REST_RESOURCE~POST ‚Üí Our main logic for creating the Sales Order&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Define the Data Structures&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;We‚Äôll define a local structure to hold the JSON request data:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TYPES: BEGIN OF ty_so_create_rap_bo,

         SalesOrderHeader             TYPE I_SalesOrderTP,

         SalesOrderItem               TYPE I_SalesOrderItemTP,

       END OF ty_so_create_rap_bo.



DATA: BEGIN OF ls_response,

        status     TYPE string,

        salesOrder TYPE I_SalesOrderTP-salesorder,

        message    TYPE string,

      END OF ls_response.

 Deserialize Incoming JSON Request

When the API is called, it will send data in JSON format.
We‚Äôll read and convert that JSON into an ABAP structure:

DATA(lv_request_serialize) = mo_request-&amp;gt;get_entity( )-&amp;gt;get_string_data( ).



/ui2/cl_json=&amp;gt;deserialize(

  EXPORTING json = lv_request_serialize

  CHANGING  data = ls_sales_order_payload_rap_bo

).&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Create Sales Order Using EML&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Here we use &lt;STRONG&gt;EML (Entity Manipulation Language)&lt;/STRONG&gt; to insert a Sales Order and its item in one go.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;MODIFY ENTITIES OF i_salesordertp

  ENTITY salesorder

  CREATE FIELDS ( salesordertype salesorganization distributionchannel organizationdivision soldtoparty )

  WITH VALUE #( ( %cid = 'H001'

                  %data = VALUE #(

                    salesordertype        = ls_so_header-salesordertype

                    salesorganization     = ls_so_header-salesorganization

                    distributionchannel   = ls_so_header-distributionchannel

                    organizationdivision  = ls_so_header-organizationdivision

                    soldtoparty           = ls_so_header-soldtoparty

                  ) ) )



  CREATE BY item

  FIELDS ( product requestedquantity )

  WITH VALUE #( ( %cid_ref = 'H001'

                  %target = VALUE #( ( %cid = 'I001'

                                       product = ls_so_item-product

                                       requestedquantity = ls_so_item-requestedquantity ) ) ) )



  MAPPED DATA(ls_mapped)

  FAILED DATA(ls_failed)

  REPORTED DATA(ls_reported_modify).

 Commit and Return Response

Once the Sales Order is created successfully, we commit the entities and send a response back to the API caller.

COMMIT ENTITIES BEGIN

  RESPONSE OF i_salesordertp

  FAILED DATA(ls_save_failed)

  REPORTED DATA(ls_save_reported).



IF ls_save_failed-salesorder IS INITIAL.

  ls_response-message = 'Order Created'.

  ls_response-salesorder = ls_mapped-salesorderitem[ 1 ]-salesorder.

  io_entity-&amp;gt;set_header_field( iv_name = 'status' iv_value = '200' ).

ELSE.

  ls_response-message = 'Failed due to data issue'.

  io_entity-&amp;gt;set_header_field( iv_name = 'status' iv_value = '400' ).

ENDIF.



COMMIT ENTITIES END.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Finally, send a JSON response:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;DATA(json_response) = /ui2/cl_json=&amp;gt;serialize( data = ls_response ).

mo_response-&amp;gt;create_entity( )-&amp;gt;set_string_data( json_response ).

mo_response-&amp;gt;set_header_field(

  iv_name  = 'Content-Type',

  iv_value = 'application/json'

).&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Sample JSON Payload&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Here‚Äôs what your external system (like Postman or CPI) will send:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;{

  "SalesOrderHeader": {

    "SalesOrderType": "ZBV1",

    "SalesOrganization": "0700",

    "DistributionChannel": "B1",

    "OrganizationDivision": "00",

    "SoldToParty": "0004100648",

    "RequestedDeliveryDate": "20250923"

  },

  "SalesOrderItem": {

    "Product": "000000000000040078",

    "RequestedQuantity": "1"

  }

}

Sample Response

Success:

{

  "status": "200",

  "salesOrder": "0000123456",

  "message": "Order Created"

}

Failure:

{

  "status": "400",

  "message": "Failed due to data issue"

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":direct_hit:"&gt;üéØ&lt;/span&gt;Summary&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In this blog, we learned how to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Create a &lt;STRONG&gt;custom REST API&lt;/STRONG&gt; for Sales Order creation&lt;/LI&gt;&lt;LI&gt;Use &lt;STRONG&gt;RAP BO (I_SalesOrderTP)&lt;/STRONG&gt; and &lt;STRONG&gt;EML&lt;/STRONG&gt; for clean-core logic&lt;/LI&gt;&lt;LI&gt;Handle &lt;STRONG&gt;JSON serialization/deserialization&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Return structured &lt;STRONG&gt;HTTP responses&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This approach is &lt;STRONG&gt;clean-core compliant&lt;/STRONG&gt;, &lt;STRONG&gt;future-proof&lt;/STRONG&gt;, and easily &lt;STRONG&gt;extendable&lt;/STRONG&gt; for real-world business needs.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":wrench:"&gt;üîß&lt;/span&gt;Next Steps&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;If you want to take this further:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Add authentication (e.g., OAuth 2.0 or Basic Auth)&lt;/LI&gt;&lt;LI&gt;Extend your RAP BO to include &lt;STRONG&gt;partners, pricing, schedule lines&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Add &lt;STRONG&gt;error handling&lt;/STRONG&gt; and detailed &lt;STRONG&gt;logging&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Expose this API securely to &lt;STRONG&gt;SAP BTP&lt;/STRONG&gt; or &lt;STRONG&gt;external systems&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Using RAP and EML, we can build lightweight, modern, and scalable APIs directly in S/4HANA ‚Äî without breaking the clean-core principle.&lt;BR /&gt;This approach bridges traditional ABAP development with modern REST API design, giving us flexibility and control.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/creating-sales-orders-in-s-4hana-using-rap-bo-amp-eml-step-by-step-guide/ba-p/14267675"/>
    <published>2025-11-18T06:33:37.546000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-1/ba-p/14271885</id>
    <title>Collective Value Helps in RAP: V2 and V4 Implementation Guide - Part 1</title>
    <updated>2025-11-18T15:16:20.147000+01:00</updated>
    <author>
      <name>Abhinav_Roy</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1109</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;Collective Search Helps&lt;/STRONG&gt; in RAP have gained attention in recent community discussions. This comprehensive &lt;STRONG&gt;two-part series&lt;/STRONG&gt; explores collective search helps across both V2 and V4 service expositions, highlighting critical implementation differences and architectural considerations. &lt;STRONG&gt;Part 2&lt;/STRONG&gt; introduces an advanced hierarchical collective search help pattern for complex business scenarios‚Äîa solution not adequately documented yet in the SAP ecosystem.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Watch the demonstration video below to see collective search helps in action&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt; - including template switching, multi-criteria search, and nested value help scenarios. The video showcases how users can seamlessly switch between different search templates (Technical Object Data, Maintenance Data, Asset Data, Address Data) and demonstrates the nested collective value help pattern where one value help (Equipment) utilizes another (Functional Location) within its selection fields.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;A &lt;STRONG&gt;Collective Value Help&lt;/STRONG&gt; is a reusable model that groups&amp;nbsp;multiple&amp;nbsp;elementary value helps. If assigned as a value help provider, it allows the end user to search for values for a particular field in an application, across different search templates and select one or multiple values in the process. This pattern is particularly powerful for complex business objects requiring multi-criteria search capabilities. These are the RAP equivalent of traditional collective search helps in the SAPGUI world.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This article uses master data artifacts from Asset Management area‚Äîspecifically Technical Objects, which comprise Equipment and Functional Locations. This scenario is ideal for collective search helps because users often need to search technical objects using different criteria: by object attributes, maintenance data, asset classification, or address information.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Below are the screenshots demonstrating the Collective Value Help UI from a simple working application that we‚Äôll build in this article:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Technical Object search with multiple search template options" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342301iE18100A70E009319/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1763468984182.png" alt="Technical Object search with multiple search template options" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Technical Object search with multiple search template options&lt;/span&gt;&lt;/span&gt;&amp;nbsp; &amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Technical Object Data template" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342300i852CFC4493993F42/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1763468984194.png" alt="Search by Technical Object Data template" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Technical Object Data template&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Functional Location template" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342302i6BB3914B67BB4385/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1763468984206.png" alt="Search by Functional Location template" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Functional Location template&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Equipment template" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342303i2185DE933E96EBFE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_3-1763468984217.png" alt="Search by Equipment template" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Equipment template&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Notice how users can switch between different search templates (Technical Object Data, Maintenance Data, Asset Data, Address Data) to find the right technical object using various criteria. This multi-dimensional search capability is the core value proposition of collective search helps.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Collective Value Help within a Collective Value Help (watch out later in the blog)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342305i92FD53F40DF44D03/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_4-1763468984239.png" alt="Collective Value Help within a Collective Value Help (watch out later in the blog)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Collective Value Help within a Collective Value Help (watch out later in the blog)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Watch how collective search helps work across business objects, including nested value help scenarios:&lt;BR /&gt;&lt;BR /&gt;&lt;div class="video-embed-center video-embed"&gt;&lt;iframe class="embedly-embed" src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FjT6KRMYH4eI%3Ffeature%3Doembed&amp;amp;display_name=YouTube&amp;amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DjT6KRMYH4eI&amp;amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FjT6KRMYH4eI%2Fhqdefault.jpg&amp;amp;type=text%2Fhtml&amp;amp;schema=youtube" width="400" height="225" scrolling="no" title="CDS based Collective Value Helps in SAP ABAP" frameborder="0" allow="autoplay; fullscreen; encrypted-media; picture-in-picture;" allowfullscreen="true"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;U&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Implementation&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;Since, CDS View &lt;STRONG&gt;I_TechnicalObject&lt;/STRONG&gt; consists of both Equipment and Functional Locations in the system, we‚Äôll utilise the same to create a small application to showcase the usage of Collective Value Help.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;Start with the I-View:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="I-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342304i3F79F074EA7267E3/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_5-1763468984248.png" alt="I-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;I-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;This is to be utilised in a C-View for SADL layer exposure:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View" style="width: 684px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342307i8416A468CC34DB8B/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_6-1763468984253.png" alt="C-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Observe the Metadata Extension of the Consumption View and the usage of the Collective Value Helps;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Metadata Extension of C-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342308i7F48548D9E2180D4/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_7-1763468984265.png" alt="Metadata Extension of C-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Metadata Extension of C-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;Let‚Äôs have a detailed look at the Collective Value Helps' definition and content.&lt;/P&gt;&lt;P&gt;&lt;U&gt;Technical Objects:&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_8-1763468984268.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342306i79C7FA91BCDA9A0C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_8-1763468984268.png" alt="Abhinav_Roy_8-1763468984268.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_9-1763468984273.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342310i83A2153FB58B7B25/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_9-1763468984273.png" alt="Abhinav_Roy_9-1763468984273.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;U&gt;Equipment&lt;/U&gt;:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_10-1763468984275.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342309i44EAB8AA312EA5AE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_10-1763468984275.png" alt="Abhinav_Roy_10-1763468984275.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_11-1763468984282.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342311i6D77E6CB69906D55/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_11-1763468984282.png" alt="Abhinav_Roy_11-1763468984282.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;U&gt;Functional Location:&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_12-1763468984285.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342312iAFD584D17B3D000C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_12-1763468984285.png" alt="Abhinav_Roy_12-1763468984285.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Abhinav_Roy_13-1763468984290.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342314iCBA987F26E4478E4/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_13-1763468984290.png" alt="Abhinav_Roy_13-1763468984290.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Now, have a look at the above screenshots carefully. All the Collective Value Helps are essentially abstract entities, which consist of a bunch of Elementary Value Helps, each assigned a distinct qualifier. However, each of these CVHs has one template (elementary value help) which has no qualifier and becomes the default search template and thus, the provider of Fuzzy search capabilities, if provisioned in that CDS.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Metadata Extension of an elementary value help used in the demo" style="width: 688px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342313i460B66D29690DB0C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_14-1763468984298.png" alt="Metadata Extension of an elementary value help used in the demo" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Metadata Extension of an elementary value help used in the demo&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="The data definition of the elementary value help" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342316iF29FFED1EA65F999/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_15-1763468984313.png" alt="The data definition of the elementary value help" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;The data definition of the elementary value help&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Now, this is purely a read only application which doesn‚Äôt require any business logic and thus is not created as a ROOT entity. We‚Äôll simply create a Service Definition and Service Binding on top of the consumption View to enable projection at the SADL layer.:&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Definition" style="width: 670px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342315i8CBB3223C06ED2E8/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_16-1763468984315.png" alt="Service Definition" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Definition&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;U&gt;&lt;STRONG&gt;Critical Difference: V2 vs V4 Service Binding&lt;/STRONG&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;The Service Definition can now be used to create both an OData V2 and an OData V4 Service binding. But there‚Äôs a crucial difference w.r.t. the entity sets and associations exposed in the bindings:&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding (OData V4)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342317i4C69CF42409032A1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_17-1763468984322.png" alt="Service Binding (OData V4)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding (OData V4)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding (OData V2)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342320i8DB925CDD89010C3/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_18-1763468984332.png" alt="Service Binding (OData V2)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding (OData V2)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding (OData V2)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342318iE8BE4C8657573D1E/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_19-1763468984341.png" alt="Service Binding (OData V2)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding (OData V2)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;From the screenshots, it‚Äôs quite clear that for OData V2 - UI, all the internal Value Helps, including the collective Value helps are projected as end points along with the main entity ZAR_C_TechnicalObject. Whereas, in Odata V4 ‚Äì UI, only the leading entity is projected. This is important for design considerations.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;FONT size="5"&gt;&lt;U&gt;Key Concepts &amp;amp; Considerations&lt;/U&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;SPAN&gt;:&lt;/SPAN&gt;&lt;/P&gt;&lt;UL class="lia-list-style-type-disc"&gt;&lt;LI&gt;The collective value help can only define the included elementary value helps and the necessary field name bindings. Thus, only the following annotations can be leveraged:&lt;BR /&gt;&lt;BR /&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.entity.name&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.entity.element&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.additionalBinding.localElement&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.additionalBinding.element&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.qualifier&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Consumption.valueHelpDefinition.label&lt;/EM&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;If a collective value help is assigned to the field as value help provider&amp;nbsp;@Consumption.valueHelpDefinition... no further value helps should be assigned to this field. i.e., all required elementary value helps must be included in the collective value help.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;The collective value help must be annotated with @ObjectModel.collectiveValueHelp.for.element pointing to the field, for which the collective value help is defined.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;The field referenced by @ObjectModel.collectiveValueHelp.for.element must be assigned at least a single elementary value help by its annotation @Consumption.valueHelpDefinition.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;The consumer view of the collective value help must define the same fields, that are used in the collective value help definition&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Collective value helps can only be used in SADL based ODATA services, both V2 and V4&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;A CDS abstract entity is to be used as a representative for the collective value help carrying the grouping information and&amp;nbsp;enable its assignment like an elementary value help&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;U&gt;&lt;STRONG&gt;Constraints&lt;/STRONG&gt;&lt;/U&gt;&lt;/FONT&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Collective value helps should not define parameters.&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Collective value helps should not be used as "elementary value helps" of other collective value helps (i.e. the collective value helps may not be nested, more on this below)&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1692417"&gt;@search&lt;/a&gt;..., i.e. search capabilities are not defined by the collective value&amp;nbsp;help, but by its referenced elementary value helps only (the default value help template takes precedence)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;&lt;FONT size="5"&gt;Workaround for Nested Collective Value Helps&lt;/FONT&gt;&lt;/U&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;As per the restrictions outlined above, &lt;STRONG&gt;Collective Value Helps cannot be nested&lt;/STRONG&gt;, i.e., a collective value help cannot utilise another CVH as an elementary Value Help. Having said that, each elementary value help in a CVH can have its own selection fields, where one might feel the need to incorporate multiple search templates, such as the case below:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Search by Functional Location template in Equipment CVH" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342319iD1111169AAA5126D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_20-1763468984348.png" alt="Search by Functional Location template in Equipment CVH" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Search by Functional Location template in Equipment CVH&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Here, an Equipment CVH has a search template &lt;STRONG&gt;&lt;EM&gt;Search by Functional Location&lt;/EM&gt;&lt;/STRONG&gt;, which again has a selection field for Functional Location field, where in a user can feel the need to plug in multiple search templates. However, they may not be able to use the Functional Location CVH directly as direct nesting is not allowed. In that case, one can still create a collective value help, but without utilising an abstract entity:&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" style="width: 805px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342321iB111DBF0F4D253BE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_21-1763468984354.png" alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" style="width: 840px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342322iDA575A8B3AB35BBD/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_22-1763468984362.png" alt="Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Source Code of Value Help ZAR_C_EquipFunctionalLocDataVH&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Collective search helps in RAP provide a powerful, user-centric approach to value help management by enabling multi-dimensional search capabilities through a single, reusable model. This article has demonstrated how to implement collective search helps across both OData V2 and V4 service expositions, highlighting the critical architectural differences between these versions.&lt;/P&gt;&lt;P&gt;Key takeaways from this implementation guide:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Service Binding Differences Matter:&lt;/STRONG&gt; V2 exposes all value help entities as separate endpoints, while V4 embeds them within the main entity‚Äîan important consideration for service design and integration scenarios.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Abstract Entities as CVH Carriers:&lt;/STRONG&gt; CDS abstract entities serve as the structural foundation for grouping elementary value helps, enabling clean separation of concerns and reusability.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Nested Workarounds:&lt;/STRONG&gt; While direct nesting of collective value helps is restricted, inline value help definitions provide a practical alternative for complex scenarios.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;SADL Layer Compatibility:&lt;/STRONG&gt; Collective search helps work seamlessly across both V2 and V4 SADL-based OData services, making them a versatile pattern for modern RAP applications.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;U&gt;&lt;STRONG&gt;Coming in Part 2: Hierarchical Collective Search Helps&lt;/STRONG&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Part 2&lt;/STRONG&gt; will introduce &lt;STRONG&gt;hierarchical collective search helps&lt;/STRONG&gt;‚Äîan advanced pattern enabling parent-child relationship visualization within value help dialogs. This advanced implementation addresses complex business scenarios requiring hierarchical data navigation, showcasing the full potential of RAP's value help framework.&amp;nbsp;&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;div class="lia-spoiler-container"&gt;&lt;a class="lia-spoiler-link" href="#" rel="nofollow noopener noreferrer"&gt;Spoiler&lt;/a&gt;&lt;noscript&gt; (Highlight to read)&lt;/noscript&gt;&lt;div class="lia-spoiler-border"&gt;&lt;div class="lia-spoiler-content"&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;Sneak peek....&lt;/EM&gt;&lt;/FONT&gt;&lt;/div&gt;&lt;noscript&gt;&lt;div class="lia-spoiler-noscript-container"&gt;&lt;div class="lia-spoiler-noscript-content"&gt;Sneak peek....&lt;/div&gt;&lt;/div&gt;&lt;/noscript&gt;&lt;/div&gt;&lt;/div&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchical value help" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/342323iD3008580179648A1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_23-1763468984373.png" alt="Hierarchical value help" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchical value help&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-1/ba-p/14271885"/>
    <published>2025-11-18T15:16:20.147000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/unwrapping-the-abap-rap-runtime-inside-the-engine-amp-transactional-buffers/ba-p/14275310</id>
    <title>UnwRAPping the ABAP RAP Runtime: Inside the Engine &amp; Transactional Buffers</title>
    <updated>2025-11-26T04:15:10.239000+01:00</updated>
    <author>
      <name>subhajit_das127</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/122119</uri>
    </author>
    <content>&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;Background&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;Having worked with ABAP RAP for over quite some years now and after taking quite a few technical interviews, what I observed from my experience is that many developers still struggle to fully understand what happens&amp;nbsp;&lt;EM&gt;inside&lt;/EM&gt; the ABAP RAP runtime ‚Äî especially around transactional buffering, EML execution, and commit/rollback behaviours.&lt;BR /&gt;Hence setting the context of this blog.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="3"&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;The ABAP RESTful Application Programming Model (RAP) is the foundation for building modern, cloud-ready, and transactional applications on SAP BTP ABAP Environment and SAP S/4HANA.&lt;/P&gt;&lt;P&gt;Crucial to its understanding is about its runtime and hence in this blog, we will touch upon and break down the following concepts in an ntuitive way:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;RAP Runtime Flow&lt;/LI&gt;&lt;LI&gt;RAP Transactional Buffers (Draft &amp;amp; Active)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Let‚Äôs start from the foundation.&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;ABAP RAP Runtime ‚Äî The Invisible Engine&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;When you build a transactional application with RAP, a lot happens behind the scenes in what we call the &lt;STRONG&gt;RAP runtime engine&lt;/STRONG&gt;. It‚Äôs ‚Äúinvisible‚Äù because you rarely write code for many of its steps ‚Äî but knowing &lt;EM&gt;what it does&lt;/EM&gt; is key to debug &amp;amp; optimise.&lt;/P&gt;&lt;P&gt;The RAP runtime is responsible for orchestrating everything that happens when you call an action, modify data, run validation/determinations, or commit a business object.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key responsibilities of RAP runtime:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Provides draft handling&lt;/LI&gt;&lt;LI&gt;Maintains transactional buffers&lt;/LI&gt;&lt;LI&gt;Runs determinations/validations/actions in the right order&lt;/LI&gt;&lt;LI&gt;Ensures ACID properties for business transactions&lt;/LI&gt;&lt;LI&gt;Consolidates errors, warnings, and messages through REPORTED structure&lt;/LI&gt;&lt;LI&gt;Writes data to the database &lt;STRONG&gt;only after commit&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The most important thing to understand: &lt;STRONG&gt;RAP never directly updates the DB during EML calls.&lt;/STRONG&gt; Everything goes into the RAP transactional buffer first.&lt;/P&gt;&lt;P&gt;Here‚Äôs how the runtime engine typically handles a transactional request (e.g., modify, create, action on a BO):&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Receive Request&lt;/STRONG&gt;&lt;BR /&gt;The service binding/OData call enters the RAP runtime. The runtime frameworks dispatch this to the correct BO implementation.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Interaction Phase: Loading &amp;amp; Buffering&lt;/STRONG&gt;&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;If the request references existing data, the runtime loads the existing BO instance into the &lt;STRONG&gt;transactional buffer&lt;/STRONG&gt;.&lt;/LI&gt;&lt;LI&gt;If it‚Äôs new data, buffer is prepared accordingly with new instance(s).&lt;/LI&gt;&lt;LI&gt;All modifications (via EML) are made against the buffer, &lt;STRONG&gt;not&lt;/STRONG&gt; directly the database.&lt;/LI&gt;&lt;LI&gt;This phase may include edit/draft handling, business logic, change of states.&lt;/LI&gt;&lt;/UL&gt;&lt;LI&gt;&lt;STRONG&gt;Save Sequence Trigger&lt;/STRONG&gt;&lt;BR /&gt;Once the interaction phase completes (i.e., no more immediate edit tasks), the runtime triggers the Save Sequence.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Consistency Checks &amp;amp; Late Logic&lt;/STRONG&gt;&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;The runtime runs final determinations, validations to ensure data integrity.&lt;/LI&gt;&lt;LI&gt;Any failures here cause rollback of buffer (no DB write).&lt;/LI&gt;&lt;LI&gt;Then key generating logic (late numbering etc) happens if required.&lt;/LI&gt;&lt;/UL&gt;&lt;LI&gt;&lt;STRONG&gt;Database Write &amp;amp; Buffer Clean-up&lt;/STRONG&gt;&lt;/LI&gt;&lt;UL&gt;&lt;LI&gt;The buffered changes are persisted and the transactional buffer is cleaned up.&lt;/LI&gt;&lt;/UL&gt;&lt;/OL&gt;&lt;P&gt;The runtime returns results (&lt;STRONG&gt;FAILED&lt;/STRONG&gt; / &lt;STRONG&gt;REPORTED&lt;/STRONG&gt; / &lt;STRONG&gt;MAPPED&lt;/STRONG&gt;) to the caller.&lt;BR /&gt;The runtime can also be further divided into &lt;STRONG&gt;Standard Operations&lt;/STRONG&gt; and &lt;STRONG&gt;Non-standard Operations&lt;/STRONG&gt; Runtime based on the operation types.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Source : help.sap.com" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344002i982D552186D281EA/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Runtime.png" alt="Source : help.sap.com" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Source : help.sap.com&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;ABAP RAP Transactional Buffers&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;The&amp;nbsp;ABAP RESTful Application Programming Model&amp;nbsp;(RAP) does not introduce its own LUW concept, but uses the rules and concepts of the SAP LUW and thus does&amp;nbsp;inherent checks ensure that your application is consistent and stable, also when more than one BO is involved.&lt;/P&gt;&lt;P&gt;RAP uses an internal transactional buffer (in-memory layer) to temporarily hold all data modifications.&lt;/P&gt;&lt;P&gt;It is the key ‚Äúscratch‚Äêpad‚Äù where all modifications happen before anything goes to the database. Think of it like a workspace for your BO operations.&lt;/P&gt;&lt;P&gt;Every operation (create, update, delete, action) targets an instance in the buffer first. The buffer is internal to RAP runtime ‚Äî you don‚Äôt explicitly manage it, you just use EML and commit/rollback.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;EM&gt;&lt;FONT size="3"&gt;Why it matters&lt;/FONT&gt;&lt;/EM&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;It ensures &lt;STRONG&gt;isolation&lt;/STRONG&gt;: multiple requests don‚Äôt interfere until commit.&lt;/LI&gt;&lt;LI&gt;It provides a stage for &lt;STRONG&gt;determinations/validations&lt;/STRONG&gt; before final write.&lt;/LI&gt;&lt;LI&gt;It allows &lt;STRONG&gt;draft mode&lt;/STRONG&gt;: you can work on data in draft buffer without touching active DB immediately.&lt;/LI&gt;&lt;LI&gt;It ensures you can &lt;STRONG&gt;rollback&lt;/STRONG&gt; if something fails without partial DB updates ‚Äî ACID in practise.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Here‚Äôs how you visualise it:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Picture 1.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344008iD36892988D173E64/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Picture 1.png" alt="Picture 1.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Buffer Behaviour in Different Modes:&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;There are &lt;STRONG&gt;two types&lt;/STRONG&gt; of buffers &lt;STRONG&gt;Draft Buffer/Draft Runtime &amp;amp; Active Transactional Buffer.&amp;nbsp;&lt;/STRONG&gt;Let‚Äôs break them down.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Active Transactional Buffer ‚Äì The In-Memory DB-Staging Area&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The &lt;STRONG&gt;Active Transactional Buffer&lt;/STRONG&gt; is used when you work on &lt;STRONG&gt;active instances&lt;/STRONG&gt; (not in draft mode).&lt;BR /&gt;This handles &lt;STRONG&gt;all temporary changes for active data until COMMIT ENTITIES&lt;/STRONG&gt;.No draft tables involved.&lt;/P&gt;&lt;P&gt;&lt;EM&gt;&lt;STRONG&gt;When It Is Used&lt;/STRONG&gt;&lt;/EM&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;When your BO is &lt;STRONG&gt;not draft-enabled&lt;/STRONG&gt;.&lt;/LI&gt;&lt;LI&gt;When your BO &lt;EM&gt;is&lt;/EM&gt; &lt;STRONG&gt;draft-enabled&lt;/STRONG&gt; but you are working on &lt;STRONG&gt;active instances&lt;/STRONG&gt; (e.g., %is_draft = 00).&lt;/LI&gt;&lt;LI&gt;When triggering actions that operate on &lt;STRONG&gt;active&lt;/STRONG&gt; data.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;EM&gt;&lt;STRONG&gt;What Happens on COMMIT&lt;/STRONG&gt;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;At COMMIT, RAP takes all pending changes from the transactional buffer, runs validations and determinations, executes the save sequence, and finally writes everything to the database.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;UL class="lia-list-style-type-square"&gt;&lt;LI&gt;&lt;FONT size="4"&gt;&lt;STRONG&gt;Draft Buffer aka Draft Runtime‚Äì Your Temporary Workspace&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The Draft Buffer is a staging area inside the RAP runtime that stores unsaved, in-progress work of a user managed by Draft Runtime.&lt;/P&gt;&lt;P&gt;Since&amp;nbsp;&lt;SPAN&gt;RESTful applications require a constant stateless communication with the backend to prevent that transient data is lost when a user session ends, drafts are essential.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;Here, for &lt;STRONG&gt;new-draft&lt;/STRONG&gt; &amp;amp; &lt;STRONG&gt;edit-draft&lt;/STRONG&gt; instances, data gets updates in Draft Database tables only upon &lt;STRONG&gt;COMMIT ENTITIES&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Only on ACTIVATE, it gets converted into &lt;STRONG&gt;Active Instance in a Active Transactional Buffer&lt;/STRONG&gt; and then gets persisted to database table on &lt;STRONG&gt;COMMIT ENTITIES&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;EM&gt;&lt;STRONG&gt;When It Is Used&lt;/STRONG&gt;&lt;/EM&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;When you run MODIFY ENTITIES ... ENTITY &amp;lt;X&amp;gt; CREATE with draft modifier,&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;When you trigger draft actions:&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;When you read draft-specific elements.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;EM&gt;&lt;STRONG&gt;What Happens on COMMIT&lt;/STRONG&gt;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;At activation, RAP takes the draft buffer data, runs validations and determinations, executes the save sequence, deletes the draft, and promotes the changes to active database records&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;The One-Liner &lt;FONT size="3"&gt;Summary:&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&amp;nbsp;&lt;STRONG&gt;Active Mode:&lt;/STRONG&gt; COMMIT ENTITIES takes the delta from the transactional buffer ‚Üí validates ‚Üí determines ‚Üí writes to DB ‚Üí commits ‚Üí clears buffer.&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;&lt;STRONG&gt;Draft Mode:&lt;/STRONG&gt; ACTIVATE&amp;nbsp; promotes data to active instance ‚Üí COMMIT ENTITIES runs the full save sequence ‚Üí deletes draft ‚Üí commits.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Source: help.sap.com" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344006iB53759C4791DB73B/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="draft.png" alt="Source: help.sap.com" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Source: help.sap.com&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;What about ROLLBACK ?&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;1. Discards entire buffer&lt;/STRONG&gt;&lt;BR /&gt;‚Üí The runtime clears all staged changes.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;2. No DB write/rollback&lt;/STRONG&gt;&lt;BR /&gt;‚Üí Nothing is persisted/rolled back to/from the database.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;3. No further validations/actions&lt;/STRONG&gt;&lt;BR /&gt;‚Üí All remaining processing is immediately stopped.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;4. Restores consistent state&lt;/STRONG&gt;&lt;BR /&gt;‚Üí System returns to a clean, stable state.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Commit_Rollback.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344007i8385930A5EBB9916/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Commit_Rollback.png" alt="Commit_Rollback.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":right_arrow:"&gt;‚û°Ô∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;span class="lia-unicode-emoji" title=":left_arrow:"&gt;‚¨ÖÔ∏è&lt;/span&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5" color="#333399"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;If you‚Äôve reached this far,&amp;nbsp;you may now have a clear inside-out view of how ABAP RAP‚Äôs runtime and transactional buffers really work.&lt;/P&gt;&lt;P&gt;To wrap up, the runtime is all about buffers, orchestration, and guaranteed consistency.&lt;/P&gt;&lt;P&gt;Understanding this invisible engine not only helps you debug confidently but also helps you design cleaner, safer, more predictable business objects.&lt;/P&gt;&lt;P&gt;If this blog helped even a little bit in strengthening that foundation, then mission accomplished !&lt;BR /&gt;&lt;BR /&gt;Make sure to bookmark this link as a best friend to learn ABAP RAP:&amp;nbsp;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/abap-restful-application-programming-model?locale=en-US" target="_blank" rel="noopener noreferrer"&gt;https://help.sap.com/docs/abap-cloud/abap-rap/abap-restful-application-programming-model?locale=en-US&lt;/A&gt;&lt;/P&gt;&lt;P&gt;Keep exploring, keep building ! &lt;span class="lia-unicode-emoji" title=":slightly_smiling_face:"&gt;üôÇ&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H6 id="toc-hId--2013035455"&gt;Regards,&lt;/H6&gt;&lt;H6 id="toc-hId-2085418336"&gt;Subhajit&lt;/H6&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/unwrapping-the-abap-rap-runtime-inside-the-engine-amp-transactional-buffers/ba-p/14275310"/>
    <published>2025-11-26T04:15:10.239000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/an-end-to-end-hands-on-tutorial-for-clean-core-rap-development/ba-p/14276157</id>
    <title>An End-to-End Hands-On Tutorial for Clean Core RAP Development</title>
    <updated>2025-11-28T12:18:20.855000+01:00</updated>
    <author>
      <name>iulia2</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1721086</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1636546246"&gt;Introduction&lt;/H1&gt;&lt;P&gt;In this workshop, we will build a simple &lt;STRONG&gt;Item business object&lt;/STRONG&gt; using the ABAP RESTful Application Programming Model (RAP) on an SAP BTP trial system.&lt;/P&gt;&lt;P&gt;RAP is SAP‚Äôs &lt;STRONG&gt;strategic programming model&lt;/STRONG&gt; for developing cloud-ready, Fiori-enabled business applications in ABAP. It provides a &lt;STRONG&gt;clean, end-to-end programming model&lt;/STRONG&gt; where you can define business objects, behaviors, services, and UI-ready projections in a structured way.&lt;/P&gt;&lt;P&gt;In this blog, we will:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Create a &lt;STRONG&gt;database table&lt;/STRONG&gt; for items.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Define &lt;STRONG&gt;CDS root and projection views&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Implement &lt;STRONG&gt;behavior definitions&lt;/STRONG&gt; with CRUD, and enhance it with actions, validations and determinations.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Expose the business object as an &lt;STRONG&gt;OData service&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Preview it in &lt;STRONG&gt;Fiori&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Model relationships using associations and compositions between entities.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Implement value helps to improve user input and Fiori UX.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;By the end, you will understand how RAP objects are structured, connected, and how Clean Core principles are applied in a real example.&lt;/P&gt;&lt;H2 id="toc-hId-1569115460"&gt;&lt;STRONG&gt;Why RAP?&lt;/STRONG&gt;&lt;/H2&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Cloud-ready:&lt;/STRONG&gt; SAP‚Äôs standard for S/4HANA cloud extensions and custom apps.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Clean Core compliant:&lt;/STRONG&gt; No modifications to standard objects; all extensibility is via APIs.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;End-to-end model:&lt;/STRONG&gt; Business logic, UI, draft handling, and authorizations all in one place.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Consistency:&lt;/STRONG&gt; Automatic CRUD, locking, and draft handling.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Fiori-ready:&lt;/STRONG&gt; Generates OData services consumable by Fiori Elements.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Productivity:&lt;/STRONG&gt; Faster development than classical ABAP or BOPF.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H1 id="toc-hId-1243519236"&gt;Environment Setup&lt;/H1&gt;&lt;P&gt;For this demo, we use &lt;STRONG&gt;ABAP Development Tools (ADT) in Eclipse&lt;/STRONG&gt; connected to an &lt;STRONG&gt;ABAP on Cloud project&lt;/STRONG&gt; on an SAP BTP trial system. This setup gives us access to all RAP development tools and lets us preview Fiori apps directly from Eclipse.&lt;/P&gt;&lt;P&gt;If you‚Äôre setting this up for the first time, SAP provides a step-by-step tutorial to i&lt;SPAN&gt;nstall &lt;/SPAN&gt;Eclipse IDE, a&lt;SPAN&gt;dd the &lt;/SPAN&gt;ABAP Development Tools (ADT) plugin and c&lt;SPAN&gt;onnect to your SAP system.&amp;nbsp;&lt;A title="Download the Eclipse IDE and add the ABAP Development Tools (ADT) Plugin | SAP Tutorials" href="https://developers.sap.com/tutorials/abap-install-adt..html" target="_blank" rel="noopener noreferrer"&gt;Download the Eclipse IDE and add the ABAP Development Tools (ADT) Plugin | SAP Tutorials&lt;/A&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1176088450"&gt;Useful ADT Shortcuts&lt;/H2&gt;&lt;P&gt;Here are some useful ADT keyboard shortcuts for the ABAP development in Eclipse.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="shortcuts.png" style="width: 665px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344461iC0BAD5F430FFCA6D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="shortcuts.png" alt="shortcuts.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Info&lt;/STRONG&gt;&lt;SPAN&gt;: You can display the full list of available shortcuts in the&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Show Key Assit&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;in ADT by pressing&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;Ctrl+Shift+L&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;/P&gt;&lt;H1 id="toc-hId-850492226"&gt;&amp;nbsp;&lt;/H1&gt;&lt;H1 id="toc-hId-653978721"&gt;Part 1: Simple BO&lt;/H1&gt;&lt;H2 id="toc-hId-586547935"&gt;Step 1: Create a Package&lt;/H2&gt;&lt;P&gt;Before creating RAP objects, we need a &lt;STRONG&gt;package&lt;/STRONG&gt; to organize them. Packages are like folders in Eclipse‚Äîthey help manage all the development objects together.&lt;/P&gt;&lt;P&gt;1. In Eclipse, right-click your &lt;STRONG&gt;ABAP on Cloud project&lt;/STRONG&gt; ‚Üí &lt;STRONG&gt;New&lt;/STRONG&gt; ‚Üí &lt;STRONG&gt;ABAP Package&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="1.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344473iDBF146E378CCC4E9/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="1.png" alt="1.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;2.&amp;nbsp;Enter package details&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-left" image-alt="2.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344475iB215BAC9F968C11A/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="2.png" alt="2.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Why this matters:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;All RAP objects (tables, CDS views, behavior definitions, service definitions) should be in the same package.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;It ensures &lt;STRONG&gt;clean core compliance&lt;/STRONG&gt;, meaning your custom objects don‚Äôt modify standard SAP objects directly.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-390034430"&gt;Step 2: Create Database Table&lt;/H2&gt;&lt;P&gt;The database table is the foundation of your RAP business object. For this example, we‚Äôll create a table called ZITEM02 for our Item BO.&amp;nbsp;&lt;/P&gt;&lt;P&gt;1. Right-click your package ‚Üí &lt;STRONG&gt;New&lt;/STRONG&gt; ‚Üí &lt;STRONG&gt;Other Repository Object&amp;nbsp;‚Üí&lt;/STRONG&gt;&amp;nbsp;search for &lt;STRONG&gt;"Database Table".&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-left" image-alt="3.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344477iEA014D963338068F/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="3.png" alt="3.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="4.png" style="width: 356px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344479i4DADF5F9D023EA19/image-dimensions/356x301/is-moderation-mode/true?v=v2" width="356" height="301" role="button" title="4.png" alt="4.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;2. Add the fields and mark &lt;FONT face="courier new,courier"&gt;item_id&amp;nbsp;&lt;/FONT&gt;as the &lt;STRONG&gt;primary key&lt;/STRONG&gt;.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Item Table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zitem_02 {

  key client            : abap.clnt not null;
  key item_id           : sysuuid_x16 not null;
  name                  : abap.char(50) not null;
  description           : abap.char(100);
  price                 : abap.dec(10,2);
  status_code           : abap.char(5) not null;
  local_created_by      : abp_creation_user;
  local_created_at      : abp_creation_tstmpl;
  local_last_changed_by : abp_locinst_lastchange_user;
  local_last_changed_at : abp_locinst_lastchange_tstmpl;
  last_changed_at       : abp_lastchange_tstmpl;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;3. Activate the table.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="5.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344481i41330E6D10684F13/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="5.png" alt="5.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The table &lt;FONT face="courier new,courier"&gt;ZITEM_02&amp;nbsp;&lt;/FONT&gt;serves as the &lt;STRONG&gt;persistent layer&lt;/STRONG&gt; for your RAP business object. All data is stored here.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Administrative Fields:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT face="courier new,courier"&gt;local_created_by&lt;/FONT&gt;/ &lt;FONT face="courier new,courier"&gt;local_created_at&lt;/FONT&gt; ‚Üí track &lt;STRONG&gt;who created&lt;/STRONG&gt; the record and &lt;STRONG&gt;when&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;FONT face="courier new,courier"&gt;local_last_changed_by&lt;/FONT&gt; / &lt;FONT face="courier new,courier"&gt;local_last_changed_at&amp;nbsp;&lt;/FONT&gt;‚Üí track &lt;STRONG&gt;local changes&lt;/STRONG&gt; before activation (important for draft-enabled objects).&lt;/P&gt;&lt;P&gt;&lt;FONT face="courier new,courier"&gt;last_changed_at&lt;/FONT&gt; ‚Üí tracks the &lt;STRONG&gt;last committed change&lt;/STRONG&gt;; used as the &lt;STRONG&gt;ETag&lt;/STRONG&gt; for locking and consistency.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Why Admin Fields Matter:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;RAP automatically uses them for &lt;STRONG&gt;draft management, locking, and optimistic concurrency control&lt;/STRONG&gt;. Even if your app is simple, including them makes your BO &lt;STRONG&gt;ready for enhancements&lt;/STRONG&gt; such as validations, actions, and side effects.&lt;/P&gt;&lt;H1 id="toc-hId-64438206"&gt;&amp;nbsp;&lt;/H1&gt;&lt;H2 id="toc-hId--2992580"&gt;Step 3: Create CDS&amp;nbsp;&lt;/H2&gt;&lt;H3 id="toc-hId--145654735"&gt;1. Root View&amp;nbsp;&lt;/H3&gt;&lt;P&gt;The root view sits on top of the database table and defines the &lt;STRONG&gt;entity structure&lt;/STRONG&gt; for your business object. It is the source for the &lt;STRONG&gt;behavior definition&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;1.&amp;nbsp;Right-click the database table ‚Üí &lt;STRONG&gt;New Data Definition&lt;/STRONG&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="6.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344483i505710536A39533D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="6.png" alt="6.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;2. Select the &lt;STRONG&gt;Root View Entity&lt;/STRONG&gt; template.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="7.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344484i3E216219E29E360D/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="7.png" alt="7.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Root View Entity for Item'
@Metadata.allowExtensions: true
define root view entity ZR_ITEM_02
  as select from zitem_02
{
  key item_id               as ItemId,
      name                  as Name,
      description           as Description,
      price                 as Price,
      status_code           as StatusCode,

      local_created_by      as LocalCreatedBy,
      local_created_at      as LocalCreatedAt,
      local_last_changed_by as LocalLastChangedBy,
      local_last_changed_at as LocalLastChangedAt,
      last_changed_at       as LastChangedAt
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Table = raw persistence.&lt;/P&gt;&lt;P&gt;Root view = &lt;STRONG&gt;business-level representation&lt;/STRONG&gt;, enriched with semantics, annotations, and ready for behavior logic.&lt;/P&gt;&lt;P&gt;The root view defines the &lt;STRONG&gt;primary key&lt;/STRONG&gt;&amp;nbsp;&lt;FONT face="courier new,courier"&gt;item_id&lt;/FONT&gt;&amp;nbsp;to match the table.&lt;/P&gt;&lt;H3 id="toc-hId--342168240"&gt;2. Projection View&lt;/H3&gt;&lt;P&gt;The projection view is built on top of the root view and serves as the entry point for service exposure. Here, we select which fields are exposed in the transactional OData service. We can also include UI annotations to guide Fiori Elements in rendering the app automatically.&lt;/P&gt;&lt;P&gt;1.&amp;nbsp;Right-click the Root View CDS ‚Üí &lt;STRONG&gt;New Data Definition&lt;/STRONG&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;2. Select the &lt;STRONG&gt;Projection View&lt;/STRONG&gt; template.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="8.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344487i2026ED2C88E5F7EA/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="8.png" alt="8.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The root view contains the core business data and logic, while the projection only exposes what the frontend needs. This way, we don‚Äôt modify or clutter the core data model with UI-specific details, keeping the core stable and extensible.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Projection View for Item'
@Metadata.allowExtensions: true
define root view entity ZC_ITEM_02
  provider contract transactional_query
  as projection on ZR_ITEM_02
{
  key ItemId,
      Name,
      Description,
      Price,
      StatusCode
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;For today, I‚Äôll keep the UI annotations minimal here and show how to add them cleanly in a &lt;STRONG&gt;metadata extension&lt;/STRONG&gt; later, which keeps our projection view tidy and focused on data exposure.&lt;/P&gt;&lt;H1 id="toc-hId-48124269"&gt;&amp;nbsp;&lt;/H1&gt;&lt;H2 id="toc-hId--441792243"&gt;Step 4: Create Behavior Definition&lt;/H2&gt;&lt;P&gt;The behavior definition specifies how this entity behaves at runtime: which operations are allowed, It maps fields from the root view to the database table, and how draft actions are handled.&lt;/P&gt;&lt;P&gt;1.&amp;nbsp;Right-click the Root View CDS ‚Üí &lt;STRONG&gt;New Behavior Definition&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="9.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344493i20C5AB9D6E1378DC/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="9.png" alt="9.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Since the purpose of this first example is to display the list report, we only need to map fields from the root view to the database table.&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_r_item_02 unique;
strict ( 2 );

define behavior for ZR_ITEM_02 alias Item
persistent table zitem_02
lock master
authorization master ( instance )
etag master LastChangedAt
{
  create ( authorization : global );
  update;
  delete;
  field ( readonly, numbering : managed ) ItemId;

  mapping for zitem_02
    {
      ItemId      = item_id;
      Name        = name;
      Description = description;
      Price       = price;
      StatusCode  = status_code;
      LastChangedAt = last_changed_at;
      LocalCreatedAt = local_created_at;
      LocalCreatedBy = local_created_by;
      LocalLastChangedAt = local_last_changed_at;
      LocalLastChangedBy = local_last_changed_by;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;readonly&lt;/STRONG&gt; ‚Üí The field cannot be changed by the user. RAP ensures it is protected in the frontend and backend.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;numbering : managed&lt;/STRONG&gt; ‚Üí RAP automatically generates unique values for this field when a new entity is created. You don‚Äôt need to write your own logic for primary keys like UUIDs or sequences.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The &lt;STRONG&gt;behavior projection&lt;/STRONG&gt; allows us to expose only a subset of behavior from the main entity for a specific service. This is useful if we want different services to expose different parts of the behavior without modifying the core behavior definition.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );

define behavior for ZC_ITEM_02 alias Item
{
  use create;
  use update;
  use delete;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId--638305748"&gt;Step 5: Create Service Definition&lt;/H2&gt;&lt;P&gt;The service definition declares which projection views are exposed as OData services. Here, we expose our projection view, making our User BO available for Fiori or API consumption. Service definitions are protocol-agnostic and can later be consumed via different bindings.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service Definition for Item'
define service ZSD_ITEM {
  expose ZC_ITEM_02 as Item;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId--834819253"&gt;Step 6: Create Service Binding&lt;/H2&gt;&lt;P&gt;Right-click the Service Definition ‚Üí &lt;STRONG&gt;New Service Binding&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="10.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344503i7EDC6EFEE17AD2C4/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="10.png" alt="10.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Finally, the service binding connects the service definition to a specific protocol, such as OData V2 or V4. After activation, Publish the service and it can be accessed directly from Fiori elements or any OData client.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="11.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344507iF5E66C18ED2814DE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="11.png" alt="11.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;At this stage, our Business Object is not draft-enabled and does not support create/update/delete yet.&lt;BR /&gt;This means the Fiori Elements application shows a &lt;STRONG&gt;read-only list report&lt;/STRONG&gt;, and because the table is empty, the preview will be blank.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="12.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344541i8965C571AC46A4D0/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="12.png" alt="12.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;This step is intentional ‚Äî it confirms that:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;the CDS views are correct&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;the projection is exposed&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;the service binding is active&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;the app renders successfully with no errors&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Even with no data, seeing the list report appear is an important milestone. In the next sections, we will add draft support and enable full CRUD operations.&lt;/P&gt;&lt;H1 id="toc-hId--737929751"&gt;&amp;nbsp;&lt;/H1&gt;&lt;H1 id="toc-hId--934443256"&gt;Part 2: Enabling Draft, CRUD Operations, and Transactional Behavior in the RAP Business Object&lt;/H1&gt;&lt;P&gt;In&lt;STRONG&gt; Part 1&lt;/STRONG&gt; of this series, we created the foundation of our RAP application:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;A clean core‚Äìcompliant database table&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;The CDS root view entity&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;The projection view&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;A minimal behavior definition&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;A service binding that exposes our object to Fiori&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;At that stage, the generated application was intentionally &lt;STRONG&gt;read-only&lt;/STRONG&gt;, serving as a good starting point to verify that the service and CDS structure work correctly.&lt;/P&gt;&lt;P&gt;Now, in &lt;STRONG&gt;Part 2&lt;/STRONG&gt;, we take the next major step: turning our read-only object into a &lt;STRONG&gt;full transactional Business Object&lt;/STRONG&gt; using the managed RAP BO approach. This includes:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Activating &lt;STRONG&gt;Create&lt;/STRONG&gt;, &lt;STRONG&gt;Update&lt;/STRONG&gt;, and &lt;STRONG&gt;Delete&lt;/STRONG&gt; support&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Enabling &lt;STRONG&gt;Draft handling&lt;/STRONG&gt; for safe data entry&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Allowing the Fiori Elements app to automatically render UI flows such as Edit, Save, Delete, and Discard Draft&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Preparing the BO for further business logic enhancements (which we will add in Part 3)&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId--1424359768"&gt;&lt;STRONG&gt;Why We Enable Draft in RAP?&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Draft is one of the key features of Fiori Elements applications.&lt;/P&gt;&lt;P&gt;Before enabling it, it‚Äôs important to explain &lt;EM&gt;why&lt;/EM&gt; draft is needed.&lt;/P&gt;&lt;H3 id="toc-hId--1914276280"&gt;&lt;STRONG&gt;Users expect modern UI behavior&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;In modern SAP Fiori apps, users do not commit their changes immediately. Instead:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;They can start editing an object.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Leave the page.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Navigate back later.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Recover their unsaved changes.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This improves the UX significantly and eliminates accidental data loss.&lt;/P&gt;&lt;H3 id="toc-hId--1942606094"&gt;&lt;STRONG&gt;Draft prevents incomplete database commits&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Draft ensures that:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Partial or inconsistent data is never saved.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Users can enter complex data in multiple steps.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Locks on active instances are minimized.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This is especially important in enterprise systems with many concurrent users.&lt;/P&gt;&lt;H3 id="toc-hId--2139119599"&gt;&lt;STRONG&gt;RAP provides draft automatically&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Thanks to RAP‚Äôs managed BO runtime, draft functionality requires &lt;STRONG&gt;no custom code&lt;/STRONG&gt; ‚Äî only a few declarations in the behavior definition.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId--2042230097"&gt;Step 1: Updating the Behavior Definition of the Root Entity&lt;/H2&gt;&lt;P&gt;&lt;STRONG&gt;1. Add&amp;nbsp;&lt;FONT face="courier new,courier"&gt;&lt;SPAN&gt;with&lt;/SPAN&gt; &lt;SPAN&gt;draft;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;2. Add &lt;FONT face="courier new,courier"&gt;draft table zitem_02_d;&lt;/FONT&gt; &lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This associates the BO with a draft table.&lt;/P&gt;&lt;P&gt;If the draft table does not exist yet, ADT will offer to create it automatically.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;3. Click on "Quick assist" ( CTRL + 1 )&lt;/STRONG&gt; &lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="13.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344561i81FF83A799464957/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="13.png" alt="13.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;DIV&gt;&lt;DIV&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Draft table for entity ZR_ITEM_02'
@AbapCatalog.enhancement.category : #EXTENSIBLE_ANY
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zitem_02_d {

  key mandt          : mandt not null;
  key itemid         : sysuuid_x16 not null;
  name               : abap.char(50);
  description        : abap.char(100);
  price              : abap.dec(10,2);
  statuscode         : abap.char(5);
  localcreatedby     : abp_creation_user;
  localcreatedat     : abp_creation_tstmpl;
  locallastchangedby : abp_locinst_lastchange_user;
  locallastchangedat : abp_locinst_lastchange_tstmpl;
  lastchangedat      : abp_lastchange_tstmpl;
  "%admin"           : include sych_bdl_draft_admin_inc;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Draft tables contain:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Table fields&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Administrator fields&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Temporary user changes&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This table supports parallel editing and safe drafts.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;4. Additional Draft Actions and What They Do&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In RAP, the draft handling pattern can be extended beyond the basic actions .&lt;BR /&gt;For more advanced scenarios ‚Äî especially when working with optimized draft flows, background checks, or multi-step editing ‚Äî we can include the following actions:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  draft action Activate optimized;
  draft action Edit;
  draft action Discard;
  draft action Resume;
  draft determine action Prepare { }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Beyond the basic Edit / Activate / Discard pattern, RAP provides additional draft actions to improve performance and user experience.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Resume&lt;/STRONG&gt; ‚Äì restores an existing draft so users can continue where they left off.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Prepare&lt;/STRONG&gt; ‚Äì pre-fills data before the user sees the draft instance.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;These actions require no manual coding unless you want to enhance them, and together they deliver a modern, safe, Fiori-compliant editing workflow.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;5. Add&amp;nbsp;&lt;FONT face="courier new,courier"&gt;&lt;SPAN&gt;total&lt;/SPAN&gt; &lt;SPAN&gt;etag&lt;/SPAN&gt; &lt;SPAN&gt;LastChangedAt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This ETag is used by RAP to guarantee concurrency and data consistency.&lt;BR /&gt;It prevents situations where one user accidentally overwrites changes made by another user.&lt;BR /&gt;It is also required for draft handling and for the Fiori Elements UI, which relies on this timestamp to detect outdated edits.&lt;BR /&gt;RAP automatically manages this field, updating it whenever the record is changed.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;6. Update the Behavior Projection&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The projection behavior definition exposes the business behavior to the Fiori UI and the OData service. Even if the root BO supports create, update, delete, and draft actions, they must be explicitly enabled in the behavior projection. Without this step, Fiori Elements will not show the Create/Edit/Delete or draft buttons. The projection layer ensures clean core separation by keeping internal logic in the root BO while exposing only the required operations to the UI.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );
use draft;

define behavior for ZC_ITEM_02 alias Item
{
  use create;
  use update;
  use delete;

  use action Activate;
  use action Edit;
  use action Discard;
  use action Resume;
  use action Prepare;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;7. Create Behavior Implementation Class&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Eclipse generates a global ABAP class with the naming convention.&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="14.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344563i0F61B1FF8B9FE73D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="14.png" alt="14.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Understanding What ‚ÄúManaged Implementation‚Äù Means&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Standard CRUD is generated automatically&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;You &lt;STRONG&gt;do not&lt;/STRONG&gt; need to write: create/ update/ delete logic, draft save/ load logic, locking logic, ETag management&lt;/P&gt;&lt;P&gt;RAP provides all of this out of the box.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;The class is only for custom behavior&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This is where we will later implement &lt;STRONG&gt;v&lt;/STRONG&gt;&lt;STRONG&gt;alidations&lt;/STRONG&gt; (check input before save), &lt;STRONG&gt;d&lt;/STRONG&gt;&lt;STRONG&gt;eterminations&lt;/STRONG&gt; (auto-fill fields),&amp;nbsp;&lt;STRONG&gt;a&lt;/STRONG&gt;&lt;STRONG&gt;ctions&lt;/STRONG&gt; (mark item as completed), &lt;STRONG&gt;u&lt;/STRONG&gt;&lt;STRONG&gt;nmanaged logic,&lt;/STRONG&gt;&amp;nbsp;&lt;STRONG&gt;feature control, a&lt;/STRONG&gt;&lt;STRONG&gt;uthorization checks&lt;/STRONG&gt;&lt;SPAN&gt;, if needed.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;But for Part 2 (Draft + CRUD), the class stays empty.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;8.&amp;nbsp;Creating the Metadata Extension (UI Annotations)&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;After creating the &lt;STRONG&gt;projection view&lt;/STRONG&gt; and exposing the BO behavior, we need to define how this data should be displayed in Fiori Elements apps.&lt;/P&gt;&lt;P&gt;This is where &lt;STRONG&gt;metadata extensions&lt;/STRONG&gt; come into play. They allow you to add UI annotations &lt;STRONG&gt;without touching the core CDS view&lt;/STRONG&gt;, keeping your implementation clean and following &lt;STRONG&gt;Clean Core principles&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Right-click on the Consumption View ‚Üí &lt;STRONG&gt;New&lt;/STRONG&gt; ‚Üí &lt;STRONG&gt;Metadata Extension&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CORE
annotate entity ZC_ITEM_02 with
{
  @UI.facet: [
         {
             purpose: #STANDARD,
             type: #IDENTIFICATION_REFERENCE,
             label: 'Items',
             position: 10
         } ]
  ItemId;
  @UI.lineItem: [{ position: 10, label: 'Name' }]
  @UI.identification: [{ position: 10, label: 'Name' }]
  Name;
  @UI.lineItem: [{ position: 20, label: 'Description' }]
  @UI.identification: [{ position: 20, label: 'Description' }]
  Description;
  @UI.lineItem: [{ position: 30, label: 'Price' }]
  @UI.identification: [{ position: 30, label: 'Price' }]
  Price;
  @UI.lineItem: [{ position: 40, label: 'Status Code' }]
  @UI.identification: [{ position: 40, label: 'Status Code' }]
  StatusCode;

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;The metadata extension defines how the Item BO is displayed in Fiori Elements. Using annotations like &lt;FONT face="courier new,courier"&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem&lt;/FONT&gt; and &lt;FONT face="courier new,courier"&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.Identification&lt;/FONT&gt;, we specify which fields appear in the list report and object header. The&amp;nbsp;&lt;FONT face="courier new,courier"&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.facet&lt;/FONT&gt;&amp;nbsp;groups the fields into a standard identification card. Placing these annotations in a metadata extension layer ensures &lt;STRONG&gt;Clean Core compliance&lt;/STRONG&gt;, separating UI concerns from business logic, while enabling a ready-to-use Fiori preview.&lt;/P&gt;&lt;P&gt;After adding &lt;STRONG&gt;draft-enabled behavior&lt;/STRONG&gt; and the &lt;STRONG&gt;metadata extension&lt;/STRONG&gt;, let‚Äôs see the results in the Fiori preview:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="17.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344567i3353399C54E11C23/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="17.png" alt="17.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Create Button &lt;/STRONG&gt;appears automatically at the top of the list report and clicking it opens a &lt;STRONG&gt;draft object&lt;/STRONG&gt;, ready for entry.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="19.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344569i0C0FBDCF3D894E55/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="19.png" alt="19.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Delete Button&amp;nbsp;&lt;/STRONG&gt;appears at the top of the list report.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;List Report&amp;nbsp;&lt;/STRONG&gt;d&lt;SPAN&gt;isplays all annotated fields &lt;/SPAN&gt;&lt;STRONG&gt;without manually selecting columns&lt;/STRONG&gt;, s&lt;SPAN&gt;hows all items.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="18.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344568i72F6807AC55D6A1F/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="18.png" alt="18.png" /&gt;&lt;/span&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Object Page: &lt;/STRONG&gt;clicking a list entry opens the object page.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Edit Button&amp;nbsp;&lt;/STRONG&gt;is visible on the object page, c&lt;SPAN&gt;licking it opens the draft for editing, supporting &lt;/SPAN&gt;&lt;STRONG&gt;safe modifications&lt;/STRONG&gt;&lt;SPAN&gt; before activation.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;This confirms that &lt;STRONG&gt;draft-enabled RAP objects&lt;/STRONG&gt;, combined with &lt;STRONG&gt;metadata annotations&lt;/STRONG&gt;, automatically generate a full-featured Fiori UI: list report, object page, and CRUD actions‚Äî&lt;STRONG&gt;all without writing UI code manually&lt;/STRONG&gt;.&lt;/P&gt;&lt;H1 id="toc-hId--1945340595"&gt;&amp;nbsp;&lt;/H1&gt;&lt;H1 id="toc-hId--2141854100"&gt;Part 3:&amp;nbsp;Enhancing the Item BO with Actions, Determinations, Validations&lt;/H1&gt;&lt;P&gt;In Part 1 and Part 2, we created the basic structure of a RAP Business Object, enabled draft handling, activated CRUD operations, and prepared a clean UI using metadata extensions.&lt;/P&gt;&lt;P&gt;Now, in &lt;STRONG&gt;Part 3&lt;/STRONG&gt;, we introduce the most important part of RAP:&lt;BR /&gt;&lt;STRONG&gt;Business logic&lt;/STRONG&gt; ‚Äî implemented through:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Validations&lt;/STRONG&gt; (check before save)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Determinations&lt;/STRONG&gt; (auto-fill fields)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Actions&lt;/STRONG&gt; (custom operations triggered by the user)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Side Effects&lt;/STRONG&gt; (UI refresh logic after actions)&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;To demonstrate these features in a realistic scenario, we switch to a second simple Business Object:&amp;nbsp;&lt;STRONG&gt;Leave Requests&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This BO includes fields such as employee name, requested days, and status.&lt;BR /&gt;With it, we implement:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;A validation to ensure the requested days are &amp;gt; 0&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;A determination that sets the default status&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;A custom action &lt;EM&gt;Approve Leave Request&lt;/EM&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Metadata annotations to show an action button in the UI&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Side effects to refresh the UI automatically after approval&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId-1663196684"&gt;&lt;STRONG&gt;Leave Request BO ‚Äî Behavior Definition&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Here is the behavior definition, which we will explain piece by piece:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_r_leavereq unique;
strict ( 2 );
with draft;

define behavior for ZR_LEAVEREQ
persistent table zleavereq
draft table zleavereq_d
lock master
total etag LastChangedAt
authorization master ( instance )
etag master LastChangedAt
{
  create ( authorization : global );
  update;
  delete;
  field ( readonly, numbering : managed ) Leaveguid;

  draft action Activate optimized;
  draft action Edit;
  draft action Discard;
  draft action Resume;
  draft determine action Prepare { }

  validation checkDays on save { create; update; field DaysReq; }
  determination setDefaultStatus on modify { create; }
  action approveLeaveRequest;


  mapping for zleavereq
    {
      Leaveguid          = leaveguid;
      EmployeeName       = employee_name;
      DaysReq            = days_req;
      Status             = status;
      LocalCreatedAt     = local_created_at;
      LocalCreatedBy     = local_created_by;
      LocalLastChangedAt = local_last_changed_at;
      LocalLastChangedBy = local_last_changed_by;
      LastChangedAt      = last_changed_at;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-1173280172"&gt;&lt;STRONG&gt;Validation: checkDays&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;A &lt;STRONG&gt;validation&lt;/STRONG&gt; allows you to stop a save operation if business rules are violated.&lt;/P&gt;&lt;P&gt;In this example, we ensure that requested days &amp;gt; 0.&lt;/P&gt;&lt;H3 id="toc-hId-976766667"&gt;&lt;STRONG&gt;Validation Logic in the Behavior Implementation Class&lt;/STRONG&gt;&lt;/H3&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD checkDays.
  READ ENTITIES OF zr_leavereq IN LOCAL MODE
  ENTITY zr_leavereq
  ALL FIELDS
  WITH CORRESPONDING #( keys )
  RESULT DATA(lt_leave_req).

  LOOP AT lt_leave_req ASSIGNING FIELD-SYMBOL(&amp;lt;fs_lr&amp;gt;).
    IF &amp;lt;fs_lr&amp;gt;-DaysReq &amp;lt; 1.
      APPEND VALUE #( %tky = &amp;lt;fs_lr&amp;gt;-%tky ) TO failed-zr_leavereq.
      APPEND VALUE #(
          %tky =  &amp;lt;fs_lr&amp;gt;-%tky
          %msg = new_message_with_text(
          text = 'Number of days should be &amp;gt; 0.'
          severity = if_abap_behv_message=&amp;gt;severity-error )
      ) TO reported-zr_leavereq.
    ENDIF.
  ENDLOOP.
ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-780253162"&gt;What This Does&lt;/H3&gt;&lt;UL&gt;&lt;LI&gt;Prevents invalid leave requests&lt;/LI&gt;&lt;LI&gt;Displays an error in the Fiori UI&lt;/LI&gt;&lt;LI&gt;Ensures data consistency&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The validation is triggered on &lt;STRONG&gt;save&lt;/STRONG&gt;, both for create and update.&lt;/P&gt;&lt;H3 id="toc-hId-583739657"&gt;&lt;STRONG&gt;Determination: setDefaultStatus&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;A &lt;STRONG&gt;determination&lt;/STRONG&gt; is used to auto-fill or derive values without UI involvement.&lt;/P&gt;&lt;P&gt;Here, whenever a leave request is created, we automatically set its initial status:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD setDefaultStatus.
  DATA(key) = VALUE #( keys[ 1 ] OPTIONAL ).

  MODIFY ENTITIES OF zr_leavereq IN LOCAL MODE
  ENTITY zr_leavereq
  UPDATE FIELDS ( Status )
  WITH VALUE #( ( %tky = key-%tky
                  Status = 'Pending' ) ).

ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-555409843"&gt;&lt;STRONG&gt;Action: approveLeaveRequest&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Actions implement custom operations that the user triggers manually from the UI.&lt;/P&gt;&lt;P&gt;Here, we add an &lt;STRONG&gt;Approve&lt;/STRONG&gt; action.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;METHOD approveLeaveRequest.
  DATA(key) = VALUE #( keys[ 1 ] OPTIONAL ).

  MODIFY ENTITIES OF zr_leavereq IN LOCAL MODE
  ENTITY zr_leavereq
  UPDATE FIELDS ( Status )
  WITH VALUE #( ( %tky = key-%tky
                  Status = 'Approved' ) ).

ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-358896338"&gt;When is an Action Appropriate?&lt;/H3&gt;&lt;P&gt;Use an action when:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&amp;nbsp;you require manual user intent (approve, reject, submit)&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;the change differs from standard CRUD&lt;/LI&gt;&lt;LI&gt;&amp;nbsp;you want a button in the UI&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H3 id="toc-hId-162382833"&gt;&lt;STRONG&gt;Adding the Action to the Behavior Projection&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Without adding it to the projection, the UI cannot call the action.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );
use draft;

define behavior for ZC_LEAVEREQ
{
  use create;
  use update;
  use delete;

  use action approveLeaveRequest;

  side effects
  {
    action approveLeaveRequest affects $self, field Status;
  }

  use action Activate;
  use action Edit;
  use action Discard;
  use action Resume;
  use action Prepare;
}&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId--34130672"&gt;&lt;STRONG&gt;Side Effects ‚Äî Keeping Fiori UI Updated&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Side effects tell RAP &lt;STRONG&gt;which fields or entities might change&lt;/STRONG&gt; when an action runs.&lt;/P&gt;&lt;P&gt;This ensures the UI refreshes automatically after the action is executed.&lt;/P&gt;&lt;P&gt;This informs Fiori Elements:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;After pressing ‚ÄúApprove‚Äù, refresh the Status field&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Update list report and object page automatically&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Without side effects, the UI does not update until a manual refresh.&lt;/P&gt;&lt;H3 id="toc-hId--230644177"&gt;&lt;STRONG&gt;Adding an Inline Action Button to the Fiori List Report&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;In the Metadata Extension, you expose the action as a button:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@UI.lineItem: [{
  position: 40,
  type: #FOR_ACTION,
  dataAction: 'approveLeaveRequest',
  label: 'Approve',
  inline: true
}]&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId--427157682"&gt;Meaning of inline: true&lt;/H3&gt;&lt;P&gt;‚úî The approve button appears &lt;STRONG&gt;directly in the table row&lt;/STRONG&gt;&lt;BR /&gt;‚úî User can approve without navigating to the object page&lt;BR /&gt;‚úî Great for workflow-like processes&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350271i0BDEA75022524004/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--36865173"&gt;Part 4: CDS Relationships: Associations and Composition&lt;/H1&gt;&lt;P&gt;In this part, we move to a more realistic RAP scenario, where our business object is no longer a single table.&lt;BR /&gt;Instead, we have &lt;STRONG&gt;Projects&lt;/STRONG&gt; and &lt;STRONG&gt;Tasks&lt;/STRONG&gt;, and these objects need to be connected.&lt;/P&gt;&lt;P&gt;RAP uses &lt;STRONG&gt;CDS associations&lt;/STRONG&gt; and &lt;STRONG&gt;compositions&lt;/STRONG&gt; to model these relationships.&lt;/P&gt;&lt;H2 id="toc-hId--526781685"&gt;&lt;STRONG&gt;CDS Associations ‚Äî Linking Entities Together&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;An association is basically a &lt;EM&gt;link&lt;/EM&gt; between two view entities ‚Äî similar to a JOIN ‚Äî but it is not executed until we actually navigate to it.&lt;/P&gt;&lt;H3 id="toc-hId--1016698197"&gt;&lt;STRONG&gt;Association Between Task and User&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;In our app, each Task is assigned to a User.&lt;BR /&gt;We represent this using an association:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;define view entity ZI_TASK
  as select from ztask_01
  association [0..1] to ZR_USER         as _User    on _User.UserCode = $projection.Assignee
{&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId--1213211702"&gt;&lt;STRONG&gt;What this means (simple explanation)&lt;/STRONG&gt;&lt;/H3&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;association ‚Üí create a link between Task and User&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;ZR_USER ‚Üí the target entity (the User root)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;_User ‚Üí the name we will use to navigate to it&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;on ... ‚Üí join condition ( Assignee equals the&amp;nbsp;UserCode&amp;nbsp;)&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId--948138509"&gt;&lt;STRONG&gt;Cardinality ‚Äî What&amp;nbsp;&lt;/STRONG&gt;[0..1]&lt;STRONG&gt;&amp;nbsp;Means&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Cardinality describes &lt;EM&gt;how many related records&lt;/EM&gt; the association can return.&lt;/P&gt;&lt;P&gt;This means:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;0&lt;/STRONG&gt; ‚Üí the task might not have an assigned user (Assignee is empty)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;1&lt;/STRONG&gt; ‚Üí if a user is assigned, there can be only one matching UserCode&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This is a &lt;STRONG&gt;typical ‚Äúoptional 1-to-1‚Äù&lt;/STRONG&gt; relationship.&lt;/P&gt;&lt;P&gt;If Assignee = 'USR01', we get that one user.&lt;BR /&gt;If Assignee is empty, we get nothing.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId--1144652014"&gt;&lt;STRONG&gt;Using the Association in the Projection&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Inside the projection view &lt;CODE&gt;ZC_TASK&lt;/CODE&gt;, we read the user‚Äôs name through the &lt;CODE&gt;_User&lt;/CODE&gt; association:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;_User.UserName as AssigneeName,&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;This is only &lt;EM&gt;read&lt;/EM&gt;, not stored anywhere in the Task table.&lt;/P&gt;&lt;P&gt;To make SAP Fiori show the text automatically, we add:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@ObjectModel.text.element: ['AssigneeName']
Assignee,&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId--1634568526"&gt;Result in the Fiori UI:&lt;/H3&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;The UI displays &lt;STRONG&gt;UserCode + UserName&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-left" image-alt="image.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350311iAA498D1E8747141E/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId--1244276017"&gt;&amp;nbsp;&lt;/H1&gt;&lt;H1 id="toc-hId--1440789522"&gt;&amp;nbsp;&lt;/H1&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId--1930706034"&gt;&amp;nbsp;&lt;/H2&gt;&lt;H2 id="toc-hId--2127219539"&gt;&lt;STRONG&gt;Why Associations Are Great&lt;/STRONG&gt;&lt;/H2&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;They avoid duplicate data&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;They allow ‚Äúon-demand‚Äù navigation&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;They plug naturally into Fiori Elements&lt;BR /&gt;(value helps, display texts, navigation links)&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId-1971234252"&gt;&lt;STRONG&gt;Composition ‚Äî Building a Parent/Child Relationship (Project ‚Üí Tasks)&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Now that we‚Äôve seen simple associations, let‚Äôs move to something more powerful in RAP:&lt;BR /&gt;&lt;STRONG&gt;composition&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;A composition is not just a link ‚Äî it models a &lt;STRONG&gt;parent/child relationship&lt;/STRONG&gt; where the child‚Äôs lifecycle depends entirely on the parent.&lt;/P&gt;&lt;P&gt;In our example:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Project&lt;/STRONG&gt; is the &lt;EM&gt;parent&lt;/EM&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Tasks&lt;/STRONG&gt; are the &lt;EM&gt;children&lt;/EM&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This is a very common RAP pattern used in real applications.&lt;/P&gt;&lt;H1 id="toc-hId-2068123754"&gt;&lt;STRONG&gt;Defining the Composition in the Root Entity&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;In the Project root view (ZR_PROJECT), we define:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;composition [0..*] of ZI_TASK as _Tasks&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-1284804235"&gt;What this means (simple explanation):&lt;/H3&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;composition ‚Üí strong parent‚Äìchild relationship&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;[0..*] ‚Üí a project can have &lt;STRONG&gt;zero, one, or many&lt;/STRONG&gt; tasks&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;of ZI_TASK&amp;nbsp;‚Üí tasks are the child entity&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;_Tasks&amp;nbsp;‚Üí the navigation property we will use in the UI&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This tells RAP that:&lt;/P&gt;&lt;P&gt;&amp;nbsp;Tasks belong to a project&lt;BR /&gt;&amp;nbsp;Tasks cannot exist without the project&lt;BR /&gt;&amp;nbsp;If the project is deleted, all its tasks must be deleted too&lt;BR /&gt;&amp;nbsp;Tasks must always reference a ProjectId (its parent)&lt;/P&gt;&lt;P&gt;This is different from a normal association ‚Äî it defines &lt;STRONG&gt;ownership&lt;/STRONG&gt;.&lt;/P&gt;&lt;H1 id="toc-hId-1843280435"&gt;&lt;STRONG&gt;Exposing the Composition in the Projection&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;In the Project projection (ZC_PROJECT), we expose the composition:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;_Tasks : redirected to composition child ZC_TASK&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;This allows the UI to show &lt;STRONG&gt;the list of Tasks inside the Project object page&lt;/STRONG&gt;, including:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Create Task&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Edit Task&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Delete Task&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;All directly in the Project UI.&lt;/P&gt;&lt;P&gt;Without this redirection, the Tasks table wouldn't appear in the Fiori Elements app.&lt;/P&gt;&lt;H1 id="toc-hId-1646766930"&gt;&lt;STRONG&gt;Behavior Definition: Root and Child Must Work Together&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;Since compositions define hierarchy, the &lt;STRONG&gt;behavior&lt;/STRONG&gt; must reflect that hierarchy.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;define behavior for ZR_PROJECT alias Project
{
  create;
  update;
  delete;

  association _Tasks { create; with draft; }
}&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-863447411"&gt;Meaning:&lt;/H3&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;The Project behavior controls the entire object&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;It is allowed to &lt;STRONG&gt;create children&lt;/STRONG&gt; (_Tasks { create; })&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Children are created &lt;STRONG&gt;in the context of the parent&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;In Fiori:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;When you open a Project ‚Üí Task table appears&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;‚ÄúCreate‚Äù inside the Tasks table creates a &lt;STRONG&gt;child&lt;/STRONG&gt; of this project&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;define behavior for ZI_TASK alias Task
{
  update;
  delete;

  field (readonly) ParentId;

  association _Project { with draft; }
}&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId-666933906"&gt;Meaning:&lt;/H3&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Tasks cannot create their own parent&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Tasks inherit locking and authorization from the Project&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Tasks cannot change the ParentId (because it is read-only)&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The lifecycle looks like this:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;You create a &lt;STRONG&gt;Project&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Inside the project, you add &lt;STRONG&gt;Tasks&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Tasks cannot exist outside the Project&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;H2 id="toc-hId-763823408"&gt;Why Composition Is Important&lt;/H2&gt;&lt;P&gt;It gives RAP a clear structure of your data model&lt;BR /&gt;It enables nested object pages (Projects ‚Üí Tasks)&lt;BR /&gt;It simplifies locking, authorization, and lifecycle management&lt;BR /&gt;Fiori Elements automatically understands parent/child UI patterns&lt;BR /&gt;Child objects cannot ‚Äúfloat‚Äù or become inconsistent&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H1 id="toc-hId-860712910"&gt;Part 5: Value Helps&amp;nbsp;&lt;/H1&gt;&lt;P&gt;So far, we built our entities, associations, and composition.&lt;BR /&gt;But in a real Fiori Elements app, users shouldn‚Äôt manually type in IDs.&lt;/P&gt;&lt;P&gt;Instead, they should select values from a &lt;STRONG&gt;value help&lt;/STRONG&gt; (similar to a search help in classical ABAP).&lt;/P&gt;&lt;P&gt;In RAP, value helps are implemented using &lt;STRONG&gt;CDS view entities&lt;/STRONG&gt; and the annotation:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Consumption.valueHelpDefinition&lt;/code&gt;&lt;/pre&gt;&lt;H2 id="toc-hId-370796398"&gt;&lt;STRONG&gt;Creating a Value Help View&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Let‚Äôs look at the value help for selecting a User.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Value Help for User'
@Metadata.ignorePropagatedAnnotations: true
define view entity ZI_USER_VH
  as select from ZR_USER
{
    @UI.hidden: true
  key UserId,
      UserCode,
      UserName
}&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;It selects from ZR_USER, our user root entity.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;The value help will show &lt;STRONG&gt;UserCode&lt;/STRONG&gt; and &lt;STRONG&gt;UserName&lt;/STRONG&gt; in the popup search dialog.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;This view is not a projection ‚Äî it's a standalone VH definition recommended for RAP apps.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This view is now ready to be used by any field that needs a value help for Users.&lt;/P&gt;&lt;H2 id="toc-hId-174282893"&gt;&lt;STRONG&gt;Plugging the Value Help into the Task Projection&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;In the Task projection, we attach the value help to the &lt;STRONG&gt;Assignee&lt;/STRONG&gt; field:&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Consumption.valueHelpDefinition: [{
    entity: { name: 'ZI_USER_VH', element: 'UserCode' },
    useForValidation: true
}]
Assignee,&lt;/code&gt;&lt;/pre&gt;&lt;H3 id="toc-hId--315633619"&gt;What this does:&lt;/H3&gt;&lt;P&gt;Opens a value help popup&lt;BR /&gt;Shows columns from ZI_USER_VH (UserCode, UserName)&lt;BR /&gt;Ensures the selected UserCode is valid (useForValidation: true)&lt;BR /&gt;Prevents users from entering invalid users&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350318i31B6B3B8D50B2471/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/an-end-to-end-hands-on-tutorial-for-clean-core-rap-development/ba-p/14276157"/>
    <published>2025-11-28T12:18:20.855000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/implementing-unmanaged-crud-operations-in-sap-rap-a-hands-on-guide/ba-p/14281820</id>
    <title>Implementing Unmanaged CRUD Operations in SAP RAP: A Hands-On Guide</title>
    <updated>2025-12-03T06:15:44.874000+01:00</updated>
    <author>
      <name>manijangiti</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2174619</uri>
    </author>
    <content>&lt;P&gt;&amp;nbsp;In this blog, I‚Äôm going to walk you through how to implement unmanaged CRUD operations in &lt;STRONG&gt;SAP RAP&lt;/STRONG&gt; for an on-premise system. We‚Äôll be using a simple &lt;STRONG&gt;employee management&lt;/STRONG&gt; example to cover the basics of creating, updating, and deleting employee records.&lt;/P&gt;&lt;P&gt;By the end of this post, you‚Äôll understand how to work with CRUD operations in the &lt;STRONG&gt;RAP framework&lt;/STRONG&gt; and get hands-on experience with it. I‚Äôve been working on this project recently, and I figured it would be useful to share the process with you.&lt;/P&gt;&lt;P&gt;Just a quick note: I‚Äôve been using &lt;STRONG&gt;AI&lt;/STRONG&gt; (like GenAI) to help with writing content for this blog. It‚Äôs been super helpful for organizing thoughts and getting content down quickly while I focus on the technical stuff. AI‚Äôs a great tool for speeding up writing, and I think it‚Äôs worth mentioning how it‚Äôs making content creation a bit easier for me.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Visual Structure Example:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;+---------------------------------------+
| Step 1: Create Database Table        |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 2: Create Root View             |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 3: Create Projection View       |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 4: Create Behavior Definition   |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 5: Create Behavior for Projection|
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 6: Create Metadata Extension    |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 7: Implement CRUD Logic         |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 8: Create Service Definition    |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 9: Bind the Service             |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 10: Test CRUD Operations        |
+---------------------------------------+&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-2024575596"&gt;&lt;STRONG&gt;Step 1: Create a Database Table&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Here, we create a table in the database that stores employee information like employee ID, name, email, salary, etc. We use special annotations to tell SAP how this table should be used.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Employee Table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zun_emp_tab {
  key client    : abap.clnt not null;
  key emp_id    : zempid not null;
  first_name    : abap.char(30);
  last_name     : abap.char(30);
  date_of_birth : abap.dats;
  email         : abap.sstring(60);
  hire_date     : abap.dats;
  @Semantics.amount.currencyCode : 'zun_emp_tab.curry'
  salary        : abap.curr(15,2);
  curry         : abap.cuky;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1828062091"&gt;&lt;STRONG&gt;Step 2: Create a Root View for the Table&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;The &lt;STRONG&gt;Root View&lt;/STRONG&gt; is like a connection between the database table and the system. It allows the data to be used for CRUD operations.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Interface view'
@Metadata.ignorePropagatedAnnotations: true
define root view entity zun_emp_root as select from zun_emp_tab
{
   key emp_id as EmpId,
   first_name as FirstName,
   last_name as LastName,
   date_of_birth as DateOfBirth,
   email as Email,
   hire_date as HireDate,
   @Semantics.amount.currencyCode: 'curry'
   salary as Salary,
   curry as Curry
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1631548586"&gt;&lt;STRONG&gt;Step 3: Create a Projection View for the Root View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;A &lt;STRONG&gt;Projection View&lt;/STRONG&gt; is a simplified version of the Root View, designed specifically for consumption in applications. It lets users view and edit employee information in a user-friendly format.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Consumption View'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity zun_emp_proj as projection on zun_emp_root
{
    key EmpId,
    FirstName,
    LastName,
    DateOfBirth,
    Email,
    HireDate,
    @Semantics.amount.currencyCode: 'Curry'
    Salary,
    Curry
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1435035081"&gt;&lt;STRONG&gt;Step 4: Create Behavior Definition for the Root View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;This is where we define what can happen to the data (create, update, delete). We set permissions and behaviors for each operation.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;unmanaged implementation in class zbp_un_emp_root unique;
strict ( 2 );
define behavior for zun_emp_root alias  EMP
late numbering
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
{
  create;
  update;
  delete;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1238521576"&gt;&lt;STRONG&gt;Step 5: Create Behavior Definition for the Projection View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Similar to the Root View, we define behavior for the Projection View, ensuring that data can be created, updated, and deleted in the UI.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );

define behavior for zun_emp_proj alias EMP
{
  use create;
  use update;
  use delete;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1042008071"&gt;&lt;STRONG&gt;Step 6: Create a Metadata Extension for the Projection View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Here, we enhance the UI by adding labels, fields, and other settings so users can easily interact with the employee data.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CUSTOMER

@UI.headerInfo: {
  typeName: 'Employee',
  typeNamePlural: 'Employees',
  title: {
    type: #STANDARD,
    label: 'Employee ID',
    value: 'EmpId'
  },
  description: {
    label: 'First Name',
    value: 'FirstName'
  }
}

annotate view zun_emp_proj with {

  //=========================
  // Facets (sections)
  //=========================
  .facet: [
    {
      id: 'GeneralInfo',
      type: #IDENTIFICATION_REFERENCE,
      label: 'General Information',
      position: 10
    }
  ]

  //=========================
  // General Information Fields
  //=========================
  .identification: [{ position: 10, label: 'Employee ID' }]
  .selectionField: [{ position: 10 }]
  .lineItem:       [{ position: 10 }]
  @EndUserText.label: 'Employee ID'
  EmpId;

  .identification: [{ position: 20, label: 'First Name' }]
  .selectionField: [{ position: 20 }]
  .lineItem:       [{ position: 20 }]
  @EndUserText.label: 'First Name'
  FirstName;

  .identification: [{ position: 30, label: 'Last Name' }]
  .selectionField: [{ position: 30 }]
  .lineItem:       [{ position: 30 }]
  @EndUserText.label: 'Last Name'
  LastName;

  .identification: [{ position: 40, label: 'Date of Birth' }]
  .lineItem:       [{ position: 40 }]
  .selectionField: [{ position: 40 }]
  @EndUserText.label: 'Date of Birth'
  DateOfBirth;

  .identification: [{ position: 50, label: 'Email' }]
  .lineItem:       [{ position: 50 }]
  @EndUserText.label: 'Email'
  Email;

  .identification: [{ position: 60, label: 'Hire Date' }]
  .selectionField: [{ position: 50 }]
  .lineItem:       [{ position: 60 }]
  @EndUserText.label: 'Hire Date'
  HireDate;

  .identification: [{ position: 70, label: 'Salary' }]
  .lineItem:       [{ position: 70 }]
  @EndUserText.label: 'Salary'
  Salary;

  .identification: [{ position: 80, label: 'Currency' }]
  .lineItem:       [{ position: 80 }]
  @EndUserText.label: 'Currency'
  Curry;

};&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-845494566"&gt;&lt;STRONG&gt;Step 7: Implement the Logic for CRUD Operations&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;We write the logic that handles creating, updating, and deleting employee records. We use three key components:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Handler Class&lt;/STRONG&gt;: This is where the main logic for CRUD operations happens.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Saver Class&lt;/STRONG&gt;: This class saves the changes to the database.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Buffer Class&lt;/STRONG&gt;: This is like a temporary holding place for changes before they are saved to the database.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Simplified Diagram:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;+------------------+   --&amp;gt; (Create, Update, Delete)
| User Request    | 
+------------------+   
        |
        V
+-------------------+   --&amp;gt;   (Handler Class)   --&amp;gt;   +---------------------+
|  Handler Class   | --------------------&amp;gt; |  Buffer Class        |
+-------------------+                       +---------------------+
        |                                           |
        V                                           V
+---------------------+                        +---------------------+
|  Data Saved in DB   |  &amp;lt;-- (Saver Class) &amp;lt;-- |  Database (Employee Data) |
+---------------------+                        +---------------------+&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;While practicing, you shouldn't just copy-paste the code. You should write it yourself to get hands-on experience.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;" Buffer class to hold create/update/delete entries temporarily
CLASS lcl_buffer DEFINITION CREATE PRIVATE.
  PUBLIC SECTION.
    TYPES: BEGIN OF ty_buffer,
             flag TYPE c LENGTH 1,       " 'C' = Create, 'U' = Update, 'D' = Delete
             lv_data TYPE zun_emp_tab,   " The structure that holds employee data
           END OF ty_buffer.

    CLASS-DATA mt_buffer TYPE STANDARD TABLE OF ty_buffer WITH EMPTY KEY.  " Table to store buffer entries

    " Method to get an instance of the buffer class (Singleton pattern)
    CLASS-METHODS get_instance
      RETURNING VALUE(ro_instance) TYPE REF TO lcl_buffer.

    " Method to add records to the buffer (Create, Update, or Delete)
    METHODS add_to_buffer
      IMPORTING
        iv_flag TYPE c         " Flag to specify the type of operation (C/U/D)
        is_employee TYPE zun_emp_tab.  " Employee data to be added to the buffer

  PRIVATE SECTION.
    CLASS-DATA go_instance TYPE REF TO lcl_buffer.  " Holds the single instance of the class
ENDCLASS.

CLASS lcl_buffer IMPLEMENTATION.

  METHOD get_instance.
    IF go_instance IS NOT BOUND.
      go_instance = NEW #( ).
    ENDIF.
    ro_instance = go_instance.
  ENDMETHOD.

  METHOD add_to_buffer.
    INSERT VALUE #( flag = iv_flag lv_data = is_employee ) INTO TABLE mt_buffer.
  ENDMETHOD.

ENDCLASS.

" Custom Exception Class
CLASS zcx_my_exception DEFINITION INHERITING FROM cx_static_check.
  PUBLIC SECTION.
    INTERFACES if_t100_message.  " This interface is used for handling messages.
    METHODS constructor IMPORTING
                          textid LIKE if_t100_message=&amp;gt;t100key OPTIONAL.  " Constructor to initialize exception with a message
ENDCLASS.

CLASS zcx_my_exception IMPLEMENTATION.
  METHOD constructor.
    CALL METHOD super-&amp;gt;constructor
      EXPORTING
        previous = previous.   " Calling the parent class constructor
    me-&amp;gt;if_t100_message~t100key = textid.  " Set the error message key
  ENDMETHOD.
ENDCLASS.

" Behavior Handler Class for EMP entity
CLASS lhc_EMP DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.
    " Method to check instance authorization for each operation
    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR emp RESULT result.

    " Methods for CRUD operations
    METHODS create FOR MODIFY
      IMPORTING entities FOR CREATE emp.

    METHODS update FOR MODIFY
      IMPORTING entities FOR UPDATE emp.

    METHODS delete FOR MODIFY
      IMPORTING keys FOR DELETE emp.

    METHODS read FOR READ
      IMPORTING keys FOR READ emp RESULT result.

    METHODS lock FOR LOCK
      IMPORTING keys FOR LOCK emp.
ENDCLASS.

CLASS lhc_EMP IMPLEMENTATION.

  METHOD create.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).

    LOOP AT entities ASSIGNING FIELD-SYMBOL(&amp;lt;ls_entity&amp;gt;).
      DATA ls_employee TYPE zun_emp_tab.

      " Map entity fields to employee structure
      ls_employee-emp_id        = &amp;lt;ls_entity&amp;gt;-EmpId.
      ls_employee-first_name    = &amp;lt;ls_entity&amp;gt;-FirstName.
      ls_employee-last_name     = &amp;lt;ls_entity&amp;gt;-LastName.
      ls_employee-date_of_birth = &amp;lt;ls_entity&amp;gt;-DateOfBirth.
      ls_employee-email         = &amp;lt;ls_entity&amp;gt;-Email.
      ls_employee-hire_date     = &amp;lt;ls_entity&amp;gt;-HireDate.
      ls_employee-salary        = &amp;lt;ls_entity&amp;gt;-Salary.
      ls_employee-curry         = &amp;lt;ls_entity&amp;gt;-Curry.

      " Add to buffer as create
      lo_buffer-&amp;gt;add_to_buffer( iv_flag = 'C' is_employee = ls_employee ).

      " Return mapped keys (required by RAP)
      INSERT VALUE #( %cid = &amp;lt;ls_entity&amp;gt;-%cid empID = ls_employee-emp_id ) INTO TABLE mapped-emp.
    ENDLOOP.
  ENDMETHOD.

  METHOD update.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).

    LOOP AT entities ASSIGNING FIELD-SYMBOL(&amp;lt;ls_entity&amp;gt;).
      " Fetch existing employee from DB to buffer with flag U
      DATA ls_db TYPE zun_emp_tab.
      SELECT SINGLE * FROM zun_emp_tab WHERE emp_id = @&amp;lt;ls_entity&amp;gt;-EmpId INTO _db.
      " Overwrite fields if updated in &amp;lt;ls_entity&amp;gt;
      IF &amp;lt;ls_entity&amp;gt;-FirstName IS NOT INITIAL.
        ls_db-first_name = &amp;lt;ls_entity&amp;gt;-FirstName.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-LastName IS NOT INITIAL.
        ls_db-last_name = &amp;lt;ls_entity&amp;gt;-LastName.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-DateOfBirth IS NOT INITIAL.
        ls_db-date_of_birth = &amp;lt;ls_entity&amp;gt;-DateOfBirth.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-email IS NOT INITIAL.
        ls_db-email = &amp;lt;ls_entity&amp;gt;-email.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-HireDate IS NOT INITIAL.
        ls_db-hire_date = &amp;lt;ls_entity&amp;gt;-HireDate.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-salary IS NOT INITIAL.
        ls_db-salary = &amp;lt;ls_entity&amp;gt;-salary.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-curry IS NOT INITIAL.
        ls_db-curry = &amp;lt;ls_entity&amp;gt;-curry.
      ENDIF.

      " Add updated employee to buffer with flag 'U'
      lo_buffer-&amp;gt;add_to_buffer( iv_flag = 'U' is_employee = ls_db ).

      " Return mapped keys
      INSERT VALUE #( %cid = &amp;lt;ls_entity&amp;gt;-%cid_ref empID = ls_db-emp_id ) INTO TABLE mapped-emp.
    ENDLOOP.
  ENDMETHOD.

  METHOD delete.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).

    LOOP AT keys ASSIGNING FIELD-SYMBOL(&amp;lt;ls_key&amp;gt;).
      " Create minimal structure for deletion
      DATA ls_employee TYPE zun_emp_tab.
      ls_employee-emp_id = &amp;lt;ls_key&amp;gt;-EmpId.

      " Add to buffer with flag 'D'
      lo_buffer-&amp;gt;add_to_buffer( iv_flag = 'D' is_employee = ls_employee ).

      " Return mapped keys
      INSERT VALUE #( %cid = &amp;lt;ls_key&amp;gt;-%cid_ref empID = &amp;lt;ls_key&amp;gt;-EmpId ) INTO TABLE mapped-emp.
    ENDLOOP.
  ENDMETHOD.

  METHOD read.
    " Implement read logic here if required
  ENDMETHOD.

  METHOD lock.
    " Implement lock logic if required
  ENDMETHOD.

ENDCLASS.

" Saver class to persist data with validation and proper error handling
CLASS lsc_ZUN_EMP_ROOT IMPLEMENTATION.

  METHOD save.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).
    LOOP AT lo_buffer-&amp;gt;mt_buffer ASSIGNING FIELD-SYMBOL(&amp;lt;ls_buf&amp;gt;).
      CASE &amp;lt;ls_buf&amp;gt;-flag.
        WHEN 'C'.  " If the flag is 'C', perform Insert operation
          INSERT zun_emp_tab FROM &amp;lt;ls_buf&amp;gt;-lv_data.
        WHEN 'U'.  " If the flag is 'U', perform Update operation
          UPDATE zun_emp_tab FROM &amp;lt;ls_buf&amp;gt;-lv_data.
        WHEN 'D'.  " If the flag is 'D', perform Delete operation
          DELETE FROM zun_emp_tab WHERE emp_id = &amp;lt;ls_buf&amp;gt;-lv_data-emp_id.
      ENDCASE.
    ENDLOOP.
    CLEAR lo_buffer-&amp;gt;mt_buffer.  " Clear the buffer after saving changes
  ENDMETHOD.

  METHOD finalize.
    " Optional post-save logic
  ENDMETHOD.

  METHOD check_before_save.
    " Optional pre-save validations
  ENDMETHOD.

  METHOD adjust_numbers.
  ENDMETHOD.

  METHOD cleanup.
    " Optional cleanup logic
  ENDMETHOD.

  METHOD cleanup_finalize.
    " Optional final cleanup
  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-648981061"&gt;&lt;STRONG&gt;Step 8: Create a Service Definition&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;We expose the Projection View as a service that can be used by other applications or systems.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service defination For Projection'
define service ZUN_SRV_DD {
  expose zun_emp_proj as EMP;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-452467556"&gt;&lt;STRONG&gt;Step 9: Bind the Service to Make it Available&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Once we define the service, we create a &lt;STRONG&gt;Service Binding&lt;/STRONG&gt; to make the service available for use in the system.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 798px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347382i644BAFEFF71F8936/image-dimensions/798x289/is-moderation-mode/true?v=v2" width="798" height="289" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H4 id="toc-hId-255954051"&gt;&lt;STRONG&gt;Step 10: Test CRUD Operations&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Finally, we test the system by adding, updating, and deleting records. This shows how the system behaves when interacting with employee data.&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347384i797850E9DEB5D62C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;I am testing a create operation.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347399i4635AD372AF4FD39/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347400i730BEA633B194E24/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347402iD083FEFAB3E31649/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Successfully created a record.&amp;nbsp;Updating a record that we created.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347403iD88800C2AC67FDB9/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347404i5F81A99022099A42/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Successfully updated the record. Now, I am going to delete the updated record.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347407iEF2FC67E3199325D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347410i3431AE05CAAE2BBB/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;STRONG&gt;Successfully deleted the record.&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;H3 id="toc-hId--144873542"&gt;Conclusion and Usage&lt;/H3&gt;&lt;P&gt;In this blog, we learned how to implement CRUD operations in SAP RAP using an employee management example. We created a database table, set up views, and defined behavior for creating, updating, and deleting employee records.&lt;/P&gt;&lt;H3 id="toc-hId--341387047"&gt;Why We Use Flags&lt;/H3&gt;&lt;P&gt;The flags (&lt;CODE&gt;C&lt;/CODE&gt; for Create, &lt;CODE&gt;U&lt;/CODE&gt; for Update, &lt;CODE&gt;D&lt;/CODE&gt; for Delete) help us track which operation needs to be performed on the data. These flags allow the system to know whether to insert, update, or delete a record in the database.&lt;/P&gt;&lt;H3 id="toc-hId--537900552"&gt;Using AI for Faster Content Creation&lt;/H3&gt;&lt;P&gt;While practicing and writing the code, I used &lt;STRONG&gt;AI&lt;/STRONG&gt; for faster content generation. AI helps speed up tasks like documentation and explanations, but the real learning comes from coding and understanding the process firsthand.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/implementing-unmanaged-crud-operations-in-sap-rap-a-hands-on-guide/ba-p/14281820"/>
    <published>2025-12-03T06:15:44.874000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/generating-odata-service-artifacts-from-multiple-cds-views-tables/ba-p/14284725</id>
    <title>Generating OData Service Artifacts from Multiple CDS Views/Tables</title>
    <updated>2025-12-05T13:02:08.408000+01:00</updated>
    <author>
      <name>Srivatsa</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1392861</uri>
    </author>
    <content>&lt;H2 id="toc-hId-1766498575"&gt;&lt;span class="lia-unicode-emoji" title=":hammer_and_wrench:"&gt;üõ†&lt;/span&gt;Ô∏è Step 1: Initialize the Service Generator&lt;/H2&gt;&lt;P&gt;Start the Service Generator tool (often accessed via ADT or a relevant Fiori tool). You will typically begin by defining the main service configuration.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_0-1764935874648.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348940iFDC84D46AADAEB83/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_0-1764935874648.png" alt="Srivatsa_0-1764935874648.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_8-1764935963049.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348948iEF648500C3D7BDA8/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_8-1764935963049.png" alt="Srivatsa_8-1764935963049.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-1569985070"&gt;&lt;span class="lia-unicode-emoji" title=":link:"&gt;üîó&lt;/span&gt; Step 2: Define Business Object Entities&lt;/H2&gt;&lt;P&gt;The key to multi-entity services is correctly defining all entities and their relationships.&lt;/P&gt;&lt;H3 id="toc-hId-1502554284"&gt;A. Define the Parent Entity (Header)&lt;/H3&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Add Entity:&lt;/STRONG&gt; Start by adding the primary, or "Header," entity. In your case, this is &lt;CODE&gt;R_S2P_VendMGNT&lt;/CODE&gt;.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Entity Alias:&lt;/STRONG&gt; &lt;CODE&gt;R_S2P_VendMGNT&lt;/CODE&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Parent Name:&lt;/STRONG&gt; Not applicable (as this is the top-level entity)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Fields:&lt;/STRONG&gt; Define the necessary fields, such as &lt;CODE&gt;VendorLegalName1&lt;/CODE&gt;, ensuring correct data types and lengths (e.g., &lt;CODE&gt;Char&lt;/CODE&gt;, length 10).&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;You dont have to pass the key field, it will automatically generate to SAP UUID.&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_2-1764935910461.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348942iAB0871491947D606/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_2-1764935910461.png" alt="Srivatsa_2-1764935910461.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_3-1764935916589.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348943i1533874456A33829/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_3-1764935916589.png" alt="Srivatsa_3-1764935916589.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H3 id="toc-hId-1306040779"&gt;B. Define the Child Entity (Item)&lt;/H3&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Add Entity:&lt;/STRONG&gt; Add the secondary, or "Item," entity, which represents the line items. In your scenario, this is &lt;CODE&gt;R_S2P_VMITem&lt;/CODE&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Establish Relationship:&lt;/STRONG&gt; This entity must be defined as a child of the header entity to enable navigation properties in the final OData service.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Entity Alias:&lt;/STRONG&gt; &lt;CODE&gt;R_S2P_VMITem&lt;/CODE&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Parent Name:&lt;/STRONG&gt; &lt;CODE&gt;R_S2P_VendMGNT&lt;/CODE&gt; (The header entity)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Cardinality:&lt;/STRONG&gt; &lt;STRONG&gt;"To Many"&lt;/STRONG&gt; - This is crucial as one vendor (header) can have multiple line items (items).&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Fields:&lt;/STRONG&gt; Define the item-specific fields (your image shows fields being added to &lt;CODE&gt;R_S2P_VMITem&lt;/CODE&gt; as well).&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_4-1764935930924.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348944iA0AD4BFD93FA08A9/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_4-1764935930924.png" alt="Srivatsa_4-1764935930924.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-980444555"&gt;&lt;span class="lia-unicode-emoji" title=":gear:"&gt;‚öôÔ∏è&lt;/span&gt; Step 3: Review and Generate Artifacts&lt;/H2&gt;&lt;P&gt;After defining both entities and their relationship, you can proceed to the generation step.&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Review Artifacts:&lt;/STRONG&gt; The generator will prepare a list of ABAP Repository Objects to be created. This list confirms the successful configuration of the multi-entity service.&lt;/P&gt;&lt;P&gt;The generated artifacts will include:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Service Definition (&lt;CODE&gt;ZUI_R_S2P_VENDMGNT...&lt;/CODE&gt;&lt;span class="lia-unicode-emoji" title=":disappointed_face:"&gt;üòû&lt;/span&gt;&lt;/STRONG&gt; Defines the entire OData service structure and exposes the entities.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Service Binding (&lt;CODE&gt;ZUI_R_S2P_VENDMGNT...&lt;/CODE&gt;&lt;span class="lia-unicode-emoji" title=":disappointed_face:"&gt;üòû&lt;/span&gt;&lt;/STRONG&gt; Provides a deployable endpoint for the OData service.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;SAP Object Node Types (&lt;CODE&gt;ZR_S2P_VENDMGNT&lt;/CODE&gt;&lt;span class="lia-unicode-emoji" title=":disappointed_face:"&gt;üòû&lt;/span&gt;&lt;/STRONG&gt; Defines the underlying object structure for each entity.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Data Definitions (&lt;CODE&gt;D ZC_R_S2P...&lt;/CODE&gt;&lt;span class="lia-unicode-emoji" title=":disappointed_face:"&gt;üòû&lt;/span&gt;&lt;/STRONG&gt; Defines the core ABAP structures.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Business Object Projection Entities:&lt;/STRONG&gt; Maps the CDS entities to the Business Object layer.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Generate:&lt;/STRONG&gt; Click &lt;STRONG&gt;Finish&lt;/STRONG&gt; to generate these artifacts.&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_5-1764935949209.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348945i3F4C59B97868CF7E/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_5-1764935949209.png" alt="Srivatsa_5-1764935949209.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_6-1764935954019.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348946iC188D7F7D9E0CC14/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_6-1764935954019.png" alt="Srivatsa_6-1764935954019.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_7-1764935958554.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348947i06E1317B3A5582F3/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_7-1764935958554.png" alt="Srivatsa_7-1764935958554.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_9-1764935971191.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348949iB370F9E132CBC875/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_9-1764935971191.png" alt="Srivatsa_9-1764935971191.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-783931050"&gt;&lt;span class="lia-unicode-emoji" title=":party_popper:"&gt;üéâ&lt;/span&gt; Conclusion&lt;/H2&gt;&lt;P&gt;By defining a hierarchical structure where the item entity is a child of the header entity with &lt;STRONG&gt;"To Many"&lt;/STRONG&gt; cardinality, you successfully generate all required ABAP artifacts for a robust OData service that handles complex data from multiple source tables/CDS views. This service can now be consumed by Fiori applications to retrieve both header and line item data efficiently.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_10-1764935981706.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348951i0EBDEFE3018CF1B9/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_10-1764935981706.png" alt="Srivatsa_10-1764935981706.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_11-1764935990860.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348952iC4348601F9A73391/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_11-1764935990860.png" alt="Srivatsa_11-1764935990860.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Srivatsa_12-1764935998981.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348953iB7EDBBCAF65AE48A/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="Srivatsa_12-1764935998981.png" alt="Srivatsa_12-1764935998981.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/generating-odata-service-artifacts-from-multiple-cds-views-tables/ba-p/14284725"/>
    <published>2025-12-05T13:02:08.408000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-call-a-rap-action-from-your-controller-extension/ba-p/14286229</id>
    <title>How to call a RAP action from your Controller Extension</title>
    <updated>2025-12-08T18:24:46.170000+01:00</updated>
    <author>
      <name>PranayGaroo</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2116915</uri>
    </author>
    <content>&lt;P&gt;&lt;FONT size="4"&gt;Traditionally to improve performance of a Fiori application the roundtrips to the backend (OData Service) should be minimal. To achieve this, we can push some processing logic to the frontend, This Blog explores one of the option to do that.&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;RAP Action&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;One of RAP‚Äôs powerful capabilities is the concept of &lt;EM&gt;actions&lt;/EM&gt; ‚Äî custom operations tied to a business object that let you implement domain-specific logic in ABAP using the behaviour implementation class (e.g. ‚Äúapprove order,‚Äù ‚Äúmass update statuses,‚Äù ‚Äútrigger workflow,‚Äù etc.) rather than relying purely on standard CRUD behaviour.&lt;/P&gt;&lt;P&gt;When you want to expose such actions in the UI of your RAP based Fiori App, there are two ways you can do it,&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Using OData Annotations&lt;/LI&gt;&lt;LI&gt;Using Controller extensions&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This blog covers a basic scenario of adding a custom button on the list page.&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;Using OData Annotations&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;Using OData annotation is the easier way out and suggested by SAP. SAP don‚Äôt want ABAPers to think much about the front end, that‚Äôs where the Fiori elements come in which is standard UI5 library to deploy Fiori apps, using which any ABAPer can create a Fiori app without have any knowledge about UI5.&lt;/P&gt;&lt;P&gt;Fiori elements generate the Fiori app in runtime using&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;OData Annotations&lt;/LI&gt;&lt;LI&gt;OData Service&lt;/LI&gt;&lt;LI&gt;Standard Fiori Floorplans.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;So, adding your annotations in the below manner to your CDS will add the custom action on your Fiori App.&lt;/P&gt;&lt;P&gt;For sake of simplicity, I am using a static action&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_0-1765214156877.png" style="width: 439px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349831i9D500EAA93394314/image-dimensions/439x264/is-moderation-mode/true?v=v2" width="439" height="264" role="button" title="PranayGaroo_0-1765214156877.png" alt="PranayGaroo_0-1765214156877.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Below is the metadata extension file containing the UI annotations&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_1-1765214156887.png" style="width: 432px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349833i8B5F3D686479049F/image-dimensions/432x383/is-moderation-mode/true?v=v2" width="432" height="383" role="button" title="PranayGaroo_1-1765214156887.png" alt="PranayGaroo_1-1765214156887.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Result,&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_2-1765214156893.png" style="width: 457px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349832iDB4BC7C7D3DDDB52/image-dimensions/457x191/is-moderation-mode/true?v=v2" width="457" height="191" role="button" title="PranayGaroo_2-1765214156893.png" alt="PranayGaroo_2-1765214156893.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;You can write the business logic for this action in the behaviour implementation class&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_3-1765214156901.png" style="width: 484px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349836iE4408C0247766A64/image-dimensions/484x327/is-moderation-mode/true?v=v2" width="484" height="327" role="button" title="PranayGaroo_3-1765214156901.png" alt="PranayGaroo_3-1765214156901.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;Using Controller extensions&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;If your requirement is not fulfilled by using the OData Annotations, for instance you want to call multiple actions using a single button or push some processing to your frontend rather than the backend (Your OData Service). You can use application modeler to add a custom button in the front end.&lt;/P&gt;&lt;P&gt;You can add a custom button using Application Modeler and add a handler method in your Controller extension. Using this handler method, you can call the same custom action from the RAP OData V4 service.&lt;/P&gt;&lt;P&gt;In the below example I am adding a custom button on the list page in the table toolbar.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_4-1765214156905.png" style="width: 466px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349834i00D60E7646DD07F6/image-dimensions/466x201/is-moderation-mode/true?v=v2" width="466" height="201" role="button" title="PranayGaroo_4-1765214156905.png" alt="PranayGaroo_4-1765214156905.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_5-1765214156909.png" style="width: 471px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349835iD7B6FE1F3468588C/image-dimensions/471x186/is-moderation-mode/true?v=v2" width="471" height="186" role="button" title="PranayGaroo_5-1765214156909.png" alt="PranayGaroo_5-1765214156909.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_6-1765214156913.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349837iB198F7A46CC6A6D1/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="PranayGaroo_6-1765214156913.png" alt="PranayGaroo_6-1765214156913.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Make Sure that you have created a Controller Extension for the page you are adding the custom button to, you can do that using the application modeler as well&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_7-1765214156922.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349838i21E5AAA1F7BE8503/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="PranayGaroo_7-1765214156922.png" alt="PranayGaroo_7-1765214156922.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Once the custom action is added you can add the below logic to call the custom action of the OData Service, you can replace the endpoint as per your OData service&lt;/P&gt;&lt;P&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-javascript"&gt;&lt;code&gt;OnActionPress: async function() {
// Calling a custom action of RAP Bobj using Controller ext
console.log("OnActionPress");
// Getting service URL
var model = this.base.getExtensionAPI().getModel();
var url = model.sServiceUrl;

// Making a GET call to fetch CSRF Token
var getTokenResp = await fetch( url, { method: "GET", headers: 
{ "X-CSRF-Token": "Fetch", Accept: "application/json" },credentials: "same-origin"  });
var token = getTokenResp.headers.get("x-csrf-token");	

// Calling Custom action by making a POST call
var uploadEndpoint = url + "Y_C_UTILAPP_PG/SAP__self.Upload";
const uploadResp = await fetch(uploadEndpoint, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            Accept: "application/json",
                            "X-CSRF-Token": token
                        },
                        credentials: "same-origin"
                    });
console.log("Calling a custom action of RAP Bobj using Controller ext"); }&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;Result&lt;/P&gt;&lt;P&gt;A similar custom button will be created&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="PranayGaroo_8-1765214156927.png" style="width: 550px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349839i56ADF25851B6239E/image-dimensions/550x271/is-moderation-mode/true?v=v2" width="550" height="271" role="button" title="PranayGaroo_8-1765214156927.png" alt="PranayGaroo_8-1765214156927.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Pressing this button will trigger the handler method ‚ÄòOnActionPress‚Äô which will make the POST call triggering the same ‚ÄòUpload‚Äô static action of the RAP Business Object.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;EM&gt;&lt;STRONG&gt;PS: Thank you for reading. I‚Äôll be writing more blogs soon on RAP, OData, UI5, and flexible programming languages ‚Äî hope to see you there!&lt;/STRONG&gt;&lt;/EM&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/how-to-call-a-rap-action-from-your-controller-extension/ba-p/14286229"/>
    <published>2025-12-08T18:24:46.170000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/call-bapi-in-custom-entity-through-rap/ba-p/14268610</id>
    <title>CALL BAPI IN CUSTOM ENTITY THROUGH RAP</title>
    <updated>2025-12-09T11:29:06.943000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;Hi RAP Developers, Good Day&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Introduction:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In many business scenarios, we need to expose BAPI-based data to SAP Fiori applications without creating database tables or CDS-based persistency. With the RESTful ABAP Programming Model (RAP), this can be achieved efficiently using &lt;STRONG&gt;Custom Entities&lt;/STRONG&gt;, which allow us to call ABAP logic directly‚Äîsuch as BAPIs‚Äîand return the data as an OData service.&lt;/P&gt;&lt;P&gt;In this blog, I will walk through how to build a &lt;STRONG&gt;Custom Entity that fetches bank details by calling a BAPI&lt;/STRONG&gt;, how to annotate it for UI consumption, and how to expose it seamlessly to a Fiori Elements application. This approach is useful whenever you want to reuse existing BAPIs and business logic while keeping your RAP model clean, lightweight, and high-performing.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This solution demonstrates how RAP can seamlessly integrate with classic SAP functionality by exposing BAPI output through a &lt;STRONG&gt;Custom Entity&lt;/STRONG&gt;. Instead of relying on database tables or CDS views, the Custom Entity acts as a virtual data source whose data is supplied dynamically via an ABAP class.&lt;/P&gt;&lt;P&gt;When a Fiori Elements UI requests the entity, RAP forwards the query to the ABAP implementation class. This class reads the query parameters (filters, sorting, pagination) and uses them to call &lt;STRONG&gt;BAPI_BANK_GETDETAIL&lt;/STRONG&gt;. The BAPI returns the bank‚Äôs address, master data, and related details, which are then transformed into the response structure expected by the Custom Entity.&lt;/P&gt;&lt;P&gt;The result is an OData-based, read-only endpoint capable of delivering real-time data from a BAPI with full RAP features such as filtering, sorting, paging, and total count support. This approach makes it easy to modernize existing SAP data retrieval logic while still leveraging stable, proven BAPIs in the backend.&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Custom Entity:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;custom entity not underlying any data source.&lt;/LI&gt;&lt;LI&gt;data preview is not possible, becuase this should be implemented in seperate class.&lt;/LI&gt;&lt;LI&gt;suitable for paging,calling bapi's and external api's.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Custom Entity calling bapi'
@ObjectModel: {
    query: {
        implementedBy: 'ABAP:ZCL_BAPI_BANK'
    }
}

@UI: {
    headerInfo: {
        typeName: 'Banks',
        typeNamePlural: 'Banks',
        title: { value: 'bank_ctry' },
        description: { value: 'bank_ctry' }
    }
}

@UI: {
    presentationVariant: [{
        sortOrder: [{
            by: 'bank_ctry',
            direction: #ASC
        }],
        visualizations: [{
            type: #AS_LINEITEM
        }]
    }]
}
define root custom entity ZCE_BANK
{
      .facet                : [
      {
          id      : 'Bank_data',
          purpose : #STANDARD,
          type    : #IDENTIFICATION_REFERENCE,
          label   : 'Bank Details',
          position: 10 }
      ]
      .lineItem             : [{ position: 10 }]
      .selectionField       : [{position: 10}]
      .identification       : [{position: 10}]
  key bank_ctry                : banks;
      .lineItem             : [{ position: 20 }]
      .selectionField       : [{position: 20}]
      .identification       : [{position: 20}]
  key bank_key                 : bankk;

      .lineItem             : [{ position: 30 }]
      .identification       : [{position: 30}]
      bank_name                : banka;

      .lineItem             : [{ position: 40 }]
      .identification       : [{position: 40}]
      street                   : stras_gp;

      .lineItem             : [{ position: 50 }]
      .identification       : [{position: 50}]
      city                     : ort01_gp;

      .lineItem             : [{ position: 60 }]
      .identification       : [{position: 60}]
      BANK_NO                  : bankl;

      .lineItem             : [{ position: 70 }]
      .identification       : [{position: 70}]
      CREAT_DATE               : erdat_bf;

      .lineItem             : [{ position: 80 }]
      .identification       : [{position: 80}]
      creator                  : ernam_bf;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Implementation:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS ZCL_BAPI_BANK DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    " RAP interface for query implementation
    INTERFACES IF_RAP_QUERY_PROVIDER.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.


CLASS ZCL_BAPI_BANK IMPLEMENTATION.

  METHOD IF_RAP_QUERY_PROVIDER~SELECT.

    "----------------------------------------------------------------------
    " Local type used to return data back to Custom Entity ZCE_BANK
    "----------------------------------------------------------------------
    TYPES: BEGIN OF TY_BANK_RESULT,
             BANK_CTRY  TYPE BANKS,
             BANK_KEY   TYPE BANKK,
             BANK_NAME  TYPE BANKA,
             STREET     TYPE STRAS_GP,
             CITY       TYPE ORT01_GP,
             BANK_NO    TYPE BANKL,
             CREAT_DATE TYPE ERDAT_BF,
             CREATOR    TYPE ERNAM_BF,
           END OF TY_BANK_RESULT.

    DATA: LT_RESULT  TYPE TABLE OF TY_BANK_RESULT,
          LS_RESULT  TYPE TY_BANK_RESULT,
          LS_ADDRESS TYPE BAPI1011_ADDRESS,
          LS_DETAIL  TYPE BAPI1011_DETAIL,
          LS_RETURN  TYPE BAPIRET2.

    " Proceed only if the consumer has requested data
    IF IO_REQUEST-&amp;gt;IS_DATA_REQUESTED( ).

      "---------------------------------------------------------------
      " Read pagination details (TOP and SKIP)
      "---------------------------------------------------------------
      DATA(LV_TOP)  = IO_REQUEST-&amp;gt;GET_PAGING( )-&amp;gt;GET_PAGE_SIZE( ).
      DATA(LV_SKIP) = IO_REQUEST-&amp;gt;GET_PAGING( )-&amp;gt;GET_OFFSET( ).

      "---------------------------------------------------------------
      " Prepare ORDER BY clause based on sort request from UI
      "---------------------------------------------------------------
      DATA(LT_SORT) = IO_REQUEST-&amp;gt;GET_SORT_ELEMENTS( ).
      DATA LV_ORDERBY TYPE STRING.

      IF LT_SORT IS NOT INITIAL.
        CLEAR LV_ORDERBY.

        LOOP AT LT_SORT INTO DATA(LS_SORT).
          IF SY-TABIX &amp;gt; 1.
            LV_ORDERBY = |{ LV_ORDERBY }, |.
          ENDIF.

          " Construct ORDER BY element (ASCENDING/DESCENDING)
          LV_ORDERBY =
            |{ LV_ORDERBY }{ LS_SORT-ELEMENT_NAME } {
               COND #( WHEN LS_SORT-DESCENDING = ABAP_TRUE
                       THEN 'DESCENDING'
                       ELSE 'ASCENDING' ) }|.
        ENDLOOP.
      ENDIF.

      "---------------------------------------------------------------
      " Derive SQL filter string from UI filter (if any)
      "---------------------------------------------------------------
      DATA(lv_conditions) = io_request-&amp;gt;get_filter( )-&amp;gt;get_as_sql_string( ).

      "---------------------------------------------------------------
      " Read bank master records (BNKA) based on filters
      "---------------------------------------------------------------
      SELECT BANKS AS bank_ctry,
             BANKL AS bank_key,
             BNKLZ AS bank_no,
             ERDAT AS creat_date,
             ERNAM AS creator
        FROM BNKA
        WHERE (lv_conditions)
        ORDER BY (lv_orderby)
        INTO TABLE &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1407137"&gt;@DATA&lt;/a&gt;(lt_banks)
        UP TO &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1419942"&gt;@LV&lt;/a&gt;_top ROWS
        OFFSET &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1419942"&gt;@LV&lt;/a&gt;_skip.

      "---------------------------------------------------------------
      " Loop through each BNKA record and enrich details using BAPI
      "---------------------------------------------------------------
      LOOP AT lt_banks INTO DATA(ls_bank).

        " Get detailed bank address info
        CALL FUNCTION 'BAPI_BANK_GETDETAIL'
          EXPORTING
            bankcountry  = ls_bank-bank_ctry
            bankkey      = ls_bank-bank_key
          IMPORTING
            bank_address = ls_address
            bank_detail  = ls_detail
            return       = ls_return.

        " Prepare output row
        LS_RESULT-bank_ctry   = ls_bank-bank_ctry.
        LS_RESULT-bank_key    = ls_bank-bank_key.
        LS_RESULT-bank_name   = ls_address-bank_name.
        LS_RESULT-street      = ls_address-street.
        LS_RESULT-city        = ls_address-city.
        LS_RESULT-bank_no     = ls_bank-bank_no.
        LS_RESULT-creat_date  = ls_bank-creat_date.
        LS_RESULT-creator     = ls_bank-creator.

        APPEND LS_RESULT TO LT_RESULT.

        CLEAR: ls_result, ls_address, ls_detail, ls_return.

      ENDLOOP.

      "---------------------------------------------------------------
      " Return total count for UI pagination (if requested)
      "---------------------------------------------------------------
      IF IO_REQUEST-&amp;gt;IS_TOTAL_NUMB_OF_REC_REQUESTED( ).
        SELECT COUNT(*)
          FROM BNKA
          WHERE (lv_conditions)
          INTO &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1407137"&gt;@DATA&lt;/a&gt;(lv_count).

        IO_RESPONSE-&amp;gt;SET_TOTAL_NUMBER_OF_RECORDS( lv_count ).
      ENDIF.

      "---------------------------------------------------------------
      " Send final result back to RAP framework
      "---------------------------------------------------------------
      IO_RESPONSE-&amp;gt;SET_DATA( LT_RESULT ).

    ENDIF.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="bank.jpg" style="width: 621px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/340394iA7F2C1EEC70EB6A5/image-dimensions/621x294/is-moderation-mode/true?v=v2" width="621" height="294" role="button" title="bank.jpg" alt="bank.jpg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion:&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;this approach highlights how RAP can modernize SAP applications by exposing classic BAPI data through Custom Entities. It enables real-time, read-only access with full OData capabilities‚Äîfiltering, sorting, paging‚Äîwithout changing existing backend logic, bridging the gap between proven SAP functionality and modern Fiori UIs.&lt;BR /&gt;Thanks For Reading, Best Wishes&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/call-bapi-in-custom-entity-through-rap/ba-p/14268610"/>
    <published>2025-12-09T11:29:06.943000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/date-hierarchy-using-tree-alv-fm-amp-oops/ba-p/14267818</id>
    <title>Date Hierarchy Using Tree ALV(FM &amp; OOPS )</title>
    <updated>2025-12-09T11:37:56.809000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;Hi Everyone&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1893824558"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;&lt;FONT face="Times New Roman, serif"&gt;&lt;FONT size="4"&gt;&lt;SPAN&gt;Introduction:&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P class=""&gt;The user needs an interactive &lt;STRONG&gt;Date Hierarchy&lt;/STRONG&gt; display in SAP that provides a structured view of years, months, and individual dates.This helps users quickly navigate through large date ranges and select specific dates for downstream operations such as data extraction, reporting, or analysis.&lt;/P&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P class="" align="left"&gt;&amp;nbsp;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P class=""&gt;The screen should display a hierarchical &lt;STRONG&gt;Tree ALV&lt;/STRONG&gt; titled &lt;STRONG&gt;‚ÄúDATE HIERARCHY‚Äù&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;The top-level nodes represent &lt;STRONG&gt;Years&lt;/STRONG&gt; (e.g., 2021 to 2025).&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;When the user &lt;STRONG&gt;expands a Year&lt;/STRONG&gt;, the &lt;STRONG&gt;12 months (January to December)&lt;/STRONG&gt; are displayed as child nodes.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;When the user &lt;STRONG&gt;expands a Month&lt;/STRONG&gt;, all &lt;STRONG&gt;valid calendar dates&lt;/STRONG&gt; for that month are dynamically generated and displayed.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;Each date node should display the date in &lt;STRONG&gt;user‚Äôs local format (DD.MM.YYYY)&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;The user should be able to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P class=""&gt;Expand/collapse nodes dynamically.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;View all levels of hierarchy.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P class="" align="left"&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TABLES : BKPF.

"Internal table and work area for tree nodes
DATA: IT_NODE TYPE TABLE OF SNODETEXT,
      WA_NODE TYPE SNODETEXT.

"Variables for Year, Month, Date calculations
DATA: LV_YEAR  TYPE GJAHR,
      LV_MONTH TYPE NUMC2,
      LV_DATE  TYPE DATUM,
      LV_DAYS  TYPE I,
      LV_DAY   TYPE NUMC2.

"Keys for hierarchy levels
DATA: LV_YEAR_KEY  TYPE CHAR10,
      LV_MONTH_KEY TYPE CHAR15,
      LV_DATE_KEY  TYPE CHAR20.

"Selection range for fiscal year
SELECT-OPTIONS: S_GJAHR FOR BKPF-GJAHR DEFAULT '2021' TO '2025'.

START-OF-SELECTION.

  CLEAR: WA_NODE, IT_NODE.

"------------------------------------------------------------"
" Root Node Creation                                         "
"------------------------------------------------------------"
WA_NODE-TYPE    = 'T'.             "Tree title
WA_NODE-NAME    = 'DATE HIERARCHY'.
WA_NODE-TLEVEL  = '01'.
WA_NODE-NLENGTH = '18'.
WA_NODE-COLOR   = '05'.
APPEND WA_NODE TO IT_NODE.
CLEAR WA_NODE.

"------------------------------------------------------------"
" Build Year ‚Üí Month ‚Üí Date Hierarchy                       "
"------------------------------------------------------------"
LOOP AT S_GJAHR.
  DO.
    "Loop through each year within the selected range
    LV_YEAR = S_GJAHR-LOW + SY-INDEX - 1.
    IF LV_YEAR &amp;gt; S_GJAHR-HIGH.
      EXIT.
    ENDIF.

    "--------------------------------------------------------"
    " Year Node (Level 02)                                   "
    "--------------------------------------------------------"
    LV_YEAR_KEY = LV_YEAR.
    WA_NODE-TYPE    = 'P'.
    WA_NODE-ID      = LV_YEAR_KEY.
    CONCATENATE LV_YEAR ' ' INTO WA_NODE-NAME SEPARATED BY SPACE.
    WA_NODE-TLEVEL  = '02'.
    WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
    WA_NODE-COLOR   = '03'.
    APPEND WA_NODE TO IT_NODE.
    CLEAR WA_NODE.

    "--------------------------------------------------------"
    " 12 Months Loop (Level 03)                              "
    "--------------------------------------------------------"
    DO 12 TIMES.
      LV_MONTH = SY-INDEX.
      CONCATENATE LV_YEAR_KEY LV_MONTH INTO LV_MONTH_KEY.

      WA_NODE-TYPE = 'P'.
      WA_NODE-ID   = LV_MONTH_KEY.

      "Month Name Assignment"
      CASE LV_MONTH.
        WHEN '01'. WA_NODE-NAME = 'January'.
        WHEN '02'. WA_NODE-NAME = 'February'.
        WHEN '03'. WA_NODE-NAME = 'March'.
        WHEN '04'. WA_NODE-NAME = 'April'.
        WHEN '05'. WA_NODE-NAME = 'May'.
        WHEN '06'. WA_NODE-NAME = 'June'.
        WHEN '07'. WA_NODE-NAME = 'July'.
        WHEN '08'. WA_NODE-NAME = 'August'.
        WHEN '09'. WA_NODE-NAME = 'September'.
        WHEN '10'. WA_NODE-NAME = 'October'.
        WHEN '11'. WA_NODE-NAME = 'November'.
        WHEN '12'. WA_NODE-NAME = 'December'.
      ENDCASE.

      WA_NODE-TLEVEL  = '03'.
      WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
      WA_NODE-COLOR   = '04'.
      APPEND WA_NODE TO IT_NODE.
      CLEAR WA_NODE.

      "------------------------------------------------------"
      " Determine number of days in the month                "
      "------------------------------------------------------"
      CONCATENATE LV_YEAR LV_MONTH '01' INTO LV_DATE.
      CALL FUNCTION 'SLS_MISC_GET_LAST_DAY_OF_MONTH'
        EXPORTING
          DAY_IN            = LV_DATE
        IMPORTING
          LAST_DAY_OF_MONTH = LV_DATE.

      LV_DAYS = LV_DATE+6(2). "Extract day part ‚Üí last day of month

      "------------------------------------------------------"
      " Date Nodes (Level 04)                                "
      "------------------------------------------------------"
      DO LV_DAYS TIMES.
        LV_DAY = SY-INDEX.
        CONCATENATE LV_YEAR LV_MONTH LV_DAY INTO LV_DATE_KEY.

        WA_NODE-TYPE    = 'P'.
        WA_NODE-ID      = LV_DATE_KEY.
        CONCATENATE LV_DAY '.' LV_MONTH '.' LV_YEAR INTO WA_NODE-NAME.
        WA_NODE-TLEVEL  = '04'.
        WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
        WA_NODE-COLOR   = '06'.
        APPEND WA_NODE TO IT_NODE.
        CLEAR WA_NODE.

      ENDDO.

    ENDDO.

  ENDDO.
ENDLOOP.

"------------------------------------------------------------"
" Display the Tree Output                                    "
"------------------------------------------------------------"
CALL FUNCTION 'RS_TREE_CONSTRUCT'
  TABLES
    NODETAB = IT_NODE.

CALL FUNCTION 'RS_TREE_LIST_DISPLAY'
  EXPORTING
    CALLBACK_PROGRAM = SY-REPID.&lt;/code&gt;&lt;/pre&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;Output:&lt;/STRONG&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="tree.png" style="width: 812px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339971i42BB7569A9EF68CF/image-dimensions/812x534/is-moderation-mode/true?v=v2" width="812" height="534" role="button" title="tree.png" alt="tree.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;STRONG&gt;OOPS Approach:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TABLES: MARA, BKPF.

*---------------------------------------------------------------------*
* Data Declarations
*---------------------------------------------------------------------*
"ALV Tree objects
DATA: GO_TREE      TYPE REF TO CL_GUI_ALV_TREE,
      GO_CONTAINER TYPE REF TO CL_GUI_CUSTOM_CONTAINER.

"ALV field catalog and layout
DATA: GT_FIELDCAT TYPE LVC_T_FCAT,
      GS_FIELDCAT TYPE LVC_S_FCAT,
      GS_LAYOUT   TYPE LVC_S_LAYO.

"Output structure for tree text
TYPES: BEGIN OF TY_OUTPUT,
         COLUMN1 TYPE CHAR255,  "Single text column for tree nodes
       END OF TY_OUTPUT.

DATA: GT_OUTPUT TYPE TABLE OF TY_OUTPUT,
      GS_OUTPUT TYPE TY_OUTPUT.

"Variables used for Year ‚Üí Month ‚Üí Date hierarchy
DATA: LV_YEAR       TYPE GJAHR,
      LV_MONTH      TYPE NUMC2,
      LV_DATE       TYPE DATUM,
      LV_LAST_DATE  TYPE DATUM,
      LV_DAYS       TYPE I,
      LV_DAY        TYPE NUMC2,
      LV_YEAR_KEY   TYPE LVC_NKEY,
      LV_MONTH_KEY  TYPE LVC_NKEY,
      LV_DATES_LINE TYPE STRING.

"Node layout (folder / item)
DATA: LS_NODE_LAYOUT TYPE LVC_S_LAYN.

"Year range for hierarchy
SELECT-OPTIONS: S_GJAHR FOR BKPF-GJAHR DEFAULT '2021' TO '2025'.

*---------------------------------------------------------------------*
* Selection Screen Trigger
*---------------------------------------------------------------------*
START-OF-SELECTION.
  CALL SCREEN 100.  "Call main screen

*---------------------------------------------------------------------*
* PBO: Set status and create tree
*---------------------------------------------------------------------*
MODULE STATUS_0100 OUTPUT.
  SET PF-STATUS 'ZSTANDARD'.

  "Create the tree only once
  IF GO_CONTAINER IS INITIAL.
    PERFORM CREATE_AND_FILL_TREE.
  ENDIF.
ENDMODULE.

*---------------------------------------------------------------------*
* PAI: Handle user commands
*---------------------------------------------------------------------*
MODULE USER_COMMAND_0100 INPUT.
  CASE SY-UCOMM.
    WHEN 'BACK' OR 'EXIT' OR 'CANCEL'.
      "Release frontend controls
      PERFORM FREE_RESOURCES.
      LEAVE TO SCREEN 0.
  ENDCASE.
ENDMODULE.

*---------------------------------------------------------------------*
* Create container, tree control, root node and load hierarchy
*---------------------------------------------------------------------*
FORM CREATE_AND_FILL_TREE.

  "Create custom container inside screen element 'CONTAINER'
  CREATE OBJECT GO_CONTAINER
    EXPORTING
      CONTAINER_NAME = 'CONTAINER'.

  "Build ALV field catalog
  PERFORM BUILD_FIELDCAT.

  "Create ALV tree control
  CREATE OBJECT GO_TREE
    EXPORTING
      PARENT              = GO_CONTAINER
      NODE_SELECTION_MODE = CL_GUI_COLUMN_TREE=&amp;gt;NODE_SEL_MODE_SINGLE
      ITEM_SELECTION      = 'X'
    EXCEPTIONS
      OTHERS              = 1.

  "Bind output table and field catalog to tree
  CALL METHOD GO_TREE-&amp;gt;SET_TABLE_FOR_FIRST_DISPLAY
    CHANGING
      IT_OUTTAB       = GT_OUTPUT
      IT_FIELDCATALOG = GT_FIELDCAT.

  "---------------------------------------------------------------*
  " Create Root Node (DATE HIERARCHY)
  "---------------------------------------------------------------*
  CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
  LS_NODE_LAYOUT-ISFOLDER  = 'X'.
  LS_NODE_LAYOUT-N_IMAGE   = '@AV@'.
  LS_NODE_LAYOUT-EXP_IMAGE = '@AV@'.
  GS_OUTPUT-COLUMN1        = 'DATE HIERARCHY'.

  "Add root node
  CALL METHOD GO_TREE-&amp;gt;ADD_NODE
    EXPORTING
      I_RELAT_NODE_KEY = ''  "Root level
      I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
      IS_OUTTAB_LINE   = GS_OUTPUT
      IS_NODE_LAYOUT   = LS_NODE_LAYOUT
    IMPORTING
      E_NEW_NODE_KEY   = LV_YEAR_KEY.

  "Build full tree under root node
  PERFORM BUILD_TREE_NODES USING LV_YEAR_KEY.

  "Auto-expand root node
  CALL METHOD GO_TREE-&amp;gt;EXPAND_NODE
    EXPORTING
      I_NODE_KEY = LV_YEAR_KEY.

  CALL METHOD GO_TREE-&amp;gt;FRONTEND_UPDATE.

ENDFORM.

*---------------------------------------------------------------------*
* Create field catalog for ALV tree
*---------------------------------------------------------------------*
FORM BUILD_FIELDCAT.
  CLEAR GS_FIELDCAT.
  GS_FIELDCAT-FIELDNAME = 'COLUMN1'.
  GS_FIELDCAT-COLTEXT   = 'Description'.
  GS_FIELDCAT-OUTPUTLEN = 255.
  APPEND GS_FIELDCAT TO GT_FIELDCAT.
ENDFORM.

*---------------------------------------------------------------------*
* Build YEAR ‚Üí MONTH ‚Üí DAY hierarchy inside ALV Tree
*---------------------------------------------------------------------*
FORM BUILD_TREE_NODES USING IV_ROOT_KEY TYPE LVC_NKEY.

  DATA: LV_PARENT_YEAR  TYPE LVC_NKEY,
        LV_PARENT_MONTH TYPE LVC_NKEY,
        LV_MONTH_NAME   TYPE STRING,
        LV_CHUNK        TYPE STRING,
        LV_CHUNK_COUNT  TYPE I,
        GV_GROUP_SIZE   TYPE I VALUE 10,  "Group 10 days per line
        LV_DATE_STRING  TYPE STRING.

  "Loop through selected year range
  LOOP AT S_GJAHR.
    DO.
      LV_YEAR = S_GJAHR-LOW + SY-INDEX - 1.
      IF LV_YEAR &amp;gt; S_GJAHR-HIGH.
        EXIT.
      ENDIF.

      "---------------------------------------------------------------*
      " Create YEAR Node
      "---------------------------------------------------------------*
      CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
      LS_NODE_LAYOUT-ISFOLDER  = 'X'.
      LS_NODE_LAYOUT-N_IMAGE   = '@AV@'.
      LS_NODE_LAYOUT-EXP_IMAGE = '@AV@'.
      GS_OUTPUT-COLUMN1        = |Year: { LV_YEAR }|.

      CALL METHOD GO_TREE-&amp;gt;ADD_NODE
        EXPORTING
          I_RELAT_NODE_KEY = IV_ROOT_KEY      "Attach to root
          I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
          IS_OUTTAB_LINE   = GS_OUTPUT
          IS_NODE_LAYOUT   = LS_NODE_LAYOUT
        IMPORTING
          E_NEW_NODE_KEY   = LV_PARENT_YEAR.

      "---------------------------------------------------------------*
      " Create MONTH Nodes under each Year
      "---------------------------------------------------------------*
      DO 12 TIMES.
        LV_MONTH = SY-INDEX.

        "Month name mapping
        CASE LV_MONTH.
          WHEN 1.  LV_MONTH_NAME = 'January'.
          WHEN 2.  LV_MONTH_NAME = 'February'.
          WHEN 3.  LV_MONTH_NAME = 'March'.
          WHEN 4.  LV_MONTH_NAME = 'April'.
          WHEN 5.  LV_MONTH_NAME = 'May'.
          WHEN 6.  LV_MONTH_NAME = 'June'.
          WHEN 7.  LV_MONTH_NAME = 'July'.
          WHEN 8.  LV_MONTH_NAME = 'August'.
          WHEN 9.  LV_MONTH_NAME = 'September'.
          WHEN 10. LV_MONTH_NAME = 'October'.
          WHEN 11. LV_MONTH_NAME = 'November'.
          WHEN 12. LV_MONTH_NAME = 'December'.
        ENDCASE.

        CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
        LS_NODE_LAYOUT-ISFOLDER  = 'X'.
        LS_NODE_LAYOUT-N_IMAGE   = '@2L@'.
        LS_NODE_LAYOUT-EXP_IMAGE = '@2L@'.
        GS_OUTPUT-COLUMN1        = LV_MONTH_NAME.

        "Add Month node
        CALL METHOD GO_TREE-&amp;gt;ADD_NODE
          EXPORTING
            I_RELAT_NODE_KEY = LV_PARENT_YEAR
            I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
            IS_OUTTAB_LINE   = GS_OUTPUT
            IS_NODE_LAYOUT   = LS_NODE_LAYOUT
          IMPORTING
            E_NEW_NODE_KEY   = LV_PARENT_MONTH.

        "-----------------------------------------------------------*
        " Determine last day of month
        "-----------------------------------------------------------*
        CONCATENATE LV_YEAR LV_MONTH '01' INTO LV_DATE.
        CALL FUNCTION 'LAST_DAY_OF_MONTHS'
          EXPORTING
            DAY_IN            = LV_DATE
          IMPORTING
            LAST_DAY_OF_MONTH = LV_LAST_DATE.

        LV_DAYS = LV_LAST_DATE+6(2).  "Extract number of days

        "-----------------------------------------------------------*
        " Add DAY Nodes grouped (10 days per node)
        "-----------------------------------------------------------*
        CLEAR: LV_CHUNK, LV_CHUNK_COUNT.

        DO LV_DAYS TIMES.
          LV_DAY = SY-INDEX.

          "Format date string: DD.MM.YYYY
          LV_DATE_STRING = |{ LV_DAY WIDTH = 2 }.{ LV_MONTH WIDTH = 2 }.{ LV_YEAR }|.

          "Build chunk of 10 dates
          IF LV_CHUNK IS INITIAL.
            LV_CHUNK = LV_DATE_STRING.
          ELSE.
            CONCATENATE LV_CHUNK LV_DATE_STRING INTO LV_CHUNK SEPARATED BY SPACE.
          ENDIF.

          ADD 1 TO LV_CHUNK_COUNT.

          "Add one group node after every 10 days OR last day
          IF LV_CHUNK_COUNT &amp;gt;= GV_GROUP_SIZE OR LV_DAY = LV_DAYS.

            CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
            LS_NODE_LAYOUT-ISFOLDER = ''.   "Leaf node
            LS_NODE_LAYOUT-N_IMAGE  = '@3C@'.
            GS_OUTPUT-COLUMN1       = LV_CHUNK.

            "Add day-chunk node
            CALL METHOD GO_TREE-&amp;gt;ADD_NODE
              EXPORTING
                I_RELAT_NODE_KEY = LV_PARENT_MONTH
                I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
                IS_OUTTAB_LINE   = GS_OUTPUT
                IS_NODE_LAYOUT   = LS_NODE_LAYOUT.

            CLEAR: LV_CHUNK, LV_CHUNK_COUNT.
          ENDIF.
        ENDDO.

      ENDDO.  "End Month Loop

    ENDDO.
  ENDLOOP.

ENDFORM.

*---------------------------------------------------------------------*
* Release frontend controls
*---------------------------------------------------------------------*
FORM FREE_RESOURCES.
  IF GO_TREE IS BOUND.
    CALL METHOD GO_TREE-&amp;gt;FREE.
    FREE GO_TREE.
  ENDIF.

  IF GO_CONTAINER IS BOUND.
    CALL METHOD GO_CONTAINER-&amp;gt;FREE.
    FREE GO_CONTAINER.
  ENDIF.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="date.jpg" style="width: 619px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339973i6AA78918170CB894/image-dimensions/619x242/is-moderation-mode/true?v=v2" width="619" height="242" role="button" title="date.jpg" alt="date.jpg" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Conclusion:&lt;/STRONG&gt;&lt;BR /&gt;This solution showcases a practical and user-friendly way to visualize date structures by building a dynamic Year‚ÄìMonth‚ÄìDay hierarchy using the ALV Tree control. By grouping daily entries and leveraging container-based GUI elements, the approach delivers a clean, scalable, and intuitive navigation experience. It also demonstrates how classic ABAP techniques‚Äîselection screens, tree controls, and month/day calculations‚Äîcan be combined to create interactive UI components that enhance data exploration within SAP GUI.&lt;STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/date-hierarchy-using-tree-alv-fm-amp-oops/ba-p/14267818"/>
    <published>2025-12-09T11:37:56.809000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-2/ba-p/14286757</id>
    <title>Collective Value Helps in RAP: V2 and V4 Implementation Guide - Part 2</title>
    <updated>2025-12-09T15:35:14.655000+01:00</updated>
    <author>
      <name>Abhinav_Roy</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1109</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;In &lt;A href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-1/ba-p/14271885" target="_blank"&gt;Part 1&lt;/A&gt;&amp;nbsp;of this series, we explored the fundamentals of &lt;STRONG&gt;Collective Value Helps&lt;/STRONG&gt; in RAP, covering implementation patterns across OData V2 and V4 service bindings. The community response has been overwhelming, with particular interest in hierarchical implementations for complex business scenarios.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;While CDS hierarchies are extensively documented in the SAP ecosystem and widely used for representing parent-child relationships across business objects, a critical implementation gap exists: &lt;STRONG&gt;there are virtually no practical examples of incorporating hierarchical display patterns within Collective Value Helps.&lt;/STRONG&gt; &lt;STRONG&gt;Part 2&lt;/STRONG&gt; bridges this gap by demonstrating how to seamlessly integrate hierarchical search templates into the collective value help framework we built in Part 1.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;STRONG&gt;Watch the demonstration video below&lt;/STRONG&gt; to see hierarchical value helps in action, including how they work alongside existing flat list search templates, in a Collective Value Help:&lt;BR /&gt;&lt;BR /&gt;&lt;div class="video-embed-center video-embed"&gt;&lt;iframe class="embedly-embed" src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F2Zt9gykfJOE%3Ffeature%3Doembed&amp;amp;display_name=YouTube&amp;amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D2Zt9gykfJOE&amp;amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F2Zt9gykfJOE%2Fhqdefault.jpg&amp;amp;type=text%2Fhtml&amp;amp;schema=youtube" width="400" height="225" scrolling="no" title="SAP Community Hierarchical Variant - CVH" frameborder="0" allow="autoplay; fullscreen; encrypted-media; picture-in-picture;" allowfullscreen="true"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;U&gt;&lt;SPAN&gt;System Requirements&lt;/SPAN&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**Hierarchical Value Help Dialogs require: **&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**SAP S/4HANA Cloud**&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Minimum Release: 2311&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Protocol: OData V4 service binding&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**SAP S/4HANA On-Premise/Private Edition: **&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Minimum Release : S/4HANA 2025 onwards&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Protocol: OData V4 service binding&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**Important: ** OData V2 does not support hierarchical&lt;/EM&gt; visualization&amp;nbsp;&lt;EM&gt;out of the box via CDS Hierarchy due to protocol limitations. CDS hierarchical patterns require OData V4.&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;CDS Hierarchies: Foundation for Hierarchical Value Helps&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;CDS (Core Data Services) hierarchies are well-established patterns in the SAP landscape for representing parent-child relationships. SAP provides comprehensive documentation and numerous community resources for learning hierarchy fundamentals:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-data-models/hierarchy-definition" target="_blank" rel="noopener noreferrer"&gt;Hierarchy Definition | SAP Help Portal&lt;/A&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/treeview-with-read-only-capability?version=sap_btp" target="_blank" rel="noopener noreferrer"&gt;Treeviews with Read-Only Capabilities | SAP Help Portal&lt;/A&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/cds-how-to-define-hierarchy-view/ba-p/13758059" target="_self"&gt;SAP Community: CDS Hierarchy Articles&lt;/A&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;This article focuses specifically on utilizing CDS hierarchies within RAP-compliant value helps&lt;/STRONG&gt; and demonstrating how to incorporate hierarchical search templates alongside the flat templates created in Part 1.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Use Case:&lt;/STRONG&gt; Hierarchies are particularly powerful in domains like Asset Management, where technical objects form complex parent-child structures that users need to navigate when making selections.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Business Context: Asset Management-&amp;gt; Hierarchical Relationships&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In Asset Management, technical objects naturally form hierarchical structures that reflect real-world installations and organizational relationships:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Functional Location Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent functional locations contain child functional locations&lt;/LI&gt;&lt;LI&gt;Example: TATM ‚Üí TATM-UT3 ‚Üí TATM-UT3-001&lt;/LI&gt;&lt;LI&gt;Represents physical plant structure and organizational grouping&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Equipment Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Equipment can be installed under functional locations&lt;/LI&gt;&lt;LI&gt;Equipment can be installed under other equipment (sub-assemblies)&lt;/LI&gt;&lt;LI&gt;Example: Main equipment (11947458) contains sub-equipment (11947627)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Mixed Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Equipment installed at functional locations&lt;/LI&gt;&lt;LI&gt;Sub-equipment installed under main equipment&lt;/LI&gt;&lt;LI&gt;Creates complex parent-child navigation &lt;SPAN&gt;requirements&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;A sample Hierarchy in Asset Management:&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Transaction: IH01 - Structure List" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350113i6B449DCB4E2430AE/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765275145771.png" alt="Transaction: IH01 - Structure List" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Transaction: IH01 - Structure List&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Why Hierarchical Value Helps Matter:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;When users select technical objects in business processes (work orders, maintenance notifications, asset transfers), they need to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Understand the installation hierarchy&lt;/LI&gt;&lt;LI&gt;Navigate parent-child relationships visually&lt;/LI&gt;&lt;LI&gt;Select objects while seeing their organizational context&lt;/LI&gt;&lt;LI&gt;Identify relationships between equipment and functional locations&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Standard flat list value helps lose this critical hierarchical context, making object selection difficult and error-prone in complex asset structures.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Implementation: Building the Hierarchical VDM Model &lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 1: Interface View (I-View) with Parent Association&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The foundation of any CDS hierarchy is a self-association that establishes the parent-child relationship.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="I-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350176i90BA3A7BE43AA7E5/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765276862163.png" alt="I-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;I-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Elements:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Self-Association _ParentNode:&lt;/STRONG&gt; Establishes the many-to-one parent relationship&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Cardinality [0..1]:&lt;/STRONG&gt; Each node has either zero (root) or one parent&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Join Condition:&lt;/STRONG&gt; Links child's SuperiorTechnicalObject to parent's TechnicalObject&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This I-View serves as the data foundation, providing the parent-child relationship that the hierarchy view will consume.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 2: Hierarchy View Definition&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The hierarchy view transforms the I-View's parent association into an actual hierarchical structure with defined traversal rules.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchy View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350177i06598EFF9C04E570/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765276926694.png" alt="Hierarchy View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchy View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Hierarchy Annotations:&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;source ZAR_I_TechObjHierarchy:&lt;/STRONG&gt; References the I-View containing the parent association&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;child to parent association _ParentNode:&lt;/STRONG&gt; Specifies which association defines the hierarchy&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;start where SuperiorTechnicalObject is initial:&lt;/STRONG&gt; Defines root nodes (no parent = top of hierarchy)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;siblings order by TechnicalObject:&lt;/STRONG&gt; Sorts nodes at the same level&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;multiple parents not allowed:&lt;/STRONG&gt; Enforces strict tree structure (each node has max one parent)&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;This hierarchy view establishes the traversal logic and structural rules for displaying the parent-child relationships.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 3: Consumption (C-View) Definition&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The consumption view serves as the bridge between the CDS hierarchy and the collective value help framework. It exposes the hierarchy as a searchable value help provider while maintaining the hierarchical data structure.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350178i1A66EA4BBEADFDAB/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1765277179651.png" alt="C-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Annotations:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;@ObjectModel.supportedCapabilities&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;#VALUE_HELP_PROVIDER&lt;/STRONG&gt;: Enables this view to provide value help data&lt;BR /&gt;&lt;STRONG&gt;#SEARCHABLE_ENTITY&lt;/STRONG&gt;: Allows search functionality within the value help dialog&lt;BR /&gt;These capabilities are essential for user interaction&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.hierarchy.recursiveHierarchy: [{ entity.name: 'ZAR_I_TechObjHierarchyView' }]&lt;/STRONG&gt;&lt;BR /&gt;THE CRITICAL HIERARCHICAL LINK&lt;BR /&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt; The entity name should reference the &lt;STRONG&gt;Hierarchy View&lt;/STRONG&gt; (from Step 2), not the I-View or C-View itself.&lt;BR /&gt;Points to the CDS hierarchy view created in Step 2&lt;BR /&gt;Instructs OData V4 service to use hierarchical structure&lt;BR /&gt;Without this annotation, hierarchy won't display in value help&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;association of many to one ... as _ParentNode&lt;/STRONG&gt;&lt;BR /&gt;Recreates the parent association in the consumption layer&lt;BR /&gt;Must match the join conditions from the I-View&lt;BR /&gt;Required for OData V4 hierarchy metadata generation&lt;BR /&gt;Links both TechnicalObject AND TechObjIsEquipOrFuncnLoc (composite key)&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;Step 4: Including Hierarchical Template in Collective Value Help&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;Now we integrate the hierarchical search template into our existing collective value help framework from Part 1:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V2 Metadata Extension" style="width: 742px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350276iA574D0E8B7D628A7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284016068.png" alt="CVH V2 Metadata Extension" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V2 Metadata Extension&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V4 Metadata Extension" style="width: 785px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350277i534D6BAD5BEC6D23/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765284037633.png" alt="CVH V4 Metadata Extension" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V4 Metadata Extension&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Definition" style="width: 698px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350278iAF30882ADD5E2AB7/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1765284142136.png" alt="Service Definition" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Definition&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;OData V2 Service Binding: The Limitation&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding OData V2" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350279i5E8C2D9DE435F840/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_3-1765284199980.png" alt="Service Binding OData V2" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding OData V2&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;This eliminates the possibility of incorporating hierarchical search templates via CDS hierarchy in V2 collective value helps.&lt;/STRONG&gt; OData V2's protocol limitations prevent hierarchy visualization in value help dialogs&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;OData V4 Service Binding: The Solution Path&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding OData V4" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350280i61F5F556EF135F3C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284407687.png" alt="Service Binding OData V4" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding OData V4&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The V4 service binding successfully exposes the hierarchical template without errors.&lt;/P&gt;&lt;H3 id="toc-hId-1895640971"&gt;&lt;BR /&gt;The Problem - Flat List Display&lt;/H3&gt;&lt;P class=""&gt;Even with a properly defined hierarchy view exposed in V4, the initial preview reveals an unexpected result:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Flat List Display (as opposed to expected Hierarchical display)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350282i95E36C0C3779F7B5/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765284477750.png" alt="Flat List Display (as opposed to expected Hierarchical display)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Flat List Display (as opposed to expected Hierarchical display)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;&lt;BR /&gt;The Problem:&lt;BR /&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Despite having a hierarchical CDS view, the value help displays data as a &lt;/SPAN&gt;&lt;STRONG&gt;flat list&lt;/STRONG&gt;&lt;SPAN&gt; without any parent-child visualization. Users see individual records but lose all hierarchical context.&lt;/SPAN&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;Why This Happens:&lt;BR /&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Creating a CDS hierarchy view is necessary but &lt;/SPAN&gt;&lt;STRONG&gt;not sufficient&lt;/STRONG&gt;&lt;SPAN&gt; for hierarchical display in value helps. The RAP framework requires &lt;EM&gt;explicit UI presentation instructions&lt;/EM&gt; to render hierarchy in the value help dialog.&lt;/SPAN&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;The Missing Piece:&lt;/STRONG&gt; The framework needs explicit instructions via presentation variant annotations to understand that this data should be rendered as a hierarchy tree, not a flat table. Without these annotations, OData V4 treats the hierarchy view as just another data source.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;The Solution - Presentation Variant Annotations&lt;/STRONG&gt;&lt;BR /&gt;To provision hierarchical display in value helps, we must add specific presentation variant annotations that declare hierarchical visualization intent.&lt;BR /&gt;&lt;BR /&gt;&lt;U&gt;Consumption View (C-View) Annotations&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View (Presentation Variant Added)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350296i16DB4408E668ECBE/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284859373.png" alt="C-View (Presentation Variant Added)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View (Presentation Variant Added)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;A presentation variant annotation needs to be included here which will contain the InitialExpansionLevel for the hierarchy and&amp;nbsp; a property RecursiveHierarchyQualifier.&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;RecursiveHierarchyQualifier&lt;/STRONG&gt; - This annotation contains a string with the name of the hierarchy view and make possible that the data is then shown on UI as tree table. The projection view should also have the annotation&lt;BR /&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;STRONG&gt;InitialExpansionLevel&lt;/STRONG&gt; - This annotation indicates up to which level a display hierarchy shall be initially expanded.&lt;/SPAN&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;U&gt;Collective Value Help Metadata Extension&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V4 Metadata Extension (Presentation Variant annotation added)" style="width: 668px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350312i4D5761FE4F127D32/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765285284629.png" alt="CVH V4 Metadata Extension (Presentation Variant annotation added)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V4 Metadata Extension (Presentation Variant annotation added)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;A &lt;SPAN&gt;&lt;STRONG&gt;presentationVariantQualifier&lt;/STRONG&gt; annotation needs to be included here, which should've the same value as the Qualifier in the C-View, i.e., '&lt;STRONG&gt;HIERARCHY&lt;/STRONG&gt;', in this case. This annotation&amp;nbsp;indicates how the value help result should be displayed.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;The Result: Hierarchical Value Help in Action&lt;/STRONG&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchical value help display" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350315i8BC8724DE1A9A35B/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765285480130.png" alt="Hierarchical value help display" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchical value help display&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Success! The hierarchical variant now displays&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent-child relationships visualized as tree structure&lt;/LI&gt;&lt;LI&gt;Expand/collapse controls for navigation&lt;/LI&gt;&lt;LI&gt;Indentation showing hierarchy levels&lt;/LI&gt;&lt;LI&gt;Seamless integration with flat templates from Part 1&lt;/LI&gt;&lt;LI&gt;Full hierarchy traversal in value help dialog&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;User Experience - End Users can now&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Switch between flat and hierarchical search templates&lt;/LI&gt;&lt;LI&gt;Navigate parent-child relationships visually&lt;/LI&gt;&lt;LI&gt;Expand/collapse hierarchy nodes and even the entire Tree View&lt;/LI&gt;&lt;LI&gt;Select objects while understanding their organizational context&lt;/LI&gt;&lt;LI&gt;See equipment installation hierarchies and functional location structures&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Key Takeaways: When to Use Hierarchical Collective Value Helps&lt;BR /&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;&lt;U&gt;&lt;STRONG&gt;Use Hierarchical Patterns When&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent-Child Relationships Matter: Business objects naturally form hierarchies (org structures, location hierarchies etc)&lt;/LI&gt;&lt;LI&gt;Context Aids Selection: Users need to see relationships to make correct selections&lt;/LI&gt;&lt;LI&gt;Navigation is Important: Users need to browse up/down hierarchies during selection&lt;/LI&gt;&lt;LI&gt;OData V4 is Available: V2 protocol does not support hierarchy visualization&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Implementation Checklist&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Define I-View with self-association (_ParentNode)&lt;/LI&gt;&lt;LI&gt;Create hierarchy view with traversal rules (start where, siblings order by)&lt;/LI&gt;&lt;LI&gt;Use OData V4 service binding (V2 not supported)&lt;/LI&gt;&lt;LI&gt;Add presentation variant in C-View&lt;/LI&gt;&lt;LI&gt;Reference presentation variant in CVH metadata extension&lt;/LI&gt;&lt;LI&gt;Test expand/collapse and hierarchy navigation&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Key Implementation points&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Cardinality Enforcement: multiple parents not allowed ensures tree structure&lt;/LI&gt;&lt;LI&gt;Root Node Definition: start where clause correctly identifies top-level nodes&lt;/LI&gt;&lt;LI&gt;Presentation Variant annotation must be added in&amp;nbsp;C-View and CVH metadata&lt;/LI&gt;&lt;LI&gt;Qualifier Consistency: Same qualifier in C-View and CVH metadata&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Series Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;This two-part series has explored the complete spectrum of collective value helps in RAP:&lt;BR /&gt;&lt;STRONG&gt;&lt;U&gt;Part 1 established the foundation&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Basic collective value help concepts and structure&lt;/LI&gt;&lt;LI&gt;Implementation across OData V2 and V4 service bindings&lt;/LI&gt;&lt;LI&gt;Service binding architectural differences&lt;/LI&gt;&lt;LI&gt;Nested value help workarounds&lt;/LI&gt;&lt;LI&gt;Multi-dimensional search capabilities&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Part 2 extended to advanced patterns&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Hierarchical CDS view construction&lt;/LI&gt;&lt;LI&gt;VDM model for hierarchy-enabled value helps&lt;/LI&gt;&lt;LI&gt;OData V2 protocol limitations&lt;/LI&gt;&lt;LI&gt;Presentation variant configuration for hierarchy visualization&lt;/LI&gt;&lt;LI&gt;Seamless integration of flat and hierarchical search templates&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Together, these patterns enable user-centric, multi-criteria search capabilities that leverage RAP's full value help framework while maintaining clean architectural separation and reusability.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Architectural Insight&lt;/STRONG&gt;:&lt;BR /&gt;Collective value helps in RAP provide a powerful, user-centric approach to value help management by enabling multi-criteria search through a single, reusable model. The addition of hierarchical display patterns extends this capability to complex business scenarios requiring parent-child navigation‚Äîdelivering a comprehensive search experience that adapts to diverse user needs.&lt;BR /&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;Hierarchical collective value helps represent the convergence of RAP's value help framework with CDS hierarchy capabilities, enabling rich, context-aware search experiences for complex business objects. While implementation requires careful attention to presentation variant configuration and V4 protocol requirements, the result is a powerful pattern applicable across any SAP domain where parent-child relationships drive user decision-making.&lt;BR /&gt;Whether you're building asset management applications, organizational hierarchies, material master navigation, or any scenario requiring hierarchical context during selection, this pattern provides the foundation for delivering intuitive, efficient user experiences.&lt;BR /&gt;The combination of CDS hierarchies, collective value helps, and RAP's presentation variant framework creates a powerful combination for solving complex data selection challenges-no custom coding required, just optimal usage of key annotations.&lt;BR /&gt;Thank you for following this two-part series. I welcome your feedback, and experiences implementing collective value helps in your own RAP applications.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-2/ba-p/14286757"/>
    <published>2025-12-09T15:35:14.655000+01:00</published>
  </entry>
</feed>
