<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>https://raw.githubusercontent.com/ajmaradiaga/feeds/main/scmt/topics/ABAP-Development-blog-posts.xml</id>
  <title>SAP Community - ABAP Development</title>
  <updated>2025-12-11T00:00:03.612258+00:00</updated>
  <link href="https://community.sap.com/t5/c-khhcw49343/ABAP Development/pd-p/833755570260738661924709785639136" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator>
  <subtitle>ABAP Development blog posts in SAP Community</subtitle>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/invoking-business-agent-foundation-agents-from-abap-a-step-by-step-guide/ba-p/14274507</id>
    <title>Invoking Business Agent Foundation Agents from ABAP: A Step-by-Step Guide</title>
    <updated>2025-11-26T10:15:43.404000+01:00</updated>
    <author>
      <name>tanmay_0117</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1527252</uri>
    </author>
    <content>&lt;P&gt;With the rise of intelligent automation and AI-powered solutions in enterprise landscapes, integrating SAP Business Technology Platform (BTP) services with on-premise ABAP systems has become increasingly important. In this blog, I'll walk you through the process of invoking agents from the Business Agent Foundation service directly from an ABAP report‚Äîan integration that bridges the gap between traditional SAP systems and modern AI capabilities.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Whether you're looking to enhance your business processes with intelligent agents or simply exploring the possibilities of AI integration in your SAP landscape, this guide will provide you with a comprehensive, hands-on approach to achieve this integration.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;BLOCKQUOTE&gt;&lt;P&gt;&lt;STRONG&gt;Pre-requisites&lt;/STRONG&gt;: Subaccount in BTP, subscription of Business Agent Framework service in the subaccount, a dedicated client profile with required configurations.&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;H4 id="toc-hId-2023738510"&gt;&amp;nbsp;&lt;/H4&gt;&lt;H4 id="toc-hId-1827225005"&gt;&lt;STRONG&gt;Step 1: Create Your Agent in&amp;nbsp;Business Agent Framework&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Setting up Business Agent Framework service in your subaccount:&amp;nbsp;&lt;A href="https://pages.github.tools.sap/ICN-AI-Agents/unified-agent-runtime-documentation/documentation/general/setup/" target="_blank" rel="noopener nofollow noreferrer"&gt;Setup - Project Agent Builder Documentation&lt;/A&gt;&lt;/P&gt;&lt;P&gt;After setting the service, go to&amp;nbsp;&lt;STRONG&gt;Instances ‚Üí Project Agent Builder ‚Üí Service Keys ‚Üí view.&amp;nbsp;&lt;/STRONG&gt;Copy the endpoint url (&lt;STRONG&gt;uaa ‚Üí url&lt;/STRONG&gt;) which is required in the OAuth 2.0 Client Profile Configuration.&lt;/P&gt;&lt;P&gt;Start by opening the &lt;STRONG&gt;Business Agent Framework&lt;/STRONG&gt;&amp;nbsp;application in your BTP subaccount. Create a test agent and initialize a new chat session. This agent's chat/thread will be the endpoint we'll communicate with from our ABAP system.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="tanmay_0117_0-1764151597729.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/345384i14EA867689A540D7/image-size/large?v=v2&amp;amp;px=999" role="button" title="tanmay_0117_0-1764151597729.png" alt="tanmay_0117_0-1764151597729.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;BLOCKQUOTE&gt;&lt;P&gt;&lt;STRONG&gt;Note&lt;/STRONG&gt;: If you already have a dedicated client profile with required configurations, directly go to "Step 2: Configure the RFC Destination".&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;H4 id="toc-hId-1630711500"&gt;&amp;nbsp;&lt;/H4&gt;&lt;H4 id="toc-hId-1434197995"&gt;OAuth 2.0 Client Profile Configuration&lt;/H4&gt;&lt;P&gt;Proper authentication is crucial for secure integration. Here's how to set up your OAuth 2.0 client profile:&lt;/P&gt;&lt;H5 id="toc-hId-1366767209"&gt;Part A: Creating the OAuth Client Profile&lt;/H5&gt;&lt;OL&gt;&lt;LI&gt;Navigate to transaction code &lt;STRONG&gt;SE80&lt;/STRONG&gt;&amp;nbsp;(Object Navigator)&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;LI&gt;Select &lt;STRONG&gt;Development Object&lt;/STRONG&gt; and choose your package&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;LI&gt;Right-click on the package and choose: &lt;STRONG&gt;Create ‚Üí Others ‚Üí OAuth 2.0 Client Profile&amp;nbsp;&lt;/STRONG&gt;and enter a meaningful name for your profile&lt;BR /&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="tanmay_0117_2-1764062030197.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344799i3999EB225AEE08CF/image-size/large?v=v2&amp;amp;px=999" role="button" title="tanmay_0117_2-1764062030197.png" alt="tanmay_0117_2-1764062030197.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;Choose &lt;STRONG&gt;'DEFAULT'&lt;/STRONG&gt; as the service provider type&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;LI&gt;Save your profile&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;LI&gt;Assign the relevant scopes required for accessing the Business Agent Foundation service&lt;BR /&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;H5 id="toc-hId-1170253704"&gt;Part B: Configuring the OAuth Client Profile&lt;/H5&gt;&lt;OL&gt;&lt;LI&gt;Start transaction code &lt;STRONG&gt;SOAUTH2_CLIENT&lt;/STRONG&gt;&amp;nbsp;(or &lt;STRONG&gt;OA2C_CONFIG&lt;/STRONG&gt;&amp;nbsp;for older versions)&lt;BR /&gt;&lt;P&gt;Alternatively, access it via browser:&lt;/P&gt;&lt;PRE&gt;&amp;nbsp;&amp;nbsp; https://&amp;lt;host_name&amp;gt;:&amp;lt;https_port&amp;gt;/sap/bc/webdynpro/sap/oa2c_config?sap-language=EN&amp;amp;sap-client=&amp;lt;client&amp;gt;&lt;/PRE&gt;&lt;/LI&gt;&lt;LI&gt;Click &lt;STRONG&gt;Create&lt;/STRONG&gt; and select your previously created client profile&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Enter Client Credentials&lt;/STRONG&gt;:&lt;UL&gt;&lt;LI&gt;Navigate to your BTP subaccount&lt;/LI&gt;&lt;LI&gt;Go to: &lt;STRONG&gt;Instances ‚Üí &amp;lt;your_service_instance&amp;gt; ‚Üí Service Keys&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Copy the &lt;STRONG&gt;Client ID&lt;/STRONG&gt;&amp;nbsp;from the service key and enter it in the configuration&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Configure Token Endpoint&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Under &lt;STRONG&gt;General Settings&lt;/STRONG&gt;, enter the token endpoint URL &lt;STRONG&gt;without the `https://` prefix.&amp;nbsp;&lt;BR /&gt;&lt;/STRONG&gt;Use the endpoint url which you copied in the Step 1.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="tanmay_0117_3-1764062133788.png" style="width: 940px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344803i4592711FCEF7E7D6/image-size/large?v=v2&amp;amp;px=999" role="button" title="tanmay_0117_3-1764062133788.png" alt="tanmay_0117_3-1764062133788.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Configure Grant&lt;/STRONG&gt; &lt;STRONG&gt;Type&lt;/STRONG&gt;:&lt;UL&gt;&lt;LI&gt;Select &lt;STRONG&gt;'Client Credentials'&lt;/STRONG&gt; as the grant type&lt;/LI&gt;&lt;LI&gt;This is the standard grant type for server-to-server authentication&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Verify Scopes&lt;/STRONG&gt;:&lt;UL&gt;&lt;LI&gt;The associated scopes should automatically appear if they were properly configured in Part A&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Test the configuration&lt;/STRONG&gt;:&lt;UL&gt;&lt;LI&gt;Save your configuration&lt;/LI&gt;&lt;LI&gt;Navigate to the &lt;STRONG&gt;Token&lt;/STRONG&gt;&amp;nbsp;tab&lt;/LI&gt;&lt;LI&gt;Click &lt;STRONG&gt;Request New Token&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;If successful, you'll receive an access token, confirming that your OAuth configuration is working correctly&lt;BR /&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="tanmay_0117_4-1764062168139.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344804i0B9CDE022DCA0637/image-size/large?v=v2&amp;amp;px=999" role="button" title="tanmay_0117_4-1764062168139.png" alt="tanmay_0117_4-1764062168139.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;BLOCKQUOTE&gt;&lt;P&gt;&lt;STRONG&gt;Note&lt;/STRONG&gt;: For comprehensive details on OAuth 2.0 configuration in ABAP, refer to the official SAP documentation on [&lt;A href="https://help.sap.com/docs/ABAP_PLATFORM_NEW/fd0fc52fd22b45f29d274a7f8236e768/cdb122d5b0784c77bf1bcce17f730e74.html" target="_blank" rel="noopener noreferrer"&gt;OAuth 2.0 Client for ABAP&lt;/A&gt;].&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H4 id="toc-hId-844657480"&gt;&lt;STRONG&gt;Step 2: Configure the RFC Destination&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;The destination acts as a bridge between your ABAP system and the BTP service. Here's how to set it up:&lt;/P&gt;&lt;H5 id="toc-hId-777226694"&gt;2.1 Create the HTTP Destination&lt;/H5&gt;&lt;OL&gt;&lt;LI&gt;&lt;SPAN&gt;Navigate to transaction code &lt;/SPAN&gt;&lt;STRONG&gt;SM59&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;in your ABAP system&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;Create a new RFC destination with the following settings:&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Connection Type&lt;/STRONG&gt;: Select &lt;STRONG&gt;'G'&lt;/STRONG&gt;&amp;nbsp;(HTTP connection to external server)&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;H5 id="toc-hId-580713189"&gt;&lt;STRONG&gt;2.2 Technical Settings&lt;/STRONG&gt;&lt;/H5&gt;&lt;OL&gt;&lt;LI&gt;Under the &lt;STRONG&gt;Technical Settings&lt;/STRONG&gt; tab enter the host URL of your BTP service without the "&lt;EM&gt;https://&lt;/EM&gt;"&amp;nbsp;prefix&lt;BR /&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="tanmay_0117_0-1764061796309.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344796iF07EED4CFF84C234/image-size/large?v=v2&amp;amp;px=999" role="button" title="tanmay_0117_0-1764061796309.png" alt="tanmay_0117_0-1764061796309.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;H5 id="toc-hId-384199684"&gt;2.3 Authentication Configuration&lt;/H5&gt;&lt;OL&gt;&lt;LI&gt;Navigate to the &lt;STRONG&gt;Logon &amp;amp; Security&lt;/STRONG&gt;&amp;nbsp;tab:&lt;UL&gt;&lt;LI&gt;Under &lt;STRONG&gt;Logon Procedure&lt;/STRONG&gt;, select &lt;STRONG&gt;'Logon with User'&lt;/STRONG&gt;&lt;/LI&gt;&lt;LI&gt;Choose &lt;STRONG&gt;'Basic Authentication'&lt;/STRONG&gt; as the authentication method&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;LI&gt;Click on &lt;STRONG&gt;OAuth Settings&lt;/STRONG&gt;:&lt;UL&gt;&lt;LI&gt;Select your previously configured OAuth client profile (see configuration details in the OAuth Client Configuration step above)&lt;BR /&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="tanmay_0117_1-1764061915324.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/344797i688028F4FC0CD147/image-size/large?v=v2&amp;amp;px=999" role="button" title="tanmay_0117_1-1764061915324.png" alt="tanmay_0117_1-1764061915324.png" /&gt;&lt;/span&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;H5 id="toc-hId--732516642"&gt;2.4 Test Your Connection&lt;/H5&gt;&lt;OL&gt;&lt;LI&gt;Click on &lt;STRONG&gt;Test Connection&lt;/STRONG&gt;&amp;nbsp;to verify connectivity to the host URL&lt;/LI&gt;&lt;LI&gt;Navigate to the &lt;STRONG&gt;Test OAuth Configuration&lt;/STRONG&gt;&amp;nbsp;tab to validate the OAuth setup&lt;/LI&gt;&lt;LI&gt;If you encounter SSL certificate issues, use transaction code &lt;STRONG&gt;STRUST&lt;/STRONG&gt;&amp;nbsp;to upload the required SSL certificate&lt;BR /&gt;&lt;BR /&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;BLOCKQUOTE&gt;&lt;P&gt;&lt;STRONG&gt;Note&lt;/STRONG&gt;: For more comprehensive information on calling RESTful APIs from ABAP, refer to the [&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-members/how-to-call-restful-apis-from-sap-abap-a-step-by-step-guide/ba-p/13926663" target="_blank"&gt;Calling RESTful APIs from SAP ABAP&lt;/A&gt;].&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;H4 id="toc-hId--635627140"&gt;&amp;nbsp;&lt;/H4&gt;&lt;H4 id="toc-hId--832140645"&gt;Step 3: Implement the ABAP Report&lt;/H4&gt;&lt;P&gt;Writing the ABAP code to invoke the agent.&lt;/P&gt;&lt;H5 id="toc-hId--1322057157"&gt;3.1 Create Your ABAP Report&lt;/H5&gt;&lt;P class="lia-indent-padding-left-30px" style="padding-left : 30px;"&gt;Go to transaction code &lt;STRONG&gt;SE38&lt;/STRONG&gt;&amp;nbsp;and create a new report.&lt;/P&gt;&lt;H5 id="toc-hId--1518570662"&gt;3.2 Understanding the CL_HTTP_CLIENT Class&lt;/H5&gt;&lt;P class="lia-indent-padding-left-30px" style="padding-left : 30px;"&gt;ABAP provides a powerful class called &lt;STRONG&gt;CL_HTTP_CLIENT&lt;/STRONG&gt;&amp;nbsp;for making HTTP calls to REST APIs. This class offers two primary methods for creating HTTP client instances:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;`CREATE_BY_DESTINATION` - Uses a predefined RFC destination&lt;/LI&gt;&lt;LI&gt;`CREATE_BY_URL` - Uses a direct URL&lt;/LI&gt;&lt;/UL&gt;&lt;P class="lia-indent-padding-left-30px" style="padding-left : 30px;"&gt;Since we've already created our destination, we'll use `CREATE_BY_DESTINATION`.&lt;/P&gt;&lt;H5 id="toc-hId--1715084167"&gt;3.3 The Complete Code Implementation&lt;/H5&gt;&lt;H6 id="toc-hId-2089966617"&gt;A. Create the HTTP Client Object&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;DATA: lo_http_client TYPE REF TO if_http_client. cl_http_client=&amp;gt;create_by_destination(
      EXPORTING
          destination = '&amp;lt;Name of the RFC destination&amp;gt;'  
      IMPORTING
          client = lo_http_client " HTTP Client object
      EXCEPTIONS
           argument_not_found = 1
           destination_not_found = 2
           destination_no_authority = 3
           plugin_not_active = 4
           internal_error = 5
           OTHERS = 6
           ).&lt;/code&gt;&lt;/pre&gt;&lt;H6 id="toc-hId-1893453112"&gt;B. Configure HTTP Method and Version&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;lo_http_client-&amp;gt;request-&amp;gt;set_method( if_http_request=&amp;gt;co_request_method_post ).
lo_http_client-&amp;gt;request-&amp;gt;set_version( if_http_request=&amp;gt;co_protocol_version_1_1 ).&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;We're using POST method since we're sending data to the agent, and HTTP version 1.1 for compatibility.&lt;/P&gt;&lt;H6 id="toc-hId-1696939607"&gt;C. Set the API Endpoint&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;lv_url = '/api/v1/Agents(agent_id)/chats(chat_id)/UnifiedAiAgentService.sendMessage'.
CALL METHOD cl_http_utility=&amp;gt;set_request_uri
    EXPORTING
      request = lo_http_client-&amp;gt;request
      uri     = lv_url.&lt;/code&gt;&lt;/pre&gt;&lt;BLOCKQUOTE&gt;&lt;P&gt;&lt;STRONG&gt;Note&lt;/STRONG&gt;: Replace `agent_id` and `chat_id` with your actual agent and chat identifiers from Business Agent Framework.&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;H6 id="toc-hId-1500426102"&gt;D. Set Content Type&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CALL METHOD lo_http_client-&amp;gt;request-&amp;gt;set_content_type( 'application/json' ).&lt;/code&gt;&lt;/pre&gt;&lt;P class="lia-indent-padding-left-30px" style="padding-left : 30px;"&gt;Since we're sending JSON data, we specify `application/json`. If you were working with XML, you'd use `application/xml` or `text/xml` instead.&lt;/P&gt;&lt;H6 id="toc-hId-1472096288"&gt;E. Prepare and Send the Request Body&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;lv_string = '{"msg": "give message here", "outputFormat": "Markdown", "async": false, "returnTrace": true}'.
lo_http_client-&amp;gt;request-&amp;gt;set_cdata( lv_string ).&lt;/code&gt;&lt;/pre&gt;&lt;H6 id="toc-hId-1275582783"&gt;F. Execute the Request&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CALL METHOD lo_http_client-&amp;gt;send
    EXCEPTIONS
      http_communication_failure = 1
      http_invalid_state         = 2.

CALL METHOD lo_http_client-&amp;gt;receive
    EXCEPTIONS
      http_communication_failure = 1
      http_invalid_state         = 2
      http_processing_failed     = 3.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;These two calls handle the request-response cycle.&lt;/P&gt;&lt;H6 id="toc-hId-1079069278"&gt;G. Process the Response&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CALL METHOD lo_http_client-&amp;gt;response-&amp;gt;get_status
    IMPORTING
      code   = http_status
      reason = reason.

  response = lo_http_client-&amp;gt;response-&amp;gt;get_cdata( ).&lt;/code&gt;&lt;/pre&gt;&lt;H6 id="toc-hId-882555773"&gt;H. Extract the Agent's Response&lt;/H6&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;SPLIT response AT '"response":"' INTO rest response.
SPLIT response AT '","' INTO explanation rest.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;This parsing logic extracts the actual response text from the JSON structure. The variable `explanation` now contains the agent's reply.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In conclusion, integrating SAP Business Technology Platform (BTP) services with on-premise ABAP systems is a powerful way to leverage modern AI capabilities within your traditional SAP landscape. By following the step-by-step guide provided in this blog, you can successfully invoke agents from the Business Agent Foundation service directly from an ABAP report. This integration not only enhances your business processes with intelligent automation but also demonstrates the flexibility and extensibility of SAP systems.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;span class="lia-unicode-emoji" title=":writing_hand:"&gt;‚úçÔ∏è&lt;/span&gt;Co-Author:&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;span class="lia-unicode-emoji" title=":bust_in_silhouette:"&gt;üë§&lt;/span&gt;‚Äå‚Äå&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/17381"&gt;@Samruddhi&lt;/a&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/invoking-business-agent-foundation-agents-from-abap-a-step-by-step-guide/ba-p/14274507"/>
    <published>2025-11-26T10:15:43.404000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/bp-user-exits-to-check-data-before-saving-sap-gui-transaction-for-business/ba-p/14278403</id>
    <title>BP user exits to check data before saving (SAP GUI transaction for Business Partners)</title>
    <updated>2025-11-26T21:03:29.085000+01:00</updated>
    <author>
      <name>Sandra_Rossi</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/145194</uri>
    </author>
    <content>&lt;P&gt;I've read a few questions and answers about which user exit to choose to add custom checks before saving in the SAP GUI transaction BP (maintenance of business partners), but without understanding which ones to choose, how they are all related, what they exactly do. I'm trying here to provide an overview of what I have quickly understood.&lt;/P&gt;&lt;P&gt;I'm running S/4HANA 2023 FPS 1 (ABAP 7.58 SP 1).&lt;/P&gt;&lt;P&gt;In short, there are these user exits, called sequentially:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;the BP checks by the BDT framework (Business Data Toolset),&lt;/LI&gt;&lt;LI&gt;the BP checks by the BAdI&amp;nbsp;BUPA_FURTHER_CHECKS,&lt;/LI&gt;&lt;LI&gt;the vendor or customer specific checks by the BAdI VENDOR_EXTENSION_CHECK and CUSTOMER_EXTENSION_CHECK.&lt;/LI&gt;&lt;LI&gt;NB: if I understand well, S/4HANA has merged customer and vendor maintenance into BP, and before S/4HANA, there were specific vendor and customer user exits (not part of BP) which were the&amp;nbsp;&lt;SPAN&gt;Business Transaction Events 1340 and 1440 and the BAdI CUSTOMER_ADD_DATA and VENDOR_ADD_DATA, method CHECK_ALL_DATA. I don't discuss them here.&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;In BP, the BDT checks&amp;nbsp;are first called. You may create your own function module (no parameters) and add it to the transaction code BUS7 for the event DCHCK. For the sequence number, you may enter any two last characters (positions 6 and 7) other than "00" (double zero), because the positions are reserved for custom use, as explained in the SAP Help Portal:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;EM&gt;Naming convention: The position number has 7 places. Each development stage has one place of its own. The places from the left up to your own place are freely assignable. The application uses them to determine the position of the view within a section in relation to the views of the upstream development stages. The numbers to the right of your own place must be ‚Äò0‚Äô.&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;The following places are reserved for the development stages:&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Application basis 1+2&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Standard applications 3&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Industry applications 4&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Development partners 5&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Customers (central) 6&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;Customers (branch) 7&lt;/EM&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Then, the method CHECK_CENTRAL of the &lt;STRONG&gt;Classic&lt;/STRONG&gt; BAdI BUPA_FURTHER_CHECKS is called. You may also implement it (transaction code SE18, menu Implementations &amp;gt; Create). This method&amp;nbsp;receives few parameters (table BUT000, name, organization data, person data). If you need other data from the business partner, you may call function modules like BUP_BUPA_BUT0IS_GET (table BUT0IS being the industry sectors defined at the BP level) to get the data modified (or not) by the user, before the data is really saved to the database.&lt;/P&gt;&lt;P&gt;After that, if the partner is of type vendor, BP calls the method CHECK of the BAdI Definition VENDOR_EXTENSION_CHECK of the &lt;STRONG&gt;Enhancement Spot&lt;/STRONG&gt; VENDOR_EXTENSION.&lt;/P&gt;&lt;P&gt;If the partner of type customer,&amp;nbsp;BP calls the method CHECK of the BAdI Definition CUSTOMER_EXTENSION_CHECK of the Enhancement Spot CUSTOMER_EXTENSION.&lt;/P&gt;&lt;P&gt;The two BAdI above receive only the vendor or customer specific data, not the whole business partner data, to prevent saving the data to the vendor or customer specific tables LFA1, KNA1 (and so on), but &lt;STRONG&gt;even if an error is raised by the user exit, the business partner data is saved&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;In my case, I wanted to define a blocking check on BP data, the most simple way, so I used the classic BAdI BUPA_FURTHER_CHECKS.&lt;/P&gt;&lt;P&gt;For information, if you want to know about how the vendor or customer specific data is filtered out from the business partner data, it's done by the class CVI_STRATEGY_BP_VENDOR, in the method IF_MDS_CTRL_STRATEGY_IMPL~PROCESS.&lt;/P&gt;&lt;P&gt;I don't know how exactly the BP customizing decides how to display the vendor or customer data, and how it's saved into the tables LFA1, KNA1, etc. What I could understand:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;If you create a Business Partner, you choose a partner group from the table TB000 (e.g. PCUS, PVEN)&lt;/LI&gt;&lt;LI&gt;The SPRO activity "Define partner role from client to partner" (SM30 &amp;gt; CVIV_CUST_TO_BP2) assigns one or more partner roles (e.g. FLCU00) to the partner group (e.g. PCUS).&lt;/LI&gt;&lt;LI&gt;The SPRO activity "Define partner role from vendor to partner" (SM30 &amp;gt; CVIV_VEND_TO_BP2) assigns one or more partner roles (e.g. FLVN00) to a partner group (e.g. PVEN).&lt;/LI&gt;&lt;LI&gt;The SPRO activity "Define partner roles" (SM34 &amp;gt; BUPA_TB003) links the partner role (e.g. FLCU00) to the BDT partner view (e.g. FLCU00). This BDT partner view is defined in the transaction BUSD and is connected to Dynpro screens with ABAP logic. It's not clear to me how, from here, some BDT partner function modules are called at save time and how they write to either the table LFA1 (vendor) or KNA1 (customer).&lt;/LI&gt;&lt;LI&gt;The SPRO activity "Assign partner role to client group" (V_TBD001) assigns a client group from KNA1-KTOKD (e.g. CUST) to a partner group&amp;nbsp;(e.g. PCUS). This customizing indicates if the client number is the same as the partner number. For information, the relationship table is CVI_CUST_LINK.&lt;/LI&gt;&lt;LI&gt;The SPRO activity "Assign partner role to vendor group" (V_TBC001) assigns a vendor group from LFA1-KTOKK (e.g. VEND) to a partner group (e.g. PVEN).&amp;nbsp;This customizing indicates if the vendor number is the same as the partner number. For information, the relationship table is CVI_VEND_LINK.&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;If I've missed something, if I'm wrong or if you can enlighten me, please add a comment. I will then update this post.&lt;/P&gt;&lt;P&gt;Thank you for reading!&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/bp-user-exits-to-check-data-before-saving-sap-gui-transaction-for-business/ba-p/14278403"/>
    <published>2025-11-26T21:03:29.085000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/building-a-clean-rest-api-for-sap-pp-production-confirmation-using-pure/ba-p/14280062</id>
    <title>Building a Clean REST API for SAP PP Production Confirmation Using Pure ABAP OOP</title>
    <updated>2025-11-28T17:31:35.973000+01:00</updated>
    <author>
      <name>Waruna</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/128000</uri>
    </author>
    <content>&lt;H1 id="toc-hId-1637290086"&gt;&lt;STRONG&gt;Building a Clean REST API for SAP PP Production Confirmation Using Pure ABAP OOP (Open Source Template Included)&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;&lt;STRONG&gt;Author:&lt;/STRONG&gt; &lt;EM&gt;Waruna Lakshantha&lt;/EM&gt;&lt;BR /&gt;&lt;A href="https://github.com/waruna-lakshantha/ABAP-KT/tree/main/abap-pp-rest-production-confirmation" target="_self" rel="nofollow noopener noreferrer"&gt;&lt;STRONG&gt;GitHub Repository&lt;/STRONG&gt;&lt;/A&gt;&lt;/P&gt;&lt;HR /&gt;&lt;H2 id="toc-hId-1569859300"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":pushpin:"&gt;üìå&lt;/span&gt;Introduction&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Production Order Confirmation is one of the most common integration points between &lt;STRONG&gt;SAP PP&lt;/STRONG&gt; and external systems such as:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;MES (Manufacturing Execution Systems)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Mobile shop-floor applications&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;IoT/PDC devices&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Operator kiosks&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Edge gateways collecting real-time production data&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Traditionally, developers implement this using:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;RFC-enabled custom Z-Functions&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;BDC programs&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;SEGW-based OData services&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Monolithic function modules with UI-dependent logic&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;These patterns work, but they come with a cost:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":cross_mark:"&gt;‚ùå&lt;/span&gt;Code becomes tightly coupled&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":cross_mark:"&gt;‚ùå&lt;/span&gt;Difficult to test &amp;amp; debug&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":cross_mark:"&gt;‚ùå&lt;/span&gt;Not reusable across other modules&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":cross_mark:"&gt;‚ùå&lt;/span&gt;Hard to standardize&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":cross_mark:"&gt;‚ùå&lt;/span&gt;Not aligned with modern integration principles (REST/JSON)&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;So I developed an &lt;STRONG&gt;open-source, reusable template&lt;/STRONG&gt; using &lt;STRONG&gt;pure ABAP OOP + SICF REST + JSON&lt;/STRONG&gt; ‚Äî and published it on GitHub for the SAP community.&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId-1244263076"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":rocket:"&gt;üöÄ&lt;/span&gt;Why a REST API Instead of RFC / SEGW OData?&lt;/STRONG&gt;&lt;/H1&gt;&lt;H3 id="toc-hId-1305915009"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":keycap_1:"&gt;1Ô∏è‚É£&lt;/span&gt;Lightweight and Simple&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Unlike SEGW OData (with MPC/DPC classes, annotations, and metadata), a REST endpoint needs:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;1 handler class&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;1 application class&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;1 BAPI adapter class&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;1 JSON helper&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;1 exception class&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;That‚Äôs it.&lt;/P&gt;&lt;HR /&gt;&lt;H3 id="toc-hId-1109401504"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":keycap_2:"&gt;2Ô∏è‚É£&lt;/span&gt;JSON is the universal language&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Every MES / mobile / automation system can work with simple JSON payloads:&lt;/P&gt;&lt;PRE&gt;&lt;CODE&gt;{
  "confirmations": [
    {
      "order_number": "100001",
      "operation_number": "0010",
      "yield_quantity": 120
    }
  ]
}&lt;/CODE&gt;&lt;/PRE&gt;&lt;P&gt;No XML, no SOAP, no complex metadata layers.&lt;/P&gt;&lt;HR /&gt;&lt;H3 id="toc-hId-912887999"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":keycap_3:"&gt;3Ô∏è‚É£&lt;/span&gt;Decoupled Architecture&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;The design follows Clean ABAP principles:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;REST handler ‚Üí handles HTTP protocol&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Application service ‚Üí validation, orchestration&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;BAPI adapter ‚Üí all interaction with SAP logic&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;DTO interface ‚Üí no global variables&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Mapper ‚Üí JSON ‚Üî ABAP separation&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Perfect for real manufacturing IT architectures.&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId-458209056"&gt;&lt;STRONG&gt;üß± Overall Architecture&lt;/STRONG&gt;&lt;/H1&gt;&lt;PRE&gt;&lt;CODE&gt;SICF Service (REST)
      ‚Üì
HTTP Handler Class
      ‚Üì
Application Service
      ‚Üì
BAPI Adapter (BAPI_PRODORDCONF_*)
      ‚Üì
SAP PP Confirmation&lt;/CODE&gt;&lt;/PRE&gt;&lt;P&gt;This is the same layered architecture found in modern backend development (.NET, Spring Boot, Node.js), applied cleanly to ABAP.&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId-261695551"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":package:"&gt;üì¶&lt;/span&gt;Open Source Repository&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":backhand_index_pointing_right:"&gt;üëâ&lt;/span&gt;&lt;A href="https://github.com/waruna-lakshantha/ABAP-KT/tree/main/abap-pp-rest-production-confirmation" target="_self" rel="nofollow noopener noreferrer"&gt;&lt;STRONG&gt;GitHub Repo&lt;/STRONG&gt;&lt;/A&gt;&lt;/P&gt;&lt;P&gt;The repository includes:&lt;/P&gt;&lt;P&gt;Object Description&lt;/P&gt;&lt;TABLE&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD&gt;&lt;CODE&gt;ZCL_PP_CONF_HTTP_HANDLER&lt;/CODE&gt;&lt;/TD&gt;&lt;TD&gt;SICF REST handler&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;CODE&gt;ZCL_PP_CONF_APPLICATION&lt;/CODE&gt;&lt;/TD&gt;&lt;TD&gt;Business logic / orchestration&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;CODE&gt;ZCL_PP_CONF_BAPI_ADAPTER&lt;/CODE&gt;&lt;/TD&gt;&lt;TD&gt;Clean wrapper for PP confirmation BAPIs&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;CODE&gt;ZCL_PP_CONF_JSON_HELPER&lt;/CODE&gt;&lt;/TD&gt;&lt;TD&gt;JSON serialization/deserialization&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;CODE&gt;ZIF_PP_CONF_TYPES&lt;/CODE&gt;&lt;/TD&gt;&lt;TD&gt;DTO definitions&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD&gt;&lt;CODE&gt;ZCX_PP_CONF_ERROR&lt;/CODE&gt;&lt;/TD&gt;&lt;TD&gt;Custom exception class&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;P&gt;Every class is documented and designed for reuse.&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId-65182046"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":inbox_tray:"&gt;üì•&lt;/span&gt;Sample Request (POST JSON)&lt;/STRONG&gt;&lt;/H1&gt;&lt;PRE&gt;&lt;CODE&gt;POST /sap/bc/zpp_conf_rest
Content-Type: application/json&lt;/CODE&gt;&lt;/PRE&gt;&lt;PRE&gt;&lt;CODE&gt;{
  "confirmations": [
    {
      "order_number": "100001",
      "operation_number": "0010",
      "plant": "1000",
      "posting_date": "2025-11-28",
      "yield_quantity": 120,
      "scrap_quantity": 2,
      "unit_of_measure": "PC",
      "confirmed_by": "PPUSER",
      "confirmation_text": "Shift A - Output"
    }
  ]
}&lt;/CODE&gt;&lt;/PRE&gt;&lt;HR /&gt;&lt;H1 id="toc-hId--131331459"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":outbox_tray:"&gt;üì§&lt;/span&gt;Sample Response&lt;/STRONG&gt;&lt;/H1&gt;&lt;H3 id="toc-hId--144910895"&gt;&lt;span class="lia-unicode-emoji" title=":heavy_check_mark:"&gt;‚úîÔ∏è&lt;/span&gt;Success&lt;/H3&gt;&lt;PRE&gt;&lt;CODE&gt;{
  "response": {
    "overallStatus": "OK",
    "results": [
      {
        "orderNumber": "100001",
        "operationNumber": "0010",
        "status": "SUCCESS",
        "confirmationId": "50001234",
        "message": "Confirmation posted successfully"
      }
    ]
  }
}&lt;/CODE&gt;&lt;/PRE&gt;&lt;H3 id="toc-hId--341424400"&gt;&lt;span class="lia-unicode-emoji" title=":cross_mark:"&gt;‚ùå&lt;/span&gt;Error Example&lt;/H3&gt;&lt;PRE&gt;&lt;CODE&gt;{
  "response": {
    "overallStatus": "FAILED",
    "results": [
      {
        "orderNumber": "100001",
        "operationNumber": "0010",
        "status": "ERROR",
        "message": "Operation not found"
      }
    ]
  }
}&lt;/CODE&gt;&lt;/PRE&gt;&lt;HR /&gt;&lt;H1 id="toc-hId-48868109"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":magnifying_glass_tilted_left:"&gt;üîç&lt;/span&gt;Technical Highlights&lt;/STRONG&gt;&lt;/H1&gt;&lt;H3 id="toc-hId--734451410"&gt;&lt;STRONG&gt;‚úî Stateless design (ideal for cloud/MES)&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;No global variables, no shared buffers.&lt;/P&gt;&lt;H3 id="toc-hId--930964915"&gt;&lt;STRONG&gt;‚úî Single Responsibility Principle&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Every class has a clear purpose.&lt;/P&gt;&lt;H3 id="toc-hId--1127478420"&gt;&lt;STRONG&gt;‚úî JSON mapping fully isolated&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Easy to replace with custom or RAP-based JSON solutions.&lt;/P&gt;&lt;H3 id="toc-hId--1323991925"&gt;&lt;STRONG&gt;‚úî Ready for CI/CD testing&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Small units mean easier unit tests and extensibility.&lt;/P&gt;&lt;H3 id="toc-hId--1520505430"&gt;&lt;STRONG&gt;‚úî Designed for real manufacturing fields&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Tested with common PP fields: quantity, scrap, posting date, work center, etc.&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId--1130212921"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":hammer_and_wrench:"&gt;üõ†&lt;/span&gt;Installation Steps&lt;/STRONG&gt;&lt;/H1&gt;&lt;H3 id="toc-hId--1913532440"&gt;&lt;span class="lia-unicode-emoji" title=":keycap_1:"&gt;1Ô∏è‚É£&lt;/span&gt;Import classes into SE24&lt;/H3&gt;&lt;P&gt;(copy each &lt;CODE&gt;.abap&lt;/CODE&gt; file)&lt;/P&gt;&lt;H3 id="toc-hId--1941862254"&gt;&lt;span class="lia-unicode-emoji" title=":keycap_2:"&gt;2Ô∏è‚É£&lt;/span&gt;Create SICF service&lt;/H3&gt;&lt;P&gt;Path example:&lt;/P&gt;&lt;PRE&gt;&lt;CODE&gt;/sap/bc/zpp_conf_rest&lt;/CODE&gt;&lt;/PRE&gt;&lt;P&gt;Assign handler class:&lt;BR /&gt;&lt;span class="lia-unicode-emoji" title=":backhand_index_pointing_right:"&gt;üëâ&lt;/span&gt;&lt;CODE&gt;ZCL_PP_CONF_HTTP_HANDLER&lt;/CODE&gt;&lt;/P&gt;&lt;H3 id="toc-hId--2138375759"&gt;&lt;span class="lia-unicode-emoji" title=":keycap_3:"&gt;3Ô∏è‚É£&lt;/span&gt;Authorize users&lt;/H3&gt;&lt;P&gt;Use standard SAP Basic Auth or SSO login.&lt;/P&gt;&lt;H3 id="toc-hId-1960078032"&gt;&lt;span class="lia-unicode-emoji" title=":keycap_4:"&gt;4Ô∏è‚É£&lt;/span&gt;Test using Postman, VS Code Thunder Client, Insomnia, or MES system.&lt;/H3&gt;&lt;HR /&gt;&lt;H1 id="toc-hId--1944596755"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":glowing_star:"&gt;üåü&lt;/span&gt;Extensions You Can Add&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;You can enhance this for:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Time Ticket Posting&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Goods Movements (101 / 105 / 261 / 262 / 531)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Serial number confirmation&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Batch consumption&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;PDC devices&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;IoT sensor-based auto confirmations&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Error logging into Z-tables&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;RAP-based outbound monitoring dashboard&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;The template is a perfect base for &lt;STRONG&gt;any inbound REST API&lt;/STRONG&gt; in SAP ECC or S/4HANA.&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId--2141110260"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":handshake:"&gt;ü§ù&lt;/span&gt;Why I‚Äôm Sharing This&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;Because SAP developers deserve clean, modern patterns.&lt;BR /&gt;And most ABAP teams still rely on &lt;STRONG&gt;RFC modules created 15‚Äì20 years ago&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;If we want SAP to integrate with Industry 4.0, Smart Manufacturing, Mobile PP, and MES platforms,&lt;BR /&gt;we need to move toward:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;REST&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;JSON&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;OOP&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Clean architecture&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Testability&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Openness&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This is my small contribution toward that direction.&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId-1957343531"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":link:"&gt;üîó&lt;/span&gt;Links&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":pushpin:"&gt;üìå&lt;/span&gt;&lt;A href="https://github.com/waruna-lakshantha/ABAP-KT/tree/main/abap-pp-rest-production-confirmation" target="_self" rel="nofollow noopener noreferrer"&gt;GitHub Repository&lt;/A&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-unicode-emoji" title=":pushpin:"&gt;üìå&lt;/span&gt;&lt;A href="https://www.linkedin.com/posts/warunalakshantha_clean-abap-rest-api-for-sap-pp-production-activity-7400213531956166656-qtti?utm_source=share&amp;amp;utm_medium=member_desktop&amp;amp;rcm=ACoAABQx8ZgB-Uvf26yl0bzkp5xojzE4KlXjjmU" target="_self" rel="nofollow noopener noreferrer"&gt;LinkedIn Post&lt;/A&gt;&lt;/P&gt;&lt;HR /&gt;&lt;H1 id="toc-hId-1760830026"&gt;&lt;STRONG&gt;&lt;span class="lia-unicode-emoji" title=":speech_balloon:"&gt;üí¨&lt;/span&gt;Feedback / Questions&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;I‚Äôm happy to help anyone implementing:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;REST APIs in ABAP&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;SAP PP/MES integrations&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Clean code in SAP&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;ABAP OOP architecture patterns&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Moving away from legacy RFC/OData SEGW builds&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Feel free to comment, message, or open issues on GitHub.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/building-a-clean-rest-api-for-sap-pp-production-confirmation-using-pure/ba-p/14280062"/>
    <published>2025-11-28T17:31:35.973000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-architecture-blog-posts/how-to-enhance-sales-order-item-processing-in-sap-tabstrip-ui-popup/ba-p/14281143</id>
    <title>How to Enhance Sales Order Item Processing in SAP: Tabstrip UI + Popup Quantity Editing</title>
    <updated>2025-12-01T23:23:26.763000+01:00</updated>
    <author>
      <name>sirishave</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1531949</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;Building a Module Pool Program with Tab Strip, Popup Dialog, and Quantity Update in SAP ABAP&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In this post, we will look at how to build an SAP ABAP Module Pool application that displays Sales Order item details, opens a popup for editing quantities, and updates the values back to the main screen.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;This requirement is common in&amp;nbsp;logistics&amp;nbsp;applications where users need to review and adjust quantities before posting follow-up processes.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Business Requirement:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;SPAN&gt;Display Sales Order Item Details using Tab Strip.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Provide two buttons: ADD SA and CANCEL.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;On ADD SA&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;show popup with first 5 items.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Quantity is editable.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Popup has OK and CANCEL.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;OK updates quantity back in main table.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;CANCEL closes popup without change.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;Technical Components:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;- Module Pool&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;- Screens 0100 and 0200&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;- Table Controls&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;- Tab Strip&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;- PBO &amp;amp; PAI modules&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;- PF-STATUS&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;- Internal tables&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Screen Designs&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Screen 100 ‚Äì Main Screen&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Sales Order input field&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Tab Strip&amp;nbsp;containing&amp;nbsp;VBAP fields:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;POSNR&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;MATNR&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;CHARG&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;ARKTX&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;KWMENG&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;WERKS, etc.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;Table Control (TABLE1)&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Buttons:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;GET&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;ADD SA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;CANCEL&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sirishave_0-1764592939833.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347062iC860E5EFC81CC1D0/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="sirishave_0-1764592939833.png" alt="sirishave_0-1764592939833.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Screen 200 ‚Äì Popup Screen&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Modal popup&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Table Control (TABLE2) with:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;5 items only&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Editable Qty (KWMENG)&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Buttons:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;OK&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;CANCEL&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sirishave_1-1764592939840.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347063i21761870D8924DDF/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="sirishave_1-1764592939840.png" alt="sirishave_1-1764592939840.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Application Flow&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;1Ô∏è&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;User enters Sales Order number&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;2Ô∏è&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Presses ‚ÄúGET‚Äù&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;VBAP data retrieved&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;Items appear on main screen&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;3Ô∏è&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;User clicks ‚ÄúADD SA‚Äù&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;Popup opens&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;User edits quantity&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;4Ô∏è&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;User clicks ‚ÄúOK‚Äù&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;Updated values transferred back&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;Main screen refreshed&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;5Ô∏è&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;User clicks ‚ÄúCANCEL‚Äù&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;‚Üí&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;Popup closes without changes&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Key ABAP Logic Implementation&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Reading Sales Order Item Data&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;SELECT vbeln posnr matnr charg arktx 

       kwmeng werks lgort vstel 

  FROM vbap 
  INTO TABLE lt_vbap 
  WHERE vbeln = gv_vbeln. &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;2. &lt;STRONG&gt;P&lt;SPAN&gt;assing First 5 Items to Popup&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;lt_vbap1 = lt_vbap. 

DELETE lt_vbap1 FROM 6. "Keep only first 5 items &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;3.Updating Quantities Back in Main Screen&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;LOOP AT lt_vbap1 INTO ls_vbap1. 

  READ TABLE lt_vbap INTO ls_vbap WITH KEY posnr = ls_vbap1-posnr. 

  IF sy-subrc = 0. 

    ls_vbap-kwmeng = ls_vbap1-kwmeng. 

    MODIFY lt_vbap FROM ls_vbap INDEX sy-tabix. 

  ENDIF. 

ENDLOOP. &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;4.Handling Table Control Updates&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;MODULE read_data INPUT. 

  MODIFY lt_vbap1 FROM ls_vbap1 INDEX table2-current_line. 

ENDMODULE. &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Conclusion&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This Module Pool program&amp;nbsp;demonstrates:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Effective use of classic SAP GUI dialog programming&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Leveraging Table Controls and Popup Screens&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Clean user-driven quantity update process&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Practical design for logistics screens&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This module pool program demonstrates flexible SAP GUI programming using popups, table controls, and classic PAI/PBO logic.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;REPORT ZSALESITEM_DATA_TASK. 
 
TABLES:VBAP. 
 
TYPES:BEGIN OF TY R _VBAP, 
     VBELN TYPE VBAP-VBELN, 
     POSNR TYPE VBAP-POSNR, 
     MATNR TYPE VBAP-MATNR, 
     CHARG TYPE VBAP-CHARG, 
     ARKTX TYPE VBAP-ARKTX, 
     KWMENG TYPE VBAP-KWMENG, 
     WERKS TYPE VBAP-WERKS, 
     LGORT TYPE VBAP-LGORT, 
     VSTEL TYPE VBAP-VSTEL, 
 END OF TY_VBAP. 
 
 
DATA: LT_VBAP TYPE STANDARD TABLE OF ty_VBAP, 
     LS_VBAP TYPE ty_VBAP, 
 
     LT_VBAP1 TYPE STANDARD TABLE OF TY_VBAP, 
     LS_VBAP1 TYPE TY_VBAP. 
 
CONTROLS: TABLE1 TYPE TABLEVIEW USING SCREEN 0100. 
CONTROLS: TABLE2 TYPE TABLEVIEW USING SCREEN 0200. 
 
START-OF-SELECTION. 
CALL SCREEN 100. 
call screen 200. 
 
*&amp;amp;---------------------------------------------------------------------* 
*&amp;amp;      Module  USER_COMMAND_0100  INPUT 
*&amp;amp;---------------------------------------------------------------------* 
*       text 
*----------------------------------------------------------------------* 
MODULE user_command_0100 INPUT. 
 
 CASE SY-UCOMM. 
   WHEN 'GET'. 
data LV_VBELN type vbap-vbeln. 
     SELECT POSNR MATNR 
            CHARG ARKTX 
            KWMENG WERKS 
            LGORT VSTEL  FROM VBAP INTO  CORRESPONDING FIELDS OF TABLE LT_VBAP 
      WHERE VBELN = LV_VBELN. 
   SORT lt_vbap BY vbeln. 
     WHEN 'EXIT'. 
       LEAVE PROGRAM. 
 
*      // Pop up 
   WHEN 'ADD'. 
     CALL SCREEN 200 STARTING AT 10 5 
     ENDING AT 100 10. 
 
 
 ENDCASE. 
 
ENDMODULE. 
*&amp;amp;---------------------------------------------------------------------* 
*&amp;amp;      Module  STATUS_0200  OUTPUT 
*&amp;amp;---------------------------------------------------------------------* 
*       text 
*----------------------------------------------------------------------* 
MODULE status_0200 OUTPUT. 
 SET PF-STATUS 'STATUS'. 
  CASE sy-ucomm. 
     WHEN 'ENTER'. 
     CALL  SCREEN 100. 
   WHEN 'CANCEL'. 
     CALL SCREEN 100. 
 
*  SET TITLEBAR 'xxx'. 
 ENDCASE. 
 
ENDMODULE. 
*&amp;amp;---------------------------------------------------------------------* 
*&amp;amp;      Module  USER_COMMAND_0200  INPUT 
*&amp;amp;---------------------------------------------------------------------* 
*       text 
*----------------------------------------------------------------------* 
MODULE user_command_0200 INPUT. 
 CASE sy-ucomm. 
 WHEN 'ENTER'. 
LOOP AT lt_vbap INTO ls_vbap ." where posnr = lv_posnr.  "kwmeng &amp;lt;&amp;gt; ls_vbap-kwmeng. 
       DATA(lv_index) = sy-tabix. 
 
   LOOP AT lt_vbap1 INTO ls_vbap1  where posnr = ls_vbap-posnr. 
         if sy-subrc = 0. 
         ls_vbap-KWMENG = ls_vbap1-kwmeng. 
         MODIFY lt_vbap FROM ls_vbap INDEX lv_index  TRANSPORTING KWMENG. 
       ENDIF. 
     ENDLOOP. 
     ENDLOOP. 
     LEAVE to SCREEN 0. 
 
   WHEN 'EXIT'. 
     LEAVE PROGRAM. 
 
     ENDCASE. 
 
ENDMODULE. 
*&amp;amp;---------------------------------------------------------------------* 
*&amp;amp;      Module  READ_DATA  INPUT 
*&amp;amp;---------------------------------------------------------------------* 
*       text 
*----------------------------------------------------------------------* 
MODULE read_data INPUT. 
modify lt_vbap1 from ls_vbap1 index table2-current_line. 
 
ENDMODULE. 
*&amp;amp;---------------------------------------------------------------------* 
*&amp;amp;      Module  FIELD-SEL  INPUT 
*&amp;amp;---------------------------------------------------------------------* 
*       text 
*----------------------------------------------------------------------* 
MODULE field-sel INPUT. 
 
 READ TABLE LT_VBAP INTO LS_VBAP INDEX TABLE1-CURRENT_LINE. 
 IF SY-SUBRC = 0. 
   LS_VBAP1 = LS_VBAP. 
   APPEND LS_VBAP1 TO LT_VBAP1. 
   ENDIF. 
 
ENDMODULE. 

 &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-architecture-blog-posts/how-to-enhance-sales-order-item-processing-in-sap-tabstrip-ui-popup/ba-p/14281143"/>
    <published>2025-12-01T23:23:26.763000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/pattern-function-for-rfc/ba-p/14282086</id>
    <title>Pattern Function for RFC</title>
    <updated>2025-12-02T14:15:39.540000+01:00</updated>
    <author>
      <name>ykaldirim</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/182293</uri>
    </author>
    <content>&lt;P&gt;SAP has many functionalities that simplify coders. But We didn't sometimes find a simple requirement. This is one of them. Pattern for RFCs. Here the steps of solution.&lt;/P&gt;&lt;P&gt;All of ABAP coders know and like Patterns. But there is not a simple way to put RFC functions.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ykaldirim_0-1764679866673.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347562i77B8188E73C03633/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="ykaldirim_0-1764679866673.png" alt="ykaldirim_0-1764679866673.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Here the solution:&lt;/P&gt;&lt;P&gt;1- Define Custom Pattern&amp;nbsp;&lt;/P&gt;&lt;P&gt;Follow&amp;nbsp;&lt;STRONG&gt;&lt;EM&gt;SE38-&amp;gt;Utilities-&amp;gt;More Utilities-&amp;gt;Edit Pattern&lt;/EM&gt;&lt;/STRONG&gt;&amp;nbsp; node and define a new one with the name &lt;STRONG&gt;Z_RFC_FUNCTION.&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&amp;nbsp;&lt;/DIV&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ykaldirim_2-1764680094304.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347566i08DDCFFA21C15C59/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="ykaldirim_2-1764680094304.png" alt="ykaldirim_2-1764680094304.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ykaldirim_3-1764680154442.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347568iF840C18DDB0BFA29/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="ykaldirim_3-1764680154442.png" alt="ykaldirim_3-1764680154442.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;2- We will create a function in both systems. First below code is for source system which will call target RFC. Function name should start with the name of pattern Z_RFC_FUNCTION and follow EDITOR_EXIT So it's :&amp;nbsp;&lt;STRONG&gt;Z_RFC_FUNCTION_EDITOR_EXIT.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;You will see I'm calling a function which will return required source code for RFC call at the line of 31. Of course you should change the DESTINATION with your system rfc.&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;FUNCTION z_rfc_function_editor_exit.
*"----------------------------------------------------------------------
*"*"Local Interface:
*"  TABLES
*"      BUFFER TYPE  RSWSOURCET
*"----------------------------------------------------------------------
  DATA lt_sval TYPE STANDARD TABLE OF sval.
  DATA ls_sval TYPE sval.

  DATA: buffer2 TYPE rswsourcet.

* Get name of structure from user
  ls_sval-tabname = 'RS38L'.
  ls_sval-fieldname = 'NAME'.
  ls_sval-field_attr  = '00'.
  APPEND ls_sval TO lt_sval.

  CALL FUNCTION 'POPUP_GET_VALUES'
    EXPORTING
      popup_title     = 'Enter Function Name'
    TABLES
      fields          = lt_sval
    EXCEPTIONS
      error_in_fields = 1
      OTHERS          = 2.

* Get the given structure name
  READ TABLE lt_sval INTO ls_sval INDEX 1.
  check ls_sval-value is not INITIAL.

  CALL FUNCTION 'Z_RFC_FUNCTION_EDITOR_EXIT'
    DESTINATION 'KHDCLNT100'
    EXPORTING
      funcname = ls_sval-value
    IMPORTING
      buffer   = buffer2.

  LOOP AT buffer2 INTO DATA(ls_buffer).

    APPEND ls_buffer TO buffer.

  ENDLOOP.
ENDFUNCTION.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;3- Second is for target system which RFC will be run. I gave the same name for the function to get the source code from target system. Here it's&amp;nbsp;&lt;STRONG&gt;Z_RFC_FUNCTION_EDITOR_EXIT.&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;FUNCTION z_rfc_function_editor_exit.
*"----------------------------------------------------------------------
*"*"Local Interface:
*"  IMPORTING
*"     VALUE(FUNCNAME) TYPE  RS38L-NAME
*"  EXPORTING
*"     VALUE(BUFFER) TYPE  RSWSOURCET
*"----------------------------------------------------------------------

  DATA: l_pattern_obj TYPE REF TO cl_sedi_pattern_generator,
        l_pattern     TYPE swbse_max_line_tab,
        l_pattern_new TYPE swbse_max_line_tab.

  DATA: lv_line TYPE LINE OF swbse_max_line_tab.

  CREATE OBJECT l_pattern_obj
    EXPORTING
      i_column  = 0
      i_include = CONV #( 'ZTESTYK' ).

  l_pattern_obj-&amp;gt;built_function(
             EXPORTING
               i_function_name = CONV #( funcname )
             IMPORTING
               e_pattern       = l_pattern ).
  LOOP AT l_pattern INTO lv_line.

    APPEND lv_line TO l_pattern_new.

    IF lv_line CP 'CALL FUNCTION*'.
      APPEND 'DESTINATION ''KHDCLNT100''' TO l_pattern_new.
    ENDIF.


  ENDLOOP.

  buffer[] = l_pattern_new.

ENDFUNCTION.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;And it's coming to test &lt;span class="lia-unicode-emoji" title=":slightly_smiling_face:"&gt;üôÇ&lt;/span&gt;&lt;/P&gt;&lt;P&gt;You will simply select other pattern and it will ask function name.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ykaldirim_4-1764680784387.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347572iEB3B790FF7EAC594/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="ykaldirim_4-1764680784387.png" alt="ykaldirim_4-1764680784387.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Just put the RFC function name.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ykaldirim_5-1764680884299.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347574iCF938839CCCA7BB4/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="ykaldirim_5-1764680884299.png" alt="ykaldirim_5-1764680884299.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Here it comes.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ykaldirim_6-1764681084355.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347575i16284088EC497A2D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="ykaldirim_6-1764681084355.png" alt="ykaldirim_6-1764681084355.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Also i suggest doing the below settings for better editorial.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ykaldirim_7-1764681124455.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347576iA6096B0E8380E6C1/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="ykaldirim_7-1764681124455.png" alt="ykaldirim_7-1764681124455.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Cheers ykburda &lt;span class="lia-unicode-emoji" title=":slightly_smiling_face:"&gt;üôÇ&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/pattern-function-for-rfc/ba-p/14282086"/>
    <published>2025-12-02T14:15:39.540000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-architecture-blog-posts/build-a-dynamic-monthly-summary-alv-report-in-sap-abap/ba-p/14281841</id>
    <title>Build a Dynamic Monthly Summary ALV Report in SAP ABAP</title>
    <updated>2025-12-03T05:18:58.491000+01:00</updated>
    <author>
      <name>nasir1223</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1791634</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Dynamic ALV reports are essential when your reporting requirements are flexible, and columns or structure are&amp;nbsp;determined&amp;nbsp;at runtime. In this tutorial, we will build a report that:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Summarizes data by year and month.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Creates dynamic columns for Posting, Expenditure, and GRN.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Displays results in an ALV grid dynamically.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;This approach uses&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;RTTS (Run-Time Type Services)&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;to build dynamic tables and structures at runtime.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Step 1: Define&amp;nbsp;Types, Parameters, Data&amp;nbsp;Declarations,&amp;nbsp;and Field symbols.&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Parameters allow users to select&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;year (&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;GJAHR&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;)&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;and&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;starting&amp;nbsp;month (&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;MONAT&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;)&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Field symbols and generic data references make the table&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;dynamic at runtime&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;RTTS objects (&lt;/SPAN&gt;&lt;SPAN&gt;cl_abap_structdescr&lt;/SPAN&gt;&lt;SPAN&gt;,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;cl_abap_elemdescr&lt;/SPAN&gt;&lt;SPAN&gt;) are initialized here.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;* TABLES
TABLES: zposting_data.
* TYPES
TYPES: ty_yyyymm TYPE c LENGTH 6.
* PARAMETERS
PARAMETERS:
  p_gjahr TYPE zposting_data-gjahr,
  p_monat TYPE zposting_data-monat.
* DATA DECLARATIONS
DATA:
  gt_source_data   TYPE STANDARD TABLE OF zposting_data,
  gt_months        TYPE STANDARD TABLE OF ty_yyyymm,

  go_salv_table    TYPE REF TO cl_salv_table,
  gr_dynamic_table TYPE REF TO data,
  gr_dynamic_line  TYPE REF TO data,

  go_struct_descr  TYPE REF TO cl_abap_structdescr,
  gt_components    TYPE cl_abap_structdescr=&amp;gt;component_table,
  gs_component     TYPE abap_componentdescr.

* FIELD-SYMBOLS
FIELD-SYMBOLS:
  &amp;lt;gt_dyn_table&amp;gt;   TYPE STANDARD TABLE,
  &amp;lt;gs_dyn_line&amp;gt;    TYPE any,
  &amp;lt;gfs_field&amp;gt;      TYPE any.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Step&amp;nbsp;1.2:&amp;nbsp;Declare START-OF-SELECTION.&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;* START-OF-SELECTION

START-OF-SELECTION.
  PERFORM get_source_data.
  PERFORM determine_unique_months.
  PERFORM create_dynamic_table_structure.
  PERFORM populate_dynamic_table.
  PERFORM display_alv.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Step 2: Fetch Data from Database&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Use a simple&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;SELECT&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;statement to fetch posting data for the selected year.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;If no data exists, gracefully&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;exit with a message&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;FORM get_source_data .
SELECT *
    FROM zposting_data
    INTO TABLE @gt_source_data
    WHERE gjahr = @p_gjahr
    ORDER BY gjahr, monat.

  IF sy-subrc &amp;lt;&amp;gt; 0.
    MESSAGE 'No data found for selected year' TYPE 'I'.
    LEAVE PROGRAM.
  ENDIF.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Step 3:&amp;nbsp;Determine&amp;nbsp;Unique Months.&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;Loop through source data and pick months&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;greater than or equal to the selected start month&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Use&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;SORT&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;and&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;DELETE ADJACENT DUPLICATES&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;to ensure&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;unique months only&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;FORM determine_unique_months .
  LOOP AT gt_source_data INTO DATA(ls_src).
    IF ls_src-monat &amp;gt;= p_monat.
      DATA(lv_yyyymm) = |{ ls_src-gjahr }{ ls_src-monat }|.
      APPEND lv_yyyymm TO gt_months.
    ENDIF.
  ENDLOOP.
  SORT gt_months.
  DELETE ADJACENT DUPLICATES FROM gt_months.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Step 4: Create Dynamic Table Structure&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Use&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;RTTS&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;to create dynamic columns at runtime.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Add static summary&amp;nbsp;columns&amp;nbsp;and dynamic month columns for Posting, Expenditure, and GRN.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Column names are dynamically generated using month abbreviations (JAN, FEB, etc.).&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;FORM create_dynamic_table_structure .
  DATA(lo_struct) = cl_abap_typedescr=&amp;gt;describe_by_name( 'ZPOSTING_DATA' ).
  DATA(lo_comp)   = CAST cl_abap_structdescr( lo_struct )-&amp;gt;get_components( ).
  CLEAR gs_component.
  gs_component-name = 'REPORT_SUMMARY'.
  gs_component-type ?= cl_abap_elemdescr=&amp;gt;get_c( 50 ).
  APPEND gs_component TO gt_components.
  DATA lv_abbr   TYPE c LENGTH 3.
  LOOP AT gt_months INTO DATA(lv_yyyymm).
    DATA(lv_month) = lv_yyyymm+4(2).
     CASE lv_month.
      WHEN '01'. lv_abbr = 'JAN'.
      WHEN '02'. lv_abbr = 'FEB'.
      WHEN '03'. lv_abbr = 'MAR'.
      WHEN '04'. lv_abbr = 'APR'.
      WHEN '05'. lv_abbr = 'MAY'.
      WHEN '06'. lv_abbr = 'JUN'.
      WHEN '07'. lv_abbr = 'JUL'.
      WHEN '08'. lv_abbr = 'AUG'.
      WHEN '09'. lv_abbr = 'SEP'.
      WHEN '10'. lv_abbr = 'OCT'.
      WHEN '11'. lv_abbr = 'NOV'.
      WHEN '12'. lv_abbr = 'DEC'.
    ENDCASE.
    CLEAR gs_component.
    gs_component-name = |{ lv_abbr }_POSTING|.
    gs_component-type ?= cl_abap_elemdescr=&amp;gt;get_i( ).
    APPEND gs_component TO gt_components.
    CLEAR gs_component.
    gs_component-name = |{ lv_abbr }_EXP|.
    gs_component-type ?= cl_abap_datadescr=&amp;gt;describe_by_name( 'ZPOSTING_DATA-EXPENDITURE' ).
    APPEND gs_component TO gt_components.
    CLEAR gs_component.
    gs_component-name = |{ lv_abbr }_GRN|.
    gs_component-type ?= cl_abap_elemdescr=&amp;gt;get_i( ).
    APPEND gs_component TO gt_components.
  ENDLOOP.
  go_struct_descr ?= cl_abap_structdescr=&amp;gt;create( gt_components ).
  DATA(lo_table_descr) = cl_abap_tabledescr=&amp;gt;create( go_struct_descr ).
  CREATE DATA gr_dynamic_table TYPE HANDLE lo_table_descr.
  ASSIGN gr_dynamic_table-&amp;gt;* TO &amp;lt;gt_dyn_table&amp;gt;.
  CREATE DATA gr_dynamic_line LIKE LINE OF &amp;lt;gt_dyn_table&amp;gt;.
  ASSIGN gr_dynamic_line-&amp;gt;* TO &amp;lt;gs_dyn_line&amp;gt;.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Step 5: Populate Dynamic Table&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Assign values to dynamic columns using&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ASSIGN COMPONENT ‚Ä¶ OF STRUCTURE&lt;/SPAN&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Aggregates&amp;nbsp;Posting, Expenditure, and GRN&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;month-wise&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Static&amp;nbsp;summary column is filled with a&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;yearly summary text&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Finally, append the populated line to the dynamic table.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;FORM populate_dynamic_table.
CLEAR &amp;lt;gs_dyn_line&amp;gt;.
  UNASSIGN &amp;lt;gfs_field&amp;gt;.
  ASSIGN COMPONENT 'REPORT_SUMMARY' OF STRUCTURE &amp;lt;gs_dyn_line&amp;gt; TO &amp;lt;gfs_field&amp;gt;.
  IF &amp;lt;gfs_field&amp;gt; IS ASSIGNED.
    &amp;lt;gfs_field&amp;gt; = |Summary for { p_gjahr }|.
  ENDIF.
    DATA lv_abbr TYPE c LENGTH 3.
  LOOP AT gt_source_data INTO DATA(ls_src).
     CASE ls_src-monat.
      WHEN '01'. lv_abbr = 'JAN'.
      WHEN '02'. lv_abbr = 'FEB'.
      WHEN '03'. lv_abbr = 'MAR'.
      WHEN '04'. lv_abbr = 'APR'.
      WHEN '05'. lv_abbr = 'MAY'.
      WHEN '06'. lv_abbr = 'JUN'.
      WHEN '07'. lv_abbr = 'JUL'.
      WHEN '08'. lv_abbr = 'AUG'.
      WHEN '09'. lv_abbr = 'SEP'.
      WHEN '10'. lv_abbr = 'OCT'.
      WHEN '11'. lv_abbr = 'NOV'.
      WHEN '12'. lv_abbr = 'DEC'.
    ENDCASE.
    DATA(lv_post) = |{ lv_abbr }_POSTING|.
    DATA(lv_exp)  = |{ lv_abbr }_EXP|.
    DATA(lv_grn)  = |{ lv_abbr }_GRN|.
    " POST
    UNASSIGN &amp;lt;gfs_field&amp;gt;.
    ASSIGN COMPONENT lv_post OF STRUCTURE &amp;lt;gs_dyn_line&amp;gt; TO &amp;lt;gfs_field&amp;gt;.
    IF &amp;lt;gfs_field&amp;gt; IS ASSIGNED.
      &amp;lt;gfs_field&amp;gt; = &amp;lt;gfs_field&amp;gt; + ls_src-posting_cnt.
    ENDIF.
    " EXP
    UNASSIGN &amp;lt;gfs_field&amp;gt;.
    ASSIGN COMPONENT lv_exp OF STRUCTURE &amp;lt;gs_dyn_line&amp;gt; TO &amp;lt;gfs_field&amp;gt;.
    IF &amp;lt;gfs_field&amp;gt; IS ASSIGNED.
      &amp;lt;gfs_field&amp;gt; = &amp;lt;gfs_field&amp;gt; + ls_src-expenditure.
    ENDIF.
    " GRN
    UNASSIGN &amp;lt;gfs_field&amp;gt;.
    ASSIGN COMPONENT lv_grn OF STRUCTURE &amp;lt;gs_dyn_line&amp;gt; TO &amp;lt;gfs_field&amp;gt;.
    IF &amp;lt;gfs_field&amp;gt; IS ASSIGNED.
      &amp;lt;gfs_field&amp;gt; = &amp;lt;gfs_field&amp;gt; + ls_src-grn_count.
    ENDIF.
  ENDLOOP.
  APPEND &amp;lt;gs_dyn_line&amp;gt; TO &amp;lt;gt_dyn_table&amp;gt;.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Step 6: Display Dynamic ALV&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Use&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;CL_SALV_TABLE&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;to display the dynamic table.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Optimize&amp;nbsp;column widths using&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;set_optimize(&amp;nbsp;abap_true&amp;nbsp;)&lt;/SPAN&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Add descriptive&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;long texts for each dynamic column&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;for readability.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Exception&amp;nbsp;handling ensures that the program&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;doesn‚Äôt&amp;nbsp;dump&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;even if ALV fails.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;FORM display_alv .
  TRY.
      cl_salv_table=&amp;gt;factory(
        IMPORTING
          r_salv_table = go_salv_table
        CHANGING
          t_table      = &amp;lt;gt_dyn_table&amp;gt;
      ).
      DATA(lo_cols) = go_salv_table-&amp;gt;get_columns( ).
      lo_cols-&amp;gt;set_optimize( abap_true ).
DATA lv_abbr   TYPE c LENGTH 3.
      LOOP AT gt_months INTO DATA(lv_yyyymm).
        DATA(lv_m) = lv_yyyymm+4(2).
         CASE lv_m.
          WHEN '01'. lv_abbr = 'JAN'.
          WHEN '02'. lv_abbr = 'FEB'.
          WHEN '03'. lv_abbr = 'MAR'.
          WHEN '04'. lv_abbr = 'APR'.
          WHEN '05'. lv_abbr = 'MAY'.
          WHEN '06'. lv_abbr = 'JUN'.
          WHEN '07'. lv_abbr = 'JUL'.
          WHEN '08'. lv_abbr = 'AUG'.
          WHEN '09'. lv_abbr = 'SEP'.
          WHEN '10'. lv_abbr = 'OCT'.
          WHEN '11'. lv_abbr = 'NOV'.
          WHEN '12'. lv_abbr = 'DEC'.
        ENDCASE.
        lo_cols-&amp;gt;get_column( |{ lv_abbr }_POSTING| )-&amp;gt;set_long_text( |{ lv_abbr } Posting Count| ).
        lo_cols-&amp;gt;get_column( |{ lv_abbr }_EXP|     )-&amp;gt;set_long_text( |{ lv_abbr } Expenditure| ).
        lo_cols-&amp;gt;get_column( |{ lv_abbr }_GRN|     )-&amp;gt;set_long_text( |{ lv_abbr } GRN Count| ).
      ENDLOOP.
      go_salv_table-&amp;gt;display( ).
    CATCH cx_salv_msg INTO DATA(lx_msg).
      MESSAGE lx_msg-&amp;gt;get_text( ) TYPE 'E'.
  ENDTRY.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Input (Example)&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="nasir1223_9-1764668682533.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347421i7E07CAD50BE2ABE9/image-size/medium?v=v2&amp;amp;px=400" role="button" title="nasir1223_9-1764668682533.png" alt="nasir1223_9-1764668682533.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;Output &amp;nbsp;(Example)&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="nasir1223_10-1764669430967.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347424i5ADD0C03CA8FEF6E/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="nasir1223_10-1764669430967.png" alt="nasir1223_10-1764669430967.png" /&gt;&lt;/span&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-architecture-blog-posts/build-a-dynamic-monthly-summary-alv-report-in-sap-abap/ba-p/14281841"/>
    <published>2025-12-03T05:18:58.491000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/implementing-unmanaged-crud-operations-in-sap-rap-a-hands-on-guide/ba-p/14281820</id>
    <title>Implementing Unmanaged CRUD Operations in SAP RAP: A Hands-On Guide</title>
    <updated>2025-12-03T06:15:44.874000+01:00</updated>
    <author>
      <name>manijangiti</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2174619</uri>
    </author>
    <content>&lt;P&gt;&amp;nbsp;In this blog, I‚Äôm going to walk you through how to implement unmanaged CRUD operations in &lt;STRONG&gt;SAP RAP&lt;/STRONG&gt; for an on-premise system. We‚Äôll be using a simple &lt;STRONG&gt;employee management&lt;/STRONG&gt; example to cover the basics of creating, updating, and deleting employee records.&lt;/P&gt;&lt;P&gt;By the end of this post, you‚Äôll understand how to work with CRUD operations in the &lt;STRONG&gt;RAP framework&lt;/STRONG&gt; and get hands-on experience with it. I‚Äôve been working on this project recently, and I figured it would be useful to share the process with you.&lt;/P&gt;&lt;P&gt;Just a quick note: I‚Äôve been using &lt;STRONG&gt;AI&lt;/STRONG&gt; (like GenAI) to help with writing content for this blog. It‚Äôs been super helpful for organizing thoughts and getting content down quickly while I focus on the technical stuff. AI‚Äôs a great tool for speeding up writing, and I think it‚Äôs worth mentioning how it‚Äôs making content creation a bit easier for me.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Visual Structure Example:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;+---------------------------------------+
| Step 1: Create Database Table        |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 2: Create Root View             |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 3: Create Projection View       |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 4: Create Behavior Definition   |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 5: Create Behavior for Projection|
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 6: Create Metadata Extension    |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 7: Implement CRUD Logic         |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 8: Create Service Definition    |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 9: Bind the Service             |
+---------------------------------------+
                |
                V
+---------------------------------------+
| Step 10: Test CRUD Operations        |
+---------------------------------------+&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-2024575596"&gt;&lt;STRONG&gt;Step 1: Create a Database Table&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Here, we create a table in the database that stores employee information like employee ID, name, email, salary, etc. We use special annotations to tell SAP how this table should be used.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label : 'Employee Table'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zun_emp_tab {
  key client    : abap.clnt not null;
  key emp_id    : zempid not null;
  first_name    : abap.char(30);
  last_name     : abap.char(30);
  date_of_birth : abap.dats;
  email         : abap.sstring(60);
  hire_date     : abap.dats;
  @Semantics.amount.currencyCode : 'zun_emp_tab.curry'
  salary        : abap.curr(15,2);
  curry         : abap.cuky;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1828062091"&gt;&lt;STRONG&gt;Step 2: Create a Root View for the Table&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;The &lt;STRONG&gt;Root View&lt;/STRONG&gt; is like a connection between the database table and the system. It allows the data to be used for CRUD operations.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Interface view'
@Metadata.ignorePropagatedAnnotations: true
define root view entity zun_emp_root as select from zun_emp_tab
{
   key emp_id as EmpId,
   first_name as FirstName,
   last_name as LastName,
   date_of_birth as DateOfBirth,
   email as Email,
   hire_date as HireDate,
   @Semantics.amount.currencyCode: 'curry'
   salary as Salary,
   curry as Curry
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1631548586"&gt;&lt;STRONG&gt;Step 3: Create a Projection View for the Root View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;A &lt;STRONG&gt;Projection View&lt;/STRONG&gt; is a simplified version of the Root View, designed specifically for consumption in applications. It lets users view and edit employee information in a user-friendly format.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Consumption View'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity zun_emp_proj as projection on zun_emp_root
{
    key EmpId,
    FirstName,
    LastName,
    DateOfBirth,
    Email,
    HireDate,
    @Semantics.amount.currencyCode: 'Curry'
    Salary,
    Curry
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1435035081"&gt;&lt;STRONG&gt;Step 4: Create Behavior Definition for the Root View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;This is where we define what can happen to the data (create, update, delete). We set permissions and behaviors for each operation.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;unmanaged implementation in class zbp_un_emp_root unique;
strict ( 2 );
define behavior for zun_emp_root alias  EMP
late numbering
lock master
authorization master ( instance )
//etag master &amp;lt;field_name&amp;gt;
{
  create;
  update;
  delete;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1238521576"&gt;&lt;STRONG&gt;Step 5: Create Behavior Definition for the Projection View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Similar to the Root View, we define behavior for the Projection View, ensuring that data can be created, updated, and deleted in the UI.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;projection;
strict ( 2 );

define behavior for zun_emp_proj alias EMP
{
  use create;
  use update;
  use delete;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-1042008071"&gt;&lt;STRONG&gt;Step 6: Create a Metadata Extension for the Projection View&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Here, we enhance the UI by adding labels, fields, and other settings so users can easily interact with the employee data.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@Metadata.layer: #CUSTOMER

@UI.headerInfo: {
  typeName: 'Employee',
  typeNamePlural: 'Employees',
  title: {
    type: #STANDARD,
    label: 'Employee ID',
    value: 'EmpId'
  },
  description: {
    label: 'First Name',
    value: 'FirstName'
  }
}

annotate view zun_emp_proj with {

  //=========================
  // Facets (sections)
  //=========================
  .facet: [
    {
      id: 'GeneralInfo',
      type: #IDENTIFICATION_REFERENCE,
      label: 'General Information',
      position: 10
    }
  ]

  //=========================
  // General Information Fields
  //=========================
  .identification: [{ position: 10, label: 'Employee ID' }]
  .selectionField: [{ position: 10 }]
  .lineItem:       [{ position: 10 }]
  @EndUserText.label: 'Employee ID'
  EmpId;

  .identification: [{ position: 20, label: 'First Name' }]
  .selectionField: [{ position: 20 }]
  .lineItem:       [{ position: 20 }]
  @EndUserText.label: 'First Name'
  FirstName;

  .identification: [{ position: 30, label: 'Last Name' }]
  .selectionField: [{ position: 30 }]
  .lineItem:       [{ position: 30 }]
  @EndUserText.label: 'Last Name'
  LastName;

  .identification: [{ position: 40, label: 'Date of Birth' }]
  .lineItem:       [{ position: 40 }]
  .selectionField: [{ position: 40 }]
  @EndUserText.label: 'Date of Birth'
  DateOfBirth;

  .identification: [{ position: 50, label: 'Email' }]
  .lineItem:       [{ position: 50 }]
  @EndUserText.label: 'Email'
  Email;

  .identification: [{ position: 60, label: 'Hire Date' }]
  .selectionField: [{ position: 50 }]
  .lineItem:       [{ position: 60 }]
  @EndUserText.label: 'Hire Date'
  HireDate;

  .identification: [{ position: 70, label: 'Salary' }]
  .lineItem:       [{ position: 70 }]
  @EndUserText.label: 'Salary'
  Salary;

  .identification: [{ position: 80, label: 'Currency' }]
  .lineItem:       [{ position: 80 }]
  @EndUserText.label: 'Currency'
  Curry;

};&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-845494566"&gt;&lt;STRONG&gt;Step 7: Implement the Logic for CRUD Operations&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;We write the logic that handles creating, updating, and deleting employee records. We use three key components:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Handler Class&lt;/STRONG&gt;: This is where the main logic for CRUD operations happens.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Saver Class&lt;/STRONG&gt;: This class saves the changes to the database.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Buffer Class&lt;/STRONG&gt;: This is like a temporary holding place for changes before they are saved to the database.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Simplified Diagram:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;+------------------+   --&amp;gt; (Create, Update, Delete)
| User Request    | 
+------------------+   
        |
        V
+-------------------+   --&amp;gt;   (Handler Class)   --&amp;gt;   +---------------------+
|  Handler Class   | --------------------&amp;gt; |  Buffer Class        |
+-------------------+                       +---------------------+
        |                                           |
        V                                           V
+---------------------+                        +---------------------+
|  Data Saved in DB   |  &amp;lt;-- (Saver Class) &amp;lt;-- |  Database (Employee Data) |
+---------------------+                        +---------------------+&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;While practicing, you shouldn't just copy-paste the code. You should write it yourself to get hands-on experience.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;" Buffer class to hold create/update/delete entries temporarily
CLASS lcl_buffer DEFINITION CREATE PRIVATE.
  PUBLIC SECTION.
    TYPES: BEGIN OF ty_buffer,
             flag TYPE c LENGTH 1,       " 'C' = Create, 'U' = Update, 'D' = Delete
             lv_data TYPE zun_emp_tab,   " The structure that holds employee data
           END OF ty_buffer.

    CLASS-DATA mt_buffer TYPE STANDARD TABLE OF ty_buffer WITH EMPTY KEY.  " Table to store buffer entries

    " Method to get an instance of the buffer class (Singleton pattern)
    CLASS-METHODS get_instance
      RETURNING VALUE(ro_instance) TYPE REF TO lcl_buffer.

    " Method to add records to the buffer (Create, Update, or Delete)
    METHODS add_to_buffer
      IMPORTING
        iv_flag TYPE c         " Flag to specify the type of operation (C/U/D)
        is_employee TYPE zun_emp_tab.  " Employee data to be added to the buffer

  PRIVATE SECTION.
    CLASS-DATA go_instance TYPE REF TO lcl_buffer.  " Holds the single instance of the class
ENDCLASS.

CLASS lcl_buffer IMPLEMENTATION.

  METHOD get_instance.
    IF go_instance IS NOT BOUND.
      go_instance = NEW #( ).
    ENDIF.
    ro_instance = go_instance.
  ENDMETHOD.

  METHOD add_to_buffer.
    INSERT VALUE #( flag = iv_flag lv_data = is_employee ) INTO TABLE mt_buffer.
  ENDMETHOD.

ENDCLASS.

" Custom Exception Class
CLASS zcx_my_exception DEFINITION INHERITING FROM cx_static_check.
  PUBLIC SECTION.
    INTERFACES if_t100_message.  " This interface is used for handling messages.
    METHODS constructor IMPORTING
                          textid LIKE if_t100_message=&amp;gt;t100key OPTIONAL.  " Constructor to initialize exception with a message
ENDCLASS.

CLASS zcx_my_exception IMPLEMENTATION.
  METHOD constructor.
    CALL METHOD super-&amp;gt;constructor
      EXPORTING
        previous = previous.   " Calling the parent class constructor
    me-&amp;gt;if_t100_message~t100key = textid.  " Set the error message key
  ENDMETHOD.
ENDCLASS.

" Behavior Handler Class for EMP entity
CLASS lhc_EMP DEFINITION INHERITING FROM cl_abap_behavior_handler.
  PRIVATE SECTION.
    " Method to check instance authorization for each operation
    METHODS get_instance_authorizations FOR INSTANCE AUTHORIZATION
      IMPORTING keys REQUEST requested_authorizations FOR emp RESULT result.

    " Methods for CRUD operations
    METHODS create FOR MODIFY
      IMPORTING entities FOR CREATE emp.

    METHODS update FOR MODIFY
      IMPORTING entities FOR UPDATE emp.

    METHODS delete FOR MODIFY
      IMPORTING keys FOR DELETE emp.

    METHODS read FOR READ
      IMPORTING keys FOR READ emp RESULT result.

    METHODS lock FOR LOCK
      IMPORTING keys FOR LOCK emp.
ENDCLASS.

CLASS lhc_EMP IMPLEMENTATION.

  METHOD create.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).

    LOOP AT entities ASSIGNING FIELD-SYMBOL(&amp;lt;ls_entity&amp;gt;).
      DATA ls_employee TYPE zun_emp_tab.

      " Map entity fields to employee structure
      ls_employee-emp_id        = &amp;lt;ls_entity&amp;gt;-EmpId.
      ls_employee-first_name    = &amp;lt;ls_entity&amp;gt;-FirstName.
      ls_employee-last_name     = &amp;lt;ls_entity&amp;gt;-LastName.
      ls_employee-date_of_birth = &amp;lt;ls_entity&amp;gt;-DateOfBirth.
      ls_employee-email         = &amp;lt;ls_entity&amp;gt;-Email.
      ls_employee-hire_date     = &amp;lt;ls_entity&amp;gt;-HireDate.
      ls_employee-salary        = &amp;lt;ls_entity&amp;gt;-Salary.
      ls_employee-curry         = &amp;lt;ls_entity&amp;gt;-Curry.

      " Add to buffer as create
      lo_buffer-&amp;gt;add_to_buffer( iv_flag = 'C' is_employee = ls_employee ).

      " Return mapped keys (required by RAP)
      INSERT VALUE #( %cid = &amp;lt;ls_entity&amp;gt;-%cid empID = ls_employee-emp_id ) INTO TABLE mapped-emp.
    ENDLOOP.
  ENDMETHOD.

  METHOD update.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).

    LOOP AT entities ASSIGNING FIELD-SYMBOL(&amp;lt;ls_entity&amp;gt;).
      " Fetch existing employee from DB to buffer with flag U
      DATA ls_db TYPE zun_emp_tab.
      SELECT SINGLE * FROM zun_emp_tab WHERE emp_id = @&amp;lt;ls_entity&amp;gt;-EmpId INTO _db.
      " Overwrite fields if updated in &amp;lt;ls_entity&amp;gt;
      IF &amp;lt;ls_entity&amp;gt;-FirstName IS NOT INITIAL.
        ls_db-first_name = &amp;lt;ls_entity&amp;gt;-FirstName.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-LastName IS NOT INITIAL.
        ls_db-last_name = &amp;lt;ls_entity&amp;gt;-LastName.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-DateOfBirth IS NOT INITIAL.
        ls_db-date_of_birth = &amp;lt;ls_entity&amp;gt;-DateOfBirth.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-email IS NOT INITIAL.
        ls_db-email = &amp;lt;ls_entity&amp;gt;-email.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-HireDate IS NOT INITIAL.
        ls_db-hire_date = &amp;lt;ls_entity&amp;gt;-HireDate.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-salary IS NOT INITIAL.
        ls_db-salary = &amp;lt;ls_entity&amp;gt;-salary.
      ENDIF.
      IF &amp;lt;ls_entity&amp;gt;-curry IS NOT INITIAL.
        ls_db-curry = &amp;lt;ls_entity&amp;gt;-curry.
      ENDIF.

      " Add updated employee to buffer with flag 'U'
      lo_buffer-&amp;gt;add_to_buffer( iv_flag = 'U' is_employee = ls_db ).

      " Return mapped keys
      INSERT VALUE #( %cid = &amp;lt;ls_entity&amp;gt;-%cid_ref empID = ls_db-emp_id ) INTO TABLE mapped-emp.
    ENDLOOP.
  ENDMETHOD.

  METHOD delete.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).

    LOOP AT keys ASSIGNING FIELD-SYMBOL(&amp;lt;ls_key&amp;gt;).
      " Create minimal structure for deletion
      DATA ls_employee TYPE zun_emp_tab.
      ls_employee-emp_id = &amp;lt;ls_key&amp;gt;-EmpId.

      " Add to buffer with flag 'D'
      lo_buffer-&amp;gt;add_to_buffer( iv_flag = 'D' is_employee = ls_employee ).

      " Return mapped keys
      INSERT VALUE #( %cid = &amp;lt;ls_key&amp;gt;-%cid_ref empID = &amp;lt;ls_key&amp;gt;-EmpId ) INTO TABLE mapped-emp.
    ENDLOOP.
  ENDMETHOD.

  METHOD read.
    " Implement read logic here if required
  ENDMETHOD.

  METHOD lock.
    " Implement lock logic if required
  ENDMETHOD.

ENDCLASS.

" Saver class to persist data with validation and proper error handling
CLASS lsc_ZUN_EMP_ROOT IMPLEMENTATION.

  METHOD save.
    DATA(lo_buffer) = lcl_buffer=&amp;gt;get_instance( ).
    LOOP AT lo_buffer-&amp;gt;mt_buffer ASSIGNING FIELD-SYMBOL(&amp;lt;ls_buf&amp;gt;).
      CASE &amp;lt;ls_buf&amp;gt;-flag.
        WHEN 'C'.  " If the flag is 'C', perform Insert operation
          INSERT zun_emp_tab FROM &amp;lt;ls_buf&amp;gt;-lv_data.
        WHEN 'U'.  " If the flag is 'U', perform Update operation
          UPDATE zun_emp_tab FROM &amp;lt;ls_buf&amp;gt;-lv_data.
        WHEN 'D'.  " If the flag is 'D', perform Delete operation
          DELETE FROM zun_emp_tab WHERE emp_id = &amp;lt;ls_buf&amp;gt;-lv_data-emp_id.
      ENDCASE.
    ENDLOOP.
    CLEAR lo_buffer-&amp;gt;mt_buffer.  " Clear the buffer after saving changes
  ENDMETHOD.

  METHOD finalize.
    " Optional post-save logic
  ENDMETHOD.

  METHOD check_before_save.
    " Optional pre-save validations
  ENDMETHOD.

  METHOD adjust_numbers.
  ENDMETHOD.

  METHOD cleanup.
    " Optional cleanup logic
  ENDMETHOD.

  METHOD cleanup_finalize.
    " Optional final cleanup
  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-648981061"&gt;&lt;STRONG&gt;Step 8: Create a Service Definition&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;We expose the Projection View as a service that can be used by other applications or systems.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Service defination For Projection'
define service ZUN_SRV_DD {
  expose zun_emp_proj as EMP;
}&lt;/code&gt;&lt;/pre&gt;&lt;H4 id="toc-hId-452467556"&gt;&lt;STRONG&gt;Step 9: Bind the Service to Make it Available&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Once we define the service, we create a &lt;STRONG&gt;Service Binding&lt;/STRONG&gt; to make the service available for use in the system.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 798px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347382i644BAFEFF71F8936/image-dimensions/798x289?v=v2" width="798" height="289" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H4 id="toc-hId-255954051"&gt;&lt;STRONG&gt;Step 10: Test CRUD Operations&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;Finally, we test the system by adding, updating, and deleting records. This shows how the system behaves when interacting with employee data.&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347384i797850E9DEB5D62C/image-size/large?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;I am testing a create operation.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347399i4635AD372AF4FD39/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347400i730BEA633B194E24/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347402iD083FEFAB3E31649/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Successfully created a record.&amp;nbsp;Updating a record that we created.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347403iD88800C2AC67FDB9/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347404i5F81A99022099A42/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Successfully updated the record. Now, I am going to delete the updated record.&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347407iEF2FC67E3199325D/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347410i3431AE05CAAE2BBB/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;STRONG&gt;Successfully deleted the record.&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;H3 id="toc-hId--144873542"&gt;Conclusion and Usage&lt;/H3&gt;&lt;P&gt;In this blog, we learned how to implement CRUD operations in SAP RAP using an employee management example. We created a database table, set up views, and defined behavior for creating, updating, and deleting employee records.&lt;/P&gt;&lt;H3 id="toc-hId--341387047"&gt;Why We Use Flags&lt;/H3&gt;&lt;P&gt;The flags (&lt;CODE&gt;C&lt;/CODE&gt; for Create, &lt;CODE&gt;U&lt;/CODE&gt; for Update, &lt;CODE&gt;D&lt;/CODE&gt; for Delete) help us track which operation needs to be performed on the data. These flags allow the system to know whether to insert, update, or delete a record in the database.&lt;/P&gt;&lt;H3 id="toc-hId--537900552"&gt;Using AI for Faster Content Creation&lt;/H3&gt;&lt;P&gt;While practicing and writing the code, I used &lt;STRONG&gt;AI&lt;/STRONG&gt; for faster content generation. AI helps speed up tasks like documentation and explanations, but the real learning comes from coding and understanding the process firsthand.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/implementing-unmanaged-crud-operations-in-sap-rap-a-hands-on-guide/ba-p/14281820"/>
    <published>2025-12-03T06:15:44.874000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-architecture-blog-posts/end-to-end-amdp-exception-handling-from-hana-development-in-adt-to-abap/ba-p/14283824</id>
    <title>End-to-End AMDP Exception Handling: From HANA Development in ADT to ABAP Report Execution</title>
    <updated>2025-12-04T15:33:17.065000+01:00</updated>
    <author>
      <name>sirishave</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1531949</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;1.&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;Introduction&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;&lt;SPAN&gt;&amp;nbsp;In modern SAP applications, performance-critical logic is increasingly pushed down to SAP HANA using&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;AMDP (ABAP Managed Database Procedures)&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;While AMDPs offer high performance and seamless interaction with HANA&amp;nbsp;SQL Script, developers often struggle with&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;exception handling&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;, especially when integrating AMDP logic with CDS views and ABAP reports.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;This blog explains how to design an AMDP method with proper exceptions, how to consume it from ABAP, and which scenarios require CDS table functions.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;By the end, you will have a clear understanding of how to manage AMDP exceptions in real-world projects.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;&lt;STRONG&gt;&lt;SPAN&gt;2.&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;Business&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Requirement&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;A business user wants to extract sales order header (VBAK) data based on flexible filter conditions.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;The requirement includes:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Running&amp;nbsp;SQL Script&amp;nbsp;logic directly on HANA for performance.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Passing dynamic filters (WHERE conditions).&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Handling DB errors gracefully.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Returning meaningful messages to the user if data is missing or if invalid filters are passed.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;To meet this, we design:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;An&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;AMDP class&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;containing&amp;nbsp;SQL Script&amp;nbsp;logic.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;A&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;table function CDS&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;to expose AMDP results at HANA level.&amp;nbsp;&lt;/SPAN&gt;&lt;I&gt;&lt;SPAN&gt;(Optional based on architecture)&lt;/SPAN&gt;&lt;/I&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;A&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;simple ABAP report&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;calling the AMDP method and capturing exceptions.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;3.&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;Technical&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;Components&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This solution involves the following SAP artifacts:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;ABAP&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;Objects&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;ABAP&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;Class&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;(AMDP)&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Name:&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;ZAMDP_EXCEPTION_CLASS_A&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Interface:&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;IF_AMDP_MARKER_HDB&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Method:&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;GET_DATA&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Custom&amp;nbsp;SQL Script&amp;nbsp;exception handling using SIGNAL&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;ABAP&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Report&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Name:&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;ZAMDP_EXCEPTIONS_S&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Builds WHERE clause&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Calls AMDP&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Catches&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;CX_AMDP_ERROR&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Displays results in AL&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;4.Application&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Flow&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;User runs report&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;ZAMDP_EXCEPTIONS_S&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;User enters one or more&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;VBTYP&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;values.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;ABAP loops over the select-options and calls AMDP.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;AMDP performs: -&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Record count&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Exception handling&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Data retrieval&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;If an exception occurs&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;‚Üí ABAP catches CX_AMDP_ERROR&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;‚Üí Displays meaningful message&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;If data exists&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;UL&gt;&lt;LI&gt;‚Üí Report prints or displays ALV&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;5.Key Logic&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;STRONG&gt;&lt;SPAN&gt;Implementation&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;5.1&amp;nbsp;AMDP&amp;nbsp;Class Definition&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zamdp_exception_class_a DEFINITION PUBLIC. 
PUBLIC SECTION. 
INTERFACES if_amdp_marker_hdb.
TYPES: tt_sales TYPE TABLE OF vbak WITH EMPTY KEY. 
METHODS get_data 
IMPORTING 
VALUE(iv_vbtyp) TYPE vbak-vbtyp DEFAULT '' " default required 
EXPORTING 
VALUE(et_final) TYPE tt_sales 
RAISING 
cx_amdp_error. 
ENDCLASS. &lt;/code&gt;&lt;/pre&gt;&lt;P class="lia-align-justify" style="text-align : justify;"&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;5.2&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;AMDP&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;Method Implementation (&lt;/SPAN&gt;&lt;SPAN class=""&gt;SQL Script&lt;/SPAN&gt;&lt;SPAN class=""&gt;)&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zamdp_exception_class_a IMPLEMENTATION. 
METHOD get_data 
BY DATABASE PROCEDURE 
FOR HDB 
LANGUAGE SQLSCRIPT 
OPTIONS READ-ONLY 
USING vbak. 
DECLARE lv_count INTEGER; 
-- Count rows 
SELECT COUNT(*) INTO lv_count 
FROM vbak 
WHERE vbtyp = :iv_vbtyp; 
-- Raise custom exception 
IF :lv_count = 0 THEN 
SIGNAL SQL_ERROR_CODE 10001 
SET MESSAGE_TEXT = 'No data found for given VBTYP'; 
END IF; 
-- Fetch data 
et_final = 
SELECT * 
FROM vbak 
WHERE vbtyp = :iv_vbtyp; 
ENDMETHOD. 
ENDCLASS. 

 &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;5.3&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;ABAP&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;Report: Selection Screen&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;*&amp;amp;---------------------------------------------------------------------* 
*&amp;amp; Report ZAMDP_EXCEPTIONS_S 
*&amp;amp;---------------------------------------------------------------------* 
REPORT zamdp_exceptions_s. 
TABLES: vbak. 
" Select-options for VBTYP 
SELECT-OPTIONS s_vbtyp FOR vbak-vbtyp.  &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;5.4&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;AMDP&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;Object and result Table&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;DATA obj_amdp TYPE REF TO zamdp_exception_class_a. 
DATA it_final TYPE zamdp_exception_class_a=&amp;gt;tt_sales. 
" Create AMDP instance 
obj_amdp = NEW zamdp_exception_class_a( ). &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;5.5&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;Calling&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;AMDP Method with Exception Handling&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&amp;amp; Displaying Data in ALV&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TRY. 
    CLEAR it_final. 
    LOOP AT s_vbtyp INTO DATA(ls_vbtyp). 
      IF ls_vbtyp-sign = 'I' AND ls_vbtyp-option = 'EQ'. 
        CALL METHOD obj_amdp-&amp;gt;get_data 
          EXPORTING 
            iv_vbtyp = ls_vbtyp-low 
          IMPORTING 
            et_final = DATA(lt_data).   "temp table 
        " Append data 
        APPEND LINES OF lt_data TO it_final. 
      ENDIF. 
    ENDLOOP. 
    " If some data exists ‚Üí Display it 
    IF it_final IS NOT INITIAL. 
      WRITE:/ 'VBELN', 10 'AUART', 20 'VKORG', 30 'VTWEG', 40 'SPART', 
              50 'KUNNR', 60 'ERDAT', 70 'ERNAM', 80 'VBTYP'. 
      LOOP AT it_final INTO DATA(ls_row). 
        WRITE: / ls_row-vbeln, 10 ls_row-auart, 20 ls_row-vkorg, 
                 30 ls_row-vtweg, 40 ls_row-spart, 50 ls_row-kunnr, 
                 60 ls_row-erdat, 70 ls_row-ernam, 80 ls_row-vbtyp. 
      ENDLOOP. 
    ENDIF. 
  CATCH cx_amdp_error INTO DATA(lx_err). 
    " Get HANA error text 
    DATA(lv_text) = lx_err-&amp;gt;if_message~get_longtext( ).  
    WRITE:/ lv_text. 
ENDTRY. 
 
 &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;6.Sample Output&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;6.1 If Exception was Not Raised (Data Retrieval )&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sirishave_3-1764844087660.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348479i48C86FC6BBBB2295/image-size/medium?v=v2&amp;amp;px=400" role="button" title="sirishave_3-1764844087660.png" alt="sirishave_3-1764844087660.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;6.2 Raising Exception&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="sirishave_1-1764843679445.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348475iF2C61AD21C5B9A9B/image-size/medium?v=v2&amp;amp;px=400" role="button" title="sirishave_1-1764843679445.png" alt="sirishave_1-1764843679445.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;&lt;SPAN&gt;7.Conclusion&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This technical implementation&amp;nbsp;demonstrates&amp;nbsp;Exception handling in AMDP is essential for building stable, performant HANA-optimized applications.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;A well-structured design connecting&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;CDS + AMDP + ABAP&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;ensures:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Clean separation between&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;data retrieval&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;(AMDP class) and&amp;nbsp;&lt;/SPAN&gt;&lt;STRONG&gt;&lt;SPAN&gt;presentation&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;(ABAP report).&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Handling exceptions in AMDP and propagating them in ABAP.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Using dynamic filters from select-options in&amp;nbsp;SQL&amp;nbsp;Script.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Cleaner integration between HANA SQL Script and ABAP&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Displaying results efficiently in ALV tables.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Providing a robust and user-friendly solution for sales order header analysis.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;This approach can be extended for other database-intensive operations in SAP HANA using ABAP and AMDP.&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zamdp_exception_class_a DEFINITION PUBLIC.
  PUBLIC SECTION.
    INTERFACES if_amdp_marker_hdb.
    TYPES: tt_sales TYPE TABLE OF vbak WITH EMPTY KEY.
    METHODS get_data
      IMPORTING
        VALUE(iv_vbtyp) TYPE vbak-vbtyp DEFAULT ''   " default required
      EXPORTING
        VALUE(et_final) TYPE tt_sales
      RAISING
        cx_amdp_error.
ENDCLASS.
CLASS zamdp_exception_class_a IMPLEMENTATION.
  METHOD get_data
    BY DATABASE PROCEDURE
    FOR HDB
    LANGUAGE SQLSCRIPT
    OPTIONS READ-ONLY
    USING vbak.
    DECLARE lv_count INTEGER;
    -- Count rows
    SELECT COUNT(*) INTO lv_count
      FROM vbak
      WHERE vbtyp = :iv_vbtyp;
    -- Raise custom exception
    IF :lv_count = 0 THEN
        SIGNAL SQL_ERROR_CODE 10001
          SET MESSAGE_TEXT = 'No data found for given VBTYP';
    END IF;
    -- Fetch data
    et_final =
      SELECT *
      FROM vbak
      WHERE vbtyp = :iv_vbtyp;
  ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; Report ZAMDP_EXCEPTIONS_S
*&amp;amp;---------------------------------------------------------------------*
REPORT zamdp_exceptions_s.
TABLES: vbak.
" Select-options for VBTYP
SELECT-OPTIONS s_vbtyp FOR vbak-vbtyp.
" AMDP object and result table
DATA obj_amdp TYPE REF TO zamdp_exception_class_a.
DATA it_final TYPE zamdp_exception_class_a=&amp;gt;tt_sales.
" Create AMDP instance
obj_amdp = NEW zamdp_exception_class_a( ).
TRY.
    CLEAR it_final.
    LOOP AT s_vbtyp INTO DATA(ls_vbtyp).
      IF ls_vbtyp-sign = 'I' AND ls_vbtyp-option = 'EQ'.

        CALL METHOD obj_amdp-&amp;gt;get_data
          EXPORTING
            iv_vbtyp = ls_vbtyp-low
          IMPORTING
            et_final = DATA(lt_data).   "temp table
        " Append data
        APPEND LINES OF lt_data TO it_final.
      ENDIF.
    ENDLOOP.
    " If some data exists ‚Üí Display it
    IF it_final IS NOT INITIAL.
      WRITE:/ 'VBELN', 10 'AUART', 20 'VKORG', 30 'VTWEG', 40 'SPART',
              50 'KUNNR', 60 'ERDAT', 70 'ERNAM', 80 'VBTYP'.
      LOOP AT it_final INTO DATA(ls_row).
        WRITE: / ls_row-vbeln, 10 ls_row-auart, 20 ls_row-vkorg,
                 30 ls_row-vtweg, 40 ls_row-spart, 50 ls_row-kunnr,
                 60 ls_row-erdat, 70 ls_row-ernam, 80 ls_row-vbtyp.
      ENDLOOP.
    ENDIF.
  CATCH cx_amdp_error INTO DATA(lx_err).
    " Get HANA error text
    DATA(lv_text) = lx_err-&amp;gt;if_message~get_longtext( ).
    WRITE:/ lv_text.
ENDTRY.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-architecture-blog-posts/end-to-end-amdp-exception-handling-from-hana-development-in-adt-to-abap/ba-p/14283824"/>
    <published>2025-12-04T15:33:17.065000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-sap/sap-abap-sdk-for-ibm-watsonx-v1-5-0-released/ba-p/14284805</id>
    <title>SAP ABAP SDK for IBM watsonx v1.5.0 released</title>
    <updated>2025-12-05T15:25:38.398000+01:00</updated>
    <author>
      <name>christian_bartels</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/184450</uri>
    </author>
    <content>&lt;P&gt;On December 5, 2025, IBM has released version 1.5.0 of its ABAP¬Æ Software Development Kit (SDK) for IBM¬Æ watsonx‚Ñ¢ services. The &lt;A href="https://www.ibm.com/products/watsonx-ai" target="_blank" rel="noopener nofollow noreferrer"&gt;watsonx.ai&lt;/A&gt;&amp;nbsp;service can be used to train, validate, tune, and deploy foundation and machine learning models. The &lt;A href="https://cloud.ibm.com/catalog/services/watsonxai-runtime" target="_blank" rel="noopener nofollow noreferrer"&gt;watsonx.ai Runtime&lt;/A&gt;&amp;nbsp;is used to build, run and manage generative AI and machine learning applications with built-in performance and scalability. The ABAP SDK provides a class library that can be downloaded to SAP systems using &lt;A href="https://abapgit.org/" target="_blank" rel="noopener nofollow noreferrer"&gt;abapGit&lt;/A&gt;&amp;nbsp;and comes in two flavors:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;A href="https://github.com/IBM/abap-sdk-nwas-x" target="_blank" rel="noopener nofollow noreferrer"&gt;ABAP SDK for IBM watsonx, using SAP NetWeaver&lt;/A&gt;&amp;nbsp;for the SAP Business Suite running on SAP NetWeaver 7.50 or above and for the SAP S/4HANA on-premises edition.&lt;/LI&gt;&lt;LI&gt;&lt;A href="https://github.com/IBM/abap-sdk-btp-x" target="_blank" rel="noopener nofollow noreferrer"&gt;ABAP SDK for IBM watsonx, using SAP BTP ABAP Environment&lt;/A&gt;&amp;nbsp;for the SAP Business Technology Platform ABAP Environment.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Enhancements in this release include new watsonx.ai methods for the categories Notebooks and Notebook Versions. More information about the changes in version 1.5.0 can be found in the repositories in the &lt;A href="https://github.com/IBM/abap-sdk-nwas-x/blob/main/MIGRATION-V1.5.0.md" target="_blank" rel="noopener nofollow noreferrer"&gt;MIGRATION-V1.5.0.md&lt;/A&gt;&amp;nbsp; migration document.&lt;/P&gt;&lt;P&gt;Detailed information on how to setup and use the SDK can be found in the README.md files of the GitHub repositories. The README.md files also provide two comprehensive examples to show how the supported services can be used. An even more elaborated article about how use watsonx services with the ABAP SDK can be found in Joachim Rese's blog article &lt;A href="https://community.sap.com/t5/application-development-blog-posts/how-to-bring-generative-ai-to-your-abap-program-using-the-abap-sdk-for-ibm/ba-p/13694067" target="_blank"&gt;How to Bring Generative AI to Your ABAP Program Using the ABAP SDK for IBM watsonx&lt;/A&gt;.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-sap/sap-abap-sdk-for-ibm-watsonx-v1-5-0-released/ba-p/14284805"/>
    <published>2025-12-05T15:25:38.398000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-members/displaying-html-formatted-text-in-sap-adobe-forms/ba-p/14283666</id>
    <title>Displaying HTML-Formatted Text in SAP Adobe Forms</title>
    <updated>2025-12-08T11:12:16.319000+01:00</updated>
    <author>
      <name>Jaiswal_Shubham</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1624114</uri>
    </author>
    <content>&lt;P&gt;Using HTML tags inside long texts or paragraphs in SAP Adobe Forms can be achieved with a few simple steps. In many business scenarios, it becomes necessary to display text with different formatting‚Äîsuch as &lt;STRONG&gt;bold&lt;/STRONG&gt;, &lt;EM&gt;italic&lt;/EM&gt;, or &lt;U&gt;underlined&lt;/U&gt;&amp;nbsp;within Adobe form outputs. In this blog, we will learn how to accomplish this using OTR text in the SAP system.&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Requirement:&lt;/STRONG&gt;&lt;BR /&gt;To embed HTML tags within long texts or paragraphs and use them in an SAP Adobe Form so that the final output renders the correct formatting.&lt;BR /&gt;Based on business needs, the letter or paragraph may include bold, italic, or underlined text to highlight important information.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Scenario:&lt;BR /&gt;&lt;/STRONG&gt;Display a letter to be printed along with a customer invoice, showing the amount to be paid. The letter must include HTML tags to emphasize specific parts of the content.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1766467948"&gt;&lt;STRONG&gt;Step 1: Create OTR Text Using Transaction SOTR_EDIT&lt;/STRONG&gt;&lt;/H2&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;Open &lt;STRONG&gt;Transaction SOTR_EDIT&lt;/STRONG&gt; and create a long text/paragraph that contains the required HTML tags.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Select the &lt;STRONG&gt;Long Text&lt;/STRONG&gt; radio button and provide an &lt;STRONG&gt;Alias&lt;/STRONG&gt; for your text.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Click on &lt;STRONG&gt;Create&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_0-1764830423530.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348361iF46F6C58A6EC8D22/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_0-1764830423530.png" alt="Jaiswal_Shubham_0-1764830423530.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;You will then be taken to the next screen. Here:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;Choose a &lt;STRONG&gt;package&lt;/STRONG&gt; in which the OTR text will be saved.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Select &lt;STRONG&gt;Object Type = CPUB&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;At the bottom, enter the paragraph containing all required HTML tags.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_1-1764830927008.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348363i1859CB2044AC0601/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_1-1764830927008.png" alt="Jaiswal_Shubham_1-1764830927008.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;After entering the text, check the &lt;STRONG&gt;Text&lt;/STRONG&gt; and &lt;STRONG&gt;Alias&lt;/STRONG&gt;, then click &lt;STRONG&gt;Save&lt;/STRONG&gt;.&lt;BR /&gt;Once saved, a &lt;STRONG&gt;Concept&lt;/STRONG&gt; string will be generated‚Äînote this value, as it will be needed to retrieve the OTR text in the Adobe Form interface.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_3-1764831107412.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348365iB6FD65C3258DF3BB/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_3-1764831107412.png" alt="Jaiswal_Shubham_3-1764831107412.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1569954443"&gt;&lt;STRONG&gt;Step 2: Form Interface Setup (SFP)&lt;/STRONG&gt;&lt;/H2&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;Create a new interface using transaction &lt;STRONG&gt;SFP&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;In the interface initialization, fetch the OTR text using class &lt;STRONG&gt;CL_SOTR&lt;/STRONG&gt; and the generated concept key.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Store the retrieved text in a string field (e.g., &lt;STRONG&gt;GV_STRING&lt;/STRONG&gt;), which will be mapped to the form.&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_4-1764831349962.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348369i12C9729017729752/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_4-1764831349962.png" alt="Jaiswal_Shubham_4-1764831349962.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_5-1764831470332.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348370i23EB05511B5480AC/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_5-1764831470332.png" alt="Jaiswal_Shubham_5-1764831470332.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_13-1764834116746.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348395iA0AFEF200B45BBDA/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_13-1764834116746.png" alt="Jaiswal_Shubham_13-1764834116746.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;DATA : lv_amount TYPE string.

" Get the total amount and invoiced on date for the given invoice number
SELECT SINGLE invdocno, total_amt, crdate FROM dfkkinvdoc_h INTO &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1407137"&gt;@DATA&lt;/a&gt;(ls_invoice) WHERE invdocno = '400000000001'.

" Create a new instance of CL_SOTR
DATA(lo_sotr) = NEW cl_sotr( i_langu = sy-langu ).
IF lo_sotr IS BOUND.
  lo_sotr-&amp;gt;get_string(
    EXPORTING
      i_concept = 'F6D1CC75908F1FD0B49BB1450AAA5BA0'                 " Key for Logical Object in OTR
    IMPORTING
      e_text    = gv_string
  ).
ENDIF.

" Change the dynamic values of gv_string here like amount and invoice date
IF gv_string IS NOT INITIAL.
  REPLACE ALL OCCURRENCES OF '&amp;amp;dte' IN gv_string WITH sy-datum.
  REPLACE '&amp;amp;inv_date' IN gv_string WITH ls_invoice-crdate.

  " convert the amount first to strin and then add else it will throw error
  lv_amount = CONV #( ls_invoice-total_amt ).
  REPLACE '&amp;amp;amount' IN gv_string WITH lv_amount.

  REPLACE '[Your Company Name]' IN gv_String WITH sy-uname.
ENDIF.&lt;/code&gt;&lt;/pre&gt;&lt;H2 id="toc-hId-1373440938"&gt;&lt;STRONG&gt;Step 3: Design the Adobe Form&lt;/STRONG&gt;&lt;/H2&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;Create the Adobe Form using the interface built in Step 2.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Drag and drop the &lt;STRONG&gt;GV_STRING&lt;/STRONG&gt; element into the form‚Äôs design layout.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;Adjust layout and margins as required.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Important:&lt;/STRONG&gt; Change the field type to &lt;STRONG&gt;Rich Text&lt;/STRONG&gt; instead of plain text.&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_8-1764832543386.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348382i64B37316E71B41C8/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_8-1764832543386.png" alt="Jaiswal_Shubham_8-1764832543386.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_10-1764833098142.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348391iAE09A5E123AC8BFE/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_10-1764833098142.png" alt="Jaiswal_Shubham_10-1764833098142.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_11-1764833157390.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348392i370158EC6300A70A/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_11-1764833157390.png" alt="Jaiswal_Shubham_11-1764833157390.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H2 id="toc-hId-1176927433"&gt;&lt;STRONG&gt;Step 4: Add JavaScript for HTML Rendering&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;To properly render HTML formatting in the Adobe form, add a small JavaScript snippet in the &lt;STRONG&gt;calculate event&lt;/STRONG&gt; of the text field (GV_STRING).&lt;/P&gt;&lt;P&gt;This JS converts the incoming string into XFA-compatible rich text so that bold, italic, underline, and other tags are displayed correctly.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_14-1764834427970.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348396iB4899972F2006819/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_14-1764834427970.png" alt="Jaiswal_Shubham_14-1764834427970.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt; var envelope = "&amp;lt;?xml version='1.0' encoding='UTF-8'?&amp;gt;" +
    "&amp;lt;exData contentType='text/html' xmlns='http://www.xfa.org/schema/xfa-template/2.8/'" +
    "&amp;gt;&amp;lt;body xmlns='http://www.w3.org/1999/xhtml' xmlns:xfa='http://www.xfa.org/schema/xfa-data/1.0/' " +
    "xfa:APIVersion='Acroform:2.7.0.0' xfa:spec='2.1'&amp;gt;" +
    "&amp;lt;p&amp;gt;" + this.rawValue + "&amp;lt;/p&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/exData&amp;gt;";

this.value.exData.loadXML(envelope,1,1);&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId-980413928"&gt;&lt;STRONG&gt;Step 5: Execute and Validate&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;Run the form and generate the output PDF.&lt;BR /&gt;You will observe that all HTML tags‚Äîsuch as &lt;STRONG&gt;&amp;lt;b&amp;gt;&lt;/STRONG&gt;, &lt;EM&gt;&amp;lt;i&amp;gt;&lt;/EM&gt;, and &amp;lt;u&amp;gt; are rendered properly, and the text appears exactly as formatted in the OTR paragraph.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Jaiswal_Shubham_15-1764834687418.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/348400iF10FD37BF750AF8D/image-size/medium?v=v2&amp;amp;px=400" role="button" title="Jaiswal_Shubham_15-1764834687418.png" alt="Jaiswal_Shubham_15-1764834687418.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H3 id="toc-hId-912983142"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;Implementing HTML tags in SAP Adobe Forms is both flexible and efficient when handled through OTR texts. By maintaining the formatting directly in the OTR long text and rendering it via JavaScript in the form, you avoid the complexities of embedding HTML manually within code. This approach keeps the logic clean, leverages standard SAP tools, and ensures consistent formatting across your form outputs.&lt;/P&gt;&lt;P&gt;If you have alternative approaches, suggestions, or enhancements based on your project experience, I‚Äôd be glad to hear them.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Thank you,&lt;BR /&gt;Shubham&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-members/displaying-html-formatted-text-in-sap-adobe-forms/ba-p/14283666"/>
    <published>2025-12-08T11:12:16.319000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-members/how-to-delete-sap-iw22-attachments-programmatically-using-binary-relations/ba-p/14282881</id>
    <title>How to Delete SAP IW22 Attachments Programmatically Using Binary Relations and SO_OBJECT_DELETE.</title>
    <updated>2025-12-09T10:32:39.954000+01:00</updated>
    <author>
      <name>rameshreddy_k</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/880970</uri>
    </author>
    <content>&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;In Sap PM, Users frequently attach documents to notifications (IW22/IW23) However, there are scenarios where attachments need to be deleted&amp;nbsp;&lt;/P&gt;&lt;P&gt;1) Attachments uploaded by mistake&lt;/P&gt;&lt;P&gt;2) obsolete/outdated documents&lt;/P&gt;&lt;H4 id="toc-hId-2024605574"&gt;&lt;STRONG&gt;Business Requirement&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;1) User enters notification number on selection screen&lt;/P&gt;&lt;P&gt;2) Program identifies attachments linked via GOS&amp;nbsp;&lt;/P&gt;&lt;P&gt;3) Retrieve link relationship ATTA&lt;/P&gt;&lt;P&gt;4) Delete Binary Relation entry&lt;/P&gt;&lt;P&gt;5)Delete SO Object(actual attachment from repository)&lt;/P&gt;&lt;P&gt;6) commit and confirm deletion&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Technical Components&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;STRONG&gt;ComponentPurpose&lt;/STRONG&gt; &lt;TABLE&gt;&lt;TBODY&gt;&lt;TR&gt;&lt;TD width="286.219px" height="58px"&gt;&lt;H4 id="toc-hId-1828092069"&gt;&lt;STRONG&gt;Gos / BDS&amp;nbsp;&lt;/STRONG&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;TD width="230.375px" height="58px"&gt;&lt;H4 id="toc-hId-1631578564"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;Attachment Management&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="286.219px" height="58px"&gt;&lt;H4 id="toc-hId-1435065059"&gt;&lt;STRONG&gt;CL_BINARY_RELATION=&amp;gt;READ_LINKS&lt;/STRONG&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;TD width="230.375px" height="58px"&gt;&lt;H4 id="toc-hId-1238551554"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;Read Attachment Links&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="286.219px" height="58px"&gt;&lt;H4 id="toc-hId-1042038049"&gt;BINARY_RELATION_DELETE&lt;/H4&gt;&lt;/TD&gt;&lt;TD width="230.375px" height="58px"&gt;&lt;H4 id="toc-hId-845524544"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;Remove Relationship&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="286.219px" height="58px"&gt;&lt;H4 id="toc-hId-649011039"&gt;SO_OBJECT_DELETE&lt;/H4&gt;&lt;/TD&gt;&lt;TD width="230.375px" height="58px"&gt;&lt;H4 id="toc-hId-452497534"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;Delete Document&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="286.219px" height="58px"&gt;&lt;H4 id="toc-hId-255984029"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;Object Type&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;TD width="230.375px" height="58px"&gt;&lt;H4 id="toc-hId--438246571"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;(Notification)&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD width="286.219px" height="58px"&gt;&lt;H4 id="toc-hId--634760076"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;Relation Type&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H4&gt;&lt;/TD&gt;&lt;TD width="230.375px" height="58px"&gt;ATTA&lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;H4 id="toc-hId--831273581"&gt;&lt;STRONG&gt;Application Flow&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;1.user enters notification number(QMEL-QMNUM)&lt;BR /&gt;2.Program reads attachment links using BDS&lt;BR /&gt;3.Extract object A + Object B (Document references)&lt;BR /&gt;4.Delete Binary relation(ATTA)&lt;BR /&gt;5.Delete attachment file from sapoffice folder&lt;BR /&gt;6.commit work&lt;/P&gt;&lt;H4 id="toc-hId--1027787086"&gt;&lt;STRONG&gt;Key ABAP Logic Implementation&lt;/STRONG&gt;&lt;/H4&gt;&lt;P&gt;&lt;STRONG&gt;Step ‚Äì 1:&amp;nbsp;&lt;/STRONG&gt;Go to SE38 transaction code, Create Program, shown as below&amp;nbsp;&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_0-1765256445586.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349924iACD8F227F13A0B6F/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_0-1765256445586.png" alt="rameshreddy_k_0-1765256445586.png" /&gt;&lt;/span&gt;&lt;P&gt;&lt;STRONG&gt;Step - 2:&lt;/STRONG&gt;&amp;nbsp;Click on Create and enter title description, type as Executable Program and Click on Save button. Then provide Package and request number.&amp;nbsp;&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_1-1765256445599.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349925iC390622AF4A6FAF1/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_1-1765256445599.png" alt="rameshreddy_k_1-1765256445599.png" /&gt;&lt;/span&gt;&lt;P&gt;&lt;STRONG&gt;Step-3&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Declare all data declarations for tables&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_2-1765256445663.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349926i294A25B3273F9DBF/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_2-1765256445663.png" alt="rameshreddy_k_2-1765256445663.png" /&gt;&lt;/span&gt;&lt;P&gt;&lt;STRONG&gt;Step‚Äì 4:&amp;nbsp;&lt;/STRONG&gt;Define Parameters for user input&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_3-1765256445591.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349927iF09F73DD69D61039/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_3-1765256445591.png" alt="rameshreddy_k_3-1765256445591.png" /&gt;&lt;/span&gt;&lt;P&gt;&lt;STRONG&gt;Step- 5&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;: Define the Notification number, Instid, Typeid, and Catid to get attachment.&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_4-1765256445592.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349929iA0D524F042E8B740/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_4-1765256445592.png" alt="rameshreddy_k_4-1765256445592.png" /&gt;&lt;/span&gt;&lt;P&gt;&lt;STRONG&gt;Step- 6&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;: using standard method (cl_binary_relation=&amp;gt;read_links) to get attachment from iw22 based on notification number&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_5-1765256445590.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349928i7EC67102B95963B5/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_5-1765256445590.png" alt="rameshreddy_k_5-1765256445590.png" /&gt;&lt;/span&gt;‚ÄÉ&lt;P&gt;&lt;STRONG&gt;Step-7&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;: using call function (BINARY_RELATION_DELETE) to delete Delete a Binary Relationship&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_7-1765256445751.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349931iE6B004780838D8F0/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_7-1765256445751.png" alt="rameshreddy_k_7-1765256445751.png" /&gt;&lt;/span&gt;&lt;P&gt;&lt;STRONG&gt;Step-8&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;Assigning values to (SO_OBJECT_DELETE) to Deleting an object from a folder&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_8-1765256445830.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349932i4E11F922DCDEA8E7/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_8-1765256445830.png" alt="rameshreddy_k_8-1765256445830.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_9-1765256445851.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349933i9C6FDFF84FB1185A/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_9-1765256445851.png" alt="rameshreddy_k_9-1765256445851.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;H4 id="toc-hId--1224300591"&gt;&amp;nbsp;&lt;/H4&gt;&lt;H2 id="toc-hId--834008082"&gt;&lt;STRONG&gt;Execution Flow&lt;/STRONG&gt;&lt;/H2&gt;&lt;H3 id="toc-hId--1323924594"&gt;&lt;span class="lia-unicode-emoji" title=":small_blue_diamond:"&gt;üîπ&lt;/span&gt;&lt;STRONG&gt;Step 1: Enter Notification Number&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_0-1764757826112.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347953iEBC4895DA2940383/image-size/medium/is-moderation-mode/true?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_0-1764757826112.png" alt="rameshreddy_k_0-1764757826112.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;H3 id="toc-hId--1520438099"&gt;&lt;span class="lia-unicode-emoji" title=":small_blue_diamond:"&gt;üîπ&lt;/span&gt;&lt;STRONG&gt;Step 2: Execute Program to Delete Attachment &amp;amp;&amp;nbsp;Check IW22 Attachments ‚Üí Confirm Deletion&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_10-1753768019226.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/293112iE90B45617BEA0394/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_10-1753768019226.png" alt="rameshreddy_k_10-1753768019226.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_11-1753768019230.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/293113iA5C7DE6A2DB500CF/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_11-1753768019230.png" alt="rameshreddy_k_11-1753768019230.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_12-1753768019231.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/293114i2E6E5AE230020180/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_12-1753768019231.png" alt="rameshreddy_k_12-1753768019231.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; Report ZTEST_DELETE_ATTCH
*&amp;amp;---------------------------------------------------------------------*
*&amp;amp; Deleting IW22 attachments using custom ABAP program
*&amp;amp;---------------------------------------------------------------------*
REPORT ztest_delete_attch.

DATA : ls_object_a  TYPE borident,
       ls_object_b  TYPE borident,
       ls_folder_id TYPE soodk,
       ls_object_id TYPE soodk,
       ls_lpor      TYPE sibflporb,
       ls_relst     TYPE obl_s_relt,
       lt_relst     TYPE obl_t_relt,
       lt_list      TYPE obl_t_link.

FIELD-SYMBOLS: &amp;lt;fs_list&amp;gt; TYPE obl_s_link.

SELECTION-SCREEN BEGIN OF BLOCK b1 WITH FRAME TITLE text-001.
PARAMETERS: p_no TYPE qmel-qmnum OBLIGATORY.
SELECTION-SCREEN END OF BLOCK b1.

" Prepare the logical object
ls_lpor-instid = p_no.
ls_lpor-typeid = 'BUS2038'.
ls_lpor-catid  = 'BO'.

" Relation filter: ATTA ‚Üí Attachments
ls_relst-sign   = 'I'.
ls_relst-option = 'EQ'.
ls_relst-low    = 'ATTA'.
APPEND ls_relst TO lt_relst.

" Read document links
CALL METHOD cl_binary_relation=&amp;gt;read_links
  EXPORTING
    is_object           = ls_lpor
    it_relation_options = lt_relst
  IMPORTING
    et_links            = lt_list.

" Read first attachment
READ TABLE lt_list ASSIGNING &amp;lt;fs_list&amp;gt; INDEX 1.
IF sy-subrc = 0 AND &amp;lt;fs_list&amp;gt; IS ASSIGNED.

  ls_object_a-objkey  = &amp;lt;fs_list&amp;gt;-instid_a.
  ls_object_a-objtype = &amp;lt;fs_list&amp;gt;-typeid_a.
  ls_object_b-objkey  = &amp;lt;fs_list&amp;gt;-instid_b.
  ls_object_b-objtype = &amp;lt;fs_list&amp;gt;-typeid_b.

  " Delete relationship
  CALL FUNCTION 'BINARY_RELATION_DELETE'
    EXPORTING
      obj_rolea    = ls_object_a
      obj_roleb    = ls_object_b
      relationtype = 'ATTA'.

  " Prepare folder object for deletion
  ls_folder_id-objtp = &amp;lt;fs_list&amp;gt;-instid_b+0(3).
  ls_folder_id-objyr = &amp;lt;fs_list&amp;gt;-instid_b+3(2).
  ls_folder_id-objno = &amp;lt;fs_list&amp;gt;-instid_b+5(12).

  ls_object_id-objtp = &amp;lt;fs_list&amp;gt;-instid_b+17(3).
  ls_object_id-objyr = &amp;lt;fs_list&amp;gt;-instid_b+20(2).
  ls_object_id-objno = &amp;lt;fs_list&amp;gt;-instid_b+22(12).

  " Delete document from repository
  CALL FUNCTION 'SO_OBJECT_DELETE'
    EXPORTING
      folder_id = ls_folder_id
      object_id = ls_object_id.

  COMMIT WORK AND WAIT.
ENDIF.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;H2 id="toc-hId--1423548597"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/H2&gt;&lt;P&gt;This program automatically deletes attachments from iw22 notifications&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-resource-planning-blog-posts-by-members/how-to-delete-sap-iw22-attachments-programmatically-using-binary-relations/ba-p/14282881"/>
    <published>2025-12-09T10:32:39.954000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/send-email-with-image-from-mime-repository-in-sap-abap/ba-p/14285931</id>
    <title>Send Email with Image from MIME Repository in SAP ABAP.</title>
    <updated>2025-12-09T11:15:49.325000+01:00</updated>
    <author>
      <name>manijangiti</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2174619</uri>
    </author>
    <content>&lt;H3 id="toc-hId-1895613034"&gt;&lt;STRONG&gt;Introduction&lt;/STRONG&gt;&lt;/H3&gt;&lt;P&gt;In many SAP projects, sending emails with proper formatting and images is a common requirement‚Äîwhether it‚Äôs for birthday wishes, reminders, approvals, or dashboards. Recently, I faced a real-time scenario where I had to send an email that included an inline image stored in the SAP MIME Repository. Instead of attaching the image as a file, the business wanted it to appear directly inside the email body.&lt;/P&gt;&lt;P&gt;This pushed me to explore how the MIME Repository works and how to embed images using ABAP and the BCS classes. To make the explanation clear and easy to understand, I used AI-assisted content creation while writing this blog‚Äîhelping me present the technical steps in a simple and readable format.&lt;/P&gt;&lt;P&gt;In this blog, I will walk you through the complete process of fetching an image from the MIME Repository and sending it in an HTML email using ABAP.&lt;BR /&gt;&lt;STRONG&gt;Example Code :&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;REPORT ZEMAIL_TO_SEND_IMG1.

*----------------------------------------------------------------------
* Data Declarations
*----------------------------------------------------------------------
DATA: lo_mime       TYPE REF TO cl_gbt_multirelated_service,
      lo_doc        TYPE REF TO cl_document_bcs,
      lo_bcs        TYPE REF TO cl_bcs,
      lo_sender     TYPE REF TO if_sender_bcs,
      lo_recipient  TYPE REF TO if_recipient_bcs.

DATA: lv_xstr       TYPE xstring,           "Image content in XSTRING
      lv_mime       TYPE w3conttype,        "MIME type like image/png
      lv_filename   TYPE string VALUE 'Done.png', "Image name
      lt_solix      TYPE solix_tab,         "Binary table
      lt_html       TYPE soli_tab,          "HTML body lines
      lv_len        TYPE so_obj_len.        "Length of binary content


*----------------------------------------------------------------------
* Step 1: Read Image From SAP MIME Repository
*----------------------------------------------------------------------
cl_mime_repository_api=&amp;gt;get_api( )-&amp;gt;get(
  EXPORTING
    i_url       = |/SAP/PUBLIC/TEST_W/{ lv_filename }|
  IMPORTING
    e_content   = lv_xstr
    e_mime_type = lv_mime
  EXCEPTIONS
    OTHERS      = 1 ).

IF sy-subrc &amp;lt;&amp;gt; 0 OR lv_xstr IS INITIAL.
  MESSAGE |Image { lv_filename } missing in MIME Repo!| TYPE 'E'.
ENDIF.


*----------------------------------------------------------------------
* Step 2: Convert XSTRING Image to SOLIX
*----------------------------------------------------------------------
lt_solix = cl_bcs_convert=&amp;gt;xstring_to_solix( lv_xstr ).
lv_len   = xstrlen( lv_xstr ).


*----------------------------------------------------------------------
* Step 3: Create MIME Multi-Part Object for Email
*----------------------------------------------------------------------
CREATE OBJECT lo_mime.


*----------------------------------------------------------------------
* Step 4: Add Inline Image (Content-ID Based Embedding)
*----------------------------------------------------------------------
lo_mime-&amp;gt;add_binary_part(
  content      = lt_solix,
  content_type = lv_mime,
  length       = lv_len,
  content_id   = lv_filename ).   "Used as cid:Done.png in HTML


*----------------------------------------------------------------------
* Step 5: Build HTML Email Body
*----------------------------------------------------------------------
APPEND '&amp;lt;html&amp;gt;' TO lt_html.
APPEND '&amp;lt;body style="background-color:#e6f0fa; font-family:Arial; margin:0; padding:10px;"&amp;gt;' TO lt_html.

APPEND '&amp;lt;div style="max-width:600px; margin:auto; background:#ffffff; padding:20px; border-radius:8px; border:1px solid #d0d7e3;"&amp;gt;' TO lt_html.

APPEND '&amp;lt;div style="text-align:center; margin-bottom:15px;"&amp;gt;' TO lt_html.
APPEND |&amp;lt;img src="cid:{ lv_filename }" alt="Birthday Image" style="width:80px;" /&amp;gt;| TO lt_html.
APPEND '&amp;lt;/div&amp;gt;' TO lt_html.

APPEND '&amp;lt;p style="font-size:12px; color:#000;"&amp;gt;Dear &amp;lt;b&amp;gt;Mani JANGITI&amp;lt;/b&amp;gt;,&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;' TO lt_html.
APPEND 'Wishing you a very Happy Birthday!&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;' TO lt_html.
APPEND 'May your day be filled with joy, laughter, and wonderful moments.&amp;lt;br&amp;gt;' TO lt_html.
APPEND 'May this new year of your life bring you happiness, success, good health, and all the blessings you deserve.&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;' TO lt_html.
APPEND 'Enjoy your special day to the fullest! &amp;lt;br&amp;gt;&amp;lt;br&amp;gt;' TO lt_html.
APPEND '&amp;lt;/p&amp;gt;' TO lt_html.

APPEND '&amp;lt;div style="text-align:center; margin:20px 0;"&amp;gt;' TO lt_html.
APPEND '&amp;lt;a href="https://your-gift-link.com/open" style="background:#6a2ae8; color:#ffffff; padding:10px 20px; text-decoration:none; border-radius:6px; font-size:14px;"&amp;gt;' TO lt_html.
APPEND 'Open Your Gift' TO lt_html.
APPEND '&amp;lt;/a&amp;gt;' TO lt_html.
APPEND '&amp;lt;/div&amp;gt;' TO lt_html.

APPEND '&amp;lt;p style="margin-top:15px; font-size:12px;"&amp;gt;Warm Regards,&amp;lt;br&amp;gt; Company (IN)&amp;lt;/p&amp;gt;' TO lt_html.

APPEND '&amp;lt;/div&amp;gt;' TO lt_html.
APPEND '&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;' TO lt_html.


*----------------------------------------------------------------------
* Step 6: Attach HTML Body into MIME Object
*----------------------------------------------------------------------
lo_mime-&amp;gt;set_main_html(
  content     = lt_html,
  filename    = 'email.htm',
  description = 'Birthday Wishes' ).


*----------------------------------------------------------------------
* Step 7: Create Email Document with Subject
*----------------------------------------------------------------------
lo_doc = cl_document_bcs=&amp;gt;create_from_multirelated(
            i_subject          = 'Birthday Wishes...',
            i_multirel_service = lo_mime ).


*----------------------------------------------------------------------
* Step 8: Create and Send Email Using BCS
*----------------------------------------------------------------------
lo_bcs = cl_bcs=&amp;gt;create_persistent( ).
lo_bcs-&amp;gt;set_document( lo_doc ).

lo_sender = cl_sapuser_bcs=&amp;gt;create( sy-uname ).
lo_bcs-&amp;gt;set_sender( lo_sender ).

lo_recipient = cl_cam_address_bcs=&amp;gt;create_internet_address(
                 'maniyadav2585@gmail.com' ).
lo_bcs-&amp;gt;add_recipient( lo_recipient ).

lo_bcs-&amp;gt;send( i_with_error_screen = abap_true ).
COMMIT WORK AND WAIT.


*----------------------------------------------------------------------
* Final Message
*----------------------------------------------------------------------
WRITE / 'Email sent successfully Check It in SOST. !'.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Output :&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="image.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/349697i8E9DEDDAA9335D2D/image-size/large?v=v2&amp;amp;px=999" role="button" title="image.png" alt="image.png" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Explanation :&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;In SAP emails, images help make the message look professional and easy to understand.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;The image is usually stored in the &lt;STRONG&gt;MIME Repository&lt;/STRONG&gt;, which is SAP‚Äôs storage for logos, icons, and media files.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;When sending HTML emails, we convert the image to &lt;STRONG&gt;Base64&lt;/STRONG&gt; so that it appears directly inside the email body.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;We also add &lt;STRONG&gt;hyperlinks&lt;/STRONG&gt; in the email so the user can click and open related documents or applications (like a Fiori app or a PDF).&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;This method is often used in real-time scenarios like reports, dashboards, notifications, and approval emails.&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;DIV class=""&gt;Thanks for reading this blog! Implementing images and hyperlinks in SAP emails may look small, but it makes a huge difference in real-time business communication. I personally used AI tools to structure and refine this content, just like how we now use AI daily to speed up development and solve problems faster. In real project scenarios, features like embedded images, clickable links, and clean formatting help users quickly understand data and take action. Hope this guide helps you in your next SAP requirement!&lt;/DIV&gt;&lt;DIV class=""&gt;&lt;DIV class=""&gt;&amp;nbsp;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;DIV class=""&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Connectivity/pd-p/266264953119842772207986043063520" class="lia-product-mention" data-product="313-1"&gt;ABAP Connectivity&lt;/a&gt;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Development/pd-p/833755570260738661924709785639136" class="lia-product-mention" data-product="314-1"&gt;ABAP Development&lt;/a&gt;&amp;nbsp;&lt;/DIV&gt;&lt;P&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/send-email-with-image-from-mime-repository-in-sap-abap/ba-p/14285931"/>
    <published>2025-12-09T11:15:49.325000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/call-bapi-in-custom-entity-through-rap/ba-p/14268610</id>
    <title>CALL BAPI IN CUSTOM ENTITY THROUGH RAP</title>
    <updated>2025-12-09T11:29:06.943000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;Hi RAP Developers, Good Day&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Introduction:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In many business scenarios, we need to expose BAPI-based data to SAP Fiori applications without creating database tables or CDS-based persistency. With the RESTful ABAP Programming Model (RAP), this can be achieved efficiently using &lt;STRONG&gt;Custom Entities&lt;/STRONG&gt;, which allow us to call ABAP logic directly‚Äîsuch as BAPIs‚Äîand return the data as an OData service.&lt;/P&gt;&lt;P&gt;In this blog, I will walk through how to build a &lt;STRONG&gt;Custom Entity that fetches bank details by calling a BAPI&lt;/STRONG&gt;, how to annotate it for UI consumption, and how to expose it seamlessly to a Fiori Elements application. This approach is useful whenever you want to reuse existing BAPIs and business logic while keeping your RAP model clean, lightweight, and high-performing.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;This solution demonstrates how RAP can seamlessly integrate with classic SAP functionality by exposing BAPI output through a &lt;STRONG&gt;Custom Entity&lt;/STRONG&gt;. Instead of relying on database tables or CDS views, the Custom Entity acts as a virtual data source whose data is supplied dynamically via an ABAP class.&lt;/P&gt;&lt;P&gt;When a Fiori Elements UI requests the entity, RAP forwards the query to the ABAP implementation class. This class reads the query parameters (filters, sorting, pagination) and uses them to call &lt;STRONG&gt;BAPI_BANK_GETDETAIL&lt;/STRONG&gt;. The BAPI returns the bank‚Äôs address, master data, and related details, which are then transformed into the response structure expected by the Custom Entity.&lt;/P&gt;&lt;P&gt;The result is an OData-based, read-only endpoint capable of delivering real-time data from a BAPI with full RAP features such as filtering, sorting, paging, and total count support. This approach makes it easy to modernize existing SAP data retrieval logic while still leveraging stable, proven BAPIs in the backend.&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Custom Entity:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;custom entity not underlying any data source.&lt;/LI&gt;&lt;LI&gt;data preview is not possible, becuase this should be implemented in seperate class.&lt;/LI&gt;&lt;LI&gt;suitable for paging,calling bapi's and external api's.&lt;/LI&gt;&lt;/UL&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@EndUserText.label: 'Custom Entity calling bapi'
@ObjectModel: {
    query: {
        implementedBy: 'ABAP:ZCL_BAPI_BANK'
    }
}

@UI: {
    headerInfo: {
        typeName: 'Banks',
        typeNamePlural: 'Banks',
        title: { value: 'bank_ctry' },
        description: { value: 'bank_ctry' }
    }
}

@UI: {
    presentationVariant: [{
        sortOrder: [{
            by: 'bank_ctry',
            direction: #ASC
        }],
        visualizations: [{
            type: #AS_LINEITEM
        }]
    }]
}
define root custom entity ZCE_BANK
{
      .facet                : [
      {
          id      : 'Bank_data',
          purpose : #STANDARD,
          type    : #IDENTIFICATION_REFERENCE,
          label   : 'Bank Details',
          position: 10 }
      ]
      .lineItem             : [{ position: 10 }]
      .selectionField       : [{position: 10}]
      .identification       : [{position: 10}]
  key bank_ctry                : banks;
      .lineItem             : [{ position: 20 }]
      .selectionField       : [{position: 20}]
      .identification       : [{position: 20}]
  key bank_key                 : bankk;

      .lineItem             : [{ position: 30 }]
      .identification       : [{position: 30}]
      bank_name                : banka;

      .lineItem             : [{ position: 40 }]
      .identification       : [{position: 40}]
      street                   : stras_gp;

      .lineItem             : [{ position: 50 }]
      .identification       : [{position: 50}]
      city                     : ort01_gp;

      .lineItem             : [{ position: 60 }]
      .identification       : [{position: 60}]
      BANK_NO                  : bankl;

      .lineItem             : [{ position: 70 }]
      .identification       : [{position: 70}]
      CREAT_DATE               : erdat_bf;

      .lineItem             : [{ position: 80 }]
      .identification       : [{position: 80}]
      creator                  : ernam_bf;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;Implementation:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS ZCL_BAPI_BANK DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC .

  PUBLIC SECTION.
    " RAP interface for query implementation
    INTERFACES IF_RAP_QUERY_PROVIDER.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.


CLASS ZCL_BAPI_BANK IMPLEMENTATION.

  METHOD IF_RAP_QUERY_PROVIDER~SELECT.

    "----------------------------------------------------------------------
    " Local type used to return data back to Custom Entity ZCE_BANK
    "----------------------------------------------------------------------
    TYPES: BEGIN OF TY_BANK_RESULT,
             BANK_CTRY  TYPE BANKS,
             BANK_KEY   TYPE BANKK,
             BANK_NAME  TYPE BANKA,
             STREET     TYPE STRAS_GP,
             CITY       TYPE ORT01_GP,
             BANK_NO    TYPE BANKL,
             CREAT_DATE TYPE ERDAT_BF,
             CREATOR    TYPE ERNAM_BF,
           END OF TY_BANK_RESULT.

    DATA: LT_RESULT  TYPE TABLE OF TY_BANK_RESULT,
          LS_RESULT  TYPE TY_BANK_RESULT,
          LS_ADDRESS TYPE BAPI1011_ADDRESS,
          LS_DETAIL  TYPE BAPI1011_DETAIL,
          LS_RETURN  TYPE BAPIRET2.

    " Proceed only if the consumer has requested data
    IF IO_REQUEST-&amp;gt;IS_DATA_REQUESTED( ).

      "---------------------------------------------------------------
      " Read pagination details (TOP and SKIP)
      "---------------------------------------------------------------
      DATA(LV_TOP)  = IO_REQUEST-&amp;gt;GET_PAGING( )-&amp;gt;GET_PAGE_SIZE( ).
      DATA(LV_SKIP) = IO_REQUEST-&amp;gt;GET_PAGING( )-&amp;gt;GET_OFFSET( ).

      "---------------------------------------------------------------
      " Prepare ORDER BY clause based on sort request from UI
      "---------------------------------------------------------------
      DATA(LT_SORT) = IO_REQUEST-&amp;gt;GET_SORT_ELEMENTS( ).
      DATA LV_ORDERBY TYPE STRING.

      IF LT_SORT IS NOT INITIAL.
        CLEAR LV_ORDERBY.

        LOOP AT LT_SORT INTO DATA(LS_SORT).
          IF SY-TABIX &amp;gt; 1.
            LV_ORDERBY = |{ LV_ORDERBY }, |.
          ENDIF.

          " Construct ORDER BY element (ASCENDING/DESCENDING)
          LV_ORDERBY =
            |{ LV_ORDERBY }{ LS_SORT-ELEMENT_NAME } {
               COND #( WHEN LS_SORT-DESCENDING = ABAP_TRUE
                       THEN 'DESCENDING'
                       ELSE 'ASCENDING' ) }|.
        ENDLOOP.
      ENDIF.

      "---------------------------------------------------------------
      " Derive SQL filter string from UI filter (if any)
      "---------------------------------------------------------------
      DATA(lv_conditions) = io_request-&amp;gt;get_filter( )-&amp;gt;get_as_sql_string( ).

      "---------------------------------------------------------------
      " Read bank master records (BNKA) based on filters
      "---------------------------------------------------------------
      SELECT BANKS AS bank_ctry,
             BANKL AS bank_key,
             BNKLZ AS bank_no,
             ERDAT AS creat_date,
             ERNAM AS creator
        FROM BNKA
        WHERE (lv_conditions)
        ORDER BY (lv_orderby)
        INTO TABLE &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1407137"&gt;@DATA&lt;/a&gt;(lt_banks)
        UP TO &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1419942"&gt;@LV&lt;/a&gt;_top ROWS
        OFFSET &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1419942"&gt;@LV&lt;/a&gt;_skip.

      "---------------------------------------------------------------
      " Loop through each BNKA record and enrich details using BAPI
      "---------------------------------------------------------------
      LOOP AT lt_banks INTO DATA(ls_bank).

        " Get detailed bank address info
        CALL FUNCTION 'BAPI_BANK_GETDETAIL'
          EXPORTING
            bankcountry  = ls_bank-bank_ctry
            bankkey      = ls_bank-bank_key
          IMPORTING
            bank_address = ls_address
            bank_detail  = ls_detail
            return       = ls_return.

        " Prepare output row
        LS_RESULT-bank_ctry   = ls_bank-bank_ctry.
        LS_RESULT-bank_key    = ls_bank-bank_key.
        LS_RESULT-bank_name   = ls_address-bank_name.
        LS_RESULT-street      = ls_address-street.
        LS_RESULT-city        = ls_address-city.
        LS_RESULT-bank_no     = ls_bank-bank_no.
        LS_RESULT-creat_date  = ls_bank-creat_date.
        LS_RESULT-creator     = ls_bank-creator.

        APPEND LS_RESULT TO LT_RESULT.

        CLEAR: ls_result, ls_address, ls_detail, ls_return.

      ENDLOOP.

      "---------------------------------------------------------------
      " Return total count for UI pagination (if requested)
      "---------------------------------------------------------------
      IF IO_REQUEST-&amp;gt;IS_TOTAL_NUMB_OF_REC_REQUESTED( ).
        SELECT COUNT(*)
          FROM BNKA
          WHERE (lv_conditions)
          INTO &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1407137"&gt;@DATA&lt;/a&gt;(lv_count).

        IO_RESPONSE-&amp;gt;SET_TOTAL_NUMBER_OF_RECORDS( lv_count ).
      ENDIF.

      "---------------------------------------------------------------
      " Send final result back to RAP framework
      "---------------------------------------------------------------
      IO_RESPONSE-&amp;gt;SET_DATA( LT_RESULT ).

    ENDIF.

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="bank.jpg" style="width: 621px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/340394iA7F2C1EEC70EB6A5/image-dimensions/621x294/is-moderation-mode/true?v=v2" width="621" height="294" role="button" title="bank.jpg" alt="bank.jpg" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion:&amp;nbsp;&lt;/STRONG&gt;&lt;BR /&gt;this approach highlights how RAP can modernize SAP applications by exposing classic BAPI data through Custom Entities. It enables real-time, read-only access with full OData capabilities‚Äîfiltering, sorting, paging‚Äîwithout changing existing backend logic, bridging the gap between proven SAP functionality and modern Fiori UIs.&lt;BR /&gt;Thanks For Reading, Best Wishes&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/call-bapi-in-custom-entity-through-rap/ba-p/14268610"/>
    <published>2025-12-09T11:29:06.943000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/date-hierarchy-using-tree-alv-fm-amp-oops/ba-p/14267818</id>
    <title>Date Hierarchy Using Tree ALV(FM &amp; OOPS )</title>
    <updated>2025-12-09T11:37:56.809000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;Hi Everyone&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;H3 id="toc-hId-1893824558"&gt;&lt;FONT color="#000000"&gt;&lt;STRONG&gt;&lt;FONT face="Times New Roman, serif"&gt;&lt;FONT size="4"&gt;&lt;SPAN&gt;Introduction:&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/H3&gt;&lt;P class=""&gt;The user needs an interactive &lt;STRONG&gt;Date Hierarchy&lt;/STRONG&gt; display in SAP that provides a structured view of years, months, and individual dates.This helps users quickly navigate through large date ranges and select specific dates for downstream operations such as data extraction, reporting, or analysis.&lt;/P&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P class="" align="left"&gt;&amp;nbsp;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P class=""&gt;The screen should display a hierarchical &lt;STRONG&gt;Tree ALV&lt;/STRONG&gt; titled &lt;STRONG&gt;‚ÄúDATE HIERARCHY‚Äù&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;The top-level nodes represent &lt;STRONG&gt;Years&lt;/STRONG&gt; (e.g., 2021 to 2025).&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;When the user &lt;STRONG&gt;expands a Year&lt;/STRONG&gt;, the &lt;STRONG&gt;12 months (January to December)&lt;/STRONG&gt; are displayed as child nodes.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;When the user &lt;STRONG&gt;expands a Month&lt;/STRONG&gt;, all &lt;STRONG&gt;valid calendar dates&lt;/STRONG&gt; for that month are dynamically generated and displayed.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;Each date node should display the date in &lt;STRONG&gt;user‚Äôs local format (DD.MM.YYYY)&lt;/STRONG&gt;.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;The user should be able to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P class=""&gt;Expand/collapse nodes dynamically.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P class=""&gt;View all levels of hierarchy.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P class="" align="left"&gt;&amp;nbsp;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TABLES : BKPF.

"Internal table and work area for tree nodes
DATA: IT_NODE TYPE TABLE OF SNODETEXT,
      WA_NODE TYPE SNODETEXT.

"Variables for Year, Month, Date calculations
DATA: LV_YEAR  TYPE GJAHR,
      LV_MONTH TYPE NUMC2,
      LV_DATE  TYPE DATUM,
      LV_DAYS  TYPE I,
      LV_DAY   TYPE NUMC2.

"Keys for hierarchy levels
DATA: LV_YEAR_KEY  TYPE CHAR10,
      LV_MONTH_KEY TYPE CHAR15,
      LV_DATE_KEY  TYPE CHAR20.

"Selection range for fiscal year
SELECT-OPTIONS: S_GJAHR FOR BKPF-GJAHR DEFAULT '2021' TO '2025'.

START-OF-SELECTION.

  CLEAR: WA_NODE, IT_NODE.

"------------------------------------------------------------"
" Root Node Creation                                         "
"------------------------------------------------------------"
WA_NODE-TYPE    = 'T'.             "Tree title
WA_NODE-NAME    = 'DATE HIERARCHY'.
WA_NODE-TLEVEL  = '01'.
WA_NODE-NLENGTH = '18'.
WA_NODE-COLOR   = '05'.
APPEND WA_NODE TO IT_NODE.
CLEAR WA_NODE.

"------------------------------------------------------------"
" Build Year ‚Üí Month ‚Üí Date Hierarchy                       "
"------------------------------------------------------------"
LOOP AT S_GJAHR.
  DO.
    "Loop through each year within the selected range
    LV_YEAR = S_GJAHR-LOW + SY-INDEX - 1.
    IF LV_YEAR &amp;gt; S_GJAHR-HIGH.
      EXIT.
    ENDIF.

    "--------------------------------------------------------"
    " Year Node (Level 02)                                   "
    "--------------------------------------------------------"
    LV_YEAR_KEY = LV_YEAR.
    WA_NODE-TYPE    = 'P'.
    WA_NODE-ID      = LV_YEAR_KEY.
    CONCATENATE LV_YEAR ' ' INTO WA_NODE-NAME SEPARATED BY SPACE.
    WA_NODE-TLEVEL  = '02'.
    WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
    WA_NODE-COLOR   = '03'.
    APPEND WA_NODE TO IT_NODE.
    CLEAR WA_NODE.

    "--------------------------------------------------------"
    " 12 Months Loop (Level 03)                              "
    "--------------------------------------------------------"
    DO 12 TIMES.
      LV_MONTH = SY-INDEX.
      CONCATENATE LV_YEAR_KEY LV_MONTH INTO LV_MONTH_KEY.

      WA_NODE-TYPE = 'P'.
      WA_NODE-ID   = LV_MONTH_KEY.

      "Month Name Assignment"
      CASE LV_MONTH.
        WHEN '01'. WA_NODE-NAME = 'January'.
        WHEN '02'. WA_NODE-NAME = 'February'.
        WHEN '03'. WA_NODE-NAME = 'March'.
        WHEN '04'. WA_NODE-NAME = 'April'.
        WHEN '05'. WA_NODE-NAME = 'May'.
        WHEN '06'. WA_NODE-NAME = 'June'.
        WHEN '07'. WA_NODE-NAME = 'July'.
        WHEN '08'. WA_NODE-NAME = 'August'.
        WHEN '09'. WA_NODE-NAME = 'September'.
        WHEN '10'. WA_NODE-NAME = 'October'.
        WHEN '11'. WA_NODE-NAME = 'November'.
        WHEN '12'. WA_NODE-NAME = 'December'.
      ENDCASE.

      WA_NODE-TLEVEL  = '03'.
      WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
      WA_NODE-COLOR   = '04'.
      APPEND WA_NODE TO IT_NODE.
      CLEAR WA_NODE.

      "------------------------------------------------------"
      " Determine number of days in the month                "
      "------------------------------------------------------"
      CONCATENATE LV_YEAR LV_MONTH '01' INTO LV_DATE.
      CALL FUNCTION 'SLS_MISC_GET_LAST_DAY_OF_MONTH'
        EXPORTING
          DAY_IN            = LV_DATE
        IMPORTING
          LAST_DAY_OF_MONTH = LV_DATE.

      LV_DAYS = LV_DATE+6(2). "Extract day part ‚Üí last day of month

      "------------------------------------------------------"
      " Date Nodes (Level 04)                                "
      "------------------------------------------------------"
      DO LV_DAYS TIMES.
        LV_DAY = SY-INDEX.
        CONCATENATE LV_YEAR LV_MONTH LV_DAY INTO LV_DATE_KEY.

        WA_NODE-TYPE    = 'P'.
        WA_NODE-ID      = LV_DATE_KEY.
        CONCATENATE LV_DAY '.' LV_MONTH '.' LV_YEAR INTO WA_NODE-NAME.
        WA_NODE-TLEVEL  = '04'.
        WA_NODE-NLENGTH = STRLEN( WA_NODE-NAME ).
        WA_NODE-COLOR   = '06'.
        APPEND WA_NODE TO IT_NODE.
        CLEAR WA_NODE.

      ENDDO.

    ENDDO.

  ENDDO.
ENDLOOP.

"------------------------------------------------------------"
" Display the Tree Output                                    "
"------------------------------------------------------------"
CALL FUNCTION 'RS_TREE_CONSTRUCT'
  TABLES
    NODETAB = IT_NODE.

CALL FUNCTION 'RS_TREE_LIST_DISPLAY'
  EXPORTING
    CALLBACK_PROGRAM = SY-REPID.&lt;/code&gt;&lt;/pre&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;Output:&lt;/STRONG&gt;&lt;BR /&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="tree.png" style="width: 812px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339971i42BB7569A9EF68CF/image-dimensions/812x534/is-moderation-mode/true?v=v2" width="812" height="534" role="button" title="tree.png" alt="tree.png" /&gt;&lt;/span&gt;&lt;BR /&gt;&lt;STRONG&gt;OOPS Approach:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;TABLES: MARA, BKPF.

*---------------------------------------------------------------------*
* Data Declarations
*---------------------------------------------------------------------*
"ALV Tree objects
DATA: GO_TREE      TYPE REF TO CL_GUI_ALV_TREE,
      GO_CONTAINER TYPE REF TO CL_GUI_CUSTOM_CONTAINER.

"ALV field catalog and layout
DATA: GT_FIELDCAT TYPE LVC_T_FCAT,
      GS_FIELDCAT TYPE LVC_S_FCAT,
      GS_LAYOUT   TYPE LVC_S_LAYO.

"Output structure for tree text
TYPES: BEGIN OF TY_OUTPUT,
         COLUMN1 TYPE CHAR255,  "Single text column for tree nodes
       END OF TY_OUTPUT.

DATA: GT_OUTPUT TYPE TABLE OF TY_OUTPUT,
      GS_OUTPUT TYPE TY_OUTPUT.

"Variables used for Year ‚Üí Month ‚Üí Date hierarchy
DATA: LV_YEAR       TYPE GJAHR,
      LV_MONTH      TYPE NUMC2,
      LV_DATE       TYPE DATUM,
      LV_LAST_DATE  TYPE DATUM,
      LV_DAYS       TYPE I,
      LV_DAY        TYPE NUMC2,
      LV_YEAR_KEY   TYPE LVC_NKEY,
      LV_MONTH_KEY  TYPE LVC_NKEY,
      LV_DATES_LINE TYPE STRING.

"Node layout (folder / item)
DATA: LS_NODE_LAYOUT TYPE LVC_S_LAYN.

"Year range for hierarchy
SELECT-OPTIONS: S_GJAHR FOR BKPF-GJAHR DEFAULT '2021' TO '2025'.

*---------------------------------------------------------------------*
* Selection Screen Trigger
*---------------------------------------------------------------------*
START-OF-SELECTION.
  CALL SCREEN 100.  "Call main screen

*---------------------------------------------------------------------*
* PBO: Set status and create tree
*---------------------------------------------------------------------*
MODULE STATUS_0100 OUTPUT.
  SET PF-STATUS 'ZSTANDARD'.

  "Create the tree only once
  IF GO_CONTAINER IS INITIAL.
    PERFORM CREATE_AND_FILL_TREE.
  ENDIF.
ENDMODULE.

*---------------------------------------------------------------------*
* PAI: Handle user commands
*---------------------------------------------------------------------*
MODULE USER_COMMAND_0100 INPUT.
  CASE SY-UCOMM.
    WHEN 'BACK' OR 'EXIT' OR 'CANCEL'.
      "Release frontend controls
      PERFORM FREE_RESOURCES.
      LEAVE TO SCREEN 0.
  ENDCASE.
ENDMODULE.

*---------------------------------------------------------------------*
* Create container, tree control, root node and load hierarchy
*---------------------------------------------------------------------*
FORM CREATE_AND_FILL_TREE.

  "Create custom container inside screen element 'CONTAINER'
  CREATE OBJECT GO_CONTAINER
    EXPORTING
      CONTAINER_NAME = 'CONTAINER'.

  "Build ALV field catalog
  PERFORM BUILD_FIELDCAT.

  "Create ALV tree control
  CREATE OBJECT GO_TREE
    EXPORTING
      PARENT              = GO_CONTAINER
      NODE_SELECTION_MODE = CL_GUI_COLUMN_TREE=&amp;gt;NODE_SEL_MODE_SINGLE
      ITEM_SELECTION      = 'X'
    EXCEPTIONS
      OTHERS              = 1.

  "Bind output table and field catalog to tree
  CALL METHOD GO_TREE-&amp;gt;SET_TABLE_FOR_FIRST_DISPLAY
    CHANGING
      IT_OUTTAB       = GT_OUTPUT
      IT_FIELDCATALOG = GT_FIELDCAT.

  "---------------------------------------------------------------*
  " Create Root Node (DATE HIERARCHY)
  "---------------------------------------------------------------*
  CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
  LS_NODE_LAYOUT-ISFOLDER  = 'X'.
  LS_NODE_LAYOUT-N_IMAGE   = '@AV@'.
  LS_NODE_LAYOUT-EXP_IMAGE = '@AV@'.
  GS_OUTPUT-COLUMN1        = 'DATE HIERARCHY'.

  "Add root node
  CALL METHOD GO_TREE-&amp;gt;ADD_NODE
    EXPORTING
      I_RELAT_NODE_KEY = ''  "Root level
      I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
      IS_OUTTAB_LINE   = GS_OUTPUT
      IS_NODE_LAYOUT   = LS_NODE_LAYOUT
    IMPORTING
      E_NEW_NODE_KEY   = LV_YEAR_KEY.

  "Build full tree under root node
  PERFORM BUILD_TREE_NODES USING LV_YEAR_KEY.

  "Auto-expand root node
  CALL METHOD GO_TREE-&amp;gt;EXPAND_NODE
    EXPORTING
      I_NODE_KEY = LV_YEAR_KEY.

  CALL METHOD GO_TREE-&amp;gt;FRONTEND_UPDATE.

ENDFORM.

*---------------------------------------------------------------------*
* Create field catalog for ALV tree
*---------------------------------------------------------------------*
FORM BUILD_FIELDCAT.
  CLEAR GS_FIELDCAT.
  GS_FIELDCAT-FIELDNAME = 'COLUMN1'.
  GS_FIELDCAT-COLTEXT   = 'Description'.
  GS_FIELDCAT-OUTPUTLEN = 255.
  APPEND GS_FIELDCAT TO GT_FIELDCAT.
ENDFORM.

*---------------------------------------------------------------------*
* Build YEAR ‚Üí MONTH ‚Üí DAY hierarchy inside ALV Tree
*---------------------------------------------------------------------*
FORM BUILD_TREE_NODES USING IV_ROOT_KEY TYPE LVC_NKEY.

  DATA: LV_PARENT_YEAR  TYPE LVC_NKEY,
        LV_PARENT_MONTH TYPE LVC_NKEY,
        LV_MONTH_NAME   TYPE STRING,
        LV_CHUNK        TYPE STRING,
        LV_CHUNK_COUNT  TYPE I,
        GV_GROUP_SIZE   TYPE I VALUE 10,  "Group 10 days per line
        LV_DATE_STRING  TYPE STRING.

  "Loop through selected year range
  LOOP AT S_GJAHR.
    DO.
      LV_YEAR = S_GJAHR-LOW + SY-INDEX - 1.
      IF LV_YEAR &amp;gt; S_GJAHR-HIGH.
        EXIT.
      ENDIF.

      "---------------------------------------------------------------*
      " Create YEAR Node
      "---------------------------------------------------------------*
      CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
      LS_NODE_LAYOUT-ISFOLDER  = 'X'.
      LS_NODE_LAYOUT-N_IMAGE   = '@AV@'.
      LS_NODE_LAYOUT-EXP_IMAGE = '@AV@'.
      GS_OUTPUT-COLUMN1        = |Year: { LV_YEAR }|.

      CALL METHOD GO_TREE-&amp;gt;ADD_NODE
        EXPORTING
          I_RELAT_NODE_KEY = IV_ROOT_KEY      "Attach to root
          I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
          IS_OUTTAB_LINE   = GS_OUTPUT
          IS_NODE_LAYOUT   = LS_NODE_LAYOUT
        IMPORTING
          E_NEW_NODE_KEY   = LV_PARENT_YEAR.

      "---------------------------------------------------------------*
      " Create MONTH Nodes under each Year
      "---------------------------------------------------------------*
      DO 12 TIMES.
        LV_MONTH = SY-INDEX.

        "Month name mapping
        CASE LV_MONTH.
          WHEN 1.  LV_MONTH_NAME = 'January'.
          WHEN 2.  LV_MONTH_NAME = 'February'.
          WHEN 3.  LV_MONTH_NAME = 'March'.
          WHEN 4.  LV_MONTH_NAME = 'April'.
          WHEN 5.  LV_MONTH_NAME = 'May'.
          WHEN 6.  LV_MONTH_NAME = 'June'.
          WHEN 7.  LV_MONTH_NAME = 'July'.
          WHEN 8.  LV_MONTH_NAME = 'August'.
          WHEN 9.  LV_MONTH_NAME = 'September'.
          WHEN 10. LV_MONTH_NAME = 'October'.
          WHEN 11. LV_MONTH_NAME = 'November'.
          WHEN 12. LV_MONTH_NAME = 'December'.
        ENDCASE.

        CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
        LS_NODE_LAYOUT-ISFOLDER  = 'X'.
        LS_NODE_LAYOUT-N_IMAGE   = '@2L@'.
        LS_NODE_LAYOUT-EXP_IMAGE = '@2L@'.
        GS_OUTPUT-COLUMN1        = LV_MONTH_NAME.

        "Add Month node
        CALL METHOD GO_TREE-&amp;gt;ADD_NODE
          EXPORTING
            I_RELAT_NODE_KEY = LV_PARENT_YEAR
            I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
            IS_OUTTAB_LINE   = GS_OUTPUT
            IS_NODE_LAYOUT   = LS_NODE_LAYOUT
          IMPORTING
            E_NEW_NODE_KEY   = LV_PARENT_MONTH.

        "-----------------------------------------------------------*
        " Determine last day of month
        "-----------------------------------------------------------*
        CONCATENATE LV_YEAR LV_MONTH '01' INTO LV_DATE.
        CALL FUNCTION 'LAST_DAY_OF_MONTHS'
          EXPORTING
            DAY_IN            = LV_DATE
          IMPORTING
            LAST_DAY_OF_MONTH = LV_LAST_DATE.

        LV_DAYS = LV_LAST_DATE+6(2).  "Extract number of days

        "-----------------------------------------------------------*
        " Add DAY Nodes grouped (10 days per node)
        "-----------------------------------------------------------*
        CLEAR: LV_CHUNK, LV_CHUNK_COUNT.

        DO LV_DAYS TIMES.
          LV_DAY = SY-INDEX.

          "Format date string: DD.MM.YYYY
          LV_DATE_STRING = |{ LV_DAY WIDTH = 2 }.{ LV_MONTH WIDTH = 2 }.{ LV_YEAR }|.

          "Build chunk of 10 dates
          IF LV_CHUNK IS INITIAL.
            LV_CHUNK = LV_DATE_STRING.
          ELSE.
            CONCATENATE LV_CHUNK LV_DATE_STRING INTO LV_CHUNK SEPARATED BY SPACE.
          ENDIF.

          ADD 1 TO LV_CHUNK_COUNT.

          "Add one group node after every 10 days OR last day
          IF LV_CHUNK_COUNT &amp;gt;= GV_GROUP_SIZE OR LV_DAY = LV_DAYS.

            CLEAR: LS_NODE_LAYOUT, GS_OUTPUT.
            LS_NODE_LAYOUT-ISFOLDER = ''.   "Leaf node
            LS_NODE_LAYOUT-N_IMAGE  = '@3C@'.
            GS_OUTPUT-COLUMN1       = LV_CHUNK.

            "Add day-chunk node
            CALL METHOD GO_TREE-&amp;gt;ADD_NODE
              EXPORTING
                I_RELAT_NODE_KEY = LV_PARENT_MONTH
                I_RELATIONSHIP   = CL_GUI_COLUMN_TREE=&amp;gt;RELAT_LAST_CHILD
                IS_OUTTAB_LINE   = GS_OUTPUT
                IS_NODE_LAYOUT   = LS_NODE_LAYOUT.

            CLEAR: LV_CHUNK, LV_CHUNK_COUNT.
          ENDIF.
        ENDDO.

      ENDDO.  "End Month Loop

    ENDDO.
  ENDLOOP.

ENDFORM.

*---------------------------------------------------------------------*
* Release frontend controls
*---------------------------------------------------------------------*
FORM FREE_RESOURCES.
  IF GO_TREE IS BOUND.
    CALL METHOD GO_TREE-&amp;gt;FREE.
    FREE GO_TREE.
  ENDIF.

  IF GO_CONTAINER IS BOUND.
    CALL METHOD GO_CONTAINER-&amp;gt;FREE.
    FREE GO_CONTAINER.
  ENDIF.
ENDFORM.&lt;/code&gt;&lt;/pre&gt;&lt;P class="" align="left"&gt;&lt;STRONG&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="date.jpg" style="width: 619px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/339973i6AA78918170CB894/image-dimensions/619x242/is-moderation-mode/true?v=v2" width="619" height="242" role="button" title="date.jpg" alt="date.jpg" /&gt;&lt;/span&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;Conclusion:&lt;/STRONG&gt;&lt;BR /&gt;This solution showcases a practical and user-friendly way to visualize date structures by building a dynamic Year‚ÄìMonth‚ÄìDay hierarchy using the ALV Tree control. By grouping daily entries and leveraging container-based GUI elements, the approach delivers a clean, scalable, and intuitive navigation experience. It also demonstrates how classic ABAP techniques‚Äîselection screens, tree controls, and month/day calculations‚Äîcan be combined to create interactive UI components that enhance data exploration within SAP GUI.&lt;STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/date-hierarchy-using-tree-alv-fm-amp-oops/ba-p/14267818"/>
    <published>2025-12-09T11:37:56.809000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-2/ba-p/14286757</id>
    <title>Collective Value Helps in RAP: V2 and V4 Implementation Guide - Part 2</title>
    <updated>2025-12-09T15:35:14.655000+01:00</updated>
    <author>
      <name>Abhinav_Roy</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/1109</uri>
    </author>
    <content>&lt;P&gt;&lt;SPAN&gt;In &lt;A href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-1/ba-p/14271885" target="_blank"&gt;Part 1&lt;/A&gt;&amp;nbsp;of this series, we explored the fundamentals of &lt;STRONG&gt;Collective Value Helps&lt;/STRONG&gt; in RAP, covering implementation patterns across OData V2 and V4 service bindings. The community response has been overwhelming, with particular interest in hierarchical implementations for complex business scenarios.&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;While CDS hierarchies are extensively documented in the SAP ecosystem and widely used for representing parent-child relationships across business objects, a critical implementation gap exists: &lt;STRONG&gt;there are virtually no practical examples of incorporating hierarchical display patterns within Collective Value Helps.&lt;/STRONG&gt; &lt;STRONG&gt;Part 2&lt;/STRONG&gt; bridges this gap by demonstrating how to seamlessly integrate hierarchical search templates into the collective value help framework we built in Part 1.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;SPAN&gt;&lt;STRONG&gt;Watch the demonstration video below&lt;/STRONG&gt; to see hierarchical value helps in action, including how they work alongside existing flat list search templates, in a Collective Value Help:&lt;BR /&gt;&lt;BR /&gt;&lt;div class="video-embed-center video-embed"&gt;&lt;iframe class="embedly-embed" src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F2Zt9gykfJOE%3Ffeature%3Doembed&amp;amp;display_name=YouTube&amp;amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D2Zt9gykfJOE&amp;amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F2Zt9gykfJOE%2Fhqdefault.jpg&amp;amp;type=text%2Fhtml&amp;amp;schema=youtube" width="400" height="225" scrolling="no" title="SAP Community Hierarchical Variant - CVH" frameborder="0" allow="autoplay; fullscreen; encrypted-media; picture-in-picture;" allowfullscreen="true"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;U&gt;&lt;SPAN&gt;System Requirements&lt;/SPAN&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**Hierarchical Value Help Dialogs require: **&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**SAP S/4HANA Cloud**&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Minimum Release: 2311&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Protocol: OData V4 service binding&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**SAP S/4HANA On-Premise/Private Edition: **&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Minimum Release : S/4HANA 2025 onwards&lt;BR /&gt;&lt;/EM&gt;&lt;EM&gt;--Protocol: OData V4 service binding&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT color="#339966"&gt;&lt;EM&gt;**Important: ** OData V2 does not support hierarchical&lt;/EM&gt; visualization&amp;nbsp;&lt;EM&gt;out of the box via CDS Hierarchy due to protocol limitations. CDS hierarchical patterns require OData V4.&lt;/EM&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;CDS Hierarchies: Foundation for Hierarchical Value Helps&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;CDS (Core Data Services) hierarchies are well-established patterns in the SAP landscape for representing parent-child relationships. SAP provides comprehensive documentation and numerous community resources for learning hierarchy fundamentals:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-data-models/hierarchy-definition" target="_blank" rel="noopener noreferrer"&gt;Hierarchy Definition | SAP Help Portal&lt;/A&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;&lt;A href="https://help.sap.com/docs/abap-cloud/abap-rap/treeview-with-read-only-capability?version=sap_btp" target="_blank" rel="noopener noreferrer"&gt;Treeviews with Read-Only Capabilities | SAP Help Portal&lt;/A&gt;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;A href="https://community.sap.com/t5/technology-blog-posts-by-sap/cds-how-to-define-hierarchy-view/ba-p/13758059" target="_self"&gt;SAP Community: CDS Hierarchy Articles&lt;/A&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;This article focuses specifically on utilizing CDS hierarchies within RAP-compliant value helps&lt;/STRONG&gt; and demonstrating how to incorporate hierarchical search templates alongside the flat templates created in Part 1.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Use Case:&lt;/STRONG&gt; Hierarchies are particularly powerful in domains like Asset Management, where technical objects form complex parent-child structures that users need to navigate when making selections.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Business Context: Asset Management-&amp;gt; Hierarchical Relationships&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In Asset Management, technical objects naturally form hierarchical structures that reflect real-world installations and organizational relationships:&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Functional Location Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent functional locations contain child functional locations&lt;/LI&gt;&lt;LI&gt;Example: TATM ‚Üí TATM-UT3 ‚Üí TATM-UT3-001&lt;/LI&gt;&lt;LI&gt;Represents physical plant structure and organizational grouping&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Equipment Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Equipment can be installed under functional locations&lt;/LI&gt;&lt;LI&gt;Equipment can be installed under other equipment (sub-assemblies)&lt;/LI&gt;&lt;LI&gt;Example: Main equipment (11947458) contains sub-equipment (11947627)&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;Mixed Hierarchies:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Equipment installed at functional locations&lt;/LI&gt;&lt;LI&gt;Sub-equipment installed under main equipment&lt;/LI&gt;&lt;LI&gt;Creates complex parent-child navigation &lt;SPAN&gt;requirements&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;A sample Hierarchy in Asset Management:&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Transaction: IH01 - Structure List" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350113i6B449DCB4E2430AE/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765275145771.png" alt="Transaction: IH01 - Structure List" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Transaction: IH01 - Structure List&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Why Hierarchical Value Helps Matter:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;When users select technical objects in business processes (work orders, maintenance notifications, asset transfers), they need to:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Understand the installation hierarchy&lt;/LI&gt;&lt;LI&gt;Navigate parent-child relationships visually&lt;/LI&gt;&lt;LI&gt;Select objects while seeing their organizational context&lt;/LI&gt;&lt;LI&gt;Identify relationships between equipment and functional locations&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;Standard flat list value helps lose this critical hierarchical context, making object selection difficult and error-prone in complex asset structures.&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;Implementation: Building the Hierarchical VDM Model &lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 1: Interface View (I-View) with Parent Association&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The foundation of any CDS hierarchy is a self-association that establishes the parent-child relationship.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="I-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350176i90BA3A7BE43AA7E5/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765276862163.png" alt="I-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;I-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Elements:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Self-Association _ParentNode:&lt;/STRONG&gt; Establishes the many-to-one parent relationship&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Cardinality [0..1]:&lt;/STRONG&gt; Each node has either zero (root) or one parent&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Join Condition:&lt;/STRONG&gt; Links child's SuperiorTechnicalObject to parent's TechnicalObject&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This I-View serves as the data foundation, providing the parent-child relationship that the hierarchy view will consume.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 2: Hierarchy View Definition&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The hierarchy view transforms the I-View's parent association into an actual hierarchical structure with defined traversal rules.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchy View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350177i06598EFF9C04E570/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765276926694.png" alt="Hierarchy View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchy View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Hierarchy Annotations:&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;source ZAR_I_TechObjHierarchy:&lt;/STRONG&gt; References the I-View containing the parent association&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;child to parent association _ParentNode:&lt;/STRONG&gt; Specifies which association defines the hierarchy&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;start where SuperiorTechnicalObject is initial:&lt;/STRONG&gt; Defines root nodes (no parent = top of hierarchy)&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;siblings order by TechnicalObject:&lt;/STRONG&gt; Sorts nodes at the same level&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;multiple parents not allowed:&lt;/STRONG&gt; Enforces strict tree structure (each node has max one parent)&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;This hierarchy view establishes the traversal logic and structural rules for displaying the parent-child relationships.&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 3: Consumption (C-View) Definition&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;The consumption view serves as the bridge between the CDS hierarchy and the collective value help framework. It exposes the hierarchy as a searchable value help provider while maintaining the hierarchical data structure.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350178i1A66EA4BBEADFDAB/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1765277179651.png" alt="C-View" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Critical Annotations:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;@ObjectModel.supportedCapabilities&lt;/STRONG&gt;&lt;BR /&gt;&lt;STRONG&gt;#VALUE_HELP_PROVIDER&lt;/STRONG&gt;: Enables this view to provide value help data&lt;BR /&gt;&lt;STRONG&gt;#SEARCHABLE_ENTITY&lt;/STRONG&gt;: Allows search functionality within the value help dialog&lt;BR /&gt;These capabilities are essential for user interaction&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1599241"&gt;@odata&lt;/a&gt;.hierarchy.recursiveHierarchy: [{ entity.name: 'ZAR_I_TechObjHierarchyView' }]&lt;/STRONG&gt;&lt;BR /&gt;THE CRITICAL HIERARCHICAL LINK&lt;BR /&gt;&lt;STRONG&gt;Note:&lt;/STRONG&gt; The entity name should reference the &lt;STRONG&gt;Hierarchy View&lt;/STRONG&gt; (from Step 2), not the I-View or C-View itself.&lt;BR /&gt;Points to the CDS hierarchy view created in Step 2&lt;BR /&gt;Instructs OData V4 service to use hierarchical structure&lt;BR /&gt;Without this annotation, hierarchy won't display in value help&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;association of many to one ... as _ParentNode&lt;/STRONG&gt;&lt;BR /&gt;Recreates the parent association in the consumption layer&lt;BR /&gt;Must match the join conditions from the I-View&lt;BR /&gt;Required for OData V4 hierarchy metadata generation&lt;BR /&gt;Links both TechnicalObject AND TechObjIsEquipOrFuncnLoc (composite key)&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;Step 4: Including Hierarchical Template in Collective Value Help&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;Now we integrate the hierarchical search template into our existing collective value help framework from Part 1:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V2 Metadata Extension" style="width: 742px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350276iA574D0E8B7D628A7/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284016068.png" alt="CVH V2 Metadata Extension" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V2 Metadata Extension&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V4 Metadata Extension" style="width: 785px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350277i534D6BAD5BEC6D23/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765284037633.png" alt="CVH V4 Metadata Extension" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V4 Metadata Extension&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Definition" style="width: 698px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350278iAF30882ADD5E2AB7/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_2-1765284142136.png" alt="Service Definition" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Definition&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;OData V2 Service Binding: The Limitation&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding OData V2" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350279i5E8C2D9DE435F840/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_3-1765284199980.png" alt="Service Binding OData V2" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding OData V2&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;This eliminates the possibility of incorporating hierarchical search templates via CDS hierarchy in V2 collective value helps.&lt;/STRONG&gt; OData V2's protocol limitations prevent hierarchy visualization in value help dialogs&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;OData V4 Service Binding: The Solution Path&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Service Binding OData V4" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350280i61F5F556EF135F3C/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284407687.png" alt="Service Binding OData V4" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Service Binding OData V4&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;The V4 service binding successfully exposes the hierarchical template without errors.&lt;/P&gt;&lt;H3 id="toc-hId-1895640971"&gt;&lt;BR /&gt;The Problem - Flat List Display&lt;/H3&gt;&lt;P class=""&gt;Even with a properly defined hierarchy view exposed in V4, the initial preview reveals an unexpected result:&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Flat List Display (as opposed to expected Hierarchical display)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350282i95E36C0C3779F7B5/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765284477750.png" alt="Flat List Display (as opposed to expected Hierarchical display)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Flat List Display (as opposed to expected Hierarchical display)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;&lt;BR /&gt;The Problem:&lt;BR /&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Despite having a hierarchical CDS view, the value help displays data as a &lt;/SPAN&gt;&lt;STRONG&gt;flat list&lt;/STRONG&gt;&lt;SPAN&gt; without any parent-child visualization. Users see individual records but lose all hierarchical context.&lt;/SPAN&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;Why This Happens:&lt;BR /&gt;&lt;/STRONG&gt;&lt;SPAN&gt;Creating a CDS hierarchy view is necessary but &lt;/SPAN&gt;&lt;STRONG&gt;not sufficient&lt;/STRONG&gt;&lt;SPAN&gt; for hierarchical display in value helps. The RAP framework requires &lt;EM&gt;explicit UI presentation instructions&lt;/EM&gt; to render hierarchy in the value help dialog.&lt;/SPAN&gt;&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;The Missing Piece:&lt;/STRONG&gt; The framework needs explicit instructions via presentation variant annotations to understand that this data should be rendered as a hierarchy tree, not a flat table. Without these annotations, OData V4 treats the hierarchy view as just another data source.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;The Solution - Presentation Variant Annotations&lt;/STRONG&gt;&lt;BR /&gt;To provision hierarchical display in value helps, we must add specific presentation variant annotations that declare hierarchical visualization intent.&lt;BR /&gt;&lt;BR /&gt;&lt;U&gt;Consumption View (C-View) Annotations&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="C-View (Presentation Variant Added)" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350296i16DB4408E668ECBE/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765284859373.png" alt="C-View (Presentation Variant Added)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;C-View (Presentation Variant Added)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;A presentation variant annotation needs to be included here which will contain the InitialExpansionLevel for the hierarchy and&amp;nbsp; a property RecursiveHierarchyQualifier.&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;RecursiveHierarchyQualifier&lt;/STRONG&gt; - This annotation contains a string with the name of the hierarchy view and make possible that the data is then shown on UI as tree table. The projection view should also have the annotation&lt;BR /&gt;&lt;BR /&gt;&lt;SPAN&gt;&lt;STRONG&gt;InitialExpansionLevel&lt;/STRONG&gt; - This annotation indicates up to which level a display hierarchy shall be initially expanded.&lt;/SPAN&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;U&gt;Collective Value Help Metadata Extension&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="CVH V4 Metadata Extension (Presentation Variant annotation added)" style="width: 668px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350312i4D5761FE4F127D32/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_0-1765285284629.png" alt="CVH V4 Metadata Extension (Presentation Variant annotation added)" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;CVH V4 Metadata Extension (Presentation Variant annotation added)&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;A &lt;SPAN&gt;&lt;STRONG&gt;presentationVariantQualifier&lt;/STRONG&gt; annotation needs to be included here, which should've the same value as the Qualifier in the C-View, i.e., '&lt;STRONG&gt;HIERARCHY&lt;/STRONG&gt;', in this case. This annotation&amp;nbsp;indicates how the value help result should be displayed.&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;&lt;STRONG&gt;The Result: Hierarchical Value Help in Action&lt;/STRONG&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="Hierarchical value help display" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350315i8BC8724DE1A9A35B/image-size/large?v=v2&amp;amp;px=999" role="button" title="Abhinav_Roy_1-1765285480130.png" alt="Hierarchical value help display" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;Hierarchical value help display&lt;/span&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Success! The hierarchical variant now displays&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent-child relationships visualized as tree structure&lt;/LI&gt;&lt;LI&gt;Expand/collapse controls for navigation&lt;/LI&gt;&lt;LI&gt;Indentation showing hierarchy levels&lt;/LI&gt;&lt;LI&gt;Seamless integration with flat templates from Part 1&lt;/LI&gt;&lt;LI&gt;Full hierarchy traversal in value help dialog&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;User Experience - End Users can now&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Switch between flat and hierarchical search templates&lt;/LI&gt;&lt;LI&gt;Navigate parent-child relationships visually&lt;/LI&gt;&lt;LI&gt;Expand/collapse hierarchy nodes and even the entire Tree View&lt;/LI&gt;&lt;LI&gt;Select objects while understanding their organizational context&lt;/LI&gt;&lt;LI&gt;See equipment installation hierarchies and functional location structures&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Key Takeaways: When to Use Hierarchical Collective Value Helps&lt;BR /&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;&lt;U&gt;&lt;STRONG&gt;Use Hierarchical Patterns When&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Parent-Child Relationships Matter: Business objects naturally form hierarchies (org structures, location hierarchies etc)&lt;/LI&gt;&lt;LI&gt;Context Aids Selection: Users need to see relationships to make correct selections&lt;/LI&gt;&lt;LI&gt;Navigation is Important: Users need to browse up/down hierarchies during selection&lt;/LI&gt;&lt;LI&gt;OData V4 is Available: V2 protocol does not support hierarchy visualization&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Implementation Checklist&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Define I-View with self-association (_ParentNode)&lt;/LI&gt;&lt;LI&gt;Create hierarchy view with traversal rules (start where, siblings order by)&lt;/LI&gt;&lt;LI&gt;Use OData V4 service binding (V2 not supported)&lt;/LI&gt;&lt;LI&gt;Add presentation variant in C-View&lt;/LI&gt;&lt;LI&gt;Reference presentation variant in CVH metadata extension&lt;/LI&gt;&lt;LI&gt;Test expand/collapse and hierarchy navigation&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Key Implementation points&lt;/STRONG&gt;&lt;/U&gt;:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;Cardinality Enforcement: multiple parents not allowed ensures tree structure&lt;/LI&gt;&lt;LI&gt;Root Node Definition: start where clause correctly identifies top-level nodes&lt;/LI&gt;&lt;LI&gt;Presentation Variant annotation must be added in&amp;nbsp;C-View and CVH metadata&lt;/LI&gt;&lt;LI&gt;Qualifier Consistency: Same qualifier in C-View and CVH metadata&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Series Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;This two-part series has explored the complete spectrum of collective value helps in RAP:&lt;BR /&gt;&lt;STRONG&gt;&lt;U&gt;Part 1 established the foundation&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Basic collective value help concepts and structure&lt;/LI&gt;&lt;LI&gt;Implementation across OData V2 and V4 service bindings&lt;/LI&gt;&lt;LI&gt;Service binding architectural differences&lt;/LI&gt;&lt;LI&gt;Nested value help workarounds&lt;/LI&gt;&lt;LI&gt;Multi-dimensional search capabilities&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;U&gt;Part 2 extended to advanced patterns&lt;/U&gt;&lt;/STRONG&gt;:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;Hierarchical CDS view construction&lt;/LI&gt;&lt;LI&gt;VDM model for hierarchy-enabled value helps&lt;/LI&gt;&lt;LI&gt;OData V2 protocol limitations&lt;/LI&gt;&lt;LI&gt;Presentation variant configuration for hierarchy visualization&lt;/LI&gt;&lt;LI&gt;Seamless integration of flat and hierarchical search templates&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Together, these patterns enable user-centric, multi-criteria search capabilities that leverage RAP's full value help framework while maintaining clean architectural separation and reusability.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Key Architectural Insight&lt;/STRONG&gt;:&lt;BR /&gt;Collective value helps in RAP provide a powerful, user-centric approach to value help management by enabling multi-criteria search through a single, reusable model. The addition of hierarchical display patterns extends this capability to complex business scenarios requiring parent-child navigation‚Äîdelivering a comprehensive search experience that adapts to diverse user needs.&lt;BR /&gt;&lt;BR /&gt;&lt;FONT size="5"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/FONT&gt;&lt;BR /&gt;Hierarchical collective value helps represent the convergence of RAP's value help framework with CDS hierarchy capabilities, enabling rich, context-aware search experiences for complex business objects. While implementation requires careful attention to presentation variant configuration and V4 protocol requirements, the result is a powerful pattern applicable across any SAP domain where parent-child relationships drive user decision-making.&lt;BR /&gt;Whether you're building asset management applications, organizational hierarchies, material master navigation, or any scenario requiring hierarchical context during selection, this pattern provides the foundation for delivering intuitive, efficient user experiences.&lt;BR /&gt;The combination of CDS hierarchies, collective value helps, and RAP's presentation variant framework creates a powerful combination for solving complex data selection challenges-no custom coding required, just optimal usage of key annotations.&lt;BR /&gt;Thank you for following this two-part series. I welcome your feedback, and experiences implementing collective value helps in your own RAP applications.&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/abap-blog-posts/collective-value-helps-in-rap-v2-and-v4-implementation-guide-part-2/ba-p/14286757"/>
    <published>2025-12-09T15:35:14.655000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/you-are-standing-in-an-open-field-inside-sap-gui/ba-p/14287253</id>
    <title>You Are Standing in an Open Field... Inside SAP GUI</title>
    <updated>2025-12-09T17:51:44.456000+01:00</updated>
    <author>
      <name>Alice_V</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/609259</uri>
    </author>
    <content>&lt;P class=""&gt;&lt;EM&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="unnamed (4).jpg" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350411i159705E00B82B76C/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="unnamed (4).jpg" alt="unnamed (4).jpg" /&gt;&lt;/span&gt;&lt;/EM&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P class=""&gt;&lt;EM&gt;How I ported Zork to ABAP in one day and made 46-year reunion of two mainframe legends possible.&lt;/EM&gt;&lt;/P&gt;&lt;P class=""&gt;1979 was quite a year for the mainframe: In Germany, &lt;STRONG&gt;SAP &lt;/STRONG&gt;released &lt;STRONG&gt;R/2&lt;/STRONG&gt;, the integrated ERP system that would define enterprise computing. In Massachusetts, &lt;STRONG&gt;Infocom &lt;/STRONG&gt;was founded to commercialize &lt;STRONG&gt;Zork&lt;/STRONG&gt;, the text adventure born on MIT's PDP-10 mainframes.&lt;/P&gt;&lt;P class=""&gt;For 46 years, they ran on parallel tracks. Until last month.&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;Microsoft &lt;/STRONG&gt;&lt;A class="" href="https://opensource.microsoft.com/blog/2025/11/20/preserving-code-that-shaped-generations-zork-i-ii-and-iii-go-open-source" target="_self" rel="nofollow noopener noreferrer"&gt;released the original source code&lt;/A&gt; for Zork I. The stars aligned. It was time for a family reunion.&lt;/P&gt;&lt;P class=""&gt;I got nostalgic. I wanted to play Zork I: The Great Underground Empire. But I didn't want to play it in a browser or a terminal. I wanted to play it where I spend my time: In SAP GUI.&lt;/P&gt;&lt;P class=""&gt;So, I decided to port the Z-Machine (Infocom's Virtual Machine) into SAP S/4HANA.&lt;/P&gt;&lt;P class=""&gt;The Z-Namespace destiny... you knew it. In SAP development, every custom object must start with the letter Z: &lt;EM&gt;(Also Y, but Y is not used widely. And no one knows why Y is not used)&lt;/EM&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The Machine: &lt;STRONG&gt;Z&lt;/STRONG&gt;-Machine.&lt;/LI&gt;&lt;LI&gt;The Transaction: ZORK.&lt;/LI&gt;&lt;LI&gt;The Package: $ZORK.&lt;/LI&gt;&lt;/UL&gt;&lt;P class=""&gt;So it felt like it was meant to be here.&lt;/P&gt;&lt;H3 id="ember770" id="toc-hId-1895665953"&gt;Building a VM in One Day (The "How")&lt;/H3&gt;&lt;P class=""&gt;"&lt;EM&gt;Alice&lt;/EM&gt;," you say, "&lt;EM&gt;Writing a Virtual Machine in ABAP takes weeks of reading bit-level specs.&lt;/EM&gt;"&lt;/P&gt;&lt;P class=""&gt;It took &lt;STRONG&gt;one day&lt;/STRONG&gt;.&lt;/P&gt;&lt;P class=""&gt;And I wrote almost none of it:&lt;/P&gt;&lt;DIV class=""&gt;&amp;nbsp;&lt;/DIV&gt;&lt;DIV class=""&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="ZORK T-CODE in SAP GUI" style="width: 872px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350406i8DBE61F8B148BACE/image-size/large?v=v2&amp;amp;px=999" role="button" title="zork-abap.png" alt="ZORK T-CODE in SAP GUI" /&gt;&lt;span class="lia-inline-image-caption" onclick="event.preventDefault();"&gt;ZORK T-CODE in SAP GUI&lt;/span&gt;&lt;/span&gt;&lt;/DIV&gt;&lt;H3 id="ember775" id="toc-hId-1699152448"&gt;99% Vibe coded&lt;/H3&gt;&lt;P class=""&gt;I used &lt;STRONG&gt;VSP (Vibing-Steampunk)&lt;/STRONG&gt; ‚Äî my open-source bridge that gives &lt;STRONG&gt;Claude&lt;/STRONG&gt; (or Copilot/Codex/Mistral Vibe - any other Assistant) direct access to the SAP system via MCP. I treated the AI not as a chatbot, but as a Senior ABAP Developer who loves retro specs.&lt;/P&gt;&lt;P class=""&gt;Here is what happened when my Z-Machine crashed on the first turn:&lt;/P&gt;&lt;P class=""&gt;&lt;STRONG&gt;Me:&lt;/STRONG&gt; "It crashes when I try to LOOK. Plz &lt;STRONG&gt;debug&lt;/STRONG&gt;."&lt;/P&gt;&lt;P class=""&gt;Claude didn't guess. Using VSP, Claude:&lt;/P&gt;&lt;P class=""&gt;&amp;nbsp;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;Set a breakpoint&lt;/STRONG&gt; in the ABAP code.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Ran the game&lt;/STRONG&gt; inside SAP.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Inspected the memory&lt;/STRONG&gt; (finding a Big-Endian vs Little-Endian mismatch in the object table).&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Fixed the code.&lt;/STRONG&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P class=""&gt;This isn't just generating text. This is &lt;STRONG&gt;Digital Archaeology&lt;/STRONG&gt; assisted by &lt;STRONG&gt;Artificial Intelligence&lt;/STRONG&gt;.&lt;/P&gt;&lt;H3 id="ember782" id="toc-hId-1502638943"&gt;Why This Matters&lt;/H3&gt;&lt;P class=""&gt;I now have Zork running in S/4HANA.&lt;/P&gt;&lt;P class=""&gt;But the real story isn't the game. It's the capability.&lt;/P&gt;&lt;P class=""&gt;If an AI agent can read a 1980s technical spec, navigate a custom ABAP stack, and debug runtime errors to reunite two pieces of 1979 history...&lt;/P&gt;&lt;P class=""&gt;...imagine what it can do for your 2005 legacy code ^_^ (Yes, even with ECC).&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;The Repo (ZORK-ABAP): &lt;A class="" href="https://github.com/oisee/zork-abap" target="_self" rel="nofollow noopener noreferrer"&gt;https://github.com/oisee/zork-abap&lt;/A&gt;&lt;/LI&gt;&lt;LI&gt;The Tool (VSP): &lt;A class="" href="https://github.com/oisee/vibing-steampunk" target="_self" rel="nofollow noopener noreferrer"&gt;https://github.com/oisee/vibing-steampunk&lt;/A&gt; - ADT-to-MCP bridge.&lt;/LI&gt;&lt;/UL&gt;&lt;P class=""&gt;&lt;STRONG&gt;Credits:&lt;/STRONG&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;Infocom (1979)&lt;/STRONG&gt; for the Z-Machine.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;SAP (1979)&lt;/STRONG&gt; for the R/2 legacy that led us here.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Graham Nelson &lt;/STRONG&gt;for the Z-Machine Standards Document.&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;Claude (2025)&lt;/STRONG&gt; for writing the code.&lt;/LI&gt;&lt;/UL&gt;&lt;P class=""&gt;&lt;EM&gt;P.S. West of House. There is a transport request here. &lt;/EM&gt;&lt;/P&gt;&lt;P class=""&gt;#SAP #ABAP #Zork #RetroGaming #AI #MCP #DigitalArchaeology #OpenSource #Microsoft&lt;/P&gt;&lt;P class=""&gt;Shout out to &lt;A class="" href="https://www.linkedin.com/in/shanselman/" target="_blank" rel="noopener nofollow noreferrer"&gt;Scott Hanselman&lt;/A&gt;: Tnx for driving Open Source initiative ^_^&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/you-are-standing-in-an-open-field-inside-sap-gui/ba-p/14287253"/>
    <published>2025-12-09T17:51:44.456000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/enterprise-architecture-blog-posts/hana-powered-amdp-crud-framework-a-complete-workflow-from-adt-development/ba-p/14286670</id>
    <title>HANA-Powered AMDP CRUD Framework: A Complete Workflow from ADT Development to ABAP Execution</title>
    <updated>2025-12-09T19:16:17.595000+01:00</updated>
    <author>
      <name>rameshreddy_k</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/880970</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;1.Introduction&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;In modern SAP applications, performance-critical database operations can be executed directly in&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;SAP HANA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;using&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;AMDP (ABAP Managed Database Procedures)&lt;/SPAN&gt;&lt;SPAN&gt;. This approach allows complex CRUD (Create, Read, Update,&amp;nbsp;Delete) operations to be processed efficiently in HANA while keeping the ABAP code clean and maintainable.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;In this guide, we explain how to implement a full&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;CRUD solution&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;using an AMDP class (&lt;/SPAN&gt;&lt;SPAN&gt;ZCRUD_PROCEDURE&lt;/SPAN&gt;&lt;SPAN&gt;) and consume it from an ABAP report with Data Base object.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;By the end, you will understand:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;How to design an AMDP class for CRUD operations&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;How to call AMDP methods from ABAP&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;How to handle different modes: Read, Update, Create, Delete&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;How to display results or messages to users&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;2.Business Requirement&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;A business user needs to manage&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;order data&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;stored in the custom&amp;nbsp;table&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ZCDS_CRUD&lt;/SPAN&gt;&lt;SPAN&gt;. The requirements include:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Read:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Display existing records in display-only mode.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Update:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Pre-fill existing records and allow editing of fields.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Create:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Insert new records with input from the user.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Delete:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;Remove a record and display a success/failure message.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Performance:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;All operations should&amp;nbsp;execute&amp;nbsp;directly on HANA using AMDP for speed.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;&lt;SPAN&gt;To achieve this, we implement:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;An&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;AMDP class&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;containing&amp;nbsp;HANA&amp;nbsp;SQL Script&amp;nbsp;logic for all CRUD operations.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;An&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;ABAP report&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;that interacts with the AMDP class and provides an interactive interface for users.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;3.Technical Components&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;ABAP Class (AMDP):&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ZCRUD_PROCEDURE&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Interface:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;IF_AMDP_MARKER_HDB&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Methods:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;READ_DATA&lt;/SPAN&gt;&lt;SPAN&gt;,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;READ_ALL_DATA&lt;/SPAN&gt;&lt;SPAN&gt;,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;INSERT_DATA&lt;/SPAN&gt;&lt;SPAN&gt;,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;UPDATE_DATA&lt;/SPAN&gt;&lt;SPAN&gt;,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;DELETE_DATA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;SQLScript&amp;nbsp;logic for CRUD directly on HANA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;ABAP Report:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ZCRUD_REPORT_AMDP&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Selection screen for input fields and CRUD mode checkboxes&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Calls AMDP methods&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Handles display, editable fields, empty fields for creation, and&amp;nbsp;delete&amp;nbsp;confirmation&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;4.Application Flow&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;SPAN&gt;User opens report&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;ZCRUD_REPORT_AMDP&lt;/SPAN&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;User enters an&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Order Number&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;(&lt;/SPAN&gt;&lt;SPAN&gt;P_ORD&lt;/SPAN&gt;&lt;SPAN&gt;) and optionally&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Item&lt;/SPAN&gt;&lt;SPAN&gt;,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;UOM&lt;/SPAN&gt;&lt;SPAN&gt;,&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Quantity&lt;/SPAN&gt;&lt;SPAN&gt;.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;User selects one or more operation modes:&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;Read, Create, Update,&amp;nbsp;Delete.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Report calls&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;AMDP class methods&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;depending on the selected mode.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Read:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Calls&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;READ_DATA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Displays record in display-only format&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Update:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Calls&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;READ_DATA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;to fetch record&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Prefills fields with existing data&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Updates using&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;UPDATE_DATA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Create:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Uses empty or input fields to call&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;INSERT_DATA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;STRONG&gt;&lt;SPAN&gt;Delete:&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Calls&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;DELETE_DATA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Displays success/failure message&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN&gt;5.Key Logic Implementation&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;FONT size="4"&gt;5.1 AMDP Class Definition&amp;nbsp;&lt;/FONT&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcrud_procedure DEFINITION 
  PUBLIC 
  FINAL 
  CREATE PUBLIC. 
 
PUBLIC SECTION. 
  TYPES: tt_type TYPE TABLE OF zcds_crud. 
  INTERFACES if_amdp_marker_hdb. 
 
  CLASS-METHODS read_data 
    IMPORTING VALUE(iv_order) TYPE zcds_crud-order_number 
    EXPORTING VALUE(it_data) TYPE tt_type. 
 
  CLASS-METHODS read_all_data 
    EXPORTING VALUE(it_data) TYPE tt_type. 
 
  CLASS-METHODS insert_data 
    IMPORTING VALUE(iv_order) TYPE zcds_crud-order_number 
              VALUE(iv_item)  TYPE zcds_crud-item_number 
              VALUE(iv_uom)   TYPE zcds_crud-uom 
              VALUE(iv_qty)   TYPE zcds_crud-quantity. 
 
  CLASS-METHODS update_data 
    IMPORTING VALUE(iv_order) TYPE zcds_crud-order_number 
              VALUE(iv_item)  TYPE zcds_crud-item_number 
              VALUE(iv_uom)   TYPE zcds_crud-uom 
              VALUE(iv_qty)   TYPE zcds_crud-quantity. 
 
  CLASS-METHODS delete_data 
    IMPORTING VALUE(iv_order) TYPE zcds_crud-order_number. 
 
ENDCLASS. &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;5.2 AMDP Method Implementations (&lt;/SPAN&gt;&lt;SPAN class=""&gt;SQL Script&lt;/SPAN&gt;&lt;SPAN class=""&gt;)&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcrud_procedure IMPLEMENTATION. 
 
METHOD read_data BY DATABASE PROCEDURE 
  FOR HDB 
  LANGUAGE SQLSCRIPT 
  USING zcds_crud. 
 
  it_data = SELECT * FROM zcds_crud WHERE order_number = :iv_order; 
 
ENDMETHOD. 
 
METHOD read_all_data BY DATABASE PROCEDURE 
  FOR HDB 
  LANGUAGE SQLSCRIPT 
  USING zcds_crud. 
 
  it_data = SELECT * FROM zcds_crud; 
 
ENDMETHOD. 
 
METHOD insert_data BY DATABASE PROCEDURE 
  FOR HDB 
  LANGUAGE SQLSCRIPT 
  USING zcds_crud. 
 
  INSERT INTO zcds_crud (order_number, item_number, uom, quantity) 
  VALUES (:iv_order, :iv_item, :iv_uom, :iv_qty); 
 
ENDMETHOD. 
 
METHOD update_data BY DATABASE PROCEDURE 
  FOR HDB 
  LANGUAGE SQLSCRIPT 
  USING zcds_crud. 
 
  UPDATE zcds_crud 
  SET item_number = :iv_item, 
      uom         = :iv_uom, 
      quantity    = :iv_qty 
  WHERE order_number = :iv_order; 
 
ENDMETHOD. 
 
METHOD delete_data BY DATABASE PROCEDURE 
  FOR HDB 
  LANGUAGE SQLSCRIPT 
  USING zcds_crud. 
 
  DELETE FROM zcds_crud WHERE order_number = :iv_order; 
 
ENDMETHOD. 
 
ENDCLASS. &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;5.3 ABAP Report: Selection Screen&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;REPORT zcrud_report_amdp. 
 
PARAMETERS: p_ord TYPE zcds_crud-order_number OBLIGATORY, 
            p_read  AS CHECKBOX DEFAULT abap_true, 
            p_crea  AS CHECKBOX, 
            p_upd   AS CHECKBOX, 
            p_del   AS CHECKBOX. 
 
PARAMETERS: p_item TYPE zcds_crud-item_number, 
            p_uom  TYPE zcds_crud-uom, 
            p_qty  TYPE zcds_crud-quantity. 
 
DATA: lt_data TYPE zcrud_procedure=&amp;gt;tt_type, 
      ls_data TYPE zcds_crud. &lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;5.4 ABAP Report: Execution and CRUD Operations&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;START-OF-SELECTION.

  CASE 'X'.
    WHEN rb_read.
      PERFORM read_data.
    WHEN rb_crt.
      PERFORM create_screen.
    WHEN rb_upd.
      PERFORM update_screen.
    WHEN rb_dlt.
      PERFORM delete_data.
  ENDCASE.


*-------------------------------------------------------------*
* READ MODE ‚Äì SHOW DATA IN ALV (Display Only)
*-------------------------------------------------------------*
FORM read_data.

  zcrud_procedure=&amp;gt;read_data(
    EXPORTING iv_order = p_ord
    IMPORTING it_data  = lt_data ).

  IF lt_data IS INITIAL.
    WRITE: / 'No record found'.
    RETURN.
  ENDIF.

  CALL SCREEN 100.

ENDFORM.


*-------------------------------------------------------------*
* CREATE MODE ‚Äì EMPTY ALV WITH HEADERS (Editable)
*-------------------------------------------------------------*
FORM create_screen.

  CLEAR lt_data.
  ls_data-order_number = p_ord.
  ls_data-item_number  = p_item.
  ls_data-uom          = p_uom.
  ls_data-quantity     = p_qty.

  TRY.
      zcrud_procedure=&amp;gt;insert_data(
        EXPORTING
          iv_order = ls_data-order_number
          iv_item  = ls_data-item_number
          iv_uom   = ls_data-uom
          iv_qty   = ls_data-quantity
      ).
*      WRITE: / 'Record created successfully.'.
      MESSAGE 'Record created successfully' TYPE 'S'.
    CATCH cx_amdp_error INTO DATA(lx).
      WRITE: / 'Error creating record:', lx-&amp;gt;get_text( ).
  ENDTRY.
  "Add empty row
*  APPEND INITIAL LINE TO lt_data.
  append ls_data to lt_data.

  CALL SCREEN 200.

ENDFORM.


*-------------------------------------------------------------*
* UPDATE MODE ‚Äì ORDER DISPLAY ONLY, OTHERS EDITABLE
*-------------------------------------------------------------*
FORM update_screen.

  IF rb_upd = abap_true.
  zcrud_procedure=&amp;gt;read_data(
    EXPORTING iv_order = p_ord
    IMPORTING it_data = lt_data
  ).

  IF lt_data IS INITIAL.
     MESSAGE: 'No record found for update' type 'S'.
  ELSE.
    ls_data = lt_data[ 1 ].
    " Editable mode: overwrite with screen input if provided
    IF p_item IS NOT INITIAL.
      ls_data-item_number = p_item.
    ENDIF.
    IF p_uom IS NOT INITIAL.
      ls_data-uom = p_uom.
    ENDIF.
    IF p_qty IS NOT INITIAL.
      ls_data-quantity = p_qty.
    ENDIF.

    TRY.
        zcrud_procedure=&amp;gt;update_data(
          EXPORTING
            iv_order = ls_data-order_number
            iv_item  = ls_data-item_number
            iv_uom   = ls_data-uom
            iv_qty   = ls_data-quantity
        ).
        MESSAGE 'Record updated successfully' TYPE 'S'.
      CATCH cx_amdp_error INTO DATA(lxupd).
        MESSAGE 'Error updating record:' TYPE 'S'.
    ENDTRY.
  ENDIF.
ENDIF.

  CALL SCREEN 300.

ENDFORM.


*-------------------------------------------------------------*
* DELETE MODE
*-------------------------------------------------------------*
FORM delete_data.

  zcrud_procedure=&amp;gt;delete_data(
    EXPORTING iv_order = p_ord ).

  MESSAGE 'Record Deleted successfully' TYPE 'S'.

ENDFORM.


*--------------------------------------------------------------------*
* SCREEN 100 ‚Äì READ MODE (DISPLAY ALV)
*--------------------------------------------------------------------*
MODULE status_0100 OUTPUT.
  SET PF-STATUS 'SCREEN100'.

  CREATE OBJECT gr_cust
    EXPORTING container_name = 'CC_ALV'.

  CREATE OBJECT gr_alv
    EXPORTING i_parent = gr_cust.

  CALL METHOD gr_alv-&amp;gt;set_table_for_first_display
    EXPORTING i_structure_name = 'ZCDS_CRUD'
    CHANGING  it_outtab        = lt_data.

ENDMODULE.




*--------------------------------------------------------------------*
* SCREEN 200 ‚Äì CREATE MODE (Editable)
*--------------------------------------------------------------------*
MODULE status_0200 OUTPUT.
  SET PF-STATUS 'SCREEN200'.

  CREATE OBJECT gr_cust
    EXPORTING container_name = 'CC_ALV'.

  CREATE OBJECT gr_alv
    EXPORTING i_parent = gr_cust.

  CALL METHOD gr_alv-&amp;gt;set_table_for_first_display
    EXPORTING i_structure_name = 'ZCDS_CRUD'
              i_default   = 'X'
    CHANGING  it_outtab        = lt_data.

ENDMODULE.

MODULE user_command_0200 INPUT.

  case sy-ucomm.
    when 'BACK'.
      LEAVE TO SCREEN 0.

    ENDCASE.

  READ TABLE lt_data INTO ls_data INDEX 1.

  TRY.
      zcrud_procedure=&amp;gt;insert_data(
        EXPORTING
          iv_order = ls_data-order_number
          iv_item  = ls_data-item_number
          iv_uom   = ls_data-uom
          iv_qty   = ls_data-quantity ).
      MESSAGE 'Record Created Successfully' TYPE 'S'.
    CATCH cx_amdp_error INTO DATA(lx).
      MESSAGE lx-&amp;gt;get_text( ) TYPE 'E'.
  ENDTRY.

  LEAVE TO SCREEN 0.
ENDMODULE.


*--------------------------------------------------------------------*
* SCREEN 300 ‚Äì UPDATE MODE (Order display only)
*--------------------------------------------------------------------*
MODULE status_0300 OUTPUT.
  SET PF-STATUS 'SCREEN300'.

  DATA lt_fieldcat TYPE lvc_t_fcat.
  DATA ls_fcat     TYPE lvc_s_fcat.

  "ITEM/UOM/QTY editable
  LOOP AT lt_data INTO ls_data.
  ENDLOOP.

  "Build field catalog
  ls_fcat-fieldname = 'ORDER_NUMBER'.
  ls_fcat-scrtext_l = 'Order'.
  ls_fcat-edit      = ''.
  APPEND ls_fcat TO lt_fieldcat.

  CLEAR ls_fcat.
  ls_fcat-fieldname = 'ITEM_NUMBER'.
  ls_fcat-scrtext_l = 'Item'.
  ls_fcat-edit      = 'X'.
  APPEND ls_fcat TO lt_fieldcat.

  CLEAR ls_fcat.
  ls_fcat-fieldname = 'UOM'.
  ls_fcat-scrtext_l = 'UOM'.
  ls_fcat-edit      = 'X'.
  APPEND ls_fcat TO lt_fieldcat.

  CLEAR ls_fcat.
  ls_fcat-fieldname = 'QUANTITY'.
  ls_fcat-scrtext_l = 'Qty'.
  ls_fcat-edit      = 'X'.
  APPEND ls_fcat TO lt_fieldcat.

  CREATE OBJECT gr_cust
    EXPORTING container_name = 'CC_ALV'.

  CREATE OBJECT gr_alv
    EXPORTING i_parent = gr_cust.

  CALL METHOD gr_alv-&amp;gt;set_table_for_first_display
    EXPORTING
      is_layout       = VALUE lvc_s_layo( )
    CHANGING
      it_outtab       = lt_data
      it_fieldcatalog = lt_fieldcat.

ENDMODULE.

MODULE user_command_0300 INPUT.

  case sy-ucomm.
    when 'BACK'.
      LEAVE TO SCREEN 0.

    ENDCASE.

  READ TABLE lt_data INTO ls_data INDEX 1.

  TRY.
      zcrud_procedure=&amp;gt;update_data(
        EXPORTING
          iv_order = ls_data-order_number
          iv_item  = ls_data-item_number
          iv_uom   = ls_data-uom
          iv_qty   = ls_data-quantity ).
      MESSAGE 'Record Updated Successfully' TYPE 'S'.
    CATCH cx_amdp_error INTO DATA(lxupd).
      MESSAGE lxupd-&amp;gt;get_text( ) TYPE 'E'.
  ENDTRY.

  LEAVE TO SCREEN 0.
ENDMODULE.
*&amp;amp;---------------------------------------------------------------------*
*&amp;amp;      Module  USER_COMMAND_0100  INPUT
*&amp;amp;---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0100 INPUT.

  case sy-ucomm.
    when 'BACK'.
      LEAVE TO SCREEN 0.

    ENDCASE.

ENDMODULE.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;7. CRUD Operation Outputs (Screenshots Section)&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;7.1 READ Operation Output&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_0-1765268285973.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350042i91BA64CA482ABEF8/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_0-1765268285973.png" alt="rameshreddy_k_0-1765268285973.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_1-1765268329378.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350043i659C7B772A3DEA1A/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_1-1765268329378.png" alt="rameshreddy_k_1-1765268329378.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;7.2 CREATE Operation Output&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_1-1765275266648.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350114iDDF3B687BE10DB5E/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_1-1765275266648.png" alt="rameshreddy_k_1-1765275266648.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_2-1765275295767.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350115iF1758D09862FAD43/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_2-1765275295767.png" alt="rameshreddy_k_2-1765275295767.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;7.3 UPDATE Operation Output&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_3-1765275616493.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350122i03269AE5AE06BDEA/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_3-1765275616493.png" alt="rameshreddy_k_3-1765275616493.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_4-1765275636486.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350124iC8616148AE2868F9/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_4-1765275636486.png" alt="rameshreddy_k_4-1765275636486.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;7.4 DELETE Operation Output&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_5-1765276192675.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350141i5B5897A352A213D7/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_5-1765276192675.png" alt="rameshreddy_k_5-1765276192675.png" /&gt;&lt;/span&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="rameshreddy_k_6-1765276228249.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350157iB791E47C618C4811/image-size/medium?v=v2&amp;amp;px=400" role="button" title="rameshreddy_k_6-1765276228249.png" alt="rameshreddy_k_6-1765276228249.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;6. Conclusion&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;SPAN class=""&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;SPAN&gt;This implementation&amp;nbsp;demonstrates&amp;nbsp;how to:&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;SPAN&gt;Use&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;AMDP classes&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;to handle CRUD operations directly on HANA&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Separate&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;data logic&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;(AMDP) from&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;presentation logic&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;(ABAP report)&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Handle&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;different CRUD modes&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;efficiently&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;LI&gt;&lt;SPAN&gt;Provide clear user messages for all operations&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;SPAN&gt;This approach ensures&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;performance, maintainability, and user-friendliness&amp;nbsp;&lt;/SPAN&gt;&lt;SPAN&gt;while working with SAP HANA and ABAP together, and it can be extended to other database-intensive operations following the same pattern.&lt;/SPAN&gt;&lt;SPAN&gt;&amp;nbsp;&lt;/SPAN&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;SPAN class=""&gt;&lt;SPAN class=""&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/STRONG&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/enterprise-architecture-blog-posts/hana-powered-amdp-crud-framework-a-complete-workflow-from-adt-development/ba-p/14286670"/>
    <published>2025-12-09T19:16:17.595000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/rap-based-adobeform-with-custom-action-and-annotations/ba-p/14281893</id>
    <title>RAP BASED ADOBEFORM WITH CUSTOM ACTION and Annotations</title>
    <updated>2025-12-10T07:53:48.802000+01:00</updated>
    <author>
      <name>harsha_reddy24</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2263071</uri>
    </author>
    <content>&lt;P&gt;&lt;STRONG&gt;Introduction:&lt;/STRONG&gt;&lt;BR /&gt;In this blog, we explore how RAP and Adobe Forms can be integrated to deliver a fully digital, end-to-end document generation experience directly from Fiori. By leveraging custom actions, virtual elements, and media-stream handling, we can trigger Adobe Form generation from the UI, manage the file output within RAP, and enable users to download the PDF instantly‚Äîensuring a clean, cloud-ready and future-proof architecture.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Solution Overview:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In modern SAP applications, combining &lt;STRONG&gt;RAP (RESTful ABAP Programming Model)&lt;/STRONG&gt; with Adobe Forms unlocks a clean, scalable way to generate and manage documents directly from Fiori. By extending the Fiori Elements UI with a custom action through the Integrative Extension Controller, we can trigger Adobe form generation seamlessly from the frontend. Using RAP virtual elements and media-stream properties, the generated PDF can be stored, retrieved, and downloaded. This approach delivers a fully end-to-end, cloud-ready solution for document creation, storage, and user-triggered actions‚Äîall built natively within &lt;STRONG&gt;RAP&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Root Entity:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED         // No authorization checks required for read access
@EndUserText.label: 'ROOT ENTITY FOR ADOBE FORM'         // Description for display in tools
@Metadata.ignorePropagatedAnnotations: true              // Avoid unwanted propagated annotations

define root view entity ZRV_AFORM 
  as select from vbap                                    // Based on VBAP (Sales Order Item Data)
{

  /*-----------------------------------------------------------
    Key Fields for RAP Root Entity
  -----------------------------------------------------------*/
  key vbeln,          // Sales Document Number
  posnr,              // Item Number
  matnr,              // Material Number

  /*-----------------------------------------------------------
    Display text: Shown in UI for SEGW/Fiori preview
    Not used for actual functionality, only for readability.
  -----------------------------------------------------------*/
  'Preview(SEGW)' as ShowPDF,

  /*-----------------------------------------------------------
    Dynamic URL to download the Adobe Form PDF
    Format:
      /sap/opu/odata/SAP/ZRAP_ADOBE_FORM_SRV/adobeSet('&amp;lt;VBELN&amp;gt;')/$value
    This URL triggers GET_STREAM in the OData service.
  -----------------------------------------------------------*/
  concat(
    '/sap/opu/odata/SAP/ZRAP_ADOBE_FORM_SRV/adobeSet(''',
    concat( vbeln, ''')') /$value'
  ) as LinkToPDF

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;OData Service:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;Include &lt;STRONG&gt;vbeln&lt;/STRONG&gt; as a property in your entity type, and when the user provides a sales document number, the service should return the corresponding Adobe Form data in the response, implement &lt;STRONG&gt;GET_STREAM&lt;/STRONG&gt; Method .&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Implementation:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  METHOD /IWBEP/IF_MGW_APPL_SRV_RUNTIME~GET_STREAM.

    "---------------------------------------------------------------
    " Data Declarations
    "---------------------------------------------------------------
    DATA: lv_funcname   TYPE funcname,         " Generated FM name for Adobe Form
          ls_o_p        TYPE sfpoutputparams,  " Output parameters for Adobe Forms
          ls_formoutput TYPE fpformoutput,     " Adobe form output structure
          ls_stream     TYPE ty_s_media_resource,  " Stream returned to OData
          gv_bin_file   TYPE xstring.          " PDF binary data (unused variable)

    "---------------------------------------------------------------
    " Read Input Key from OData Request
    " Example: /sap/opu/odata/SRV/FormSet(vbeln='12345')/$value
    "---------------------------------------------------------------
    DATA(lv_vbeln) = VALUE vbeln_vl(
                        it_key_tab[ name = 'vbeln' ]-value OPTIONAL ).

    "---------------------------------------------------------------
    " STEP 1: Retrieve Adobe Form Generated Function Module
    "---------------------------------------------------------------
    TRY.
        CALL FUNCTION 'FP_FUNCTION_MODULE_NAME'
          EXPORTING
            i_name     = 'ZSALES_FORM_ITEMS'   " Adobe Form interface name
          IMPORTING
            e_funcname = lv_funcname.          " Generated FM name

        IF sy-subrc &amp;lt;&amp;gt; 0.
          RETURN.  " Stop processing if FM not found
        ENDIF.

        "-----------------------------------------------------------
        " STEP 2: Adobe Form Output Setup (Request PDF Only)
        "-----------------------------------------------------------
        ls_o_p-nodialog  = abap_true.   " No dialog popups
        ls_o_p-getpdf    = abap_true.   " Request PDF output
        ls_o_p-nopreview = abap_true.   " Skip preview

        " Open Adobe spool job
        CALL FUNCTION 'FP_JOB_OPEN'
          CHANGING
            ie_outputparams = ls_o_p
          EXCEPTIONS
            cancel          = 1
            usage_error     = 2
            system_error    = 3
            internal_error  = 4
            OTHERS          = 5.

      CATCH cx_root.
        " Ideally log or raise error
        RETURN.
    ENDTRY.

    "---------------------------------------------------------------
    " STEP 3: Call Adobe Form Generated Function Module
    "---------------------------------------------------------------
    CALL FUNCTION lv_funcname
      EXPORTING
        p_vbeln            = lv_vbeln         " Sales document number
      IMPORTING
        /1bcdwb/formoutput = ls_formoutput    " PDF Output (XSTRING)
      EXCEPTIONS
        usage_error        = 1
        system_error       = 2
        internal_error     = 3
        OTHERS             = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      RETURN.    " Handle form rendering errors
    ENDIF.

    "---------------------------------------------------------------
    " STEP 4: Close Adobe Print Job
    "---------------------------------------------------------------
    CALL FUNCTION 'FP_JOB_CLOSE'
      EXCEPTIONS
        usage_error    = 1
        system_error   = 2
        internal_error = 3
        OTHERS         = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      RETURN.
    ENDIF.

    "---------------------------------------------------------------
    " STEP 5: Populate OData Media Stream
    "---------------------------------------------------------------
    ls_stream-mime_type = 'application/pdf'.   " MIME type for PDF
    ls_stream-value     = ls_formoutput-pdf.   " XSTRING PDF data

    "---------------------------------------------------------------
    " STEP 6: Set Filename in Response Header
    "---------------------------------------------------------------
    DATA: ls_header   TYPE ihttpnvp,
          lv_filename TYPE string.

    " Dynamic file name e.g. SalesDoc_80001234.pdf
    lv_filename = |SalesDoc_{ lv_vbeln }.pdf|.

    ls_header-name  = 'Content-Disposition'.
    ls_header-value = |attachment; filename="{ lv_filename }"|.

    " Add header to OData HTTP response
    me-&amp;gt;set_header( is_header = ls_header ).

    "---------------------------------------------------------------
    " STEP 7: Return Stream to OData Framework
    "---------------------------------------------------------------
    CALL METHOD me-&amp;gt;copy_data_to_ref
      EXPORTING
        is_data = ls_stream
      CHANGING
        cr_data = er_stream.

  ENDMETHOD.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Projection View:&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;To expose the Adobe Form download link in the Fiori UI, I used a projection view with ui.lineItem and type: &lt;STRONG&gt;WITH_URL&lt;/STRONG&gt; so the PDF URL becomes directly clickable in the list and object page. The actual PDF content&amp;nbsp; BASE64&amp;nbsp; is not stored in the CDS view; instead,&lt;STRONG&gt; I used a RAP virtual element attach calculated by an ABAP class for Custom Action&lt;/STRONG&gt;. This virtual element lets me fetch and return the generated Adobe Form dynamically at runtime without persisting the binary in the database.&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED          // No auth checks for read access
@EndUserText.label: 'PV FOR ADOBE FORM'                   // Description of the view
@Metadata.ignorePropagatedAnnotations: true               // Prevent annotation inheritance from base view

define root view entity ZPV_AFORM 
  as projection on ZRV_AFORM                               // Projection on RAP consumption view
{

  /*-----------------------------------------------------------
    Key Field: Sales Document (VBELN)
    Displayed in UI (List + Object Page)
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.facet: [{ type: #IDENTIFICATION_REFERENCE }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 10 }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{ position: 10 }]
  key vbeln,

  /*-----------------------------------------------------------
    Item Number
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 20 }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{ position: 20 }]
  posnr,

  /*-----------------------------------------------------------
    Material
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{ position: 30 }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{ position: 30 }]
  matnr,

  /*-----------------------------------------------------------
    PDF Link Column (UI: Display as clickable URL)
    This displays a clickable link "Show PDF" in the List Report.
  -----------------------------------------------------------*/
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.lineItem: [{
     position: 10,
     type: #WITH_URL,      // URL-enabled column
     url: 'LinkToPDF'      // Field used as hyperlink
  }]
  &lt;a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1445379"&gt;@ui&lt;/a&gt;.identification: [{
     position: 61,
     type: #WITH_URL,
     url: 'LinkToPDF'
  }]
  ShowPDF,                // UI label for the clickable link

  /*-----------------------------------------------------------
    URL Field - Populated in Behavior Implementation
    Used by Fiori to download/open the PDF.
  -----------------------------------------------------------*/
  LinkToPDF,

  /*-----------------------------------------------------------
    Virtual Field for Base64 PDF content
    RAP calculates this via ZCL_ADOBEFORMM class.
  -----------------------------------------------------------*/
  @ObjectModel.virtualElement: true
  @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_ADOBEFORMM'
  virtual attach : abap.string(0)     // Base64 PDF to be fetched on-demand

}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Elements Implementation:&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_adobeformm IMPLEMENTATION.

  METHOD if_sadl_exit_calc_element_read~calculate.

    " Internal table for virtual elements defined in projection view
    DATA: lt_virtual TYPE TABLE OF zpv_aform,
          lv_base64 TYPE string.

    " Move original RAP data into a working virtual table
    lt_virtual = CORRESPONDING #( it_original_data ).

    " Loop over each row to calculate the virtual element (Base64 PDF)
    LOOP AT lt_virtual INTO DATA(ls_virtual).

      " Get Sales Order number from the current row
      DATA(lv_vbeln) = ls_virtual-vbeln.

      " Create instance of Adobe Form handler class
      DATA(lo_inst) = NEW zcl_adobeform( ).

      " Call Adobe Form generator to get raw PDF (XSTRING)
      DATA(rv_pdf) = lo_inst-&amp;gt;get_data(
                        EXPORTING
                          p_vbeln = lv_vbeln     " Sales Order
                     ).

      " Convert PDF (XSTRING) ‚Üí Base64 string, required for RAP media download
      CALL FUNCTION 'SCMS_BASE64_ENCODE_STR'
        EXPORTING
          input  = rv_pdf
        IMPORTING
          output = lv_base64.

      " Assign Base64 string to virtual element field
      ls_virtual-attach = lv_base64.

    ENDLOOP.

    " Move calculated data back to RAP consumption structure
    ct_calculated_data = CORRESPONDING #( lt_virtual ).

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;To retrieve the Adobe Form as an XSTRING, I implemented a dedicated ABAP class responsible for generating and returning the PDF content. The implementation code is as follows:&lt;BR /&gt;&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;  method GET_DATA.

    " Adobe Form name
    DATA(lv_form_name) = CONV tdsfname( 'ZSALES_FORM_ITEMS' ).

    " Name of the generated function module for the form
    DATA(lv_form_fm_name) = VALUE rs38l_fnam( ).

    " Structures for Adobe Form parameters
    DATA(ls_docparams)    = VALUE sfpdocparams( ).
    DATA(ls_outputparams) = VALUE sfpoutputparams( ).
    DATA(ls_formoutput)   = VALUE fpformoutput( ).

*--------------------------------------------------------------------*
*   STEP 1: Get the Generated Function Module of the Adobe Form
*--------------------------------------------------------------------*
    TRY.
        CALL FUNCTION 'FP_FUNCTION_MODULE_NAME'
          EXPORTING
            i_name     = lv_form_name          " Form name
          IMPORTING
            e_funcname = lv_form_fm_name.      " Generated FM name

      CATCH cx_fp_api INTO DATA(lx_fp_api).
        " Handle form API errors
        MESSAGE ID lx_fp_api-&amp;gt;msgid TYPE lx_fp_api-&amp;gt;msgty
                NUMBER lx_fp_api-&amp;gt;msgno
                WITH lx_fp_api-&amp;gt;msgv1 lx_fp_api-&amp;gt;msgv2
                     lx_fp_api-&amp;gt;msgv3 lx_fp_api-&amp;gt;msgv4.
        RETURN.
    ENDTRY.


*--------------------------------------------------------------------*
*   STEP 2: Prepare Output Parameters for PDF Generation
*--------------------------------------------------------------------*
    ls_outputparams-nodialog = 'X'.   " Avoid popup / preview dialog
    ls_outputparams-getpdf   = 'X'.   " Request PDF output only


*--------------------------------------------------------------------*
*   STEP 3: Open Adobe Form Spool Job
*--------------------------------------------------------------------*
    CALL FUNCTION 'FP_JOB_OPEN'
      CHANGING
        ie_outputparams = ls_outputparams
      EXCEPTIONS
        cancel          = 1
        usage_error     = 2
        system_error    = 3
        internal_error  = 4
        OTHERS          = 5.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      " Display error message and exit
      MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
              WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      RETURN.
    ENDIF.


*--------------------------------------------------------------------*
*   STEP 4: Call the Generated Adobe Form Function Module
*--------------------------------------------------------------------*
    CALL FUNCTION lv_form_fm_name
      EXPORTING
        /1BCDWB/DOCPARAMS  = ls_docparams    " Document parameters
        p_vbeln            = p_vbeln          " Sales document input
      IMPORTING
        /1BCDWB/FORMOUTPUT = ls_formoutput    " Output structure
      EXCEPTIONS
        USAGE_ERROR        = 1
        SYSTEM_ERROR       = 2
        INTERNAL_ERROR     = 3
        OTHERS             = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      " Errors during form rendering
      MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
              WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      RETURN.
    ENDIF.


*--------------------------------------------------------------------*
*   STEP 5: Close Adobe Form Spool Job
*--------------------------------------------------------------------*
    CALL FUNCTION 'FP_JOB_CLOSE'
      EXCEPTIONS
        usage_error    = 1
        system_error   = 2
        internal_error = 3
        OTHERS         = 4.

    IF sy-subrc &amp;lt;&amp;gt; 0.
      " Handle spool closing issues
      MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
              WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      RETURN.
    ENDIF.


*--------------------------------------------------------------------*
*   STEP 6: Return Base64 PDF string to RAP Virtual Element
*--------------------------------------------------------------------*
    rv_string = ls_formoutput-pdf.    " Base64 encoded PDF

  endmethod.&lt;/code&gt;&lt;/pre&gt;&lt;UL&gt;&lt;LI&gt;&lt;EM&gt;generate service definition and binding.&lt;/EM&gt;&lt;/LI&gt;&lt;LI&gt;&lt;EM&gt;&lt;EM&gt;bind our service to list report.&lt;BR /&gt;&lt;BR /&gt;&lt;/EM&gt;&lt;/EM&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="harsha_reddy24_0-1764672827401.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347434iD5FFDE825C148890/image-size/medium?v=v2&amp;amp;px=400" role="button" title="harsha_reddy24_0-1764672827401.png" alt="harsha_reddy24_0-1764672827401.png" /&gt;&lt;/span&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;The link is highlighted in the UI, and when the user clicks it, the corresponding Adobe Form for that specific sales document is downloaded instantly.&lt;/LI&gt;&lt;LI&gt;&lt;P class="" align="left"&gt;Right click on web app and click on open guided development.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;We need custom action to be implemented.&lt;/LI&gt;&lt;LI&gt;Click on add a custom action.&lt;/LI&gt;&lt;LI&gt;Add necessary details and click on insert code snippet it will be added to manifest.json, it will add one more controller, where we can add our custom logic.&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;&lt;BR /&gt;&lt;STRONG&gt;To handle multi-PDF downloads from the List Report, I implemented a custom action in the controller extension. When the user selects one or more rows, a confirmation popup is shown using MessageBox.confirm. After the user confirms, the extension reads each selected entity via the OData model and retrieves the attach virtual element, which contains the Adobe Form as a Base64 string. The code then converts the Base64 into a PDF Blob and automatically triggers a download for each sales document, generating individual files such as Sales_Document_&amp;lt;VBELN&amp;gt;.pdf. This approach provides a smooth, scalable way to download multiple Adobe Forms directly from the Fiori UI without additional backend endpoints.&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;sap.ui.define([
    "sap/m/MessageToast",
    "sap/m/MessageBox"
], function (MessageToast, MessageBox) {
    "use strict";

    return {
        adf: function (oEvent) {

            // Get the SmartTable from the view
            var oSmartTable = this.getView().byId("listReport");
            if (!oSmartTable) {
                MessageToast.show("SmartTable not found");
                return;
            }

            // Get the inner table (GridTable/ResponsiveTable)
            var oTable = oSmartTable.getTable();
            if (!oTable || typeof oTable.getSelectedContexts !== "function") {
                // If table is not ready or does not support selection
                MessageToast.show("Table not ready or selection not supported");
                return;
            }

            // Get selected row contexts
            var aSelectedContexts = oTable.getSelectedContexts();
            if (aSelectedContexts.length === 0) {
                // User must select at least one row
                MessageToast.show("Please select at least one row.");
                return;
            }

            // Ask user for confirmation before downloading PDFs
            MessageBox.confirm("Do you want to download the selected PDF(s)?", {
                title: "Confirm Download",
                actions: [MessageBox.Action.OK, MessageBox.Action.CANCEL],

                onClose: function (oAction) {
                    if (oAction === MessageBox.Action.OK) {

                        // Get OData model
                        var oModel = this.getOwnerComponent().getModel();

                        // Loop through all selected rows
                        aSelectedContexts.forEach(function (oContext, index) {
                            var sPath = oContext.getPath();  // Entity path of the row

                            // Read entity to fetch Base64 PDF (virtual element)
                            oModel.read(sPath, {
                                success: function (odata) {

                                    // Extract Base64 string from response
                                    var base64String = odata.attach;

                                    try {
                                        // Convert Base64 ‚Üí binary
                                        var binaryString = atob(base64String);
                                        var len = binaryString.length;
                                        var bytes = new Uint8Array(len);

                                        for (var i = 0; i &amp;lt; len; i++) {
                                            bytes[i] = binaryString.charCodeAt(i);
                                        }

                                        // Create Blob for PDF download
                                        var blob = new Blob([bytes], { type: "application/pdf" });

                                        // Create a temporary download link
                                        var link = document.createElement("a");
                                        link.href = URL.createObjectURL(blob);

                                        // File name: Sales_Document_&amp;lt;VBELN&amp;gt;.pdf
                                        link.download = "Sales_Document_" + odata.vbeln + ".pdf";

                                        // Trigger download
                                        document.body.appendChild(link);
                                        link.click();
                                        document.body.removeChild(link);

                                    } catch (e) {
                                        // Invalid Base64 or conversion failure
                                        MessageToast.show("Invalid base64 for: " + odata.vbeln);
                                    }
                                },

                                // Error while calling OData service
                                error: function () {
                                    MessageToast.show("Error fetching PDF for: " + sPath);
                                }
                            });
                        });
                    }
                }.bind(this)
            });
        }
    };
});&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-center" image-alt="harsha_reddy24_1-1764673727896.png" style="width: 320px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/347441i86766F8B44AFE42D/image-dimensions/320x169?v=v2" width="320" height="169" role="button" title="harsha_reddy24_1-1764673727896.png" alt="harsha_reddy24_1-1764673727896.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Conclusion:&lt;/STRONG&gt;&lt;BR /&gt;This end-to-end setup demonstrates how RAP, Adobe Forms, and Fiori Elements can work together seamlessly to deliver a modern document-generation experience. By leveraging virtual elements for XSTRING handling, URL-based PDF links, and a custom UI action for multi-file downloads, we can generate, expose, and retrieve Adobe Forms without any custom Gateway coding. The solution is clean, extensible, and fully aligned with SAP‚Äôs cloud-ready RAP architecture making it a practical template for building similar document-driven features in enterprise applications.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;Thanks For Reading, Good Wishes&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Connectivity/pd-p/266264953119842772207986043063520" class="lia-product-mention" data-product="313-1"&gt;ABAP Connectivity&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Development/pd-p/833755570260738661924709785639136" class="lia-product-mention" data-product="314-1"&gt;ABAP Development&lt;/a&gt;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+BTP+ABAP+environment/pd-p/73555000100800001164" class="lia-product-mention" data-product="11-1"&gt;SAP BTP ABAP environment&lt;/a&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/rap-based-adobeform-with-custom-action-and-annotations/ba-p/14281893"/>
    <published>2025-12-10T07:53:48.802000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/sap-rap-data-modeling-handling-virtual-fields-with-amdp-and-table-functions/ba-p/14220974</id>
    <title>SAP RAP Data Modeling: Handling Virtual Fields with AMDP and Table Functions</title>
    <updated>2025-12-10T08:30:29.592000+01:00</updated>
    <author>
      <name>manijangiti</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/2174619</uri>
    </author>
    <content>&lt;P&gt;Hi all,&lt;/P&gt;&lt;P&gt;In SAP RAP development, it is common to work with fields that should not be physically stored in database tables but must still appear in the service output. Such fields are often required for real-time calculations, business validations, or UI-level display logic.&lt;/P&gt;&lt;P&gt;This blog demonstrates two powerful techniques to handle these derived fields:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Table Functions (AMDP)&lt;/STRONG&gt; for database-side calculations&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt; for ABAP-based runtime logic&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;To make the concept relatable, we use a simple &lt;STRONG&gt;Student Marks Management&lt;/STRONG&gt; scenario where:&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Total Marks&lt;/STRONG&gt; is calculated using a Table Function (AMDP)&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Pass/Fail Status&lt;/STRONG&gt; is determined using Virtual Elements&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;This article will walk you through all necessary components‚Äîincluding CDS view entities, AMDP class implementation, RAP behavior definition, and the virtual element class.&lt;/P&gt;&lt;P&gt;&lt;BR /&gt;I am implementing this requirement using two approaches:&lt;/P&gt;&lt;OL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Table Function&lt;/STRONG&gt; for calculating &lt;STRONG&gt;Total Marks&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Field&lt;/STRONG&gt; for determining &lt;STRONG&gt;Status&lt;/STRONG&gt;&lt;/P&gt;&lt;/LI&gt;&lt;/OL&gt;&lt;P&gt;Both methods will be covered in this blog.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Step 1: Create a new database table to store student information.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1758181540341.png" style="width: 728px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316300i9468610271916E46/image-dimensions/728x354?v=v2" width="728" height="354" role="button" title="manijangiti_0-1758181540341.png" alt="manijangiti_0-1758181540341.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Code:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@EndUserText.label : 'Student Information'
@AbapCatalog.enhancement.category : #NOT_EXTENSIBLE
@AbapCatalog.tableCategory : #TRANSPARENT
@AbapCatalog.deliveryClass : #A
@AbapCatalog.dataMaintenance : #RESTRICTED
define table zstudent_info {
  key client : abap.clnt not null;
  key id     : zstudentid_de not null;
  name       : abap.char(50);
  class      : abap.int4;
  telugu     : abap.int4;
  hindi      : abap.int4;
  english    : abap.int4;
  maths      : abap.int4;
  science    : abap.int4;
  social     : abap.int4;
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Step 2: Create a Table Function&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Real-time Use Case for Table Function&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;In a Student Marks Management System, Total Marks are calculated dynamically across subjects without storing the result physically. A Table Function, implemented with AMDP and SQLScript, performs this calculation efficiently in the database, improving performance and keeping the data model clean by avoiding redundant storage.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1758184577411.png" style="width: 727px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316310i4D78C5951FDCB9E9/image-dimensions/727x501?v=v2" width="727" height="501" role="button" title="manijangiti_0-1758184577411.png" alt="manijangiti_0-1758184577411.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;For now, I am adding only the Total Marks field to implement the AMDP approach.&lt;BR /&gt;&lt;BR /&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@EndUserText.label: 'Student Info with Total Marks'
define table function ZTABLE_FUNCTION_STUDENT
  with parameters
    @Environment.systemField: #CLIENT
    p_client : abap.clnt
  returns {
    client     : abap.clnt;
    id         : zstudentid_de;
    name       : abap.char(50);
    class      : abap.int4;
    telugu     : abap.int4;
    hindi      : abap.int4;
    english    : abap.int4;
    maths      : abap.int4;
    science    : abap.int4;
    social     : abap.int4;
    totalmarks : abap.int4;     // üÜï Calculated field
  }
  implemented by method ZCL_TABLE_FUNC_STUDENT=&amp;gt;get_total_data;&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Step 3: Now create a class ZCL_TABLE_FUNC_STATUS to implement the logic for calculating Total Marks.&lt;/STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Example Code:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;CLASS zcl_table_func_student DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC.
  PUBLIC SECTION.
    INTERFACES if_amdp_marker_hdb.
    " Table function method declaration
    CLASS-METHODS get_total_data
      FOR TABLE FUNCTION ztable_function_student.
ENDCLASS.
CLASS zcl_table_func_student IMPLEMENTATION.
  METHOD get_total_data
    BY DATABASE FUNCTION
    FOR HDB
    LANGUAGE SQLSCRIPT
    OPTIONS READ-ONLY
    USING zstudent_info.
    RETURN
      SELECT
        client,
        id,
        name,
        class,
        telugu,
        hindi,
        english,
        maths,
        science,
        social,
        telugu + hindi + english + maths + science + social AS totalmarks
      FROM zstudent_info
      WHERE client = :p_client;
  ENDMETHOD.
ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Step 4: Execute and test the code by pressing F8 On Table Function.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Output:&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_1-1758185047368.png" style="width: 698px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316311i5854F2CCAE027181/image-dimensions/698x396?v=v2" width="698" height="396" role="button" title="manijangiti_1-1758185047368.png" alt="manijangiti_1-1758185047368.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;Now I am going with &lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt;.&lt;/P&gt;&lt;P&gt;Virtual elements are defined using annotations such as:&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@ObjectModel.virtualElement: true
@ObjectModel.virtualElementCalculatedBy: 'ABAP:className'&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;The logic for the virtual element is implemented in the specified ABAP class.&lt;BR /&gt;&lt;BR /&gt;&lt;STRONG&gt;Now I am creating the Root View&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1758186312865.png" style="width: 750px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/316327iFC909F4BEC0D7817/image-dimensions/750x386?v=v2" width="750" height="386" role="button" title="manijangiti_0-1758186312865.png" alt="manijangiti_0-1758186312865.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-bash"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Student Info with Status'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType: {
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define root view entity zstudent_info_view
  as select from ZTABLE_FUNCTION_STUDENT( p_client : $session.client )
{
  key id         as Id,
      name       as Name,
      class      as Class,
      telugu     as Telugu,
      hindi      as Hindi,
      english    as English,
      maths      as Maths,
      science    as Science,
      social     as Social,
      totalmarks as TotalMarks,
      @ObjectModel.virtualElement: true
      @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_ELEMENT_CALCC'
      @EndUserText.label: 'Pass/Fail Status'
      cast( '' as abap.char(10) ) as Status
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Root View Code :&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Root View'
@Metadata.ignorePropagatedAnnotations: true
define root view entity zstudent_info_view_root as select from zstudent_info_view
{

 key Id as Id,
 Name as Name,
 Class as Class,
 Telugu as Telugu,
 Hindi as Hindi,
 English as English,
 Maths as Maths,
 Science as Science,
 Social as Social,
 TotalMarks as TotalMarks,
      @ObjectModel.virtualElement: true
      @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_ELEMENT_CALCC'
      @EndUserText.label: 'Pass/Fail Status'
      cast( '' as abap.char(10) ) as Status
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Projection View Code :&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Projection View'
@Metadata.ignorePropagatedAnnotations: true
@Metadata.allowExtensions: true
define root view entity ZSTUDENT_INFO_VIEW_ROOT_Pro as projection on zstudent_info_view_root
{


//@Consumption.valueHelpDefinition: [
//   { entity: {
//               name: 'ZSTUDENT_INFO_VIEW_ROOT',
//               element: 'ID'
//       } }
//   ]

   key Id,
//  @Consumption.valueHelpDefinition: [
//   { entity: {
//               name: 'ZSTUDENT_INFO_VIEW_ROOT',
//               element: 'Name'
//       } }
//   ]

    Name,

    Class,


    Telugu,

 
    Hindi,

   
    English,

   
    Maths,


    Science,

    Social,
    
    TotalMarks,       // Virtual field
    @ObjectModel.virtualElement: true
      @ObjectModel.virtualElementCalculatedBy: 'ABAP:ZCL_VIRTUAL_ELEMENT_CALCC'
      @EndUserText.label: 'Pass/Fail Status'
    Status            // Virtual field (Pass/Fail)
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;&lt;BR /&gt;&lt;BR /&gt;Definition of behavior for the root view&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;managed implementation in class zbp_student_info_view_root unique;
strict ( 2 );

define behavior for zstudent_info_view_root alias student
  persistent table zstudent_informa
  lock master
  authorization master ( instance )
// etag master &amp;lt;field_name&amp;gt; " Uncomment if using ETag for concurrency control
{
  create;
  update;
  delete;
  field ( readonly ) TotalMarks, Status;

  mapping for zstudent_informa
  {
    Id      = id;
    Name    = name;
    Class   = class;
    Telugu  = telugu;
    Hindi   = hindi;
    English = english;
    Maths   = maths;
    Science = science;
    Social  = social;
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Create classes for the root view and projection view.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_0-1761548831424.png" style="width: 580px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332796i891247D0979D4C71/image-dimensions/580x370/is-moderation-mode/true?v=v2" width="580" height="370" role="button" title="manijangiti_0-1761548831424.png" alt="manijangiti_0-1761548831424.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Create a class and logic for the virtual element.&lt;/STRONG&gt;&lt;/P&gt;&lt;pre class="lia-code-sample language-abap"&gt;&lt;code&gt;CLASS zcl_virtual_element_calcc DEFINITION
  PUBLIC
  FINAL
  CREATE PUBLIC.
  PUBLIC SECTION.
    INTERFACES if_sadl_exit_calc_element_read.
  PROTECTED SECTION.
  PRIVATE SECTION.
ENDCLASS.

CLASS zcl_virtual_element_calcc IMPLEMENTATION.

  METHOD if_sadl_exit_calc_element_read~calculate.

    CHECK NOT it_original_data IS INITIAL.

    DATA lt_calculated_data TYPE STANDARD TABLE OF zstudent_info_view WITH DEFAULT KEY.

    MOVE-CORRESPONDING it_original_data TO lt_calculated_data.

    LOOP AT lt_calculated_data ASSIGNING FIELD-SYMBOL(&amp;lt;student&amp;gt;).

      " Calculate TotalMarks by summing all subject marks
*      &amp;lt;student&amp;gt;-totalmarks = &amp;lt;student&amp;gt;-telugu
*                           + &amp;lt;student&amp;gt;-hindi
*                           + &amp;lt;student&amp;gt;-english
*                           + &amp;lt;student&amp;gt;-maths
*                           + &amp;lt;student&amp;gt;-science
*                           + &amp;lt;student&amp;gt;-social.

      " Check if any subject marks are less than 25
*      IF &amp;lt;student&amp;gt;-telugu &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-hindi  &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-english &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-maths &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-science &amp;lt; 25 OR
*         &amp;lt;student&amp;gt;-social &amp;lt; 25.
*        &amp;lt;student&amp;gt;-status = 'Failed'.
*      ELSE.
*          &amp;lt;student&amp;gt;-status = 'Passed'.
**        ENDIF.
*      ENDIF.
      IF &amp;lt;student&amp;gt;-totalmarks &amp;gt; 250 .
       &amp;lt;student&amp;gt;-status = 'Passed'.
       ELSE.
       &amp;lt;student&amp;gt;-status = 'Failed'.
ENDIF.


    ENDLOOP.

    MOVE-CORRESPONDING lt_calculated_data TO ct_calculated_data.

  ENDMETHOD.

  METHOD if_sadl_exit_calc_element_read~get_calculation_info.

    " Tell framework which fields you need from original data
    et_requested_orig_elements = VALUE #( BASE et_requested_orig_elements
                                          ( CONV #( 'TELUGU' ) )
                                          ( CONV #( 'HINDI' ) )
                                          ( CONV #( 'ENGLISH' ) )
                                          ( CONV #( 'MATHS' ) )
                                          ( CONV #( 'SCIENCE' ) )
                                          ( CONV #( 'SOCIAL' ) )
                                          ( CONV #( 'TOTALMARKS' ) )
                                        ).

  ENDMETHOD.

ENDCLASS.&lt;/code&gt;&lt;/pre&gt;&lt;P&gt;&lt;STRONG&gt;Now, create a service definition for the projection view and bind the service.&lt;BR /&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_1-1761553513670.png" style="width: 711px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332889i128C5CA6829A447E/image-dimensions/711x123/is-moderation-mode/true?v=v2" width="711" height="123" role="button" title="manijangiti_1-1761553513670.png" alt="manijangiti_1-1761553513670.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_2-1761553556091.png" style="width: 661px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332890i41FD980B1426340F/image-dimensions/661x233/is-moderation-mode/true?v=v2" width="661" height="233" role="button" title="manijangiti_2-1761553556091.png" alt="manijangiti_2-1761553556091.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;Now, we are able to see the virtual element output field in the web application.&lt;/STRONG&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="manijangiti_3-1761553739515.png" style="width: 633px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/332891i6ECD6CEE5A34D071/image-dimensions/633x304/is-moderation-mode/true?v=v2" width="633" height="304" role="button" title="manijangiti_3-1761553739515.png" alt="manijangiti_3-1761553739515.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;H1 id="toc-hId-1631757642"&gt;&lt;STRONG&gt;Conclusion&lt;/STRONG&gt;&lt;/H1&gt;&lt;P&gt;This blog demonstrated how to enrich a RAP data model using both &lt;STRONG&gt;Table Functions&lt;/STRONG&gt; and &lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt;, allowing you to compute fields dynamically without storing redundant values in the database.&lt;/P&gt;&lt;UL&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Table Functions (AMDP)&lt;/STRONG&gt; perform high-performance calculations on the HANA database, such as Total Marks.&lt;/P&gt;&lt;/LI&gt;&lt;LI&gt;&lt;P&gt;&lt;STRONG&gt;Virtual Elements&lt;/STRONG&gt; allow ABAP-based runtime logic for UI-visible derived fields like Pass/Fail Status.&lt;/P&gt;&lt;/LI&gt;&lt;/UL&gt;&lt;P&gt;By combining these methods, you achieve a clean, efficient, and scalable RAP model that supports real-time business calculations while keeping the underlying data model simple and maintainable.&lt;/P&gt;&lt;P&gt;This approach can be extended for validations, analytical measures, financial calculations, or any scenario where derived fields should remain virtual yet visible in the application layer.&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;&amp;nbsp;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Development/pd-p/833755570260738661924709785639136" class="lia-product-mention" data-product="314-1"&gt;ABAP Development&lt;/a&gt;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/ABAP+Connectivity/pd-p/266264953119842772207986043063520" class="lia-product-mention" data-product="313-1"&gt;ABAP Connectivity&lt;/a&gt;&amp;nbsp;&lt;BR /&gt;&lt;a href="https://community.sap.com/t5/c-khhcw49343/SAP+BTP+ABAP+environment/pd-p/73555000100800001164" class="lia-product-mention" data-product="11-1"&gt;SAP BTP ABAP environment&lt;/a&gt;&amp;nbsp;&lt;/STRONG&gt;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/sap-rap-data-modeling-handling-virtual-fields-with-amdp-and-table-functions/ba-p/14220974"/>
    <published>2025-12-10T08:30:29.592000+01:00</published>
  </entry>
  <entry>
    <id>https://community.sap.com/t5/technology-blog-posts-by-members/advanced-abap-programming-syntax/ba-p/14287814</id>
    <title>Advanced ABAP programming syntax</title>
    <updated>2025-12-10T12:12:09.269000+01:00</updated>
    <author>
      <name>mkhan2126</name>
      <uri>https://community.sap.com/t5/user/viewprofilepage/user-id/42485</uri>
    </author>
    <content>&lt;P&gt;This blog is to provide new ABAP programming syntax along with some use case to ease and save development time of beginners and experienced professional who is looking for Advanced ABAP programming.&lt;/P&gt;&lt;P&gt;Many times, we come across a scenario where we have to bring data from different internal tables. As per traditional ABAP we use to loop the main internal table and then use READ TABLE statement for processing each field value.&amp;nbsp;&lt;/P&gt;&lt;P&gt;Scenario: An internal table contains data passed from an API, we need to validate the data like check if Material, plant &amp;amp; storage location is valid or invalid from different value tables like T001W, T001L MARA etc&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;Old syntax&lt;/STRONG&gt;&lt;/U&gt;:&amp;nbsp;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_0-1765358366494.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350649iF7F2FBBADF658DCC/image-size/medium?v=v2&amp;amp;px=400" role="button" title="mkhan2126_0-1765358366494.png" alt="mkhan2126_0-1765358366494.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;U&gt;&lt;STRONG&gt;New Syntax:&lt;/STRONG&gt;&lt;/U&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_2-1765358832230.png" style="width: 646px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350660i5468BBB47C132332/image-dimensions/646x424?v=v2" width="646" height="424" role="button" title="mkhan2126_2-1765358832230.png" alt="mkhan2126_2-1765358832230.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_3-1765358944737.png" style="width: 400px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350675i36007311D085F9AD/image-size/medium?v=v2&amp;amp;px=400" role="button" title="mkhan2126_3-1765358944737.png" alt="mkhan2126_3-1765358944737.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&lt;STRONG&gt;FOR&lt;/STRONG&gt; keyword is used for main &lt;STRONG&gt;LOOP--ENDLOOP&lt;/STRONG&gt; and &lt;STRONG&gt;LET---VALUE&lt;/STRONG&gt; keyword allows you to declare work area for different Internal table like &lt;STRONG&gt;READ STATEMENTS&lt;/STRONG&gt; and &lt;STRONG&gt;COND.. WHEN..THEN&lt;/STRONG&gt; keyword will allow you to set the conditions.&lt;/P&gt;&lt;P&gt;Scenario: Many times, we need to append values to the internal table already holding some records then we have to use the BASE keyword.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_4-1765359503063.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350676i0D787D98A3CD066D/image-size/large?v=v2&amp;amp;px=999" role="button" title="mkhan2126_4-1765359503063.png" alt="mkhan2126_4-1765359503063.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Scenario: To create Range table from entries of different internal table&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_5-1765360022005.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350679iE3DB5C976E884893/image-size/large?v=v2&amp;amp;px=999" role="button" title="mkhan2126_5-1765360022005.png" alt="mkhan2126_5-1765360022005.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Scenario: To pass entries from one internal table to another based on filtering using &lt;STRONG&gt;FILTER&lt;/STRONG&gt; keyword. &lt;U&gt;&lt;STRONG&gt;Note&lt;/STRONG&gt;&lt;/U&gt;: Internal table should be of SORTED or HASHED table type with KEY.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_6-1765360244322.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350684i833562A942061A24/image-size/large?v=v2&amp;amp;px=999" role="button" title="mkhan2126_6-1765360244322.png" alt="mkhan2126_6-1765360244322.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;To calculate sum in internal table we use &lt;STRONG&gt;REDUCE&lt;/STRONG&gt; statement&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_7-1765360703664.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350685iA8709E11748F3663/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="mkhan2126_7-1765360703664.png" alt="mkhan2126_7-1765360703664.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Output: Total Salary: 39000&lt;/P&gt;&lt;P&gt;Scenario: GROUP BY statement is used to group the data like for example Order containing multiple item details and we want to pass each order detail to some BAPI for data update.&lt;/P&gt;&lt;P&gt;&lt;span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="mkhan2126_8-1765362214700.png" style="width: 999px;"&gt;&lt;img src="https://community.sap.com/t5/image/serverpage/image-id/350705iA4C9515FF46A3A49/image-size/large/is-moderation-mode/true?v=v2&amp;amp;px=999" role="button" title="mkhan2126_8-1765362214700.png" alt="mkhan2126_8-1765362214700.png" /&gt;&lt;/span&gt;&lt;/P&gt;&lt;P&gt;Hope it helps the members looking for quick info on Advanced ABAP programming.&lt;/P&gt;&lt;P&gt;Next time will try to cover the CDS entities and RAP ABAP blogs. Till then happy coding &lt;span class="lia-unicode-emoji" title=":slightly_smiling_face:"&gt;üôÇ&lt;/span&gt;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;\&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;&lt;P&gt;&amp;nbsp;&lt;/P&gt;</content>
    <link href="https://community.sap.com/t5/technology-blog-posts-by-members/advanced-abap-programming-syntax/ba-p/14287814"/>
    <published>2025-12-10T12:12:09.269000+01:00</published>
  </entry>
</feed>
